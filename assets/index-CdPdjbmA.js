var E$=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Dke=E$((Ike,Kj)=>{function C$(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function p0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function N$(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var nR={exports:{}},m0={},rR={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh=Symbol.for("react.element"),S$=Symbol.for("react.portal"),D$=Symbol.for("react.fragment"),A$=Symbol.for("react.strict_mode"),T$=Symbol.for("react.profiler"),M$=Symbol.for("react.provider"),I$=Symbol.for("react.context"),k$=Symbol.for("react.forward_ref"),R$=Symbol.for("react.suspense"),F$=Symbol.for("react.memo"),P$=Symbol.for("react.lazy"),MN=Symbol.iterator;function O$(t){return t===null||typeof t!="object"?null:(t=MN&&t[MN]||t["@@iterator"],typeof t=="function"?t:null)}var iR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aR=Object.assign,oR={};function Cf(t,e,n){this.props=t,this.context=e,this.refs=oR,this.updater=n||iR}Cf.prototype.isReactComponent={};Cf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sR(){}sR.prototype=Cf.prototype;function o2(t,e,n){this.props=t,this.context=e,this.refs=oR,this.updater=n||iR}var s2=o2.prototype=new sR;s2.constructor=o2;aR(s2,Cf.prototype);s2.isPureReactComponent=!0;var IN=Array.isArray,uR=Object.prototype.hasOwnProperty,u2={current:null},lR={key:!0,ref:!0,__self:!0,__source:!0};function cR(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)uR.call(e,r)&&!lR.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Zh,type:t,key:a,ref:o,props:i,_owner:u2.current}}function B$(t,e){return{$$typeof:Zh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function l2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zh}function L$(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kN=/\/+/g;function zy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?L$(""+t.key):e.toString(36)}function Hm(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zh:case S$:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+zy(o,0):r,IN(i)?(n="",t!=null&&(n=t.replace(kN,"$&/")+"/"),Hm(i,e,n,"",function(l){return l})):i!=null&&(l2(i)&&(i=B$(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(kN,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",IN(t))for(var s=0;s<t.length;s++){a=t[s];var u=r+zy(a,s);o+=Hm(a,e,n,u,i)}else if(u=O$(t),typeof u=="function")for(t=u.call(t),s=0;!(a=t.next()).done;)a=a.value,u=r+zy(a,s++),o+=Hm(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Up(t,e,n){if(t==null)return t;var r=[],i=0;return Hm(t,r,"","",function(a){return e.call(n,a,i++)}),r}function j$(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qr={current:null},Gm={transition:null},$$={ReactCurrentDispatcher:Qr,ReactCurrentBatchConfig:Gm,ReactCurrentOwner:u2};function fR(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:Up,forEach:function(t,e,n){Up(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Up(t,function(){e++}),e},toArray:function(t){return Up(t,function(e){return e})||[]},only:function(t){if(!l2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};kt.Component=Cf;kt.Fragment=D$;kt.Profiler=T$;kt.PureComponent=o2;kt.StrictMode=A$;kt.Suspense=R$;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$$;kt.act=fR;kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aR({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=u2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)uR.call(e,u)&&!lR.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Zh,type:t.type,key:i,ref:a,props:r,_owner:o}};kt.createContext=function(t){return t={$$typeof:I$,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:M$,_context:t},t.Consumer=t};kt.createElement=cR;kt.createFactory=function(t){var e=cR.bind(null,t);return e.type=t,e};kt.createRef=function(){return{current:null}};kt.forwardRef=function(t){return{$$typeof:k$,render:t}};kt.isValidElement=l2;kt.lazy=function(t){return{$$typeof:P$,_payload:{_status:-1,_result:t},_init:j$}};kt.memo=function(t,e){return{$$typeof:F$,type:t,compare:e===void 0?null:e}};kt.startTransition=function(t){var e=Gm.transition;Gm.transition={};try{t()}finally{Gm.transition=e}};kt.unstable_act=fR;kt.useCallback=function(t,e){return Qr.current.useCallback(t,e)};kt.useContext=function(t){return Qr.current.useContext(t)};kt.useDebugValue=function(){};kt.useDeferredValue=function(t){return Qr.current.useDeferredValue(t)};kt.useEffect=function(t,e){return Qr.current.useEffect(t,e)};kt.useId=function(){return Qr.current.useId()};kt.useImperativeHandle=function(t,e,n){return Qr.current.useImperativeHandle(t,e,n)};kt.useInsertionEffect=function(t,e){return Qr.current.useInsertionEffect(t,e)};kt.useLayoutEffect=function(t,e){return Qr.current.useLayoutEffect(t,e)};kt.useMemo=function(t,e){return Qr.current.useMemo(t,e)};kt.useReducer=function(t,e,n){return Qr.current.useReducer(t,e,n)};kt.useRef=function(t){return Qr.current.useRef(t)};kt.useState=function(t){return Qr.current.useState(t)};kt.useSyncExternalStore=function(t,e,n){return Qr.current.useSyncExternalStore(t,e,n)};kt.useTransition=function(){return Qr.current.useTransition()};kt.version="18.3.1";rR.exports=kt;var W=rR.exports;const on=p0(W),z$=C$({__proto__:null,default:on},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U$=W,V$=Symbol.for("react.element"),W$=Symbol.for("react.fragment"),q$=Object.prototype.hasOwnProperty,H$=U$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G$={key:!0,ref:!0,__self:!0,__source:!0};function dR(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)q$.call(e,r)&&!G$.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:V$,type:t,key:a,ref:o,props:i,_owner:H$.current}}m0.Fragment=W$;m0.jsx=dR;m0.jsxs=dR;nR.exports=m0;var S=nR.exports,hR={exports:{}},Bi={},pR={exports:{}},mR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,k){var j=B.length;B.push(k);e:for(;0<j;){var Y=j-1>>>1,q=B[Y];if(0<i(q,k))B[Y]=k,B[j]=q,j=Y;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var k=B[0],j=B.pop();if(j!==k){B[0]=j;e:for(var Y=0,q=B.length,L=q>>>1;Y<L;){var ne=2*(Y+1)-1,fe=B[ne],te=ne+1,oe=B[te];if(0>i(fe,j))te<q&&0>i(oe,fe)?(B[Y]=oe,B[te]=j,Y=te):(B[Y]=fe,B[ne]=j,Y=ne);else if(te<q&&0>i(oe,j))B[Y]=oe,B[te]=j,Y=te;else break e}}return k}function i(B,k){var j=B.sortIndex-k.sortIndex;return j!==0?j:B.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(B){for(var k=n(l);k!==null;){if(k.callback===null)r(l);else if(k.startTime<=B)r(l),k.sortIndex=k.expirationTime,e(u,k);else break;k=n(l)}}function b(B){if(m=!1,g(B),!p)if(n(u)!==null)p=!0,I(w);else{var k=n(l);k!==null&&M(b,k.startTime-B)}}function w(B,k){p=!1,m&&(m=!1,v(C),C=-1),h=!0;var j=d;try{for(g(k),f=n(u);f!==null&&(!(f.expirationTime>k)||B&&!A());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,d=f.priorityLevel;var q=Y(f.expirationTime<=k);k=t.unstable_now(),typeof q=="function"?f.callback=q:f===n(u)&&r(u),g(k)}else r(u);f=n(u)}if(f!==null)var L=!0;else{var ne=n(l);ne!==null&&M(b,ne.startTime-k),L=!1}return L}finally{f=null,d=j,h=!1}}var _=!1,E=null,C=-1,N=5,D=-1;function A(){return!(t.unstable_now()-D<N)}function T(){if(E!==null){var B=t.unstable_now();D=B;var k=!0;try{k=E(!0,B)}finally{k?R():(_=!1,E=null)}}else _=!1}var R;if(typeof x=="function")R=function(){x(T)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,O=F.port2;F.port1.onmessage=T,R=function(){O.postMessage(null)}}else R=function(){y(T,0)};function I(B){E=B,_||(_=!0,R())}function M(B,k){C=y(function(){B(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,I(w))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(d){case 1:case 2:case 3:var k=3;break;default:k=d}var j=d;d=k;try{return B()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,k){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var j=d;d=B;try{return k()}finally{d=j}},t.unstable_scheduleCallback=function(B,k,j){var Y=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Y+j:Y):j=Y,B){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=j+q,B={id:c++,callback:k,priorityLevel:B,startTime:j,expirationTime:q,sortIndex:-1},j>Y?(B.sortIndex=j,e(l,B),n(u)===null&&B===n(l)&&(m?(v(C),C=-1):m=!0,M(b,j-Y))):(B.sortIndex=q,e(u,B),p||h||(p=!0,I(w))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var k=d;return function(){var j=d;d=k;try{return B.apply(this,arguments)}finally{d=j}}}})(mR);pR.exports=mR;var K$=pR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y$=W,Pi=K$;function ke(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vR=new Set,nh={};function _l(t,e){Yc(t,e),Yc(t+"Capture",e)}function Yc(t,e){for(nh[t]=e,t=0;t<e.length;t++)vR.add(e[t])}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nx=Object.prototype.hasOwnProperty,X$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RN={},FN={};function Q$(t){return Nx.call(FN,t)?!0:Nx.call(RN,t)?!1:X$.test(t)?FN[t]=!0:(RN[t]=!0,!1)}function Z$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function J$(t,e,n,r){if(e===null||typeof e>"u"||Z$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zr(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xr[t]=new Zr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xr[e]=new Zr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xr[t]=new Zr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xr[t]=new Zr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xr[t]=new Zr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xr[t]=new Zr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xr[t]=new Zr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xr[t]=new Zr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xr[t]=new Zr(t,5,!1,t.toLowerCase(),null,!1,!1)});var c2=/[\-:]([a-z])/g;function f2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(c2,f2);xr[e]=new Zr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(c2,f2);xr[e]=new Zr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(c2,f2);xr[e]=new Zr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xr[t]=new Zr(t,1,!1,t.toLowerCase(),null,!1,!1)});xr.xlinkHref=new Zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xr[t]=new Zr(t,1,!1,t.toLowerCase(),null,!0,!0)});function d2(t,e,n,r){var i=xr.hasOwnProperty(e)?xr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(J$(e,n,i,r)&&(n=null),r||i===null?Q$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qo=Y$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vp=Symbol.for("react.element"),oc=Symbol.for("react.portal"),sc=Symbol.for("react.fragment"),h2=Symbol.for("react.strict_mode"),Sx=Symbol.for("react.profiler"),gR=Symbol.for("react.provider"),yR=Symbol.for("react.context"),p2=Symbol.for("react.forward_ref"),Dx=Symbol.for("react.suspense"),Ax=Symbol.for("react.suspense_list"),m2=Symbol.for("react.memo"),ps=Symbol.for("react.lazy"),xR=Symbol.for("react.offscreen"),PN=Symbol.iterator;function td(t){return t===null||typeof t!="object"?null:(t=PN&&t[PN]||t["@@iterator"],typeof t=="function"?t:null)}var En=Object.assign,Uy;function wd(t){if(Uy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uy=e&&e[1]||""}return`
`+Uy+t}var Vy=!1;function Wy(t,e){if(!t||Vy)return"";Vy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=s);break}}}finally{Vy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wd(t):""}function ez(t){switch(t.tag){case 5:return wd(t.type);case 16:return wd("Lazy");case 13:return wd("Suspense");case 19:return wd("SuspenseList");case 0:case 2:case 15:return t=Wy(t.type,!1),t;case 11:return t=Wy(t.type.render,!1),t;case 1:return t=Wy(t.type,!0),t;default:return""}}function Tx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case sc:return"Fragment";case oc:return"Portal";case Sx:return"Profiler";case h2:return"StrictMode";case Dx:return"Suspense";case Ax:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yR:return(t.displayName||"Context")+".Consumer";case gR:return(t._context.displayName||"Context")+".Provider";case p2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case m2:return e=t.displayName||null,e!==null?e:Tx(t.type)||"Memo";case ps:e=t._payload,t=t._init;try{return Tx(t(e))}catch{}}return null}function tz(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tx(e);case 8:return e===h2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nz(t){var e=bR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wp(t){t._valueTracker||(t._valueTracker=nz(t))}function wR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mx(t,e){var n=e.checked;return En({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ON(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _R(t,e){e=e.checked,e!=null&&d2(t,"checked",e,!1)}function Ix(t,e){_R(t,e);var n=Gs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kx(t,e.type,n):e.hasOwnProperty("defaultValue")&&kx(t,e.type,Gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function BN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function kx(t,e,n){(e!=="number"||mv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _d=Array.isArray;function Sc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return En({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function LN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ke(92));if(_d(n)){if(1<n.length)throw Error(ke(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gs(n)}}function ER(t,e){var n=Gs(e.value),r=Gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qp,NR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qp=qp||document.createElement("div"),qp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rz=["Webkit","ms","Moz","O"];Object.keys(kd).forEach(function(t){rz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kd[e]=kd[t]})});function SR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kd.hasOwnProperty(t)&&kd[t]?(""+e).trim():e+"px"}function DR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=SR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var iz=En({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Px(t,e){if(e){if(iz[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function Ox(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bx=null;function v2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lx=null,Dc=null,Ac=null;function $N(t){if(t=tp(t)){if(typeof Lx!="function")throw Error(ke(280));var e=t.stateNode;e&&(e=b0(e),Lx(t.stateNode,t.type,e))}}function AR(t){Dc?Ac?Ac.push(t):Ac=[t]:Dc=t}function TR(){if(Dc){var t=Dc,e=Ac;if(Ac=Dc=null,$N(t),e)for(t=0;t<e.length;t++)$N(e[t])}}function MR(t,e){return t(e)}function IR(){}var qy=!1;function kR(t,e,n){if(qy)return t(e,n);qy=!0;try{return MR(t,e,n)}finally{qy=!1,(Dc!==null||Ac!==null)&&(IR(),TR())}}function ih(t,e){var n=t.stateNode;if(n===null)return null;var r=b0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ke(231,e,typeof n));return n}var jx=!1;if(jo)try{var nd={};Object.defineProperty(nd,"passive",{get:function(){jx=!0}}),window.addEventListener("test",nd,nd),window.removeEventListener("test",nd,nd)}catch{jx=!1}function az(t,e,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Rd=!1,vv=null,gv=!1,$x=null,oz={onError:function(t){Rd=!0,vv=t}};function sz(t,e,n,r,i,a,o,s,u){Rd=!1,vv=null,az.apply(oz,arguments)}function uz(t,e,n,r,i,a,o,s,u){if(sz.apply(this,arguments),Rd){if(Rd){var l=vv;Rd=!1,vv=null}else throw Error(ke(198));gv||(gv=!0,$x=l)}}function El(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zN(t){if(El(t)!==t)throw Error(ke(188))}function lz(t){var e=t.alternate;if(!e){if(e=El(t),e===null)throw Error(ke(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return zN(i),t;if(a===r)return zN(i),e;a=a.sibling}throw Error(ke(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?t:e}function FR(t){return t=lz(t),t!==null?PR(t):null}function PR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=PR(t);if(e!==null)return e;t=t.sibling}return null}var OR=Pi.unstable_scheduleCallback,UN=Pi.unstable_cancelCallback,cz=Pi.unstable_shouldYield,fz=Pi.unstable_requestPaint,kn=Pi.unstable_now,dz=Pi.unstable_getCurrentPriorityLevel,g2=Pi.unstable_ImmediatePriority,BR=Pi.unstable_UserBlockingPriority,yv=Pi.unstable_NormalPriority,hz=Pi.unstable_LowPriority,LR=Pi.unstable_IdlePriority,v0=null,Qa=null;function pz(t){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(v0,t,void 0,(t.current.flags&128)===128)}catch{}}var Na=Math.clz32?Math.clz32:gz,mz=Math.log,vz=Math.LN2;function gz(t){return t>>>=0,t===0?32:31-(mz(t)/vz|0)|0}var Hp=64,Gp=4194304;function Ed(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xv(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=Ed(s):(a&=o,a!==0&&(r=Ed(a)))}else o=n&~i,o!==0?r=Ed(o):a!==0&&(r=Ed(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Na(e),i=1<<n,r|=t[n],e&=~i;return r}function yz(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xz(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Na(a),s=1<<o,u=i[o];u===-1?(!(s&n)||s&r)&&(i[o]=yz(s,e)):u<=e&&(t.expiredLanes|=s),a&=~s}}function zx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jR(){var t=Hp;return Hp<<=1,!(Hp&4194240)&&(Hp=64),t}function Hy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Na(e),t[e]=n}function bz(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Na(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function y2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Na(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Kt=0;function $R(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zR,x2,UR,VR,WR,Ux=!1,Kp=[],Ms=null,Is=null,ks=null,ah=new Map,oh=new Map,ys=[],wz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VN(t,e){switch(t){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":ah.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oh.delete(e.pointerId)}}function rd(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=tp(e),e!==null&&x2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _z(t,e,n,r,i){switch(e){case"focusin":return Ms=rd(Ms,t,e,n,r,i),!0;case"dragenter":return Is=rd(Is,t,e,n,r,i),!0;case"mouseover":return ks=rd(ks,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return ah.set(a,rd(ah.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,oh.set(a,rd(oh.get(a)||null,t,e,n,r,i)),!0}return!1}function qR(t){var e=$u(t.target);if(e!==null){var n=El(e);if(n!==null){if(e=n.tag,e===13){if(e=RR(n),e!==null){t.blockedOn=e,WR(t.priority,function(){UR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Km(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bx=r,n.target.dispatchEvent(r),Bx=null}else return e=tp(n),e!==null&&x2(e),t.blockedOn=n,!1;e.shift()}return!0}function WN(t,e,n){Km(t)&&n.delete(e)}function Ez(){Ux=!1,Ms!==null&&Km(Ms)&&(Ms=null),Is!==null&&Km(Is)&&(Is=null),ks!==null&&Km(ks)&&(ks=null),ah.forEach(WN),oh.forEach(WN)}function id(t,e){t.blockedOn===e&&(t.blockedOn=null,Ux||(Ux=!0,Pi.unstable_scheduleCallback(Pi.unstable_NormalPriority,Ez)))}function sh(t){function e(i){return id(i,t)}if(0<Kp.length){id(Kp[0],t);for(var n=1;n<Kp.length;n++){var r=Kp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ms!==null&&id(Ms,t),Is!==null&&id(Is,t),ks!==null&&id(ks,t),ah.forEach(e),oh.forEach(e),n=0;n<ys.length;n++)r=ys[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ys.length&&(n=ys[0],n.blockedOn===null);)qR(n),n.blockedOn===null&&ys.shift()}var Tc=Qo.ReactCurrentBatchConfig,bv=!0;function Cz(t,e,n,r){var i=Kt,a=Tc.transition;Tc.transition=null;try{Kt=1,b2(t,e,n,r)}finally{Kt=i,Tc.transition=a}}function Nz(t,e,n,r){var i=Kt,a=Tc.transition;Tc.transition=null;try{Kt=4,b2(t,e,n,r)}finally{Kt=i,Tc.transition=a}}function b2(t,e,n,r){if(bv){var i=Vx(t,e,n,r);if(i===null)n1(t,e,r,wv,n),VN(t,r);else if(_z(i,t,e,n,r))r.stopPropagation();else if(VN(t,r),e&4&&-1<wz.indexOf(t)){for(;i!==null;){var a=tp(i);if(a!==null&&zR(a),a=Vx(t,e,n,r),a===null&&n1(t,e,r,wv,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else n1(t,e,r,null,n)}}var wv=null;function Vx(t,e,n,r){if(wv=null,t=v2(r),t=$u(t),t!==null)if(e=El(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wv=t,null}function HR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dz()){case g2:return 1;case BR:return 4;case yv:case hz:return 16;case LR:return 536870912;default:return 16}default:return 16}}var Es=null,w2=null,Ym=null;function GR(){if(Ym)return Ym;var t,e=w2,n=e.length,r,i="value"in Es?Es.value:Es.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Ym=i.slice(t,1<r?1-r:void 0)}function Xm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yp(){return!0}function qN(){return!1}function Li(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Yp:qN,this.isPropagationStopped=qN,this}return En(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yp)},persist:function(){},isPersistent:Yp}),e}var Nf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_2=Li(Nf),ep=En({},Nf,{view:0,detail:0}),Sz=Li(ep),Gy,Ky,ad,g0=En({},ep,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:E2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ad&&(ad&&t.type==="mousemove"?(Gy=t.screenX-ad.screenX,Ky=t.screenY-ad.screenY):Ky=Gy=0,ad=t),Gy)},movementY:function(t){return"movementY"in t?t.movementY:Ky}}),HN=Li(g0),Dz=En({},g0,{dataTransfer:0}),Az=Li(Dz),Tz=En({},ep,{relatedTarget:0}),Yy=Li(Tz),Mz=En({},Nf,{animationName:0,elapsedTime:0,pseudoElement:0}),Iz=Li(Mz),kz=En({},Nf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rz=Li(kz),Fz=En({},Nf,{data:0}),GN=Li(Fz),Pz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bz[t])?!!e[t]:!1}function E2(){return Lz}var jz=En({},ep,{key:function(t){if(t.key){var e=Pz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Oz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:E2,charCode:function(t){return t.type==="keypress"?Xm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$z=Li(jz),zz=En({},g0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KN=Li(zz),Uz=En({},ep,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:E2}),Vz=Li(Uz),Wz=En({},Nf,{propertyName:0,elapsedTime:0,pseudoElement:0}),qz=Li(Wz),Hz=En({},g0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gz=Li(Hz),Kz=[9,13,27,32],C2=jo&&"CompositionEvent"in window,Fd=null;jo&&"documentMode"in document&&(Fd=document.documentMode);var Yz=jo&&"TextEvent"in window&&!Fd,KR=jo&&(!C2||Fd&&8<Fd&&11>=Fd),YN=" ",XN=!1;function YR(t,e){switch(t){case"keyup":return Kz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var uc=!1;function Xz(t,e){switch(t){case"compositionend":return XR(e);case"keypress":return e.which!==32?null:(XN=!0,YN);case"textInput":return t=e.data,t===YN&&XN?null:t;default:return null}}function Qz(t,e){if(uc)return t==="compositionend"||!C2&&YR(t,e)?(t=GR(),Ym=w2=Es=null,uc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KR&&e.locale!=="ko"?null:e.data;default:return null}}var Zz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Zz[t.type]:e==="textarea"}function QR(t,e,n,r){AR(r),e=_v(e,"onChange"),0<e.length&&(n=new _2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pd=null,uh=null;function Jz(t){uF(t,0)}function y0(t){var e=fc(t);if(wR(e))return t}function eU(t,e){if(t==="change")return e}var ZR=!1;if(jo){var Xy;if(jo){var Qy="oninput"in document;if(!Qy){var ZN=document.createElement("div");ZN.setAttribute("oninput","return;"),Qy=typeof ZN.oninput=="function"}Xy=Qy}else Xy=!1;ZR=Xy&&(!document.documentMode||9<document.documentMode)}function JN(){Pd&&(Pd.detachEvent("onpropertychange",JR),uh=Pd=null)}function JR(t){if(t.propertyName==="value"&&y0(uh)){var e=[];QR(e,uh,t,v2(t)),kR(Jz,e)}}function tU(t,e,n){t==="focusin"?(JN(),Pd=e,uh=n,Pd.attachEvent("onpropertychange",JR)):t==="focusout"&&JN()}function nU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return y0(uh)}function rU(t,e){if(t==="click")return y0(e)}function iU(t,e){if(t==="input"||t==="change")return y0(e)}function aU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ia=typeof Object.is=="function"?Object.is:aU;function lh(t,e){if(Ia(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Nx.call(e,i)||!Ia(t[i],e[i]))return!1}return!0}function eS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tS(t,e){var n=eS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=eS(n)}}function eF(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eF(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tF(){for(var t=window,e=mv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mv(t.document)}return e}function N2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oU(t){var e=tF(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eF(n.ownerDocument.documentElement,n)){if(r!==null&&N2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=tS(n,a);var o=tS(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sU=jo&&"documentMode"in document&&11>=document.documentMode,lc=null,Wx=null,Od=null,qx=!1;function nS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qx||lc==null||lc!==mv(r)||(r=lc,"selectionStart"in r&&N2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Od&&lh(Od,r)||(Od=r,r=_v(Wx,"onSelect"),0<r.length&&(e=new _2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lc)))}function Xp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cc={animationend:Xp("Animation","AnimationEnd"),animationiteration:Xp("Animation","AnimationIteration"),animationstart:Xp("Animation","AnimationStart"),transitionend:Xp("Transition","TransitionEnd")},Zy={},nF={};jo&&(nF=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);function x0(t){if(Zy[t])return Zy[t];if(!cc[t])return t;var e=cc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nF)return Zy[t]=e[n];return t}var rF=x0("animationend"),iF=x0("animationiteration"),aF=x0("animationstart"),oF=x0("transitionend"),sF=new Map,rS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function au(t,e){sF.set(t,e),_l(e,[t])}for(var Jy=0;Jy<rS.length;Jy++){var e1=rS[Jy],uU=e1.toLowerCase(),lU=e1[0].toUpperCase()+e1.slice(1);au(uU,"on"+lU)}au(rF,"onAnimationEnd");au(iF,"onAnimationIteration");au(aF,"onAnimationStart");au("dblclick","onDoubleClick");au("focusin","onFocus");au("focusout","onBlur");au(oF,"onTransitionEnd");Yc("onMouseEnter",["mouseout","mouseover"]);Yc("onMouseLeave",["mouseout","mouseover"]);Yc("onPointerEnter",["pointerout","pointerover"]);Yc("onPointerLeave",["pointerout","pointerover"]);_l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_l("onBeforeInput",["compositionend","keypress","textInput","paste"]);_l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cd));function iS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uz(r,e,void 0,t),t.currentTarget=null}function uF(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;iS(i,s,l),a=u}else for(o=0;o<r.length;o++){if(s=r[o],u=s.instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;iS(i,s,l),a=u}}}if(gv)throw t=$x,gv=!1,$x=null,t}function un(t,e){var n=e[Xx];n===void 0&&(n=e[Xx]=new Set);var r=t+"__bubble";n.has(r)||(lF(e,t,2,!1),n.add(r))}function t1(t,e,n){var r=0;e&&(r|=4),lF(n,t,r,e)}var Qp="_reactListening"+Math.random().toString(36).slice(2);function ch(t){if(!t[Qp]){t[Qp]=!0,vR.forEach(function(n){n!=="selectionchange"&&(cU.has(n)||t1(n,!1,t),t1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qp]||(e[Qp]=!0,t1("selectionchange",!1,e))}}function lF(t,e,n,r){switch(HR(e)){case 1:var i=Cz;break;case 4:i=Nz;break;default:i=b2}n=i.bind(null,e,n,t),i=void 0,!jx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function n1(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;s!==null;){if(o=$u(s),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}s=s.parentNode}}r=r.return}kR(function(){var l=a,c=v2(n),f=[];e:{var d=sF.get(t);if(d!==void 0){var h=_2,p=t;switch(t){case"keypress":if(Xm(n)===0)break e;case"keydown":case"keyup":h=$z;break;case"focusin":p="focus",h=Yy;break;case"focusout":p="blur",h=Yy;break;case"beforeblur":case"afterblur":h=Yy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=HN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Az;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Vz;break;case rF:case iF:case aF:h=Iz;break;case oF:h=qz;break;case"scroll":h=Sz;break;case"wheel":h=Gz;break;case"copy":case"cut":case"paste":h=Rz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=KN}var m=(e&4)!==0,y=!m&&t==="scroll",v=m?d!==null?d+"Capture":null:d;m=[];for(var x=l,g;x!==null;){g=x;var b=g.stateNode;if(g.tag===5&&b!==null&&(g=b,v!==null&&(b=ih(x,v),b!=null&&m.push(fh(x,b,g)))),y)break;x=x.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==Bx&&(p=n.relatedTarget||n.fromElement)&&($u(p)||p[$o]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?$u(p):null,p!==null&&(y=El(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=HN,b="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=KN,b="onPointerLeave",v="onPointerEnter",x="pointer"),y=h==null?d:fc(h),g=p==null?d:fc(p),d=new m(b,x+"leave",h,n,c),d.target=y,d.relatedTarget=g,b=null,$u(c)===l&&(m=new m(v,x+"enter",p,n,c),m.target=g,m.relatedTarget=y,b=m),y=b,h&&p)t:{for(m=h,v=p,x=0,g=m;g;g=Wl(g))x++;for(g=0,b=v;b;b=Wl(b))g++;for(;0<x-g;)m=Wl(m),x--;for(;0<g-x;)v=Wl(v),g--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=Wl(m),v=Wl(v)}m=null}else m=null;h!==null&&aS(f,d,h,m,!1),p!==null&&y!==null&&aS(f,y,p,m,!0)}}e:{if(d=l?fc(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=eU;else if(QN(d))if(ZR)w=iU;else{w=nU;var _=tU}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=rU);if(w&&(w=w(t,l))){QR(f,w,n,c);break e}_&&_(t,d,l),t==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&kx(d,"number",d.value)}switch(_=l?fc(l):window,t){case"focusin":(QN(_)||_.contentEditable==="true")&&(lc=_,Wx=l,Od=null);break;case"focusout":Od=Wx=lc=null;break;case"mousedown":qx=!0;break;case"contextmenu":case"mouseup":case"dragend":qx=!1,nS(f,n,c);break;case"selectionchange":if(sU)break;case"keydown":case"keyup":nS(f,n,c)}var E;if(C2)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else uc?YR(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(KR&&n.locale!=="ko"&&(uc||C!=="onCompositionStart"?C==="onCompositionEnd"&&uc&&(E=GR()):(Es=c,w2="value"in Es?Es.value:Es.textContent,uc=!0)),_=_v(l,C),0<_.length&&(C=new GN(C,t,null,n,c),f.push({event:C,listeners:_}),E?C.data=E:(E=XR(n),E!==null&&(C.data=E)))),(E=Yz?Xz(t,n):Qz(t,n))&&(l=_v(l,"onBeforeInput"),0<l.length&&(c=new GN("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=E))}uF(f,e)})}function fh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _v(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ih(t,n),a!=null&&r.unshift(fh(t,a,i)),a=ih(t,e),a!=null&&r.push(fh(t,a,i))),t=t.return}return r}function Wl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function aS(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=ih(n,a),u!=null&&o.unshift(fh(n,u,s))):i||(u=ih(n,a),u!=null&&o.push(fh(n,u,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fU=/\r\n?/g,dU=/\u0000|\uFFFD/g;function oS(t){return(typeof t=="string"?t:""+t).replace(fU,`
`).replace(dU,"")}function Zp(t,e,n){if(e=oS(e),oS(t)!==e&&n)throw Error(ke(425))}function Ev(){}var Hx=null,Gx=null;function Kx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yx=typeof setTimeout=="function"?setTimeout:void 0,hU=typeof clearTimeout=="function"?clearTimeout:void 0,sS=typeof Promise=="function"?Promise:void 0,pU=typeof queueMicrotask=="function"?queueMicrotask:typeof sS<"u"?function(t){return sS.resolve(null).then(t).catch(mU)}:Yx;function mU(t){setTimeout(function(){throw t})}function r1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),sh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);sh(e)}function Rs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sf=Math.random().toString(36).slice(2),Ha="__reactFiber$"+Sf,dh="__reactProps$"+Sf,$o="__reactContainer$"+Sf,Xx="__reactEvents$"+Sf,vU="__reactListeners$"+Sf,gU="__reactHandles$"+Sf;function $u(t){var e=t[Ha];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$o]||n[Ha]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uS(t);t!==null;){if(n=t[Ha])return n;t=uS(t)}return e}t=n,n=t.parentNode}return null}function tp(t){return t=t[Ha]||t[$o],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ke(33))}function b0(t){return t[dh]||null}var Qx=[],dc=-1;function ou(t){return{current:t}}function fn(t){0>dc||(t.current=Qx[dc],Qx[dc]=null,dc--)}function an(t,e){dc++,Qx[dc]=t.current,t.current=e}var Ks={},Br=ou(Ks),di=ou(!1),rl=Ks;function Xc(t,e){var n=t.type.contextTypes;if(!n)return Ks;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hi(t){return t=t.childContextTypes,t!=null}function Cv(){fn(di),fn(Br)}function lS(t,e,n){if(Br.current!==Ks)throw Error(ke(168));an(Br,e),an(di,n)}function cF(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ke(108,tz(t)||"Unknown",i));return En({},n,r)}function Nv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ks,rl=Br.current,an(Br,t),an(di,di.current),!0}function cS(t,e,n){var r=t.stateNode;if(!r)throw Error(ke(169));n?(t=cF(t,e,rl),r.__reactInternalMemoizedMergedChildContext=t,fn(di),fn(Br),an(Br,t)):fn(di),an(di,n)}var _o=null,w0=!1,i1=!1;function fF(t){_o===null?_o=[t]:_o.push(t)}function yU(t){w0=!0,fF(t)}function su(){if(!i1&&_o!==null){i1=!0;var t=0,e=Kt;try{var n=_o;for(Kt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_o=null,w0=!1}catch(i){throw _o!==null&&(_o=_o.slice(t+1)),OR(g2,su),i}finally{Kt=e,i1=!1}}return null}var hc=[],pc=0,Sv=null,Dv=0,Gi=[],Ki=0,il=null,No=1,So="";function Tu(t,e){hc[pc++]=Dv,hc[pc++]=Sv,Sv=t,Dv=e}function dF(t,e,n){Gi[Ki++]=No,Gi[Ki++]=So,Gi[Ki++]=il,il=t;var r=No;t=So;var i=32-Na(r)-1;r&=~(1<<i),n+=1;var a=32-Na(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,No=1<<32-Na(e)+i|n<<i|r,So=a+t}else No=1<<a|n<<i|r,So=t}function S2(t){t.return!==null&&(Tu(t,1),dF(t,1,0))}function D2(t){for(;t===Sv;)Sv=hc[--pc],hc[pc]=null,Dv=hc[--pc],hc[pc]=null;for(;t===il;)il=Gi[--Ki],Gi[Ki]=null,So=Gi[--Ki],Gi[Ki]=null,No=Gi[--Ki],Gi[Ki]=null}var ki=null,Di=null,mn=!1,ga=null;function hF(t,e){var n=Ji(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ki=t,Di=Rs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ki=t,Di=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=il!==null?{id:No,overflow:So}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ji(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ki=t,Di=null,!0):!1;default:return!1}}function Zx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jx(t){if(mn){var e=Di;if(e){var n=e;if(!fS(t,e)){if(Zx(t))throw Error(ke(418));e=Rs(n.nextSibling);var r=ki;e&&fS(t,e)?hF(r,n):(t.flags=t.flags&-4097|2,mn=!1,ki=t)}}else{if(Zx(t))throw Error(ke(418));t.flags=t.flags&-4097|2,mn=!1,ki=t}}}function dS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ki=t}function Jp(t){if(t!==ki)return!1;if(!mn)return dS(t),mn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kx(t.type,t.memoizedProps)),e&&(e=Di)){if(Zx(t))throw pF(),Error(ke(418));for(;e;)hF(t,e),e=Rs(e.nextSibling)}if(dS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ke(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Di=Rs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Di=null}}else Di=ki?Rs(t.stateNode.nextSibling):null;return!0}function pF(){for(var t=Di;t;)t=Rs(t.nextSibling)}function Qc(){Di=ki=null,mn=!1}function A2(t){ga===null?ga=[t]:ga.push(t)}var xU=Qo.ReactCurrentBatchConfig;function od(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,t))}return t}function em(t,e){throw t=Object.prototype.toString.call(e),Error(ke(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hS(t){var e=t._init;return e(t._payload)}function mF(t){function e(v,x){if(t){var g=v.deletions;g===null?(v.deletions=[x],v.flags|=16):g.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=Bs(v,x),v.index=0,v.sibling=null,v}function a(v,x,g){return v.index=g,t?(g=v.alternate,g!==null?(g=g.index,g<x?(v.flags|=2,x):g):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function s(v,x,g,b){return x===null||x.tag!==6?(x=f1(g,v.mode,b),x.return=v,x):(x=i(x,g),x.return=v,x)}function u(v,x,g,b){var w=g.type;return w===sc?c(v,x,g.props.children,b,g.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ps&&hS(w)===x.type)?(b=i(x,g.props),b.ref=od(v,x,g),b.return=v,b):(b=rv(g.type,g.key,g.props,null,v.mode,b),b.ref=od(v,x,g),b.return=v,b)}function l(v,x,g,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==g.containerInfo||x.stateNode.implementation!==g.implementation?(x=d1(g,v.mode,b),x.return=v,x):(x=i(x,g.children||[]),x.return=v,x)}function c(v,x,g,b,w){return x===null||x.tag!==7?(x=Zu(g,v.mode,b,w),x.return=v,x):(x=i(x,g),x.return=v,x)}function f(v,x,g){if(typeof x=="string"&&x!==""||typeof x=="number")return x=f1(""+x,v.mode,g),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vp:return g=rv(x.type,x.key,x.props,null,v.mode,g),g.ref=od(v,null,x),g.return=v,g;case oc:return x=d1(x,v.mode,g),x.return=v,x;case ps:var b=x._init;return f(v,b(x._payload),g)}if(_d(x)||td(x))return x=Zu(x,v.mode,g,null),x.return=v,x;em(v,x)}return null}function d(v,x,g,b){var w=x!==null?x.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return w!==null?null:s(v,x,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Vp:return g.key===w?u(v,x,g,b):null;case oc:return g.key===w?l(v,x,g,b):null;case ps:return w=g._init,d(v,x,w(g._payload),b)}if(_d(g)||td(g))return w!==null?null:c(v,x,g,b,null);em(v,g)}return null}function h(v,x,g,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(g)||null,s(x,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Vp:return v=v.get(b.key===null?g:b.key)||null,u(x,v,b,w);case oc:return v=v.get(b.key===null?g:b.key)||null,l(x,v,b,w);case ps:var _=b._init;return h(v,x,g,_(b._payload),w)}if(_d(b)||td(b))return v=v.get(g)||null,c(x,v,b,w,null);em(x,b)}return null}function p(v,x,g,b){for(var w=null,_=null,E=x,C=x=0,N=null;E!==null&&C<g.length;C++){E.index>C?(N=E,E=null):N=E.sibling;var D=d(v,E,g[C],b);if(D===null){E===null&&(E=N);break}t&&E&&D.alternate===null&&e(v,E),x=a(D,x,C),_===null?w=D:_.sibling=D,_=D,E=N}if(C===g.length)return n(v,E),mn&&Tu(v,C),w;if(E===null){for(;C<g.length;C++)E=f(v,g[C],b),E!==null&&(x=a(E,x,C),_===null?w=E:_.sibling=E,_=E);return mn&&Tu(v,C),w}for(E=r(v,E);C<g.length;C++)N=h(E,v,C,g[C],b),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?C:N.key),x=a(N,x,C),_===null?w=N:_.sibling=N,_=N);return t&&E.forEach(function(A){return e(v,A)}),mn&&Tu(v,C),w}function m(v,x,g,b){var w=td(g);if(typeof w!="function")throw Error(ke(150));if(g=w.call(g),g==null)throw Error(ke(151));for(var _=w=null,E=x,C=x=0,N=null,D=g.next();E!==null&&!D.done;C++,D=g.next()){E.index>C?(N=E,E=null):N=E.sibling;var A=d(v,E,D.value,b);if(A===null){E===null&&(E=N);break}t&&E&&A.alternate===null&&e(v,E),x=a(A,x,C),_===null?w=A:_.sibling=A,_=A,E=N}if(D.done)return n(v,E),mn&&Tu(v,C),w;if(E===null){for(;!D.done;C++,D=g.next())D=f(v,D.value,b),D!==null&&(x=a(D,x,C),_===null?w=D:_.sibling=D,_=D);return mn&&Tu(v,C),w}for(E=r(v,E);!D.done;C++,D=g.next())D=h(E,v,C,D.value,b),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?C:D.key),x=a(D,x,C),_===null?w=D:_.sibling=D,_=D);return t&&E.forEach(function(T){return e(v,T)}),mn&&Tu(v,C),w}function y(v,x,g,b){if(typeof g=="object"&&g!==null&&g.type===sc&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Vp:e:{for(var w=g.key,_=x;_!==null;){if(_.key===w){if(w=g.type,w===sc){if(_.tag===7){n(v,_.sibling),x=i(_,g.props.children),x.return=v,v=x;break e}}else if(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ps&&hS(w)===_.type){n(v,_.sibling),x=i(_,g.props),x.ref=od(v,_,g),x.return=v,v=x;break e}n(v,_);break}else e(v,_);_=_.sibling}g.type===sc?(x=Zu(g.props.children,v.mode,b,g.key),x.return=v,v=x):(b=rv(g.type,g.key,g.props,null,v.mode,b),b.ref=od(v,x,g),b.return=v,v=b)}return o(v);case oc:e:{for(_=g.key;x!==null;){if(x.key===_)if(x.tag===4&&x.stateNode.containerInfo===g.containerInfo&&x.stateNode.implementation===g.implementation){n(v,x.sibling),x=i(x,g.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=d1(g,v.mode,b),x.return=v,v=x}return o(v);case ps:return _=g._init,y(v,x,_(g._payload),b)}if(_d(g))return p(v,x,g,b);if(td(g))return m(v,x,g,b);em(v,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,g),x.return=v,v=x):(n(v,x),x=f1(g,v.mode,b),x.return=v,v=x),o(v)):n(v,x)}return y}var Zc=mF(!0),vF=mF(!1),Av=ou(null),Tv=null,mc=null,T2=null;function M2(){T2=mc=Tv=null}function I2(t){var e=Av.current;fn(Av),t._currentValue=e}function eb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Mc(t,e){Tv=t,T2=mc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ui=!0),t.firstContext=null)}function ra(t){var e=t._currentValue;if(T2!==t)if(t={context:t,memoizedValue:e,next:null},mc===null){if(Tv===null)throw Error(ke(308));mc=t,Tv.dependencies={lanes:0,firstContext:t}}else mc=mc.next=t;return e}var zu=null;function k2(t){zu===null?zu=[t]:zu.push(t)}function gF(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,k2(e)):(n.next=i.next,i.next=n),e.interleaved=n,zo(t,r)}function zo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ms=!1;function R2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yF(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ko(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Lt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zo(t,n)}return i=r.interleaved,i===null?(e.next=e,k2(r)):(e.next=i.next,i.next=e),r.interleaved=e,zo(t,n)}function Qm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,y2(t,n)}}function pS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mv(t,e,n,r){var i=t.updateQueue;ms=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,o===null?a=l:o.next=l,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(a!==null){var f=i.baseState;o=0,c=l=u=null,s=a;do{var d=s.lane,h=s.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,m=s;switch(d=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=En({},f,d);break e;case 2:ms=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);ol|=o,t.lanes=o,t.memoizedState=f}}function mS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ke(191,i));i.call(r)}}}var np={},Za=ou(np),hh=ou(np),ph=ou(np);function Uu(t){if(t===np)throw Error(ke(174));return t}function F2(t,e){switch(an(ph,e),an(hh,t),an(Za,np),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fx(e,t)}fn(Za),an(Za,e)}function Jc(){fn(Za),fn(hh),fn(ph)}function xF(t){Uu(ph.current);var e=Uu(Za.current),n=Fx(e,t.type);e!==n&&(an(hh,t),an(Za,n))}function P2(t){hh.current===t&&(fn(Za),fn(hh))}var gn=ou(0);function Iv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var a1=[];function O2(){for(var t=0;t<a1.length;t++)a1[t]._workInProgressVersionPrimary=null;a1.length=0}var Zm=Qo.ReactCurrentDispatcher,o1=Qo.ReactCurrentBatchConfig,al=0,wn=null,jn=null,nr=null,kv=!1,Bd=!1,mh=0,bU=0;function Er(){throw Error(ke(321))}function B2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ia(t[n],e[n]))return!1;return!0}function L2(t,e,n,r,i,a){if(al=a,wn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zm.current=t===null||t.memoizedState===null?CU:NU,t=n(r,i),Bd){a=0;do{if(Bd=!1,mh=0,25<=a)throw Error(ke(301));a+=1,nr=jn=null,e.updateQueue=null,Zm.current=SU,t=n(r,i)}while(Bd)}if(Zm.current=Rv,e=jn!==null&&jn.next!==null,al=0,nr=jn=wn=null,kv=!1,e)throw Error(ke(300));return t}function j2(){var t=mh!==0;return mh=0,t}function Va(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?wn.memoizedState=nr=t:nr=nr.next=t,nr}function ia(){if(jn===null){var t=wn.alternate;t=t!==null?t.memoizedState:null}else t=jn.next;var e=nr===null?wn.memoizedState:nr.next;if(e!==null)nr=e,jn=t;else{if(t===null)throw Error(ke(310));jn=t,t={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},nr===null?wn.memoizedState=nr=t:nr=nr.next=t}return nr}function vh(t,e){return typeof e=="function"?e(t):e}function s1(t){var e=ia(),n=e.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var r=jn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,u=null,l=a;do{var c=l.lane;if((al&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,o=r):u=u.next=f,wn.lanes|=c,ol|=c}l=l.next}while(l!==null&&l!==a);u===null?o=r:u.next=s,Ia(r,e.memoizedState)||(ui=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,wn.lanes|=a,ol|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function u1(t){var e=ia(),n=e.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Ia(a,e.memoizedState)||(ui=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function bF(){}function wF(t,e){var n=wn,r=ia(),i=e(),a=!Ia(r.memoizedState,i);if(a&&(r.memoizedState=i,ui=!0),r=r.queue,$2(CF.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||nr!==null&&nr.memoizedState.tag&1){if(n.flags|=2048,gh(9,EF.bind(null,n,r,i,e),void 0,null),or===null)throw Error(ke(349));al&30||_F(n,e,i)}return i}function _F(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wn.updateQueue,e===null?(e={lastEffect:null,stores:null},wn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EF(t,e,n,r){e.value=n,e.getSnapshot=r,NF(e)&&SF(t)}function CF(t,e,n){return n(function(){NF(e)&&SF(t)})}function NF(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ia(t,n)}catch{return!0}}function SF(t){var e=zo(t,1);e!==null&&Sa(e,t,1,-1)}function vS(t){var e=Va();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vh,lastRenderedState:t},e.queue=t,t=t.dispatch=EU.bind(null,wn,t),[e.memoizedState,t]}function gh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=wn.updateQueue,e===null?(e={lastEffect:null,stores:null},wn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function DF(){return ia().memoizedState}function Jm(t,e,n,r){var i=Va();wn.flags|=t,i.memoizedState=gh(1|e,n,void 0,r===void 0?null:r)}function _0(t,e,n,r){var i=ia();r=r===void 0?null:r;var a=void 0;if(jn!==null){var o=jn.memoizedState;if(a=o.destroy,r!==null&&B2(r,o.deps)){i.memoizedState=gh(e,n,a,r);return}}wn.flags|=t,i.memoizedState=gh(1|e,n,a,r)}function gS(t,e){return Jm(8390656,8,t,e)}function $2(t,e){return _0(2048,8,t,e)}function AF(t,e){return _0(4,2,t,e)}function TF(t,e){return _0(4,4,t,e)}function MF(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IF(t,e,n){return n=n!=null?n.concat([t]):null,_0(4,4,MF.bind(null,e,t),n)}function z2(){}function kF(t,e){var n=ia();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&B2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function RF(t,e){var n=ia();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&B2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function FF(t,e,n){return al&21?(Ia(n,e)||(n=jR(),wn.lanes|=n,ol|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ui=!0),t.memoizedState=n)}function wU(t,e){var n=Kt;Kt=n!==0&&4>n?n:4,t(!0);var r=o1.transition;o1.transition={};try{t(!1),e()}finally{Kt=n,o1.transition=r}}function PF(){return ia().memoizedState}function _U(t,e,n){var r=Os(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OF(t))BF(e,n);else if(n=gF(t,e,n,r),n!==null){var i=qr();Sa(n,t,r,i),LF(n,e,r)}}function EU(t,e,n){var r=Os(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OF(t))BF(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Ia(s,o)){var u=e.interleaved;u===null?(i.next=i,k2(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=gF(t,e,i,r),n!==null&&(i=qr(),Sa(n,t,r,i),LF(n,e,r))}}function OF(t){var e=t.alternate;return t===wn||e!==null&&e===wn}function BF(t,e){Bd=kv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LF(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,y2(t,n)}}var Rv={readContext:ra,useCallback:Er,useContext:Er,useEffect:Er,useImperativeHandle:Er,useInsertionEffect:Er,useLayoutEffect:Er,useMemo:Er,useReducer:Er,useRef:Er,useState:Er,useDebugValue:Er,useDeferredValue:Er,useTransition:Er,useMutableSource:Er,useSyncExternalStore:Er,useId:Er,unstable_isNewReconciler:!1},CU={readContext:ra,useCallback:function(t,e){return Va().memoizedState=[t,e===void 0?null:e],t},useContext:ra,useEffect:gS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jm(4194308,4,MF.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jm(4,2,t,e)},useMemo:function(t,e){var n=Va();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Va();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=_U.bind(null,wn,t),[r.memoizedState,t]},useRef:function(t){var e=Va();return t={current:t},e.memoizedState=t},useState:vS,useDebugValue:z2,useDeferredValue:function(t){return Va().memoizedState=t},useTransition:function(){var t=vS(!1),e=t[0];return t=wU.bind(null,t[1]),Va().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=wn,i=Va();if(mn){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=e(),or===null)throw Error(ke(349));al&30||_F(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,gS(CF.bind(null,r,a,t),[t]),r.flags|=2048,gh(9,EF.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Va(),e=or.identifierPrefix;if(mn){var n=So,r=No;n=(r&~(1<<32-Na(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=mh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NU={readContext:ra,useCallback:kF,useContext:ra,useEffect:$2,useImperativeHandle:IF,useInsertionEffect:AF,useLayoutEffect:TF,useMemo:RF,useReducer:s1,useRef:DF,useState:function(){return s1(vh)},useDebugValue:z2,useDeferredValue:function(t){var e=ia();return FF(e,jn.memoizedState,t)},useTransition:function(){var t=s1(vh)[0],e=ia().memoizedState;return[t,e]},useMutableSource:bF,useSyncExternalStore:wF,useId:PF,unstable_isNewReconciler:!1},SU={readContext:ra,useCallback:kF,useContext:ra,useEffect:$2,useImperativeHandle:IF,useInsertionEffect:AF,useLayoutEffect:TF,useMemo:RF,useReducer:u1,useRef:DF,useState:function(){return u1(vh)},useDebugValue:z2,useDeferredValue:function(t){var e=ia();return jn===null?e.memoizedState=t:FF(e,jn.memoizedState,t)},useTransition:function(){var t=u1(vh)[0],e=ia().memoizedState;return[t,e]},useMutableSource:bF,useSyncExternalStore:wF,useId:PF,unstable_isNewReconciler:!1};function ma(t,e){if(t&&t.defaultProps){e=En({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:En({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var E0={isMounted:function(t){return(t=t._reactInternals)?El(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qr(),i=Os(t),a=ko(r,i);a.payload=e,n!=null&&(a.callback=n),e=Fs(t,a,i),e!==null&&(Sa(e,t,i,r),Qm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qr(),i=Os(t),a=ko(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Fs(t,a,i),e!==null&&(Sa(e,t,i,r),Qm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qr(),r=Os(t),i=ko(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fs(t,i,r),e!==null&&(Sa(e,t,r,n),Qm(e,t,r))}};function yS(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!lh(n,r)||!lh(i,a):!0}function jF(t,e,n){var r=!1,i=Ks,a=e.contextType;return typeof a=="object"&&a!==null?a=ra(a):(i=hi(e)?rl:Br.current,r=e.contextTypes,a=(r=r!=null)?Xc(t,i):Ks),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=E0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function xS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&E0.enqueueReplaceState(e,e.state,null)}function nb(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},R2(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=ra(a):(a=hi(e)?rl:Br.current,i.context=Xc(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(tb(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&E0.enqueueReplaceState(i,i.state,null),Mv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ef(t,e){try{var n="",r=e;do n+=ez(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function l1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DU=typeof WeakMap=="function"?WeakMap:Map;function $F(t,e,n){n=ko(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pv||(Pv=!0,hb=r),rb(t,e)},n}function zF(t,e,n){n=ko(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){rb(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){rb(t,e),typeof r!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zU.bind(null,t,e,n),e.then(t,t))}function wS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _S(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ko(-1,1),e.tag=2,Fs(n,e,1))),n.lanes|=1),t)}var AU=Qo.ReactCurrentOwner,ui=!1;function Vr(t,e,n,r){e.child=t===null?vF(e,null,n,r):Zc(e,t.child,n,r)}function ES(t,e,n,r,i){n=n.render;var a=e.ref;return Mc(e,i),r=L2(t,e,n,r,a,i),n=j2(),t!==null&&!ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Uo(t,e,i)):(mn&&n&&S2(e),e.flags|=1,Vr(t,e,r,i),e.child)}function CS(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!Y2(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,UF(t,e,a,r,i)):(t=rv(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:lh,n(o,r)&&t.ref===e.ref)return Uo(t,e,i)}return e.flags|=1,t=Bs(a,r),t.ref=e.ref,t.return=e,e.child=t}function UF(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(lh(a,r)&&t.ref===e.ref)if(ui=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(ui=!0);else return e.lanes=t.lanes,Uo(t,e,i)}return ib(t,e,n,r,i)}function VF(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(gc,Ei),Ei|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,an(gc,Ei),Ei|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,an(gc,Ei),Ei|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,an(gc,Ei),Ei|=r;return Vr(t,e,i,n),e.child}function WF(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ib(t,e,n,r,i){var a=hi(n)?rl:Br.current;return a=Xc(e,a),Mc(e,i),n=L2(t,e,n,r,a,i),r=j2(),t!==null&&!ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Uo(t,e,i)):(mn&&r&&S2(e),e.flags|=1,Vr(t,e,n,i),e.child)}function NS(t,e,n,r,i){if(hi(n)){var a=!0;Nv(e)}else a=!1;if(Mc(e,i),e.stateNode===null)ev(t,e),jF(e,n,r),nb(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=ra(l):(l=hi(n)?rl:Br.current,l=Xc(e,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||u!==l)&&xS(e,o,r,l),ms=!1;var d=e.memoizedState;o.state=d,Mv(e,r,o,i),u=e.memoizedState,s!==r||d!==u||di.current||ms?(typeof c=="function"&&(tb(e,n,c,r),u=e.memoizedState),(s=ms||yS(e,n,s,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yF(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:ma(e.type,s),o.props=l,f=e.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=ra(u):(u=hi(n)?rl:Br.current,u=Xc(e,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||d!==u)&&xS(e,o,r,u),ms=!1,d=e.memoizedState,o.state=d,Mv(e,r,o,i);var p=e.memoizedState;s!==f||d!==p||di.current||ms?(typeof h=="function"&&(tb(e,n,h,r),p=e.memoizedState),(l=ms||yS(e,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return ab(t,e,n,r,a,i)}function ab(t,e,n,r,i,a){WF(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&cS(e,n,!1),Uo(t,e,a);r=e.stateNode,AU.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zc(e,t.child,null,a),e.child=Zc(e,null,s,a)):Vr(t,e,s,a),e.memoizedState=r.state,i&&cS(e,n,!0),e.child}function qF(t){var e=t.stateNode;e.pendingContext?lS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lS(t,e.context,!1),F2(t,e.containerInfo)}function SS(t,e,n,r,i){return Qc(),A2(i),e.flags|=256,Vr(t,e,n,r),e.child}var ob={dehydrated:null,treeContext:null,retryLane:0};function sb(t){return{baseLanes:t,cachePool:null,transitions:null}}function HF(t,e,n){var r=e.pendingProps,i=gn.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),an(gn,i&1),t===null)return Jx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=S0(o,r,0,null),t=Zu(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=sb(n),e.memoizedState=ob,t):U2(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return TU(t,e,o,r,s,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Bs(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=Bs(s,a):(a=Zu(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?sb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=ob,r}return a=t.child,t=a.sibling,r=Bs(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function U2(t,e){return e=S0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tm(t,e,n,r){return r!==null&&A2(r),Zc(e,t.child,null,n),t=U2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TU(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=l1(Error(ke(422))),tm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=S0({mode:"visible",children:r.children},i,0,null),a=Zu(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Zc(e,t.child,null,o),e.child.memoizedState=sb(o),e.memoizedState=ob,a);if(!(e.mode&1))return tm(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(ke(419)),r=l1(a,r,void 0),tm(t,e,o,r)}if(s=(o&t.childLanes)!==0,ui||s){if(r=or,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,zo(t,i),Sa(r,t,i,-1))}return K2(),r=l1(Error(ke(421))),tm(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=UU.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Di=Rs(i.nextSibling),ki=e,mn=!0,ga=null,t!==null&&(Gi[Ki++]=No,Gi[Ki++]=So,Gi[Ki++]=il,No=t.id,So=t.overflow,il=e),e=U2(e,r.children),e.flags|=4096,e)}function DS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),eb(t.return,e,n)}function c1(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function GF(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Vr(t,e,r.children,n),r=gn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&DS(t,n,e);else if(t.tag===19)DS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(an(gn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Iv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),c1(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Iv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}c1(e,!0,n,null,a);break;case"together":c1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ev(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Uo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ol|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ke(153));if(e.child!==null){for(t=e.child,n=Bs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MU(t,e,n){switch(e.tag){case 3:qF(e),Qc();break;case 5:xF(e);break;case 1:hi(e.type)&&Nv(e);break;case 4:F2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;an(Av,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(an(gn,gn.current&1),e.flags|=128,null):n&e.child.childLanes?HF(t,e,n):(an(gn,gn.current&1),t=Uo(t,e,n),t!==null?t.sibling:null);an(gn,gn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return GF(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),an(gn,gn.current),r)break;return null;case 22:case 23:return e.lanes=0,VF(t,e,n)}return Uo(t,e,n)}var KF,ub,YF,XF;KF=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ub=function(){};YF=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Uu(Za.current);var a=null;switch(n){case"input":i=Mx(t,i),r=Mx(t,r),a=[];break;case"select":i=En({},i,{value:void 0}),r=En({},r,{value:void 0}),a=[];break;case"textarea":i=Rx(t,i),r=Rx(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ev)}Px(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(nh.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(a=a||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(nh.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&un("scroll",t),a||s===u||(a=[])):(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};XF=function(t,e,n,r){n!==r&&(e.flags|=4)};function sd(t,e){if(!mn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Cr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IU(t,e,n){var r=e.pendingProps;switch(D2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(e),null;case 1:return hi(e.type)&&Cv(),Cr(e),null;case 3:return r=e.stateNode,Jc(),fn(di),fn(Br),O2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ga!==null&&(vb(ga),ga=null))),ub(t,e),Cr(e),null;case 5:P2(e);var i=Uu(ph.current);if(n=e.type,t!==null&&e.stateNode!=null)YF(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ke(166));return Cr(e),null}if(t=Uu(Za.current),Jp(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Ha]=e,r[dh]=a,t=(e.mode&1)!==0,n){case"dialog":un("cancel",r),un("close",r);break;case"iframe":case"object":case"embed":un("load",r);break;case"video":case"audio":for(i=0;i<Cd.length;i++)un(Cd[i],r);break;case"source":un("error",r);break;case"img":case"image":case"link":un("error",r),un("load",r);break;case"details":un("toggle",r);break;case"input":ON(r,a),un("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},un("invalid",r);break;case"textarea":LN(r,a),un("invalid",r)}Px(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&Zp(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&Zp(r.textContent,s,t),i=["children",""+s]):nh.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&un("scroll",r)}switch(n){case"input":Wp(r),BN(r,a,!0);break;case"textarea":Wp(r),jN(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ev)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ha]=e,t[dh]=r,KF(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ox(n,r),n){case"dialog":un("cancel",t),un("close",t),i=r;break;case"iframe":case"object":case"embed":un("load",t),i=r;break;case"video":case"audio":for(i=0;i<Cd.length;i++)un(Cd[i],t);i=r;break;case"source":un("error",t),i=r;break;case"img":case"image":case"link":un("error",t),un("load",t),i=r;break;case"details":un("toggle",t),i=r;break;case"input":ON(t,r),i=Mx(t,r),un("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=En({},r,{value:void 0}),un("invalid",t);break;case"textarea":LN(t,r),i=Rx(t,r),un("invalid",t);break;default:i=r}Px(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="style"?DR(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&NR(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&rh(t,u):typeof u=="number"&&rh(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(nh.hasOwnProperty(a)?u!=null&&a==="onScroll"&&un("scroll",t):u!=null&&d2(t,a,u,o))}switch(n){case"input":Wp(t),BN(t,r,!1);break;case"textarea":Wp(t),jN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gs(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Sc(t,!!r.multiple,a,!1):r.defaultValue!=null&&Sc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ev)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Cr(e),null;case 6:if(t&&e.stateNode!=null)XF(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ke(166));if(n=Uu(ph.current),Uu(Za.current),Jp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ha]=e,(a=r.nodeValue!==n)&&(t=ki,t!==null))switch(t.tag){case 3:Zp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zp(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ha]=e,e.stateNode=r}return Cr(e),null;case 13:if(fn(gn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mn&&Di!==null&&e.mode&1&&!(e.flags&128))pF(),Qc(),e.flags|=98560,a=!1;else if(a=Jp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ke(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ke(317));a[Ha]=e}else Qc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Cr(e),a=!1}else ga!==null&&(vb(ga),ga=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||gn.current&1?Vn===0&&(Vn=3):K2())),e.updateQueue!==null&&(e.flags|=4),Cr(e),null);case 4:return Jc(),ub(t,e),t===null&&ch(e.stateNode.containerInfo),Cr(e),null;case 10:return I2(e.type._context),Cr(e),null;case 17:return hi(e.type)&&Cv(),Cr(e),null;case 19:if(fn(gn),a=e.memoizedState,a===null)return Cr(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)sd(a,!1);else{if(Vn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Iv(t),o!==null){for(e.flags|=128,sd(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return an(gn,gn.current&1|2),e.child}t=t.sibling}a.tail!==null&&kn()>tf&&(e.flags|=128,r=!0,sd(a,!1),e.lanes=4194304)}else{if(!r)if(t=Iv(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),sd(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!mn)return Cr(e),null}else 2*kn()-a.renderingStartTime>tf&&n!==1073741824&&(e.flags|=128,r=!0,sd(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=kn(),e.sibling=null,n=gn.current,an(gn,r?n&1|2:n&1),e):(Cr(e),null);case 22:case 23:return G2(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ei&1073741824&&(Cr(e),e.subtreeFlags&6&&(e.flags|=8192)):Cr(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function kU(t,e){switch(D2(e),e.tag){case 1:return hi(e.type)&&Cv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jc(),fn(di),fn(Br),O2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return P2(e),null;case 13:if(fn(gn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));Qc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fn(gn),null;case 4:return Jc(),null;case 10:return I2(e.type._context),null;case 22:case 23:return G2(),null;case 24:return null;default:return null}}var nm=!1,Ar=!1,RU=typeof WeakSet=="function"?WeakSet:Set,ze=null;function vc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Dn(t,e,r)}else n.current=null}function lb(t,e,n){try{n()}catch(r){Dn(t,e,r)}}var AS=!1;function FU(t,e){if(Hx=bv,t=tF(),N2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,u=-1,l=0,c=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(s=o+i),f!==a||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++l===i&&(s=o),d===a&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gx={focusedElem:t,selectionRange:n},bv=!1,ze=e;ze!==null;)if(e=ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ze=t;else for(;ze!==null;){e=ze;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:ma(e.type,m),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(b){Dn(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ze=t;break}ze=e.return}return p=AS,AS=!1,p}function Ld(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&lb(e,n,a)}i=i.next}while(i!==r)}}function C0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QF(t){var e=t.alternate;e!==null&&(t.alternate=null,QF(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ha],delete e[dh],delete e[Xx],delete e[vU],delete e[gU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZF(t){return t.tag===5||t.tag===3||t.tag===4}function TS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZF(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ev));else if(r!==4&&(t=t.child,t!==null))for(fb(t,e,n),t=t.sibling;t!==null;)fb(t,e,n),t=t.sibling}function db(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(db(t,e,n),t=t.sibling;t!==null;)db(t,e,n),t=t.sibling}var lr=null,va=!1;function us(t,e,n){for(n=n.child;n!==null;)JF(t,e,n),n=n.sibling}function JF(t,e,n){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(v0,n)}catch{}switch(n.tag){case 5:Ar||vc(n,e);case 6:var r=lr,i=va;lr=null,us(t,e,n),lr=r,va=i,lr!==null&&(va?(t=lr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lr.removeChild(n.stateNode));break;case 18:lr!==null&&(va?(t=lr,n=n.stateNode,t.nodeType===8?r1(t.parentNode,n):t.nodeType===1&&r1(t,n),sh(t)):r1(lr,n.stateNode));break;case 4:r=lr,i=va,lr=n.stateNode.containerInfo,va=!0,us(t,e,n),lr=r,va=i;break;case 0:case 11:case 14:case 15:if(!Ar&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&lb(n,e,o),i=i.next}while(i!==r)}us(t,e,n);break;case 1:if(!Ar&&(vc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Dn(n,e,s)}us(t,e,n);break;case 21:us(t,e,n);break;case 22:n.mode&1?(Ar=(r=Ar)||n.memoizedState!==null,us(t,e,n),Ar=r):us(t,e,n);break;default:us(t,e,n)}}function MS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RU),e.forEach(function(r){var i=VU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fa(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:lr=s.stateNode,va=!1;break e;case 3:lr=s.stateNode.containerInfo,va=!0;break e;case 4:lr=s.stateNode.containerInfo,va=!0;break e}s=s.return}if(lr===null)throw Error(ke(160));JF(a,o,i),lr=null,va=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Dn(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eP(e,t),e=e.sibling}function eP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fa(e,t),za(t),r&4){try{Ld(3,t,t.return),C0(3,t)}catch(m){Dn(t,t.return,m)}try{Ld(5,t,t.return)}catch(m){Dn(t,t.return,m)}}break;case 1:fa(e,t),za(t),r&512&&n!==null&&vc(n,n.return);break;case 5:if(fa(e,t),za(t),r&512&&n!==null&&vc(n,n.return),t.flags&32){var i=t.stateNode;try{rh(i,"")}catch(m){Dn(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&_R(i,a),Ox(s,o);var l=Ox(s,a);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?DR(i,f):c==="dangerouslySetInnerHTML"?NR(i,f):c==="children"?rh(i,f):d2(i,c,f,l)}switch(s){case"input":Ix(i,a);break;case"textarea":ER(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Sc(i,!!a.multiple,h,!1):d!==!!a.multiple&&(a.defaultValue!=null?Sc(i,!!a.multiple,a.defaultValue,!0):Sc(i,!!a.multiple,a.multiple?[]:"",!1))}i[dh]=a}catch(m){Dn(t,t.return,m)}}break;case 6:if(fa(e,t),za(t),r&4){if(t.stateNode===null)throw Error(ke(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(m){Dn(t,t.return,m)}}break;case 3:if(fa(e,t),za(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sh(e.containerInfo)}catch(m){Dn(t,t.return,m)}break;case 4:fa(e,t),za(t);break;case 13:fa(e,t),za(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(q2=kn())),r&4&&MS(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ar=(l=Ar)||c,fa(e,t),Ar=l):fa(e,t),za(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(ze=t,c=t.child;c!==null;){for(f=ze=c;ze!==null;){switch(d=ze,h=d.child,d.tag){case 0:case 11:case 14:case 15:Ld(4,d,d.return);break;case 1:vc(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Dn(r,n,m)}}break;case 5:vc(d,d.return);break;case 22:if(d.memoizedState!==null){kS(f);continue}}h!==null?(h.return=d,ze=h):kS(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=SR("display",o))}catch(m){Dn(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Dn(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fa(e,t),za(t),r&4&&MS(t);break;case 21:break;default:fa(e,t),za(t)}}function za(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ZF(n)){var r=n;break e}n=n.return}throw Error(ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rh(i,""),r.flags&=-33);var a=TS(t);db(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=TS(t);fb(t,s,o);break;default:throw Error(ke(161))}}catch(u){Dn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PU(t,e,n){ze=t,tP(t)}function tP(t,e,n){for(var r=(t.mode&1)!==0;ze!==null;){var i=ze,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||nm;if(!o){var s=i.alternate,u=s!==null&&s.memoizedState!==null||Ar;s=nm;var l=Ar;if(nm=o,(Ar=u)&&!l)for(ze=i;ze!==null;)o=ze,u=o.child,o.tag===22&&o.memoizedState!==null?RS(i):u!==null?(u.return=o,ze=u):RS(i);for(;a!==null;)ze=a,tP(a),a=a.sibling;ze=i,nm=s,Ar=l}IS(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ze=a):IS(t)}}function IS(t){for(;ze!==null;){var e=ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ar||C0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ar)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ma(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&mS(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mS(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&sh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Ar||e.flags&512&&cb(e)}catch(d){Dn(e,e.return,d)}}if(e===t){ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,ze=n;break}ze=e.return}}function kS(t){for(;ze!==null;){var e=ze;if(e===t){ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ze=n;break}ze=e.return}}function RS(t){for(;ze!==null;){var e=ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{C0(4,e)}catch(u){Dn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Dn(e,i,u)}}var a=e.return;try{cb(e)}catch(u){Dn(e,a,u)}break;case 5:var o=e.return;try{cb(e)}catch(u){Dn(e,o,u)}}}catch(u){Dn(e,e.return,u)}if(e===t){ze=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ze=s;break}ze=e.return}}var OU=Math.ceil,Fv=Qo.ReactCurrentDispatcher,V2=Qo.ReactCurrentOwner,ta=Qo.ReactCurrentBatchConfig,Lt=0,or=null,Pn=null,gr=0,Ei=0,gc=ou(0),Vn=0,yh=null,ol=0,N0=0,W2=0,jd=null,ai=null,q2=0,tf=1/0,wo=null,Pv=!1,hb=null,Ps=null,rm=!1,Cs=null,Ov=0,$d=0,pb=null,tv=-1,nv=0;function qr(){return Lt&6?kn():tv!==-1?tv:tv=kn()}function Os(t){return t.mode&1?Lt&2&&gr!==0?gr&-gr:xU.transition!==null?(nv===0&&(nv=jR()),nv):(t=Kt,t!==0||(t=window.event,t=t===void 0?16:HR(t.type)),t):1}function Sa(t,e,n,r){if(50<$d)throw $d=0,pb=null,Error(ke(185));Jh(t,n,r),(!(Lt&2)||t!==or)&&(t===or&&(!(Lt&2)&&(N0|=n),Vn===4&&xs(t,gr)),pi(t,r),n===1&&Lt===0&&!(e.mode&1)&&(tf=kn()+500,w0&&su()))}function pi(t,e){var n=t.callbackNode;xz(t,e);var r=xv(t,t===or?gr:0);if(r===0)n!==null&&UN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&UN(n),e===1)t.tag===0?yU(FS.bind(null,t)):fF(FS.bind(null,t)),pU(function(){!(Lt&6)&&su()}),n=null;else{switch($R(r)){case 1:n=g2;break;case 4:n=BR;break;case 16:n=yv;break;case 536870912:n=LR;break;default:n=yv}n=lP(n,nP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nP(t,e){if(tv=-1,nv=0,Lt&6)throw Error(ke(327));var n=t.callbackNode;if(Ic()&&t.callbackNode!==n)return null;var r=xv(t,t===or?gr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bv(t,r);else{e=r;var i=Lt;Lt|=2;var a=iP();(or!==t||gr!==e)&&(wo=null,tf=kn()+500,Qu(t,e));do try{jU();break}catch(s){rP(t,s)}while(!0);M2(),Fv.current=a,Lt=i,Pn!==null?e=0:(or=null,gr=0,e=Vn)}if(e!==0){if(e===2&&(i=zx(t),i!==0&&(r=i,e=mb(t,i))),e===1)throw n=yh,Qu(t,0),xs(t,r),pi(t,kn()),n;if(e===6)xs(t,r);else{if(i=t.current.alternate,!(r&30)&&!BU(i)&&(e=Bv(t,r),e===2&&(a=zx(t),a!==0&&(r=a,e=mb(t,a))),e===1))throw n=yh,Qu(t,0),xs(t,r),pi(t,kn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ke(345));case 2:Mu(t,ai,wo);break;case 3:if(xs(t,r),(r&130023424)===r&&(e=q2+500-kn(),10<e)){if(xv(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){qr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Yx(Mu.bind(null,t,ai,wo),e);break}Mu(t,ai,wo);break;case 4:if(xs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Na(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=kn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OU(r/1960))-r,10<r){t.timeoutHandle=Yx(Mu.bind(null,t,ai,wo),r);break}Mu(t,ai,wo);break;case 5:Mu(t,ai,wo);break;default:throw Error(ke(329))}}}return pi(t,kn()),t.callbackNode===n?nP.bind(null,t):null}function mb(t,e){var n=jd;return t.current.memoizedState.isDehydrated&&(Qu(t,e).flags|=256),t=Bv(t,e),t!==2&&(e=ai,ai=n,e!==null&&vb(e)),t}function vb(t){ai===null?ai=t:ai.push.apply(ai,t)}function BU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ia(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xs(t,e){for(e&=~W2,e&=~N0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Na(e),r=1<<n;t[n]=-1,e&=~r}}function FS(t){if(Lt&6)throw Error(ke(327));Ic();var e=xv(t,0);if(!(e&1))return pi(t,kn()),null;var n=Bv(t,e);if(t.tag!==0&&n===2){var r=zx(t);r!==0&&(e=r,n=mb(t,r))}if(n===1)throw n=yh,Qu(t,0),xs(t,e),pi(t,kn()),n;if(n===6)throw Error(ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mu(t,ai,wo),pi(t,kn()),null}function H2(t,e){var n=Lt;Lt|=1;try{return t(e)}finally{Lt=n,Lt===0&&(tf=kn()+500,w0&&su())}}function sl(t){Cs!==null&&Cs.tag===0&&!(Lt&6)&&Ic();var e=Lt;Lt|=1;var n=ta.transition,r=Kt;try{if(ta.transition=null,Kt=1,t)return t()}finally{Kt=r,ta.transition=n,Lt=e,!(Lt&6)&&su()}}function G2(){Ei=gc.current,fn(gc)}function Qu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hU(n)),Pn!==null)for(n=Pn.return;n!==null;){var r=n;switch(D2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cv();break;case 3:Jc(),fn(di),fn(Br),O2();break;case 5:P2(r);break;case 4:Jc();break;case 13:fn(gn);break;case 19:fn(gn);break;case 10:I2(r.type._context);break;case 22:case 23:G2()}n=n.return}if(or=t,Pn=t=Bs(t.current,null),gr=Ei=e,Vn=0,yh=null,W2=N0=ol=0,ai=jd=null,zu!==null){for(e=0;e<zu.length;e++)if(n=zu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}zu=null}return t}function rP(t,e){do{var n=Pn;try{if(M2(),Zm.current=Rv,kv){for(var r=wn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kv=!1}if(al=0,nr=jn=wn=null,Bd=!1,mh=0,V2.current=null,n===null||n.return===null){Vn=1,yh=e,Pn=null;break}e:{var a=t,o=n.return,s=n,u=e;if(e=gr,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=wS(o);if(h!==null){h.flags&=-257,_S(h,o,s,a,e),h.mode&1&&bS(a,l,e),e=h,u=l;var p=e.updateQueue;if(p===null){var m=new Set;m.add(u),e.updateQueue=m}else p.add(u);break e}else{if(!(e&1)){bS(a,l,e),K2();break e}u=Error(ke(426))}}else if(mn&&s.mode&1){var y=wS(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),_S(y,o,s,a,e),A2(ef(u,s));break e}}a=u=ef(u,s),Vn!==4&&(Vn=2),jd===null?jd=[a]:jd.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var v=$F(a,u,e);pS(a,v);break e;case 1:s=u;var x=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ps===null||!Ps.has(g)))){a.flags|=65536,e&=-e,a.lanes|=e;var b=zF(a,s,e);pS(a,b);break e}}a=a.return}while(a!==null)}oP(n)}catch(w){e=w,Pn===n&&n!==null&&(Pn=n=n.return);continue}break}while(!0)}function iP(){var t=Fv.current;return Fv.current=Rv,t===null?Rv:t}function K2(){(Vn===0||Vn===3||Vn===2)&&(Vn=4),or===null||!(ol&268435455)&&!(N0&268435455)||xs(or,gr)}function Bv(t,e){var n=Lt;Lt|=2;var r=iP();(or!==t||gr!==e)&&(wo=null,Qu(t,e));do try{LU();break}catch(i){rP(t,i)}while(!0);if(M2(),Lt=n,Fv.current=r,Pn!==null)throw Error(ke(261));return or=null,gr=0,Vn}function LU(){for(;Pn!==null;)aP(Pn)}function jU(){for(;Pn!==null&&!cz();)aP(Pn)}function aP(t){var e=uP(t.alternate,t,Ei);t.memoizedProps=t.pendingProps,e===null?oP(t):Pn=e,V2.current=null}function oP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kU(n,e),n!==null){n.flags&=32767,Pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vn=6,Pn=null;return}}else if(n=IU(n,e,Ei),n!==null){Pn=n;return}if(e=e.sibling,e!==null){Pn=e;return}Pn=e=t}while(e!==null);Vn===0&&(Vn=5)}function Mu(t,e,n){var r=Kt,i=ta.transition;try{ta.transition=null,Kt=1,$U(t,e,n,r)}finally{ta.transition=i,Kt=r}return null}function $U(t,e,n,r){do Ic();while(Cs!==null);if(Lt&6)throw Error(ke(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ke(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(bz(t,a),t===or&&(Pn=or=null,gr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rm||(rm=!0,lP(yv,function(){return Ic(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ta.transition,ta.transition=null;var o=Kt;Kt=1;var s=Lt;Lt|=4,V2.current=null,FU(t,n),eP(n,t),oU(Gx),bv=!!Hx,Gx=Hx=null,t.current=n,PU(n),fz(),Lt=s,Kt=o,ta.transition=a}else t.current=n;if(rm&&(rm=!1,Cs=t,Ov=i),a=t.pendingLanes,a===0&&(Ps=null),pz(n.stateNode),pi(t,kn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Pv)throw Pv=!1,t=hb,hb=null,t;return Ov&1&&t.tag!==0&&Ic(),a=t.pendingLanes,a&1?t===pb?$d++:($d=0,pb=t):$d=0,su(),null}function Ic(){if(Cs!==null){var t=$R(Ov),e=ta.transition,n=Kt;try{if(ta.transition=null,Kt=16>t?16:t,Cs===null)var r=!1;else{if(t=Cs,Cs=null,Ov=0,Lt&6)throw Error(ke(331));var i=Lt;for(Lt|=4,ze=t.current;ze!==null;){var a=ze,o=a.child;if(ze.flags&16){var s=a.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(ze=l;ze!==null;){var c=ze;switch(c.tag){case 0:case 11:case 15:Ld(8,c,a)}var f=c.child;if(f!==null)f.return=c,ze=f;else for(;ze!==null;){c=ze;var d=c.sibling,h=c.return;if(QF(c),c===l){ze=null;break}if(d!==null){d.return=h,ze=d;break}ze=h}}}var p=a.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}ze=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ze=o;else e:for(;ze!==null;){if(a=ze,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ld(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,ze=v;break e}ze=a.return}}var x=t.current;for(ze=x;ze!==null;){o=ze;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,ze=g;else e:for(o=x;ze!==null;){if(s=ze,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:C0(9,s)}}catch(w){Dn(s,s.return,w)}if(s===o){ze=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,ze=b;break e}ze=s.return}}if(Lt=i,su(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(v0,t)}catch{}r=!0}return r}finally{Kt=n,ta.transition=e}}return!1}function PS(t,e,n){e=ef(n,e),e=$F(t,e,1),t=Fs(t,e,1),e=qr(),t!==null&&(Jh(t,1,e),pi(t,e))}function Dn(t,e,n){if(t.tag===3)PS(t,t,n);else for(;e!==null;){if(e.tag===3){PS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ps===null||!Ps.has(r))){t=ef(n,t),t=zF(e,t,1),e=Fs(e,t,1),t=qr(),e!==null&&(Jh(e,1,t),pi(e,t));break}}e=e.return}}function zU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qr(),t.pingedLanes|=t.suspendedLanes&n,or===t&&(gr&n)===n&&(Vn===4||Vn===3&&(gr&130023424)===gr&&500>kn()-q2?Qu(t,0):W2|=n),pi(t,e)}function sP(t,e){e===0&&(t.mode&1?(e=Gp,Gp<<=1,!(Gp&130023424)&&(Gp=4194304)):e=1);var n=qr();t=zo(t,e),t!==null&&(Jh(t,e,n),pi(t,n))}function UU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sP(t,n)}function VU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(e),sP(t,n)}var uP;uP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||di.current)ui=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ui=!1,MU(t,e,n);ui=!!(t.flags&131072)}else ui=!1,mn&&e.flags&1048576&&dF(e,Dv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ev(t,e),t=e.pendingProps;var i=Xc(e,Br.current);Mc(e,n),i=L2(null,e,r,t,i,n);var a=j2();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hi(r)?(a=!0,Nv(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,R2(e),i.updater=E0,e.stateNode=i,i._reactInternals=e,nb(e,r,t,n),e=ab(null,e,r,!0,a,n)):(e.tag=0,mn&&a&&S2(e),Vr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ev(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qU(r),t=ma(r,t),i){case 0:e=ib(null,e,r,t,n);break e;case 1:e=NS(null,e,r,t,n);break e;case 11:e=ES(null,e,r,t,n);break e;case 14:e=CS(null,e,r,ma(r.type,t),n);break e}throw Error(ke(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ma(r,i),ib(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ma(r,i),NS(t,e,r,i,n);case 3:e:{if(qF(e),t===null)throw Error(ke(387));r=e.pendingProps,a=e.memoizedState,i=a.element,yF(t,e),Mv(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=ef(Error(ke(423)),e),e=SS(t,e,r,n,i);break e}else if(r!==i){i=ef(Error(ke(424)),e),e=SS(t,e,r,n,i);break e}else for(Di=Rs(e.stateNode.containerInfo.firstChild),ki=e,mn=!0,ga=null,n=vF(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qc(),r===i){e=Uo(t,e,n);break e}Vr(t,e,r,n)}e=e.child}return e;case 5:return xF(e),t===null&&Jx(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Kx(r,i)?o=null:a!==null&&Kx(r,a)&&(e.flags|=32),WF(t,e),Vr(t,e,o,n),e.child;case 6:return t===null&&Jx(e),null;case 13:return HF(t,e,n);case 4:return F2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zc(e,null,r,n):Vr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ma(r,i),ES(t,e,r,i,n);case 7:return Vr(t,e,e.pendingProps,n),e.child;case 8:return Vr(t,e,e.pendingProps.children,n),e.child;case 12:return Vr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,an(Av,r._currentValue),r._currentValue=o,a!==null)if(Ia(a.value,o)){if(a.children===i.children&&!di.current){e=Uo(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=ko(-1,n&-n),u.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),eb(a.return,n,e),s.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ke(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),eb(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Vr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Mc(e,n),i=ra(i),r=r(i),e.flags|=1,Vr(t,e,r,n),e.child;case 14:return r=e.type,i=ma(r,e.pendingProps),i=ma(r.type,i),CS(t,e,r,i,n);case 15:return UF(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ma(r,i),ev(t,e),e.tag=1,hi(r)?(t=!0,Nv(e)):t=!1,Mc(e,n),jF(e,r,i),nb(e,r,i,n),ab(null,e,r,!0,t,n);case 19:return GF(t,e,n);case 22:return VF(t,e,n)}throw Error(ke(156,e.tag))};function lP(t,e){return OR(t,e)}function WU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(t,e,n,r){return new WU(t,e,n,r)}function Y2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qU(t){if(typeof t=="function")return Y2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===p2)return 11;if(t===m2)return 14}return 2}function Bs(t,e){var n=t.alternate;return n===null?(n=Ji(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rv(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")Y2(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case sc:return Zu(n.children,i,a,e);case h2:o=8,i|=8;break;case Sx:return t=Ji(12,n,e,i|2),t.elementType=Sx,t.lanes=a,t;case Dx:return t=Ji(13,n,e,i),t.elementType=Dx,t.lanes=a,t;case Ax:return t=Ji(19,n,e,i),t.elementType=Ax,t.lanes=a,t;case xR:return S0(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gR:o=10;break e;case yR:o=9;break e;case p2:o=11;break e;case m2:o=14;break e;case ps:o=16,r=null;break e}throw Error(ke(130,t==null?t:typeof t,""))}return e=Ji(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Zu(t,e,n,r){return t=Ji(7,t,r,e),t.lanes=n,t}function S0(t,e,n,r){return t=Ji(22,t,r,e),t.elementType=xR,t.lanes=n,t.stateNode={isHidden:!1},t}function f1(t,e,n){return t=Ji(6,t,null,e),t.lanes=n,t}function d1(t,e,n){return e=Ji(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HU(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hy(0),this.expirationTimes=Hy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function X2(t,e,n,r,i,a,o,s,u){return t=new HU(t,e,n,s,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ji(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},R2(a),t}function GU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cP(t){if(!t)return Ks;t=t._reactInternals;e:{if(El(t)!==t||t.tag!==1)throw Error(ke(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(t.tag===1){var n=t.type;if(hi(n))return cF(t,n,e)}return e}function fP(t,e,n,r,i,a,o,s,u){return t=X2(n,r,!0,t,i,a,o,s,u),t.context=cP(null),n=t.current,r=qr(),i=Os(n),a=ko(r,i),a.callback=e??null,Fs(n,a,i),t.current.lanes=i,Jh(t,i,r),pi(t,r),t}function D0(t,e,n,r){var i=e.current,a=qr(),o=Os(i);return n=cP(n),e.context===null?e.context=n:e.pendingContext=n,e=ko(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fs(i,e,o),t!==null&&(Sa(t,i,o,a),Qm(t,i,o)),o}function Lv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function OS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Q2(t,e){OS(t,e),(t=t.alternate)&&OS(t,e)}function KU(){return null}var dP=typeof reportError=="function"?reportError:function(t){console.error(t)};function Z2(t){this._internalRoot=t}A0.prototype.render=Z2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ke(409));D0(t,e,null,null)};A0.prototype.unmount=Z2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;sl(function(){D0(null,t,null,null)}),e[$o]=null}};function A0(t){this._internalRoot=t}A0.prototype.unstable_scheduleHydration=function(t){if(t){var e=VR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ys.length&&e!==0&&e<ys[n].priority;n++);ys.splice(n,0,t),n===0&&qR(t)}};function J2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function T0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function BS(){}function YU(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var l=Lv(o);a.call(l)}}var o=fP(e,r,t,0,null,!1,!1,"",BS);return t._reactRootContainer=o,t[$o]=o.current,ch(t.nodeType===8?t.parentNode:t),sl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Lv(u);s.call(l)}}var u=X2(t,0,!1,null,null,!1,!1,"",BS);return t._reactRootContainer=u,t[$o]=u.current,ch(t.nodeType===8?t.parentNode:t),sl(function(){D0(e,u,n,r)}),u}function M0(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var u=Lv(o);s.call(u)}}D0(e,o,t,i)}else o=YU(n,e,t,i,r);return Lv(o)}zR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ed(e.pendingLanes);n!==0&&(y2(e,n|1),pi(e,kn()),!(Lt&6)&&(tf=kn()+500,su()))}break;case 13:sl(function(){var r=zo(t,1);if(r!==null){var i=qr();Sa(r,t,1,i)}}),Q2(t,1)}};x2=function(t){if(t.tag===13){var e=zo(t,134217728);if(e!==null){var n=qr();Sa(e,t,134217728,n)}Q2(t,134217728)}};UR=function(t){if(t.tag===13){var e=Os(t),n=zo(t,e);if(n!==null){var r=qr();Sa(n,t,e,r)}Q2(t,e)}};VR=function(){return Kt};WR=function(t,e){var n=Kt;try{return Kt=t,e()}finally{Kt=n}};Lx=function(t,e,n){switch(e){case"input":if(Ix(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=b0(r);if(!i)throw Error(ke(90));wR(r),Ix(r,i)}}}break;case"textarea":ER(t,n);break;case"select":e=n.value,e!=null&&Sc(t,!!n.multiple,e,!1)}};MR=H2;IR=sl;var XU={usingClientEntryPoint:!1,Events:[tp,fc,b0,AR,TR,H2]},ud={findFiberByHostInstance:$u,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QU={bundleType:ud.bundleType,version:ud.version,rendererPackageName:ud.rendererPackageName,rendererConfig:ud.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FR(t),t===null?null:t.stateNode},findFiberByHostInstance:ud.findFiberByHostInstance||KU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&&im.supportsFiber)try{v0=im.inject(QU),Qa=im}catch{}}Bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XU;Bi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J2(e))throw Error(ke(200));return GU(t,e,null,n)};Bi.createRoot=function(t,e){if(!J2(t))throw Error(ke(299));var n=!1,r="",i=dP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=X2(t,1,!1,null,null,n,!1,r,i),t[$o]=e.current,ch(t.nodeType===8?t.parentNode:t),new Z2(e)};Bi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ke(188)):(t=Object.keys(t).join(","),Error(ke(268,t)));return t=FR(e),t=t===null?null:t.stateNode,t};Bi.flushSync=function(t){return sl(t)};Bi.hydrate=function(t,e,n){if(!T0(e))throw Error(ke(200));return M0(null,t,e,!0,n)};Bi.hydrateRoot=function(t,e,n){if(!J2(t))throw Error(ke(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=dP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fP(e,null,t,1,n??null,i,!1,a,o),t[$o]=e.current,ch(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new A0(e)};Bi.render=function(t,e,n){if(!T0(e))throw Error(ke(200));return M0(null,t,e,!1,n)};Bi.unmountComponentAtNode=function(t){if(!T0(t))throw Error(ke(40));return t._reactRootContainer?(sl(function(){M0(null,null,t,!1,function(){t._reactRootContainer=null,t[$o]=null})}),!0):!1};Bi.unstable_batchedUpdates=H2;Bi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!T0(n))throw Error(ke(200));if(t==null||t._reactInternals===void 0)throw Error(ke(38));return M0(t,e,n,!1,r)};Bi.version="18.3.1-next-f1338f8080-20240426";function hP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hP)}catch(t){console.error(t)}}hP(),hR.exports=Bi;var ZU=hR.exports,pP,LS=ZU;pP=LS.createRoot,LS.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xh(){return xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xh.apply(this,arguments)}var Ns;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ns||(Ns={}));const jS="popstate";function JU(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:o,hash:s}=r.location;return gb("",{pathname:a,search:o,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:jv(i)}return tV(e,n,null,t)}function _n(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eV(){return Math.random().toString(36).substr(2,8)}function $S(t,e){return{usr:t.state,key:t.key,idx:e}}function gb(t,e,n,r){return n===void 0&&(n=null),xh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Df(e):e,{state:n,key:e&&e.key||r||eV()})}function jv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Df(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function tV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=Ns.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(xh({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){s=Ns.Pop;let y=c(),v=y==null?null:y-l;l=y,u&&u({action:s,location:m.location,delta:v})}function d(y,v){s=Ns.Push;let x=gb(m.location,y,v);l=c()+1;let g=$S(x,l),b=m.createHref(x);try{o.pushState(g,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(b)}a&&u&&u({action:s,location:m.location,delta:1})}function h(y,v){s=Ns.Replace;let x=gb(m.location,y,v);l=c();let g=$S(x,l),b=m.createHref(x);o.replaceState(g,"",b),a&&u&&u({action:s,location:m.location,delta:0})}function p(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof y=="string"?y:jv(y);return x=x.replace(/ $/,"%20"),_n(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let m={get action(){return s},get location(){return t(i,o)},listen(y){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(jS,f),u=y,()=>{i.removeEventListener(jS,f),u=null}},createHref(y){return e(i,y)},createURL:p,encodeLocation(y){let v=p(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:h,go(y){return o.go(y)}};return m}var zS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zS||(zS={}));function nV(t,e,n){return n===void 0&&(n="/"),rV(t,e,n,!1)}function rV(t,e,n,r){let i=typeof e=="string"?Df(e):e,a=nf(i.pathname||"/",n);if(a==null)return null;let o=vP(t);iV(o);let s=null;for(let u=0;s==null&&u<o.length;++u){let l=mV(a);s=hV(o[u],l,r)}return s}function vP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,s)=>{let u={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(_n(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Ls([r,u.relativePath]),c=n.concat(u);a.children&&a.children.length>0&&(_n(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),vP(a.children,e,c,l)),!(a.path==null&&!a.index)&&e.push({path:l,score:fV(l,a.index),routesMeta:c})};return t.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let u of gP(a.path))i(a,o,u)}),e}function gP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=gP(r.join("/")),s=[];return s.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&s.push(...o),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function iV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const aV=/^:[\w-]+$/,oV=3,sV=2,uV=1,lV=10,cV=-2,US=t=>t==="*";function fV(t,e){let n=t.split("/"),r=n.length;return n.some(US)&&(r+=cV),e&&(r+=sV),n.filter(i=>!US(i)).reduce((i,a)=>i+(aV.test(a)?oV:a===""?uV:lV),r)}function dV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function hV(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let s=0;s<r.length;++s){let u=r[s],l=s===r.length-1,c=a==="/"?e:e.slice(a.length)||"/",f=$v({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=$v({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Ls([a,f.pathname]),pathnameBase:xV(Ls([a,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(a=Ls([a,f.pathnameBase]))}return o}function $v(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=s[f]||"";o=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const p=s[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:o,pattern:t}}function pV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function mV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function nf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function vV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Df(t):t;return{pathname:n?n.startsWith("/")?n:gV(n,e):e,search:bV(r),hash:wV(i)}}function gV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function h1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function e_(t,e){let n=yV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function t_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Df(t):(i=xh({},t),_n(!i.pathname||!i.pathname.includes("?"),h1("?","pathname","search",i)),_n(!i.pathname||!i.pathname.includes("#"),h1("#","pathname","hash",i)),_n(!i.search||!i.search.includes("#"),h1("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}s=f>=0?e[f]:"/"}let u=vV(i,s),l=o&&o!=="/"&&o.endsWith("/"),c=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Ls=t=>t.join("/").replace(/\/\/+/g,"/"),xV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _V(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yP=["post","put","patch","delete"];new Set(yP);const EV=["get",...yP];new Set(EV);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bh(){return bh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bh.apply(this,arguments)}const I0=W.createContext(null),xP=W.createContext(null),Zo=W.createContext(null),k0=W.createContext(null),uu=W.createContext({outlet:null,matches:[],isDataRoute:!1}),bP=W.createContext(null);function CV(t,e){let{relative:n}=e===void 0?{}:e;Af()||_n(!1);let{basename:r,navigator:i}=W.useContext(Zo),{hash:a,pathname:o,search:s}=R0(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ls([r,o])),i.createHref({pathname:u,search:s,hash:a})}function Af(){return W.useContext(k0)!=null}function Cl(){return Af()||_n(!1),W.useContext(k0).location}function wP(t){W.useContext(Zo).static||W.useLayoutEffect(t)}function Nl(){let{isDataRoute:t}=W.useContext(uu);return t?BV():NV()}function NV(){Af()||_n(!1);let t=W.useContext(I0),{basename:e,future:n,navigator:r}=W.useContext(Zo),{matches:i}=W.useContext(uu),{pathname:a}=Cl(),o=JSON.stringify(e_(i,n.v7_relativeSplatPath)),s=W.useRef(!1);return wP(()=>{s.current=!0}),W.useCallback(function(l,c){if(c===void 0&&(c={}),!s.current)return;if(typeof l=="number"){r.go(l);return}let f=t_(l,JSON.parse(o),a,c.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ls([e,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[e,r,o,a,t])}function R0(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=W.useContext(Zo),{matches:i}=W.useContext(uu),{pathname:a}=Cl(),o=JSON.stringify(e_(i,r.v7_relativeSplatPath));return W.useMemo(()=>t_(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function SV(t,e){return DV(t,e)}function DV(t,e,n,r){Af()||_n(!1);let{navigator:i,static:a}=W.useContext(Zo),{matches:o}=W.useContext(uu),s=o[o.length-1],u=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=Cl(),f;if(e){var d;let v=typeof e=="string"?Df(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||_n(!1),f=v}else f=c;let h=f.pathname||"/",p=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=!a&&n&&n.matches&&n.matches.length>0?n.matches:nV(t,{pathname:p}),y=kV(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},u,v.params),pathname:Ls([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Ls([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&y?W.createElement(k0.Provider,{value:{location:bh({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ns.Pop}},y):y}function AV(){let t=OV(),e=_V(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),n?W.createElement("pre",{style:i},n):null,null)}const TV=W.createElement(AV,null);class MV extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?W.createElement(uu.Provider,{value:this.props.routeContext},W.createElement(bP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function IV(t){let{routeContext:e,match:n,children:r}=t,i=W.useContext(I0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),W.createElement(uu.Provider,{value:e},r)}function kV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=(i=n)==null?void 0:i.errors;if(s!=null){let c=o.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);c>=0||_n(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,y=null;n&&(h=s&&f.route.id?s[f.route.id]:void 0,m=f.route.errorElement||TV,u&&(l<0&&d===0?(p=!0,y=null):l===d&&(p=!0,y=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,d+1)),x=()=>{let g;return h?g=m:p?g=y:f.route.Component?g=W.createElement(f.route.Component,null):f.route.element?g=f.route.element:g=c,W.createElement(IV,{match:f,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:g})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?W.createElement(MV,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var _P=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_P||{}),zv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zv||{});function RV(t){let e=W.useContext(I0);return e||_n(!1),e}function FV(t){let e=W.useContext(xP);return e||_n(!1),e}function PV(t){let e=W.useContext(uu);return e||_n(!1),e}function EP(t){let e=PV(),n=e.matches[e.matches.length-1];return n.route.id||_n(!1),n.route.id}function OV(){var t;let e=W.useContext(bP),n=FV(zv.UseRouteError),r=EP(zv.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function BV(){let{router:t}=RV(_P.UseNavigateStable),e=EP(zv.UseNavigateStable),n=W.useRef(!1);return wP(()=>{n.current=!0}),W.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,bh({fromRouteId:e},a)))},[t,e])}function LV(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function jV(t){let{to:e,replace:n,state:r,relative:i}=t;Af()||_n(!1);let{future:a,static:o}=W.useContext(Zo),{matches:s}=W.useContext(uu),{pathname:u}=Cl(),l=Nl(),c=t_(e,e_(s,a.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return W.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function nn(t){_n(!1)}function $V(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ns.Pop,navigator:a,static:o=!1,future:s}=t;Af()&&_n(!1);let u=e.replace(/^\/*/,"/"),l=W.useMemo(()=>({basename:u,navigator:a,static:o,future:bh({v7_relativeSplatPath:!1},s)}),[u,s,a,o]);typeof r=="string"&&(r=Df(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=W.useMemo(()=>{let y=nf(c,u);return y==null?null:{location:{pathname:y,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:W.createElement(Zo.Provider,{value:l},W.createElement(k0.Provider,{children:n,value:m}))}function zV(t){let{children:e,location:n}=t;return SV(yb(e),n)}new Promise(()=>{});function yb(t,e){e===void 0&&(e=[]);let n=[];return W.Children.forEach(t,(r,i)=>{if(!W.isValidElement(r))return;let a=[...e,i];if(r.type===W.Fragment){n.push.apply(n,yb(r.props.children,a));return}r.type!==nn&&_n(!1),!r.props.index||!r.props.children||_n(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=yb(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uv(){return Uv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uv.apply(this,arguments)}function CP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function UV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function VV(t,e){return t.button===0&&(!e||e==="_self")&&!UV(t)}const WV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qV=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],HV="6";try{window.__reactRouterVersion=HV}catch{}const GV=W.createContext({isTransitioning:!1}),KV="startTransition",VS=z$[KV];function YV(t){let{basename:e,children:n,future:r,window:i}=t,a=W.useRef();a.current==null&&(a.current=JU({window:i,v5Compat:!0}));let o=a.current,[s,u]=W.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=W.useCallback(f=>{l&&VS?VS(()=>u(f)):u(f)},[u,l]);return W.useLayoutEffect(()=>o.listen(c),[o,c]),W.useEffect(()=>LV(r),[r]),W.createElement($V,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:o,future:r})}const XV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ai=W.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:s,target:u,to:l,preventScrollReset:c,viewTransition:f}=e,d=CP(e,WV),{basename:h}=W.useContext(Zo),p,m=!1;if(typeof l=="string"&&QV.test(l)&&(p=l,XV))try{let g=new URL(window.location.href),b=l.startsWith("//")?new URL(g.protocol+l):new URL(l),w=nf(b.pathname,h);b.origin===g.origin&&w!=null?l=w+b.search+b.hash:m=!0}catch{}let y=CV(l,{relative:i}),v=JV(l,{replace:o,state:s,target:u,preventScrollReset:c,relative:i,viewTransition:f});function x(g){r&&r(g),g.defaultPrevented||v(g)}return W.createElement("a",Uv({},d,{href:p||y,onClick:m||a?r:x,ref:n,target:u}))}),am=W.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:o=!1,style:s,to:u,viewTransition:l,children:c}=e,f=CP(e,qV),d=R0(u,{relative:f.relative}),h=Cl(),p=W.useContext(xP),{navigator:m,basename:y}=W.useContext(Zo),v=p!=null&&eW(d)&&l===!0,x=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,g=h.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(g=g.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&y&&(b=nf(b,y)||b);const w=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let _=g===x||!o&&g.startsWith(x)&&g.charAt(w)==="/",E=b!=null&&(b===x||!o&&b.startsWith(x)&&b.charAt(x.length)==="/"),C={isActive:_,isPending:E,isTransitioning:v},N=_?r:void 0,D;typeof a=="function"?D=a(C):D=[a,_?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof s=="function"?s(C):s;return W.createElement(Ai,Uv({},f,{"aria-current":N,className:D,ref:n,style:A,to:u,viewTransition:l}),typeof c=="function"?c(C):c)});var xb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xb||(xb={}));var WS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(WS||(WS={}));function ZV(t){let e=W.useContext(I0);return e||_n(!1),e}function JV(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:s}=e===void 0?{}:e,u=Nl(),l=Cl(),c=R0(t,{relative:o});return W.useCallback(f=>{if(VV(f,n)){f.preventDefault();let d=r!==void 0?r:jv(l)===jv(c);u(t,{replace:d,state:i,preventScrollReset:a,relative:o,viewTransition:s})}},[l,u,c,r,i,n,t,a,o,s])}function eW(t,e){e===void 0&&(e={});let n=W.useContext(GV);n==null&&_n(!1);let{basename:r}=ZV(xb.useViewTransitionState),i=R0(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=nf(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=nf(n.nextLocation.pathname,r)||n.nextLocation.pathname;return $v(i.pathname,o)!=null||$v(i.pathname,a)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Rt=(t,e)=>{const n=W.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:s="",children:u,...l},c)=>W.createElement("svg",{ref:c,...tW,width:i,height:i,stroke:r,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${nW(t)}`,s].join(" "),...l},[...e.map(([f,d])=>W.createElement(f,d)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=Rt("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=Rt("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=Rt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Rt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=Rt("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=Rt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=Rt("CarTaxiFront",[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=Rt("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=Rt("Carrot",[["path",{d:"M2.27 21.7s9.87-3.5 12.73-6.36a4.5 4.5 0 0 0-6.36-6.37C5.77 11.84 2.27 21.7 2.27 21.7zM8.64 14l-2.05-2.04M15.34 15l-2.46-2.46",key:"rfqxbe"}],["path",{d:"M22 9s-1.33-2-3.5-2C16.86 7 15 9 15 9s1.33 2 3.5 2S22 9 22 9z",key:"6b25w4"}],["path",{d:"M15 2s-2 1.33-2 3.5S15 9 15 9s2-1.84 2-3.5C17 3.33 15 2 15 2z",key:"fn65lo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=Rt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=Rt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=Rt("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=Rt("Flower2",[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=Rt("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=Rt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=Rt("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=Rt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=Rt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=Rt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=Rt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=Rt("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=Rt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=Rt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=Rt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=Rt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pW=Rt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mW=Rt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vW=Rt("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gW=Rt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yW=Rt("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xW=Rt("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bW=Rt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wW=Rt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=Rt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Rt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Rt("Triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _W=Rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function kP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=kP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ju(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=kP(t))&&(r&&(r+=" "),r+=e);return r}function EW(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}EW(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var rp=t=>typeof t=="number"&&!isNaN(t),ul=t=>typeof t=="string",Vo=t=>typeof t=="function",CW=t=>ul(t)||rp(t),Cb=t=>ul(t)||Vo(t)?t:null,NW=(t,e)=>t===!1||rp(t)&&t>0?t:e,Nb=t=>W.isValidElement(t)||ul(t)||Vo(t)||rp(t);function SW(t,e,n=300){let{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function DW({enter:t,exit:e,appendPosition:n=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:a,position:o,preventExitTransition:s,done:u,nodeRef:l,isIn:c,playToast:f}){let d=n?`${t}--${o}`:t,h=n?`${e}--${o}`:e,p=W.useRef(0);return W.useLayoutEffect(()=>{let m=l.current,y=d.split(" "),v=x=>{x.target===l.current&&(f(),m.removeEventListener("animationend",v),m.removeEventListener("animationcancel",v),p.current===0&&x.type!=="animationcancel"&&m.classList.remove(...y))};m.classList.add(...y),m.addEventListener("animationend",v),m.addEventListener("animationcancel",v)},[]),W.useEffect(()=>{let m=l.current,y=()=>{m.removeEventListener("animationend",y),r?SW(m,u,i):u()};c||(s?y():(p.current=1,m.className+=` ${h}`,m.addEventListener("animationend",y)))},[c]),on.createElement(on.Fragment,null,a)}}function KS(t,e){return{content:RP(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function RP(t,e,n=!1){return W.isValidElement(t)&&!ul(t.type)?W.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):Vo(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function AW({closeToast:t,theme:e,ariaLabel:n="close"}){return on.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),t(!0)},"aria-label":n},on.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},on.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function TW({delay:t,isRunning:e,closeToast:n,type:r="default",hide:i,className:a,controlledProgress:o,progress:s,rtl:u,isIn:l,theme:c}){let f=i||o&&s===0,d={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};o&&(d.transform=`scaleX(${s})`);let h=Ju("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${c}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":u}),p=Vo(a)?a({rtl:u,type:r,defaultClassName:h}):Ju(h,a),m={[o&&s>=1?"onTransitionEnd":"onAnimationEnd"]:o&&s<1?null:()=>{l&&n()}};return on.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},on.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${c} Toastify__progress-bar--${r}`}),on.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:p,style:d,...m}))}var MW=1,FP=()=>`${MW++}`;function IW(t,e,n){let r=1,i=0,a=[],o=[],s=e,u=new Map,l=new Set,c=x=>(l.add(x),()=>l.delete(x)),f=()=>{o=Array.from(u.values()),l.forEach(x=>x())},d=({containerId:x,toastId:g,updateId:b})=>{let w=x?x!==t:t!==1,_=u.has(g)&&b==null;return w||_},h=(x,g)=>{u.forEach(b=>{var w;(g==null||g===b.props.toastId)&&((w=b.toggle)==null||w.call(b,x))})},p=x=>{var g,b;(b=(g=x.props)==null?void 0:g.onClose)==null||b.call(g,x.removalReason),x.isActive=!1},m=x=>{if(x==null)u.forEach(p);else{let g=u.get(x);g&&p(g)}f()},y=()=>{i-=a.length,a=[]},v=x=>{var g,b;let{toastId:w,updateId:_}=x.props,E=_==null;x.staleId&&u.delete(x.staleId),x.isActive=!0,u.set(w,x),f(),n(KS(x,E?"added":"updated")),E&&((b=(g=x.props).onOpen)==null||b.call(g))};return{id:t,props:s,observe:c,toggle:h,removeToast:m,toasts:u,clearQueue:y,buildToast:(x,g)=>{if(d(g))return;let{toastId:b,updateId:w,data:_,staleId:E,delay:C}=g,N=w==null;N&&i++;let D={...s,style:s.toastStyle,key:r++,...Object.fromEntries(Object.entries(g).filter(([T,R])=>R!=null)),toastId:b,updateId:w,data:_,isIn:!1,className:Cb(g.className||s.toastClassName),progressClassName:Cb(g.progressClassName||s.progressClassName),autoClose:g.isLoading?!1:NW(g.autoClose,s.autoClose),closeToast(T){u.get(b).removalReason=T,m(b)},deleteToast(){let T=u.get(b);if(T!=null){if(n(KS(T,"removed")),u.delete(b),i--,i<0&&(i=0),a.length>0){v(a.shift());return}f()}}};D.closeButton=s.closeButton,g.closeButton===!1||Nb(g.closeButton)?D.closeButton=g.closeButton:g.closeButton===!0&&(D.closeButton=Nb(s.closeButton)?s.closeButton:!0);let A={content:x,props:D,staleId:E};s.limit&&s.limit>0&&i>s.limit&&N?a.push(A):rp(C)?setTimeout(()=>{v(A)},C):v(A)},setProps(x){s=x},setToggle:(x,g)=>{let b=u.get(x);b&&(b.toggle=g)},isToastActive:x=>{var g;return(g=u.get(x))==null?void 0:g.isActive},getSnapshot:()=>o}}var Wr=new Map,_h=[],Sb=new Set,kW=t=>Sb.forEach(e=>e(t)),PP=()=>Wr.size>0;function RW(){_h.forEach(t=>BP(t.content,t.options)),_h=[]}var FW=(t,{containerId:e})=>{var n;return(n=Wr.get(e||1))==null?void 0:n.toasts.get(t)};function OP(t,e){var n;if(e)return!!((n=Wr.get(e))!=null&&n.isToastActive(t));let r=!1;return Wr.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function PW(t){if(!PP()){_h=_h.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||CW(t))Wr.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Wr.get(t.containerId);e?e.removeToast(t.id):Wr.forEach(n=>{n.removeToast(t.id)})}}var OW=(t={})=>{Wr.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function BP(t,e){Nb(t)&&(PP()||_h.push({content:t,options:e}),Wr.forEach(n=>{n.buildToast(t,e)}))}function BW(t){var e;(e=Wr.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function LP(t,e){Wr.forEach(n=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===n.id)&&n.toggle(t,e==null?void 0:e.id)})}function LW(t){let e=t.containerId||1;return{subscribe(n){let r=IW(e,t,kW);Wr.set(e,r);let i=r.observe(n);return RW(),()=>{i(),Wr.delete(e)}},setProps(n){var r;(r=Wr.get(e))==null||r.setProps(n)},getSnapshot(){var n;return(n=Wr.get(e))==null?void 0:n.getSnapshot()}}}function jW(t){return Sb.add(t),()=>{Sb.delete(t)}}function $W(t){return t&&(ul(t.toastId)||rp(t.toastId))?t.toastId:FP()}function ip(t,e){return BP(t,e),e.toastId}function F0(t,e){return{...e,type:e&&e.type||t,toastId:$W(e)}}function P0(t){return(e,n)=>ip(e,F0(t,n))}function Nt(t,e){return ip(t,F0("default",e))}Nt.loading=(t,e)=>ip(t,F0("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function zW(t,{pending:e,error:n,success:r},i){let a;e&&(a=ul(e)?Nt.loading(e,i):Nt.loading(e.render,{...i,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(l,c,f)=>{if(c==null){Nt.dismiss(a);return}let d={type:l,...o,...i,data:f},h=ul(c)?{render:c}:c;return a?Nt.update(a,{...d,...h}):Nt(h.render,{...d,...h}),f},u=Vo(t)?t():t;return u.then(l=>s("success",r,l)).catch(l=>s("error",n,l)),u}Nt.promise=zW;Nt.success=P0("success");Nt.info=P0("info");Nt.error=P0("error");Nt.warning=P0("warning");Nt.warn=Nt.warning;Nt.dark=(t,e)=>ip(t,F0("default",{theme:"dark",...e}));function UW(t){PW(t)}Nt.dismiss=UW;Nt.clearWaitingQueue=OW;Nt.isActive=OP;Nt.update=(t,e={})=>{let n=FW(t,e);if(n){let{props:r,content:i}=n,a={delay:100,...r,...e,toastId:e.toastId||t,updateId:FP()};a.toastId!==t&&(a.staleId=t);let o=a.render||i;delete a.render,ip(o,a)}};Nt.done=t=>{Nt.update(t,{progress:1})};Nt.onChange=jW;Nt.play=t=>LP(!0,t);Nt.pause=t=>LP(!1,t);function VW(t){var e;let{subscribe:n,getSnapshot:r,setProps:i}=W.useRef(LW(t)).current;i(t);let a=(e=W.useSyncExternalStore(n,r,r))==null?void 0:e.slice();function o(s){if(!a)return[];let u=new Map;return t.newestOnTop&&a.reverse(),a.forEach(l=>{let{position:c}=l.props;u.has(c)||u.set(c,[]),u.get(c).push(l)}),Array.from(u,l=>s(l[0],l[1]))}return{getToastToRender:o,isToastActive:OP,count:a==null?void 0:a.length}}function WW(t){let[e,n]=W.useState(!1),[r,i]=W.useState(!1),a=W.useRef(null),o=W.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:s,pauseOnHover:u,closeToast:l,onClick:c,closeOnClick:f}=t;BW({id:t.toastId,containerId:t.containerId,fn:n}),W.useEffect(()=>{if(t.pauseOnFocusLoss)return d(),()=>{h()}},[t.pauseOnFocusLoss]);function d(){document.hasFocus()||v(),window.addEventListener("focus",y),window.addEventListener("blur",v)}function h(){window.removeEventListener("focus",y),window.removeEventListener("blur",v)}function p(E){if(t.draggable===!0||t.draggable===E.pointerType){x();let C=a.current;o.canCloseOnClick=!0,o.canDrag=!0,C.style.transition="none",t.draggableDirection==="x"?(o.start=E.clientX,o.removalDistance=C.offsetWidth*(t.draggablePercent/100)):(o.start=E.clientY,o.removalDistance=C.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function m(E){let{top:C,bottom:N,left:D,right:A}=a.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&t.pauseOnHover&&E.clientX>=D&&E.clientX<=A&&E.clientY>=C&&E.clientY<=N?v():y()}function y(){n(!0)}function v(){n(!1)}function x(){o.didMove=!1,document.addEventListener("pointermove",b),document.addEventListener("pointerup",w)}function g(){document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",w)}function b(E){let C=a.current;if(o.canDrag&&C){o.didMove=!0,e&&v(),t.draggableDirection==="x"?o.delta=E.clientX-o.start:o.delta=E.clientY-o.start,o.start!==E.clientX&&(o.canCloseOnClick=!1);let N=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;C.style.transform=`translate3d(${N},0)`,C.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function w(){g();let E=a.current;if(o.canDrag&&o.didMove&&E){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),t.closeToast(!0),t.collapseAll();return}E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}let _={onPointerDown:p,onPointerUp:m};return s&&u&&(_.onMouseEnter=v,t.stacked||(_.onMouseLeave=y)),f&&(_.onClick=E=>{c&&c(E),o.canCloseOnClick&&l(!0)}),{playToast:y,pauseToast:v,isRunning:e,preventExitTransition:r,toastRef:a,eventHandlers:_}}var qW=typeof window<"u"?W.useLayoutEffect:W.useEffect,O0=({theme:t,type:e,isLoading:n,...r})=>on.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function HW(t){return on.createElement(O0,{...t},on.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function GW(t){return on.createElement(O0,{...t},on.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function KW(t){return on.createElement(O0,{...t},on.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function YW(t){return on.createElement(O0,{...t},on.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function XW(){return on.createElement("div",{className:"Toastify__spinner"})}var Db={info:GW,warning:HW,success:KW,error:YW,spinner:XW},QW=t=>t in Db;function ZW({theme:t,type:e,isLoading:n,icon:r}){let i=null,a={theme:t,type:e};return r===!1||(Vo(r)?i=r({...a,isLoading:n}):W.isValidElement(r)?i=W.cloneElement(r,a):n?i=Db.spinner():QW(e)&&(i=Db[e](a))),i}var JW=t=>{let{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:a}=WW(t),{closeButton:o,children:s,autoClose:u,onClick:l,type:c,hideProgressBar:f,closeToast:d,transition:h,position:p,className:m,style:y,progressClassName:v,updateId:x,role:g,progress:b,rtl:w,toastId:_,deleteToast:E,isIn:C,isLoading:N,closeOnClick:D,theme:A,ariaLabel:T}=t,R=Ju("Toastify__toast",`Toastify__toast-theme--${A}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":w},{"Toastify__toast--close-on-click":D}),F=Vo(m)?m({rtl:w,position:p,type:c,defaultClassName:R}):Ju(R,m),O=ZW(t),I=!!b||!u,M={closeToast:d,type:c,theme:A},B=null;return o===!1||(Vo(o)?B=o(M):W.isValidElement(o)?B=W.cloneElement(o,M):B=AW(M)),on.createElement(h,{isIn:C,done:E,position:p,preventExitTransition:n,nodeRef:r,playToast:a},on.createElement("div",{id:_,tabIndex:0,onClick:l,"data-in":C,className:F,...i,style:y,ref:r,...C&&{role:g,"aria-label":T}},O!=null&&on.createElement("div",{className:Ju("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},O),RP(s,t,!e),B,!t.customProgressBar&&on.createElement(TW,{...x&&!I?{key:`p-${x}`}:{},rtl:w,theme:A,delay:u,isRunning:e,isIn:C,closeToast:d,hide:f,type:c,className:v,controlledProgress:I,progress:b||0})))},eq=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),tq=DW(eq("bounce",!0)),nq={position:"top-right",transition:tq,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function rq(t){let e={...nq,...t},n=t.stacked,[r,i]=W.useState(!0),a=W.useRef(null),{getToastToRender:o,isToastActive:s,count:u}=VW(e),{className:l,style:c,rtl:f,containerId:d,hotKeys:h}=e;function p(y){let v=Ju("Toastify__toast-container",`Toastify__toast-container--${y}`,{"Toastify__toast-container--rtl":f});return Vo(l)?l({position:y,rtl:f,defaultClassName:v}):Ju(v,Cb(l))}function m(){n&&(i(!0),Nt.play())}return qW(()=>{var y;if(n){let v=a.current.querySelectorAll('[data-in="true"]'),x=12,g=(y=e.position)==null?void 0:y.includes("top"),b=0,w=0;Array.from(v).reverse().forEach((_,E)=>{let C=_;C.classList.add("Toastify__toast--stacked"),E>0&&(C.dataset.collapsed=`${r}`),C.dataset.pos||(C.dataset.pos=g?"top":"bot");let N=b*(r?.2:1)+(r?0:x*E);C.style.setProperty("--y",`${g?N:N*-1}px`),C.style.setProperty("--g",`${x}`),C.style.setProperty("--s",`${1-(r?w:0)}`),b+=C.offsetHeight,w+=.025})}},[r,u,n]),W.useEffect(()=>{function y(v){var x;let g=a.current;h(v)&&((x=g.querySelector('[tabIndex="0"]'))==null||x.focus(),i(!1),Nt.pause()),v.key==="Escape"&&(document.activeElement===g||g!=null&&g.contains(document.activeElement))&&(i(!0),Nt.play())}return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[h]),on.createElement("section",{ref:a,className:"Toastify",id:d,onMouseEnter:()=>{n&&(i(!1),Nt.pause())},onMouseLeave:m,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((y,v)=>{let x=v.length?{...c}:{...c,pointerEvents:"none"};return on.createElement("div",{tabIndex:-1,className:p(y),"data-stacked":n,style:x,key:`c-${y}`},v.map(({content:g,props:b})=>on.createElement(JW,{...b,stacked:n,collapseAll:m,isIn:s(b.toastId,b.containerId),key:`t-${b.key}`},g)))}))}function iq(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"Welcome to Nature's Encyclopedia"}),S.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:aq.map(t=>S.jsxs(Ai,{to:t.path,className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6",children:[S.jsxs("div",{className:"flex items-center mb-4",children:[t.icon,S.jsx("h2",{className:"text-2xl font-semibold ml-3",children:t.title})]}),S.jsx("p",{className:"text-gray-600",children:t.description})]},t.path))})]})}const aq=[{title:"Animals",path:"/animals",icon:S.jsx(yW,{className:"w-8 h-8 text-green-600"}),description:"Discover the diverse world of land animals, from majestic mammals to fascinating reptiles."},{title:"Aquatic Life",path:"/aquatic",icon:S.jsx(TP,{className:"w-8 h-8 text-blue-600"}),description:"Explore the mysterious depths of oceans and learn about marine life."},{title:"Birds",path:"/birds",icon:S.jsx(SP,{className:"w-8 h-8 text-yellow-600"}),description:"Learn about various bird species, their habitats, and behaviors."},{title:"Fruits",path:"/fruits",icon:S.jsx(NP,{className:"w-8 h-8 text-red-600"}),description:"Explore nutritious and delicious fruits from around the world."},{title:"Vegetables",path:"/vegetables",icon:S.jsx(AP,{className:"w-8 h-8 text-orange-600"}),description:"Discover healthy vegetables and their benefits for your well-being."},{title:"Flowers",path:"/flowers",icon:S.jsx(MP,{className:"w-8 h-8 text-pink-500"}),description:"Get to know beautiful flowers and their significance in culture and nature."},{title:"Vehicles",path:"/vehicles",icon:S.jsx(aW,{className:"w-8 h-8 text-gray-600"}),description:"Learn about different types of vehicles and how they help us in daily life."},{title:"Math",path:"/math",icon:S.jsx(n_,{className:"w-8 h-8 text-purple-600"}),description:"Explore the world of mathematics, from basic concepts to advanced theories and practical applications."}];function oq(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12 bg-white",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Land Animals"}),S.jsxs("section",{id:"lions",className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Lions"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1669725687221-6fe12c2da6b1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8TGlvbnN8ZW58MHx8MHx8fDA%3D",alt:"Lion",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Lions"}),S.jsx("p",{className:"text-gray-700",children:'Lions are one of the most iconic big cats, known as the "King of the Jungle". They live in prides and are excellent hunters, working together to catch their prey. Adult males are easily recognizable by their impressive manes, which can vary in color from blonde to black.'})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/IPiyo332Gks",title:"Lion Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Lion Behavior"}),S.jsx("p",{className:"text-gray-700",children:"Watch this fascinating documentary about lion behavior in the wild, their social structure, and hunting techniques. Lions are the only truly social cats, living in groups called prides that typically consist of related females, their cubs, and a small number of adult males."})]})]})]}),S.jsxs("section",{id:"endangered-species",className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Endangered Species"}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:"https://images.unsplash.com/flagged/photo-1557650454-65194af63bf9?w=300&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Umhpbm98ZW58MHx8MHx8fDA%3D",alt:"Rhino",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"White Rhinoceros"}),S.jsx("p",{className:"text-gray-700",children:"The white rhinoceros is one of the largest land mammals. Despite their name, they are actually gray in color. They are heavily threatened by poaching for their horns."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1581281863883-2469417a1668?w=300&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8R29yaWxsYXxlbnwwfHwwfHx8MA%3D%3D",alt:"Gorilla",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mountain Gorilla"}),S.jsx("p",{className:"text-gray-700",children:"Mountain gorillas are gentle giants that share 98% of their DNA with humans. They live in the mountain forests of central Africa and are endangered due to habitat loss."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1615824996195-f780bba7cfab?w=300&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8VGlnZXJ8ZW58MHx8MHx8fDA%3D",alt:"Tiger",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Bengal Tiger"}),S.jsx("p",{className:"text-gray-700",children:"The Bengal tiger is one of the most magnificent big cats, known for its distinctive orange coat with black stripes. Each tiger's stripe pattern is unique, like human fingerprints."})]})]})]}),S.jsxs("section",{id:"reptiles",className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Reptiles"}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1661843714194-62e7bc511d8b?q=80&w=1211&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Komodo Dragon",className:"rounded-lg mb-4 w-full h-72 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Komodo Dragons"}),S.jsx("p",{className:"text-gray-700 mb-4",children:"Komodo dragons are the largest living species of lizard in the world. These powerful predators can grow up to 10 feet in length and weigh up to 150 pounds. They are found exclusively on several islands in Indonesia."}),S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Habitat"}),S.jsx("p",{children:"Indonesian islands"})]}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Diet"}),S.jsx("p",{children:"Carnivorous - They hunt deer, pigs, and even water buffalo"})]})]})]})]}),S.jsxs("section",{id:"cheethah",className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Cheetah"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1664304362237-8040f0ecac98?w=300&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8Q0hFRVRBSFN8ZW58MHx8MHx8fDA%3D",alt:"Cheetah",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Cheetah"}),S.jsx("p",{className:"text-gray-700",children:"The cheetah (Acinonyx jubatus) is renowned as the fastest land animal, capable of accelerating from 0 to 70 km/h in just two seconds. This incredible speed is facilitated by its lightweight frame, long legs, and semi-retractable claws that provide excellent traction. Unlike other big cats, cheetahs are diurnal hunters, primarily active during the day."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/k-Me1T9Pz40",title:"Cheetah Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Cheetah Behavior"}),S.jsx("p",{className:"text-gray-700",children:"You should watch this video because it shows a cheetah running in slow motion, letting you see every powerful movement as it sprints. It's short, super clear, and beautifully filmed by BBC Earth. You'll get to understand why cheetahs are the fastest animals on land, and it's just really cool to watch how their bodies work in such an amazing way."})]})]})]}),S.jsxs("section",{id:"monkey",className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Monkey"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1531989417401-0f85f7e673f8?w=300&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8TW9ua2V5fGVufDB8fDB8fHww",alt:"Monkey",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Monkey"}),S.jsx("p",{className:"text-gray-700",children:"Monkeys are intelligent, playful animals known for their agility and curiosity. They belong to the primate family and are closely related to humans. There are two main types: Old World monkeys (like baboons and macaques, found in Africa and Asia) and New World monkeys (like capuchins and howler monkeys, found in Central and South America). Monkeys use their hands and tails to climb, grab food, and interact with each other."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/icd_ob8UWgQ?si=c18JTtPp7nxMeUia",title:"Monkey Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Monkey Behavior"}),S.jsx("p",{className:"text-gray-700",children:"You should watch this video if you want to learn faster and understand complex topics better. It explains the Feynman Technique, a proven method to boost comprehension by simplifying concepts, teaching them to others, and refining your knowledge. It's short, practical, and offers clear examples, making it useful for students, professionals, or anyone tackling new subjects. If you're struggling with retention or clarity, this could help you study smarter."})]})]})]})]})}function sq(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12 bg-white",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Aquatic Life"}),S.jsx("section",{id:"ocean-ecosystems",className:"mb-12 ",children:S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 ",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Ocean Ecosystems"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1661841439995-1706237c83dc?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Coral Reef",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Coral Reefs"}),S.jsx("p",{className:"text-gray-700",children:'Coral reefs are diverse underwater ecosystems that provide habitat for countless marine species. They are often called the "rainforests of the sea" due to their rich biodiversity.'})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/J2BKd5e15Jc",title:"Coral Reef Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Life on the Reef"}),S.jsx("p",{className:"text-gray-700",children:"Explore the fascinating world of coral reefs and learn about the incredible variety of life they support."})]})]})]})}),S.jsxs("section",{id:"marine-mammals",className:"grid md:grid-cols-2 gap-8 mb-12",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Marine Mammals"}),S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1661847613093-bbb6d1c0f73a?q=80&w=1085&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Humpback Whale",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Whales"}),S.jsx("p",{className:"text-gray-700",children:"Whales are the largest animals on Earth. These magnificent creatures are known for their intelligence, complex social structures, and haunting songs that can travel for miles underwater."})]}),S.jsxs("div",{id:"deep-sea",className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Deep Sea Creatures"}),S.jsx("img",{src:"https://images.unsplash.com/photo-1545671913-b89ac1b4ac10",alt:"Deep Sea Creature",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mysterious Depths"}),S.jsx("p",{className:"text-gray-700",children:"The deep ocean remains one of Earth's last frontiers. New species are discovered regularly in these dark waters, where creatures have evolved fascinating adaptations to survive."})]})]}),S.jsxs("section",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[S.jsxs("div",{id:"frogs",className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Amphibians"}),S.jsx("img",{src:"https://images.unsplash.com/photo-1682097548906-88eff998ae17?q=80&w=1074&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Frogs",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Frogs"}),S.jsx("p",{className:"text-gray-700",children:"Frogs are small, tailless amphibians known for their powerful hind legs, bulging eyes, and croaky calls. Found in a variety of habitats ranging from tropical rainforests to temperate ponds, frogs play a vital role in maintaining ecological balance by feeding on insects and serving as prey for many animals. Their permeable skin allows them to absorb water and oxygen, making them highly sensitive to environmental changes. Frogs undergo a fascinating transformation from tadpoles to adults through metamorphosis, symbolizing growth and adaptability."})]}),S.jsxs("div",{id:"mollusks",className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Mollusks"}),S.jsx("img",{src:"https://plus.unsplash.com/premium_photo-1723733104322-827186b5eb9e?q=80&w=1032&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Octopus",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Octopus"}),S.jsx("p",{className:"text-gray-700",children:"Octopuses are highly intelligent, soft-bodied marine animals known for their eight flexible arms lined with suction cups. Belonging to the class Cephalopoda, they possess incredible problem-solving skills, excellent eyesight, and the ability to change color and texture to blend into their surroundings. This camouflage helps them evade predators and sneak up on prey. Octopuses are also escape artists, often slipping through tiny openings thanks to their boneless bodies. Found in oceans around the world, they play a key role in marine ecosystems. Their fascinating behavior and alien-like appearance make them one of the most intriguing creatures of the sea."})]})]}),S.jsx("section",{id:"echinoderms",className:"mb-12",children:S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Echinoderms"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1721330271062-b78de2227fa3?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Sea urchins",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Sea urchins"}),S.jsx("p",{className:"text-gray-700",children:`Sea urchins are small, spiny marine animals found on the ocean floor, often in rocky or coral reef environments. They have round, hard shells called "tests," which are covered in movable spines used for protection and movement. Despite their slow pace, sea urchins play a vital role in marine ecosystems by grazing on algae, helping maintain the balance of coral reefs. They move using tube feet and spines, and some species have specialized jaws called "Aristotle's lantern" to scrape food off rocks. While some sea urchins are edible and considered a delicacy in many cultures, others can be venomous and should be handled with care.`})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/ihvKwVDw8Pc?si=QapxBZDB-vWwTwjf",title:"Sea urchins Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Life of the Sea urchins"}),S.jsx("p",{className:"text-gray-700",children:"Explore the fascinating world, Sea urchins gather in large enough numbers to form an army. sea urchins moving together in massive numbers, almost like an army. It's a surprising sight, especially since we often think of sea urchins as slow, solitary creatures."})]})]})]})})]})}function uq(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Birds of the World"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Birds of Prey"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1611689342806-0863700ce1e4",alt:"Eagle",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Eagles"}),S.jsx("p",{className:"text-gray-700",children:"Eagles are powerful birds of prey known for their excellent eyesight, strong talons, and impressive wingspan. They are skilled hunters and represent freedom in many cultures."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/2P0VCMYZenw?si=CSGly36THTf06aqR",title:"Eagle Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Eagle Behavior"}),S.jsx("p",{className:"text-gray-700",children:"Watch these majestic birds in action as they soar through the skies and demonstrate their hunting prowess."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Exotic Birds"}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1623607631063-bf81caffcaa9?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Macaws",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Macaws"}),S.jsx("p",{className:"text-gray-700",children:"Known for their vibrant colors and intelligence, macaws are among the most striking parrots in the world."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1572877183903-f6f33bbfa7c5?q=80&w=985&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Peacock",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Peacocks"}),S.jsx("p",{className:"text-gray-700",children:"Male peacocks are famous for their spectacular tail displays used to attract mates."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1591198936750-16d8e15edb9e",alt:"Hummingbird",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Hummingbirds"}),S.jsx("p",{className:"text-gray-700",children:"These tiny birds can hover in place and are the only birds that can fly backwards."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Forest Birds"}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1552727131-5fc6af16796d?q=80&w=1949&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Toucan",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Toucan"}),S.jsx("p",{className:"text-gray-700",children:"Toucans are colorful, tropical birds best known for their large, vibrant bills that can be almost as long as their bodies."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1683090565588-2cc392f0148d?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Woodpecker",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Woodpecker"}),S.jsx("p",{className:"text-gray-700",children:"Woodpeckers are fascinating birds known for their unique habit of pecking at tree trunks with their strong, chisel-like beaks."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1662867146017-7df454f67f08?q=80&w=2127&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Hornbill",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Hornbill"}),S.jsx("p",{className:"text-gray-700",children:"Hornbills are striking birds known for their large, curved bills and the distinctive casque (a helmet-like structure) on top of their beaks."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:" Wetland & Water Birds"}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1595344253433-6baa8e8798f9?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Flamingo",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Flamingo"}),S.jsx("p",{className:"text-gray-700",children:"Flamingos are elegant wading birds known for their long, slender legs, graceful necks, and distinctive pink or reddish feathers."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1617344300322-516f431ff532?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Heron",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Heron"}),S.jsx("p",{className:"text-gray-700",children:"Herons are large, long-legged wading birds commonly found near freshwater habitats like lakes, rivers, and marshes."})]}),S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1521730365094-d6978fa2ac8d?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Duck",className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Duck"}),S.jsx("p",{className:"text-gray-700",children:"Ducks are versatile, water-loving birds found in a variety of environments, including ponds, lakes, rivers, and marshes."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Polar Birds"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1551415923-a2297c7fda79?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Penguin",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Penguin"}),S.jsx("p",{className:"text-gray-700",children:"Penguins are flightless birds that are uniquely adapted to life in the water. Found mostly in the Southern Hemisphere, especially in Antarctica, penguins are excellent swimmers, using their wings like flippers to propel themselves through the water at impressive speeds."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/855Al0-VMEo?si=eAcRPMwJxV4VHFdb",title:"Penguin Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Penguin Behavior"}),S.jsx("p",{className:"text-gray-700",children:"Learn about the environmental threats penguins face, including climate change and habitat loss. The documentary explores how these adorable birds adapt and survive in some of the harshest conditions on Earth."})]})]})]})]})}const lq=[{name:"Blueberries",image:"https://images.unsplash.com/photo-1498557850523-fd3d118b962e",description:"Small but mighty, blueberries are packed with antioxidants.",benefits:["High in antioxidants","Improves memory","Heart healthy"]},{name:"Oranges",image:"https://images.unsplash.com/photo-1557800636-894a64c1696f",description:"Citrus fruits known for their immune-boosting properties.",benefits:["Rich in Vitamin C","Boosts immunity","Aids digestion"]},{name:"Pomegranate",image:"https://plus.unsplash.com/premium_photo-1668076515507-c5bc223c99a4?q=80&w=1074&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Ancient fruit with modern super-food status.",benefits:["Anti-inflammatory","Heart healthy","Rich in antioxidants"]}],cq=[{name:"Strawberry",image:"https://images.unsplash.com/photo-1587393855524-087f83d95bc9?q=80&w=1060&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Strawberries are sweet, juicy fruits that are not only delicious but also packed with health benefits",benefits:["High in antioxidants","Improves memory","Heart healthy"]},{name:"Raspberry",image:"https://plus.unsplash.com/premium_photo-1675731118509-ab902002dbac?q=80&w=1032&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Raspberries are small, red, juicy berries known for their sweet-tart flavor. They are aggregate fruits made up of tiny drupelets and are often eaten fresh, added to desserts, or blended into smoothies. ",benefits:["Rich in fiber","High in antioxidants","Supports healthy digestion","Boosts immune system"]},{name:"Blackberry",image:"https://images.unsplash.com/photo-1669562064740-e7d35af4cdb3?q=80&w=1074&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Blackberries are dark, juicy berries that have a sweet-tart flavor. They grow on thorny bushes and are commonly used in jams, desserts, and smoothies. Rich in vitamins and minerals, blackberries are known for their high nutritional value and versatility in the kitchen.",benefits:["Rich in vitamins C and K","High in antioxidants","Supports brain health","Promotes healthy skin"]}];function fq(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Fruits Around the World"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Tropical Fruits"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1487376480913-24046456a727?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Tropical Fruits",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Exotic Varieties"}),S.jsx("p",{className:"text-gray-700",children:"Tropical fruits offer unique flavors and essential nutrients. From sweet mangoes to creamy avocados, these fruits are both delicious and nutritious."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/zT-dbgVoA48?si=8a86tA3ihNSRyl-x",title:"Tropical Fruits Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Growing Tropical Fruits"}),S.jsx("p",{className:"text-gray-700",children:"Learn about how tropical fruits are grown and harvested in different parts of the world."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Nutritional Benefits"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:lq.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Key Benefits"}),S.jsx("ul",{className:"list-disc list-inside",children:t.benefits.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Aggregate Fruits"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1595456040477-fabe3bb71455?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Aggregate Fruits",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Exotic Varieties"}),S.jsx("p",{className:"text-gray-700",children:"Aggregate fruits are formed from multiple ovaries of a single flower. Each ovary develops into a small fruit, and together they form a cluster."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/33rolSsj7cA?si=89Yx2mz3GVDku33S",title:"Tropical Fruits Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Growing Aggregate fruits"}),S.jsx("p",{className:"text-gray-700",children:"Tropical fruits grow best in warm, humid, and frost-free climates with plenty of sunlight and well-drained, nutrient-rich soil. They usually need a lot of rain throughout the year. Farmers often grow them using methods like intercropping, where different crops like bananas and coffee are planted together, or agroforestry, which combines fruit trees with other trees for a more natural environment."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Nutritional Benefits"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:cq.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Key Benefits"}),S.jsx("ul",{className:"list-disc list-inside",children:t.benefits.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]})]})}function dq(){return S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Vegetables: Nature's Powerhouse"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Leafy Greens"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1540420773420-3366772f4999",alt:"Leafy Greens",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"The Power of Greens"}),S.jsx("p",{className:"text-gray-700",children:"Leafy greens are among the most nutritious foods on the planet. They're packed with vitamins, minerals, and fiber while being low in calories."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/KM1FP8Avutk?si=mBGMOHDNc_E-5fof",title:"Growing Vegetables",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Growing Your Own Greens"}),S.jsx("p",{className:"text-gray-700",children:"Learn how to grow your own nutritious leafy greens at home, from seed to harvest."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Vegetable Guide"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:hq.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Nutrition Facts"}),S.jsx("ul",{className:"list-disc list-inside",children:t.nutrients.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Flower Vegetables"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://assets.grok.com/users/2d929318-21db-41d0-b951-1c2297d96d3f/generated/DJbbVH0BkuDx5k6r/image.jpg",alt:"Flower Vegetables",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"The Power of Flower Vegetables"}),S.jsx("p",{className:"text-gray-700",children:"Flower vegetables are the edible flowering parts of certain plants. These vegetables are harvested before the flowers fully bloom."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/taYY0L33ajg?si=QAKDRuTIAr5fUqsP",title:"Growing Vegetables",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Growing Your Own Greens"}),S.jsx("p",{className:"text-gray-700",children:"Learn how to grow your own nutritious Flower Vegetables at home, from seed to harvest."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Vegetable Guide"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:pq.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Nutrition Facts"}),S.jsx("ul",{className:"list-disc list-inside",children:t.nutrients.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]}),S.jsxs("section",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Seasonal Growing Guide"}),S.jsx("div",{className:"grid md:grid-cols-4 gap-4",children:mq.map(t=>S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("ul",{className:"list-disc list-inside",children:t.vegetables.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]},t.name))})]})]})}const hq=[{name:"Spinach",image:"https://images.unsplash.com/photo-1576045057995-568f588f82fb?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Spinach is a leafy green vegetable that’s widely used in salads, soups, and smoothies. It has a mild, slightly earthy flavor and is packed with essential vitamins and minerals. ",nutrients:["High in iron","Boosts immunity","Supports eye health","Rich in fiber"]},{name:"Swiss Chard",image:"https://images.unsplash.com/photo-1679595044391-3c42b0f351b5?q=80&w=1173&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Swiss Chard is a leafy green vegetable with large, colorful stems and dark green leaves. ",nutrients:["High in iron","Boosts immunity","Supports bone health","Rich in fiber"]},{name:"Arugula",image:"https://plus.unsplash.com/premium_photo-1673469223112-235e51d1dfb0?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Arugula is a leafy green with a peppery, mustard-like flavor. It’s commonly used in salads, sandwiches, and as a garnish.",nutrients:["High in vitamin K","Rich in antioxidants","Supports bone health","Good source of folate"]}],pq=[{name:"Broccoli",image:"https://images.unsplash.com/photo-1459411621453-7b03977f4bfc",description:"A nutrient-dense cruciferous vegetable with cancer-fighting properties.",nutrients:["Vitamin C","Vitamin K","Fiber","Antioxidants"]},{name:"Cauliflower",image:"https://images.unsplash.com/photo-1692956706779-576c151ec712?q=80&w=1074&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"It can be roasted, steamed, mashed, or even used as a low-carb substitute for rice or pizza crust.",nutrients:["Vitamin C","Vitamin K","Fiber","B vitamins"]},{name:"Zucchini",image:"https://images.unsplash.com/photo-1580294672675-91afc00ee7b3?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Zucchini is a summer squash with smooth green skin and a mild, slightly sweet flavor. It technically a fruit but is commonly treated as a vegetable in cooking. ",nutrients:["Vitamin A","Potassium","Fiber","Vitamin C"]}],mq=[{name:"Spring",vegetables:["Peas","Lettuce","Radishes","Spinach"]},{name:"Summer",vegetables:["Tomatoes","Cucumbers","Peppers","Eggplant"]},{name:"Fall",vegetables:["Pumpkins","Carrots","Brussels Sprouts","Kale"]},{name:"Winter",vegetables:["Cabbage","Turnips","Winter Squash","Leeks"]}],vq=[{name:"Rose",image:"https://images.unsplash.com/photo-1559563362-c667ba5f5480?q=80&w=1001&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Classic symbol of love and beauty, widely used in celebrations.",symbolism:["Love","Romance","Passion"]},{name:"Lotus",image:"https://plus.unsplash.com/premium_photo-1664303754150-7a776a1f28bd?q=80&w=987&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Sacred flower often associated with purity and rebirth in Eastern cultures.",symbolism:["Purity","Spiritual awakening","Rebirth"]},{name:"Sunflower",image:"https://images.unsplash.com/photo-1552160793-cbaf3ebcba72?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Bright and cheerful, sunflowers represent positivity and admiration.",symbolism:["Happiness","Loyalty","Warmth"]},{name:"Lily",image:"https://images.unsplash.com/photo-1561897519-6e4fbd1fbc41?q=80&w=987&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Lilies are elegant flowers often associated with purity and renewal.",symbolism:["Purity","Rebirth","Grace"]},{name:"Tulip",image:"https://images.unsplash.com/photo-1524386416438-98b9b2d4b433?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Tulips are spring blooms that come in many colors, each symbolizing different emotions.",symbolism:["Perfect love","Hope","Charity"]},{name:"Marigold",image:"https://images.unsplash.com/photo-1695301737779-abb0802bf47c?q=80&w=1035&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Marigolds are bright orange and yellow flowers often used in celebrations and rituals.",symbolism:["Creativity","Passion","Remembrance"]},{name:"Lavender",image:"https://images.unsplash.com/photo-1498998754966-9f72acbc85b2?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Lavender is known for its calming scent and soft purple blooms.",symbolism:["Calm","Devotion","Serenity"]},{name:"Hydrangea",image:"https://images.unsplash.com/photo-1621518856558-9b2ce2d0660d?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Hydrangeas are full, bushy flowers with layered petals, symbolizing gratitude and understanding.",symbolism:["Gratitude","Grace","Apology"]},{name:"Cherry Blossom",image:"https://images.unsplash.com/photo-1538943186303-104afadcbb16?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Cherry blossoms bloom briefly in spring, representing the beauty and fragility of life.",symbolism:["Renewal","Beauty","Impermanence"]}],gq=()=>S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Flowers Around the World"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Popular Flower Types"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1490750967868-88aa4486c946?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Flowers",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Global Blooms"}),S.jsx("p",{className:"text-gray-700",children:"From the romantic rose to the cheerful sunflower, flowers have been a symbol of emotion and beauty across cultures."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/i810CxN5Q6Q?si=AVhMFNADW_35Ruy",title:"Flowers Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"How Flowers Grow"}),S.jsx("p",{className:"text-gray-700",children:"Discover the fascinating growth cycle of different types of flowers and how they thrive in diverse environments."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Symbolism & Benefits"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:vq.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Key Symbolism"}),S.jsx("ul",{className:"list-disc list-inside",children:t.symbolism.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]})]}),yq=[{name:"Electric Car",image:"https://images.unsplash.com/photo-1615829386703-e2bb66a7cb7d?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Electric cars are eco-friendly, quiet, and efficient for modern-day commuting.",features:["Zero emissions","Low maintenance","Cost-efficient"]},{name:"Motorcycle",image:"https://images.unsplash.com/photo-1558980664-2cd663cf8dde?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Motorcycles are ideal for quick city rides and provide a thrilling experience.",features:["Fuel efficient","Compact design","Easy parking"]},{name:"SUV",image:"https://images.unsplash.com/photo-1622893288761-823ba60f17a6?q=80&w=2128&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"SUVs offer space, power, and safety for family road trips and adventures.",features:["Spacious interior","All-terrain capability","Strong build"]},{name:"Pickup Truck",image:"https://images.unsplash.com/photo-1605504835488-e8c6d37beb43?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Pickup trucks are robust, versatile, and perfect for hauling cargo or off-road driving.",features:["High payload capacity","Rugged design","Towing power"]},{name:"Bicycle",image:"https://images.unsplash.com/photo-1532298229144-0ec0c57515c7?q=80&w=2022&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Bicycles are eco-friendly, great for fitness, and perfect for short commutes.",features:["No fuel required","Health benefits","Lightweight and portable"]},{name:"Bus",image:"https://images.unsplash.com/photo-1564694202883-46e7448c1b26?q=80&w=1964&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Buses are used for public transport, offering affordable and efficient mass transit.",features:["Large passenger capacity","Cost-effective travel","Scheduled routes"]},{name:"Helicopter",image:"https://images.unsplash.com/photo-1563561686990-f0ef5b3e0b7c?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Helicopters offer vertical take-off and landing, ideal for quick aerial transport and rescue missions.",features:["Vertical mobility","Ideal for remote access","Versatile usage"]},{name:"Sailboat",image:"https://images.unsplash.com/photo-1501771924607-209f42a6e7e4?q=80&w=2071&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Sailboats harness the power of wind for eco-friendly and leisurely travel on water.",features:["Wind-powered","Great for leisure","Low environmental impact"]},{name:"Airplane",image:"https://images.unsplash.com/photo-1483375801503-374c5f660610?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",description:"Airplanes are fast, long-distance vehicles used for transporting people and goods across the globe.",features:["High-speed travel","Long-distance capability","Global connectivity"]}],xq=()=>S.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[S.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Vehicles Around the World"}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Modern Transportation"}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1508798179027-a00aa5326443?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Vehicles",className:"rounded-lg mb-4 w-full h-64 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Diverse Vehicle Types"}),S.jsx("p",{className:"text-gray-700",children:"Vehicles have revolutionized the way we travel. From two-wheelers to electric cars, the world of transportation is vast and evolving."})]}),S.jsxs("div",{children:[S.jsx("iframe",{className:"w-full h-64 rounded-lg mb-4",src:"https://www.youtube.com/embed/IFVJKx8J9hs?si=8WcAC2xr94bWNPt0",title:"Vehicles Documentary",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Evolution of Vehicles"}),S.jsx("p",{className:"text-gray-700",children:"Watch how vehicles have evolved over time, from steam engines to self-driving electric vehicles."})]})]})]}),S.jsxs("section",{className:"mb-12",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Vehicle Features"}),S.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:yq.map(t=>S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsx("img",{src:t.image,alt:t.name,className:"rounded-lg mb-4 w-full h-48 object-cover"}),S.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),S.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),S.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"Key Features"}),S.jsx("ul",{className:"list-disc list-inside",children:t.features.map((e,n)=>S.jsx("li",{className:"text-gray-700",children:e},n))})]})]},t.name))})]})]});function zn(){return zn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zn.apply(null,arguments)}var jP={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Hr(t,e){if(Wv(t,e))return t[e];throw typeof t[e]=="function"&&r_(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function rf(t,e,n){if(Wv(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function Wv(t,e){return!wq(t)&&!Array.isArray(t)?!1:Ue(_q,e)?!0:!(e in Object.prototype||e in Function.prototype)}function bq(t,e){if(!r_(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function r_(t,e){return t==null||typeof t[e]!="function"||Ue(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Ue(Eq,e)?!0:!(e in Object.prototype||e in Function.prototype)}function wq(t){return typeof t=="object"&&t&&t.constructor===Object}var _q={length:!0,name:!0},Eq={toString:!0,valueOf:!0,toLocaleString:!0};class B0{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Hr(this.wrappedObject,e)}set(e,n){return rf(this.wrappedObject,e,n),this}has(e){return Wv(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return zP(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){Wv(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class $P{constructor(e,n,r){this.a=e,this.b=n,this.bKeys=r,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,n){return this.bKeys.has(e)?this.b.set(e,n):this.a.set(e,n),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return zP(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function zP(t,e){return{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}}}function Eh(){return new Map}function kc(t){if(!t)return Eh();if(VP(t))return t;if(j0(t))return new B0(t);throw new Error("createMap can create maps from objects or Maps")}function Cq(t){if(t instanceof B0)return t.wrappedObject;var e={};for(var n of t.keys()){var r=t.get(n);rf(e,n,r)}return e}function dt(t){return typeof t=="number"}function ht(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function zd(t){return typeof t=="bigint"}function Ro(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function ap(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Yi(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Tr(t){return typeof t=="string"}var Ht=Array.isArray;function Je(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function aa(t){return Array.isArray(t)||Je(t)}function qv(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Vu(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function i_(t){return t&&t.constructor.prototype.isRange===!0||!1}function L0(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Nq(t){return typeof t=="boolean"}function Sq(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function UP(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Dq(t){return typeof t=="function"}function Aq(t){return t instanceof Date}function Tq(t){return t instanceof RegExp}function j0(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Ro(t)&&!ap(t))}function VP(t){return t?t instanceof Map||t instanceof B0||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function Mq(t){return t===null}function Iq(t){return t===void 0}function ll(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Hi(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function kq(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Rq(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Fq(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Tt(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ab(t){return Tt(t)||In(t)&&t.args.length===1&&Tt(t.args[0])&&"-+~".includes(t.op)}function op(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ys(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Tf(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Vt(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function $0(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function In(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Wo(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function Pq(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function Oq(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function ar(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function WP(t){return t&&t.constructor.prototype.isChain===!0||!1}function Zt(t){var e=typeof t;return e==="object"?t===null?"null":ht(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function ut(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return ut(n)});if(t instanceof Date)return new Date(t.valueOf());if(ht(t))return t;if(j0(t))return Bq(t,ut);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function Bq(t,e){var n={};for(var r in t)Ue(t,r)&&(n[r]=e(t[r]));return n}function qP(t,e){for(var n in e)Ue(e,n)&&(t[n]=e[n]);return t}function qo(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!qo(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!qo(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function Lq(t,e,n){var r=!0,i;Object.defineProperty(t,e,{get:function(){return r&&(i=n(),r=!1),i},set:function(o){i=o,r=!1},configurable:!0,enumerable:!0})}function Ue(t,e){return t&&Object.hasOwnProperty.call(t,e)}function jq(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],a=t[i];a!==void 0&&(n[i]=a)}return n}var $q=["Matrix","Array"],zq=["number","BigNumber","Fraction"],Ee=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(jP)};zn(Ee,jP,{MATRIX_OPTIONS:$q,NUMBER_OPTIONS:zq});function YS(){return!0}function zi(){return!1}function ql(){}const XS="Argument is not a typed-function.";function HP(){function t(H){return typeof H=="object"&&H!==null&&H.constructor===Object}const e=[{name:"number",test:function(H){return typeof H=="number"}},{name:"string",test:function(H){return typeof H=="string"}},{name:"boolean",test:function(H){return typeof H=="boolean"}},{name:"Function",test:function(H){return typeof H=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(H){return H instanceof Date}},{name:"RegExp",test:function(H){return H instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(H){return H===null}},{name:"undefined",test:function(H){return H===void 0}}],n={name:"any",test:YS,isAny:!0};let r,i,a=0,o={createCount:0};function s(H){const ee=r.get(H);if(ee)return ee;let le='Unknown type "'+H+'"';const pe=H.toLowerCase();let be;for(be of i)if(be.toLowerCase()===pe){le+='. Did you mean "'+be+'" ?';break}throw new TypeError(le)}function u(H){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const le=ee?s(ee).index:i.length,pe=[];for(let xe=0;xe<H.length;++xe){if(!H[xe]||typeof H[xe].name!="string"||typeof H[xe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Fe=H[xe].name;if(r.has(Fe))throw new TypeError('Duplicate type name "'+Fe+'"');pe.push(Fe),r.set(Fe,{name:Fe,test:H[xe].test,isAny:H[xe].isAny,index:le+xe,conversionsTo:[]})}const be=i.slice(le);i=i.slice(0,le).concat(pe).concat(be);for(let xe=le+pe.length;xe<i.length;++xe)r.get(i[xe]).index=xe}function l(){r=new Map,i=[],a=0,u([n],!1)}l(),u(e);function c(){let H;for(H of i)r.get(H).conversionsTo=[];a=0}function f(H){const ee=i.filter(le=>{const pe=r.get(le);return!pe.isAny&&pe.test(H)});return ee.length?ee:["any"]}function d(H){return H&&typeof H=="function"&&"_typedFunctionData"in H}function h(H,ee,le){if(!d(H))throw new TypeError(XS);const pe=le&&le.exact,be=Array.isArray(ee)?ee.join(","):ee,xe=b(be),Fe=y(xe);if(!pe||Fe in H.signatures){const Et=H._typedFunctionData.signatureMap.get(Fe);if(Et)return Et}const Te=xe.length;let Oe;if(pe){Oe=[];let Et;for(Et in H.signatures)Oe.push(H._typedFunctionData.signatureMap.get(Et))}else Oe=H._typedFunctionData.signatures;for(let Et=0;Et<Te;++Et){const Xe=xe[Et],jt=[];let P;for(P of Oe){const J=C(P.params,Et);if(!(!J||Xe.restParam&&!J.restParam)){if(!J.hasAny){const me=g(J);if(Xe.types.some(Se=>!me.has(Se.name)))continue}jt.push(P)}}if(Oe=jt,Oe.length===0)break}let Me;for(Me of Oe)if(Me.params.length<=Te)return Me;throw new TypeError("Signature not found (signature: "+(H.name||"unnamed")+"("+y(xe,", ")+"))")}function p(H,ee,le){return h(H,ee,le).implementation}function m(H,ee){const le=s(ee);if(le.test(H))return H;const pe=le.conversionsTo;if(pe.length===0)throw new Error("There are no conversions to "+ee+" defined.");for(let be=0;be<pe.length;be++)if(s(pe[be].from).test(H))return pe[be].convert(H);throw new Error("Cannot convert "+H+" to "+ee)}function y(H){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return H.map(le=>le.name).join(ee)}function v(H){const ee=H.indexOf("...")===0,pe=(ee?H.length>3?H.slice(3):"any":H).split("|").map(Te=>s(Te.trim()));let be=!1,xe=ee?"...":"";return{types:pe.map(function(Te){return be=Te.isAny||be,xe+=Te.name+"|",{name:Te.name,typeIndex:Te.index,test:Te.test,isAny:Te.isAny,conversion:null,conversionIndex:-1}}),name:xe.slice(0,-1),hasAny:be,hasConversion:!1,restParam:ee}}function x(H){const ee=H.types.map(Fe=>Fe.name),le=M(ee);let pe=H.hasAny,be=H.name;const xe=le.map(function(Fe){const Te=s(Fe.from);return pe=Te.isAny||pe,be+="|"+Fe.from,{name:Fe.from,typeIndex:Te.index,test:Te.test,isAny:Te.isAny,conversion:Fe,conversionIndex:Fe.index}});return{types:H.types.concat(xe),name:be,hasAny:pe,hasConversion:xe.length>0,restParam:H.restParam}}function g(H){return H.typeSet||(H.typeSet=new Set,H.types.forEach(ee=>H.typeSet.add(ee.name))),H.typeSet}function b(H){const ee=[];if(typeof H!="string")throw new TypeError("Signatures must be strings");const le=H.trim();if(le==="")return ee;const pe=le.split(",");for(let be=0;be<pe.length;++be){const xe=v(pe[be].trim());if(xe.restParam&&be!==pe.length-1)throw new SyntaxError('Unexpected rest parameter "'+pe[be]+'": only allowed for the last parameter');if(xe.types.length===0)return null;ee.push(xe)}return ee}function w(H){const ee=U(H);return ee?ee.restParam:!1}function _(H){if(!H||H.types.length===0)return YS;if(H.types.length===1)return s(H.types[0].name).test;if(H.types.length===2){const ee=s(H.types[0].name).test,le=s(H.types[1].name).test;return function(be){return ee(be)||le(be)}}else{const ee=H.types.map(function(le){return s(le.name).test});return function(pe){for(let be=0;be<ee.length;be++)if(ee[be](pe))return!0;return!1}}}function E(H){let ee,le,pe;if(w(H)){ee=G(H).map(_);const be=ee.length,xe=_(U(H)),Fe=function(Te){for(let Oe=be;Oe<Te.length;Oe++)if(!xe(Te[Oe]))return!1;return!0};return function(Oe){for(let Me=0;Me<ee.length;Me++)if(!ee[Me](Oe[Me]))return!1;return Fe(Oe)&&Oe.length>=be+1}}else return H.length===0?function(xe){return xe.length===0}:H.length===1?(le=_(H[0]),function(xe){return le(xe[0])&&xe.length===1}):H.length===2?(le=_(H[0]),pe=_(H[1]),function(xe){return le(xe[0])&&pe(xe[1])&&xe.length===2}):(ee=H.map(_),function(xe){for(let Fe=0;Fe<ee.length;Fe++)if(!ee[Fe](xe[Fe]))return!1;return xe.length===ee.length})}function C(H,ee){return ee<H.length?H[ee]:w(H)?U(H):null}function N(H,ee){const le=C(H,ee);return le?g(le):new Set}function D(H){return H.conversion===null||H.conversion===void 0}function A(H,ee){const le=new Set;return H.forEach(pe=>{const be=N(pe.params,ee);let xe;for(xe of be)le.add(xe)}),le.has("any")?["any"]:Array.from(le)}function T(H,ee,le){let pe,be;const xe=H||"unnamed";let Fe=le,Te;for(Te=0;Te<ee.length;Te++){const Xe=[];if(Fe.forEach(jt=>{const P=C(jt.params,Te),J=_(P);(Te<jt.params.length||w(jt.params))&&J(ee[Te])&&Xe.push(jt)}),Xe.length===0){if(be=A(Fe,Te),be.length>0){const jt=f(ee[Te]);return pe=new TypeError("Unexpected type of argument in function "+xe+" (expected: "+be.join(" or ")+", actual: "+jt.join(" | ")+", index: "+Te+")"),pe.data={category:"wrongType",fn:xe,index:Te,actual:jt,expected:be},pe}}else Fe=Xe}const Oe=Fe.map(function(Xe){return w(Xe.params)?1/0:Xe.params.length});if(ee.length<Math.min.apply(null,Oe))return be=A(Fe,Te),pe=new TypeError("Too few arguments in function "+xe+" (expected: "+be.join(" or ")+", index: "+ee.length+")"),pe.data={category:"tooFewArgs",fn:xe,index:ee.length,expected:be},pe;const Me=Math.max.apply(null,Oe);if(ee.length>Me)return pe=new TypeError("Too many arguments in function "+xe+" (expected: "+Me+", actual: "+ee.length+")"),pe.data={category:"tooManyArgs",fn:xe,index:ee.length,expectedLength:Me},pe;const Et=[];for(let Xe=0;Xe<ee.length;++Xe)Et.push(f(ee[Xe]).join("|"));return pe=new TypeError('Arguments of type "'+Et.join(", ")+'" do not match any of the defined signatures of function '+xe+"."),pe.data={category:"mismatch",actual:Et},pe}function R(H){let ee=i.length+1;for(let le=0;le<H.types.length;le++)D(H.types[le])&&(ee=Math.min(ee,H.types[le].typeIndex));return ee}function F(H){let ee=a+1;for(let le=0;le<H.types.length;le++)D(H.types[le])||(ee=Math.min(ee,H.types[le].conversionIndex));return ee}function O(H,ee){if(H.hasAny){if(!ee.hasAny)return 1}else if(ee.hasAny)return-1;if(H.restParam){if(!ee.restParam)return 1}else if(ee.restParam)return-1;if(H.hasConversion){if(!ee.hasConversion)return 1}else if(ee.hasConversion)return-1;const le=R(H)-R(ee);if(le<0)return-1;if(le>0)return 1;const pe=F(H)-F(ee);return pe<0?-1:pe>0?1:0}function I(H,ee){const le=H.params,pe=ee.params,be=U(le),xe=U(pe),Fe=w(le),Te=w(pe);if(Fe&&be.hasAny){if(!Te||!xe.hasAny)return 1}else if(Te&&xe.hasAny)return-1;let Oe=0,Me=0,Et;for(Et of le)Et.hasAny&&++Oe,Et.hasConversion&&++Me;let Xe=0,jt=0;for(Et of pe)Et.hasAny&&++Xe,Et.hasConversion&&++jt;if(Oe!==Xe)return Oe-Xe;if(Fe&&be.hasConversion){if(!Te||!xe.hasConversion)return 1}else if(Te&&xe.hasConversion)return-1;if(Me!==jt)return Me-jt;if(Fe){if(!Te)return 1}else if(Te)return-1;const P=(le.length-pe.length)*(Fe?-1:1);if(P!==0)return P;const J=[];let me=0;for(let et=0;et<le.length;++et){const ft=O(le[et],pe[et]);J.push(ft),me+=ft}if(me!==0)return me;let Se;for(Se of J)if(Se!==0)return Se;return 0}function M(H){if(H.length===0)return[];const ee=H.map(s);H.length>1&&ee.sort((be,xe)=>be.index-xe.index);let le=ee[0].conversionsTo;if(H.length===1)return le;le=le.concat([]);const pe=new Set(H);for(let be=1;be<ee.length;++be){let xe;for(xe of ee[be].conversionsTo)pe.has(xe.from)||(le.push(xe),pe.add(xe.from))}return le}function B(H,ee){let le=ee;if(H.some(be=>be.hasConversion)){const be=w(H),xe=H.map(k);le=function(){const Te=[],Oe=be?arguments.length-1:arguments.length;for(let Me=0;Me<Oe;Me++)Te[Me]=xe[Me](arguments[Me]);return be&&(Te[Oe]=arguments[Oe].map(xe[Oe])),ee.apply(this,Te)}}let pe=le;if(w(H)){const be=H.length-1;pe=function(){return le.apply(this,Q(arguments,0,be).concat([Q(arguments,be)]))}}return pe}function k(H){let ee,le,pe,be;const xe=[],Fe=[];switch(H.types.forEach(function(Te){Te.conversion&&(xe.push(s(Te.conversion.from).test),Fe.push(Te.conversion.convert))}),Fe.length){case 0:return function(Oe){return Oe};case 1:return ee=xe[0],pe=Fe[0],function(Oe){return ee(Oe)?pe(Oe):Oe};case 2:return ee=xe[0],le=xe[1],pe=Fe[0],be=Fe[1],function(Oe){return ee(Oe)?pe(Oe):le(Oe)?be(Oe):Oe};default:return function(Oe){for(let Me=0;Me<Fe.length;Me++)if(xe[Me](Oe))return Fe[Me](Oe);return Oe}}}function j(H){function ee(le,pe,be){if(pe<le.length){const xe=le[pe];let Fe=[];if(xe.restParam){const Te=xe.types.filter(D);Te.length<xe.types.length&&Fe.push({types:Te,name:"..."+Te.map(Oe=>Oe.name).join("|"),hasAny:Te.some(Oe=>Oe.isAny),hasConversion:!1,restParam:!0}),Fe.push(xe)}else Fe=xe.types.map(function(Te){return{types:[Te],name:Te.name,hasAny:Te.isAny,hasConversion:Te.conversion,restParam:!1}});return ie(Fe,function(Te){return ee(le,pe+1,be.concat([Te]))})}else return[be]}return ee(H,0,[])}function Y(H,ee){const le=Math.max(H.length,ee.length);for(let Te=0;Te<le;Te++){const Oe=N(H,Te),Me=N(ee,Te);let Et=!1,Xe;for(Xe of Me)if(Oe.has(Xe)){Et=!0;break}if(!Et)return!1}const pe=H.length,be=ee.length,xe=w(H),Fe=w(ee);return xe?Fe?pe===be:be>=pe:Fe?pe>=be:pe===be}function q(H){return H.map(ee=>ue(ee)?$(ee.referToSelf.callback):K(ee)?he(ee.referTo.references,ee.referTo.callback):ee)}function L(H,ee,le){const pe=[];let be;for(be of H){let xe=le[be];if(typeof xe!="number")throw new TypeError('No definition for referenced signature "'+be+'"');if(xe=ee[xe],typeof xe!="function")return!1;pe.push(xe)}return pe}function ne(H,ee,le){const pe=q(H),be=new Array(pe.length).fill(!1);let xe=!0;for(;xe;){xe=!1;let Fe=!0;for(let Te=0;Te<pe.length;++Te){if(be[Te])continue;const Oe=pe[Te];if(ue(Oe))pe[Te]=Oe.referToSelf.callback(le),pe[Te].referToSelf=Oe.referToSelf,be[Te]=!0,Fe=!1;else if(K(Oe)){const Me=L(Oe.referTo.references,pe,ee);Me?(pe[Te]=Oe.referTo.callback.apply(this,Me),pe[Te].referTo=Oe.referTo,be[Te]=!0,Fe=!1):xe=!0}}if(Fe&&xe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return pe}function fe(H){const ee=/\bthis(\(|\.signatures\b)/;Object.keys(H).forEach(le=>{const pe=H[le];if(ee.test(pe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function te(H,ee){if(o.createCount++,Object.keys(ee).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&fe(ee);const le=[],pe=[],be={},xe=[];let Fe;for(Fe in ee){if(!Object.prototype.hasOwnProperty.call(ee,Fe))continue;const qt=b(Fe);if(!qt)continue;le.forEach(function(ed){if(Y(ed,qt))throw new TypeError('Conflicting signatures "'+y(ed)+'" and "'+y(qt)+'".')}),le.push(qt);const ri=pe.length;pe.push(ee[Fe]);const w$=qt.map(x);let zp;for(zp of j(w$)){const ed=y(zp);xe.push({params:zp,name:ed,fn:ri}),zp.every(_$=>!_$.hasConversion)&&(be[ed]=ri)}}xe.sort(I);const Te=ne(pe,be,Jf);let Oe;for(Oe in be)Object.prototype.hasOwnProperty.call(be,Oe)&&(be[Oe]=Te[be[Oe]]);const Me=[],Et=new Map;for(Oe of xe)Et.has(Oe.name)||(Oe.fn=Te[Oe.fn],Me.push(Oe),Et.set(Oe.name,Oe));const Xe=Me[0]&&Me[0].params.length<=2&&!w(Me[0].params),jt=Me[1]&&Me[1].params.length<=2&&!w(Me[1].params),P=Me[2]&&Me[2].params.length<=2&&!w(Me[2].params),J=Me[3]&&Me[3].params.length<=2&&!w(Me[3].params),me=Me[4]&&Me[4].params.length<=2&&!w(Me[4].params),Se=Me[5]&&Me[5].params.length<=2&&!w(Me[5].params),et=Xe&&jt&&P&&J&&me&&Se;for(let qt=0;qt<Me.length;++qt)Me[qt].test=E(Me[qt].params);const ft=Xe?_(Me[0].params[0]):zi,Ur=jt?_(Me[1].params[0]):zi,$y=P?_(Me[2].params[0]):zi,Yj=J?_(Me[3].params[0]):zi,Xj=me?_(Me[4].params[0]):zi,Qj=Se?_(Me[5].params[0]):zi,Zj=Xe?_(Me[0].params[1]):zi,Jj=jt?_(Me[1].params[1]):zi,e$=P?_(Me[2].params[1]):zi,t$=J?_(Me[3].params[1]):zi,n$=me?_(Me[4].params[1]):zi,r$=Se?_(Me[5].params[1]):zi;for(let qt=0;qt<Me.length;++qt)Me[qt].implementation=B(Me[qt].params,Me[qt].fn);const i$=Xe?Me[0].implementation:ql,a$=jt?Me[1].implementation:ql,o$=P?Me[2].implementation:ql,s$=J?Me[3].implementation:ql,u$=me?Me[4].implementation:ql,l$=Se?Me[5].implementation:ql,c$=Xe?Me[0].params.length:-1,f$=jt?Me[1].params.length:-1,d$=P?Me[2].params.length:-1,h$=J?Me[3].params.length:-1,p$=me?Me[4].params.length:-1,m$=Se?Me[5].params.length:-1,v$=et?6:0,g$=Me.length,y$=Me.map(qt=>qt.test),x$=Me.map(qt=>qt.implementation),b$=function(){for(let ri=v$;ri<g$;ri++)if(y$[ri](arguments))return x$[ri].apply(this,arguments);return o.onMismatch(H,arguments,Me)};function Jf(qt,ri){return arguments.length===c$&&ft(qt)&&Zj(ri)?i$.apply(this,arguments):arguments.length===f$&&Ur(qt)&&Jj(ri)?a$.apply(this,arguments):arguments.length===d$&&$y(qt)&&e$(ri)?o$.apply(this,arguments):arguments.length===h$&&Yj(qt)&&t$(ri)?s$.apply(this,arguments):arguments.length===p$&&Xj(qt)&&n$(ri)?u$.apply(this,arguments):arguments.length===m$&&Qj(qt)&&r$(ri)?l$.apply(this,arguments):b$.apply(this,arguments)}try{Object.defineProperty(Jf,"name",{value:H})}catch{}return Jf.signatures=be,Jf._typedFunctionData={signatures:Me,signatureMap:Et},Jf}function oe(H,ee,le){throw T(H,ee,le)}function G(H){return Q(H,0,H.length-1)}function U(H){return H[H.length-1]}function Q(H,ee,le){return Array.prototype.slice.call(H,ee,le)}function re(H,ee){for(let le=0;le<H.length;le++)if(ee(H[le]))return H[le]}function ie(H,ee){return Array.prototype.concat.apply([],H.map(ee))}function de(){const H=G(arguments).map(le=>y(b(le))),ee=U(arguments);if(typeof ee!="function")throw new TypeError("Callback function expected as last argument");return he(H,ee)}function he(H,ee){return{referTo:{references:H,callback:ee}}}function $(H){if(typeof H!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:H}}}function K(H){return H&&typeof H.referTo=="object"&&Array.isArray(H.referTo.references)&&typeof H.referTo.callback=="function"}function ue(H){return H&&typeof H.referToSelf=="object"&&typeof H.referToSelf.callback=="function"}function ce(H,ee){if(!H)return ee;if(ee&&ee!==H){const le=new Error("Function names do not match (expected: "+H+", actual: "+ee+")");throw le.data={actual:ee,expected:H},le}return H}function ge(H){let ee;for(const le in H)Object.prototype.hasOwnProperty.call(H,le)&&(d(H[le])||typeof H[le].signature=="string")&&(ee=ce(ee,H[le].name));return ee}function Ce(H,ee){let le;for(le in ee)if(Object.prototype.hasOwnProperty.call(ee,le)){if(le in H&&ee[le]!==H[le]){const pe=new Error('Signature "'+le+'" is defined twice');throw pe.data={signature:le,sourceFunction:ee[le],destFunction:H[le]},pe}H[le]=ee[le]}}const Ae=o;o=function(H){const ee=typeof H=="string",le=ee?1:0;let pe=ee?H:"";const be={};for(let xe=le;xe<arguments.length;++xe){const Fe=arguments[xe];let Te={},Oe;if(typeof Fe=="function"?(Oe=Fe.name,typeof Fe.signature=="string"?Te[Fe.signature]=Fe:d(Fe)&&(Te=Fe.signatures)):t(Fe)&&(Te=Fe,ee||(Oe=ge(Fe))),Object.keys(Te).length===0){const Me=new TypeError("Argument to 'typed' at index "+xe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Me.data={index:xe,argument:Fe},Me}ee||(pe=ce(pe,Oe)),Ce(be,Te)}return te(pe||"",be)},o.create=HP,o.createCount=Ae.createCount,o.onMismatch=oe,o.throwMismatchError=oe,o.createError=T,o.clear=l,o.clearConversions=c,o.addTypes=u,o._findType=s,o.referTo=de,o.referToSelf=$,o.convert=m,o.findSignature=h,o.find=p,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(H,ee){let le="any";ee!==!1&&r.has("Object")&&(le="Object"),o.addTypes([H],le)};function Pe(H){if(!H||typeof H.from!="string"||typeof H.to!="string"||typeof H.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(H.to===H.from)throw new SyntaxError('Illegal to define conversion from "'+H.from+'" to itself.')}return o.addConversion=function(H){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Pe(H);const le=s(H.to),pe=le.conversionsTo.find(be=>be.from===H.from);if(pe)if(ee&&ee.override)o.removeConversion({from:pe.from,to:H.to,convert:pe.convert});else throw new Error('There is already a conversion from "'+H.from+'" to "'+le.name+'"');le.conversionsTo.push({from:H.from,convert:H.convert,index:a++})},o.addConversions=function(H,ee){H.forEach(le=>o.addConversion(le,ee))},o.removeConversion=function(H){Pe(H);const ee=s(H.to),le=re(ee.conversionsTo,be=>be.from===H.from);if(!le)throw new Error("Attempt to remove nonexistent conversion from "+H.from+" to "+H.to);if(le.convert!==H.convert)throw new Error("Conversion to remove does not match existing conversion");const pe=ee.conversionsTo.indexOf(le);ee.conversionsTo.splice(pe,1)},o.resolve=function(H,ee){if(!d(H))throw new TypeError(XS);const le=H._typedFunctionData.signatures;for(let pe=0;pe<le.length;++pe)if(le[pe].test(ee))return le[pe];return null},o}const Hv=HP();function z(t,e,n,r){function i(a){var o=jq(a,e.map(Wq));return Uq(t,e,a),n(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function Uq(t,e,n){var r=e.filter(a=>!Vq(a)).every(a=>n[a]!==void 0);if(!r){var i=e.filter(a=>n[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Vq(t){return t&&t[0]==="?"}function Wq(t){return t&&t[0]==="?"?t.slice(1):t}function qe(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function lu(t,e){if(e.number==="bigint")try{BigInt(t)}catch{return e.numberFallback}return e.number}var Ss=Math.sign||function(t){return t>0?1:t<0?-1:0},qq=Math.log2||function(e){return Math.log(e)/Math.LN2},Hq=Math.log10||function(e){return Math.log(e)/Math.LN10},Gq=Math.log1p||function(t){return Math.log(t+1)},Kq=Math.cbrt||function(e){if(e===0)return e;var n=e<0,r;return n&&(e=-e),isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,n?-r:r},Yq=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function p1(t,e,n){var r={2:"0b",8:"0o",16:"0x"},i=r[e],a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!qe(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!qe(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),a="i".concat(n)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function el(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:i}=GP(e);switch(n){case"fixed":return KP(t,r);case"exponential":return YP(t,r);case"engineering":return Xq(t,r);case"bin":return p1(t,2,i);case"oct":return p1(t,8,i);case"hex":return p1(t,16,i);case"auto":return Qq(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function GP(t){var e="auto",n,r;if(t!==void 0)if(dt(t))n=t;else if(ht(t))n=t.toNumber();else if(j0(t))t.precision!==void 0&&(n=QS(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=QS(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function sp(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),a=r.indexOf(".");i+=a!==-1?a-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function Xq(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=sp(t),r=z0(n,e),i=r.exponent,a=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(dt(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),u=0;u<s;u++)a.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var f=a.slice(c).join(""),d=dt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",h=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+h}function KP(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=sp(t),r=typeof e=="number"?z0(n,n.exponent+1+e):n,i=r.coefficients,a=r.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Rc(o-i.length))),a<0&&(i=Rc(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),r.sign+i.join("")}function YP(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=sp(t),r=e?z0(n,e):n,i=r.coefficients,a=r.exponent;i.length<e&&(i=i.concat(Rc(e-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function Qq(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=ZS(n==null?void 0:n.lowerExp,-3),i=ZS(n==null?void 0:n.upperExp,5),a=sp(t),o=e?z0(a,e):a;if(o.exponent<r||o.exponent>=i)return YP(t,e);var s=o.coefficients,u=o.exponent;s.length<e&&(s=s.concat(Rc(e-s.length))),s=s.concat(Rc(u-s.length+1+(s.length<e?e-s.length:0))),s=Rc(-u).concat(s);var l=u>0?u:0;return l<s.length-1&&s.splice(l+1,0,"."),o.sign+s.join("")}function z0(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var a=e-1;for(r[a]++;r[a]===10;)r.pop(),a===0&&(r.unshift(0),n.exponent++,a++),a--,r[a]++}}return n}function Rc(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function Zq(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function br(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r)}var Jq=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},eH=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},tH=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},nH=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},rH=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},iH=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function aH(t,e){var n=!0,r=e>0?!0:e<0?!1:1/e===1/0;return n^r?-t:t}function QS(t,e){if(dt(t))return t;if(ht(t))return t.toNumber();e()}function ZS(t,e){return dt(t)?t:ht(t)?t.toNumber():e}var XP=function(){return XP=Hv.create,Hv},oH=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],sH=z("typed",oH,function(e){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:a}=e,o=XP();return o.clear(),o.addTypes([{name:"number",test:dt},{name:"Complex",test:Ro},{name:"BigNumber",test:ht},{name:"bigint",test:zd},{name:"Fraction",test:ap},{name:"Unit",test:Yi},{name:"identifier",test:s=>Tr&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(s)},{name:"string",test:Tr},{name:"Chain",test:WP},{name:"Array",test:Ht},{name:"Matrix",test:Je},{name:"DenseMatrix",test:qv},{name:"SparseMatrix",test:Vu},{name:"Range",test:i_},{name:"Index",test:L0},{name:"boolean",test:Nq},{name:"ResultSet",test:Sq},{name:"Help",test:UP},{name:"function",test:Dq},{name:"Date",test:Aq},{name:"RegExp",test:Tq},{name:"null",test:Mq},{name:"undefined",test:Iq},{name:"AccessorNode",test:ll},{name:"ArrayNode",test:Hi},{name:"AssignmentNode",test:kq},{name:"BlockNode",test:Rq},{name:"ConditionalNode",test:Fq},{name:"ConstantNode",test:Tt},{name:"FunctionNode",test:Ys},{name:"FunctionAssignmentNode",test:op},{name:"IndexNode",test:Tf},{name:"Node",test:Vt},{name:"ObjectNode",test:$0},{name:"OperatorNode",test:In},{name:"ParenthesisNode",test:Wo},{name:"RangeNode",test:Pq},{name:"RelationalNode",test:Oq},{name:"SymbolNode",test:ar},{name:"Map",test:VP},{name:"Object",test:j0}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||om(u),Zq(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||sm(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||sm(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||om(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return a||um(u),new a(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||sm(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){a||um(u);var l=new a(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||om(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){a||um(u);try{return new a(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||sm(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||om(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return a||um(u),new a(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||uH(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(s,u,l)=>{var c=o.createError(s,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&aa(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(s,u,l)=>{var c=o.createError(s,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&aa(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o});function om(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function sm(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function uH(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function um(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var lH="ResultSet",cH=[],fH=z(lH,cH,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var yc=9e15,cu=1e9,Tb="0123456789abcdef",Gv="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Kv="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Mb={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-yc,maxE:yc,crypto:!1},QP,Do,lt=!0,U0="[DecimalError] ",Xs=U0+"Invalid argument: ",ZP=U0+"Precision limit exceeded",JP=U0+"crypto unavailable",eO="[object Decimal]",Lr=Math.floor,$n=Math.pow,dH=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,hH=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,pH=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,tO=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Da=1e7,tt=7,mH=9007199254740991,vH=Gv.length-1,Ib=Kv.length-1,De={toStringTag:eO};De.absoluteValue=De.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ze(t)};De.ceil=function(){return Ze(new this.constructor(this),this.e+1,2)};De.clampedTo=De.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Xs+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};De.comparedTo=De.cmp=function(t){var e,n,r,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,u=a.s,l=t.s;if(!o||!s)return!u||!l?NaN:u!==l?u:o===s?0:!o^u<0?1:-1;if(!o[0]||!s[0])return o[0]?u:s[0]?-l:0;if(u!==l)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(r=o.length,i=s.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==s[e])return o[e]>s[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};De.cosine=De.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+tt,r.rounding=1,n=gH(r,oO(r,n)),r.precision=t,r.rounding=e,Ze(Do==2||Do==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};De.cubeRoot=De.cbrt=function(){var t,e,n,r,i,a,o,s,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(lt=!1,a=c.s*$n(c.s*c,1/3),!a||Math.abs(a)==1/0?(n=mr(c.d),t=c.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=$n(n,1/3),t=Lr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(a.toString()),o=(t=f.precision)+3;;)if(s=r,u=s.times(s).times(s),l=u.plus(c),r=en(l.plus(c).times(s),l.plus(u),o+2,1),mr(s.d).slice(0,o)===(n=mr(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(Ze(s,t+1,0),s.times(s).times(s).eq(c))){r=s;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Ze(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return lt=!0,Ze(r,t,f.rounding,e)};De.decimalPlaces=De.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Lr(this.e/tt))*tt,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};De.dividedBy=De.div=function(t){return en(this,new this.constructor(t))};De.dividedToIntegerBy=De.divToInt=function(t){var e=this,n=e.constructor;return Ze(en(e,new n(t),0,1,1),n.precision,n.rounding)};De.equals=De.eq=function(t){return this.cmp(t)===0};De.floor=function(){return Ze(new this.constructor(this),this.e+1,3)};De.greaterThan=De.gt=function(t){return this.cmp(t)>0};De.greaterThanOrEqualTo=De.gte=function(t){var e=this.cmp(t);return e==1||e===0};De.hyperbolicCosine=De.cosh=function(){var t,e,n,r,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/W0(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=af(o,1,a.times(e),new o(1),!0);for(var u,l=t,c=new o(8);l--;)u=a.times(a),a=s.minus(u.times(c.minus(u.times(c))));return Ze(a,o.precision=n,o.rounding=r,!0)};De.hyperbolicSine=De.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=af(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/W0(5,t)),i=af(a,2,i,i,!0);for(var o,s=new a(5),u=new a(16),l=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(u.times(o).plus(l))))}return a.precision=e,a.rounding=n,Ze(i,e,n,!0)};De.hyperbolicTangent=De.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,en(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};De.inverseCosine=De.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?Ya(e,r,i):new e(0):new e(NaN):t.isZero()?Ya(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};De.inverseHyperbolicCosine=De.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,lt=!1,n=n.times(n).minus(1).sqrt().plus(n),lt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};De.inverseHyperbolicSine=De.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,lt=!1,n=n.times(n).plus(1).sqrt().plus(n),lt=!0,r.precision=t,r.rounding=e,n.ln())};De.inverseHyperbolicTangent=De.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Ze(new a(i),t,e,!0):(a.precision=n=r-i.e,i=en(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};De.inverseSine=De.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=Ya(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};De.inverseTangent=De.atan=function(){var t,e,n,r,i,a,o,s,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=Ib)return o=Ya(c,f+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=Ib)return o=Ya(c,f+4,d).times(.5),o.s=l.s,o}for(c.precision=s=f+10,c.rounding=1,n=Math.min(28,s/tt+2|0),t=n;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(lt=!1,e=Math.ceil(s/tt),r=1,u=l.times(l),o=new c(l),i=l;t!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),lt=!0,Ze(o,c.precision=f,c.rounding=d,!0)};De.isFinite=function(){return!!this.d};De.isInteger=De.isInt=function(){return!!this.d&&Lr(this.e/tt)>this.d.length-2};De.isNaN=function(){return!this.s};De.isNegative=De.isNeg=function(){return this.s<0};De.isPositive=De.isPos=function(){return this.s>0};De.isZero=function(){return!!this.d&&this.d[0]===0};De.lessThan=De.lt=function(t){return this.cmp(t)<0};De.lessThanOrEqualTo=De.lte=function(t){return this.cmp(t)<1};De.logarithm=De.log=function(t){var e,n,r,i,a,o,s,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(lt=!1,s=f+h,o=Ds(l,s),r=e?Yv(c,s+10):Ds(t,s),u=en(o,r,s,1),Ch(u.d,i=f,d))do if(s+=10,o=Ds(l,s),r=e?Yv(c,s+10):Ds(t,s),u=en(o,r,s,1),!a){+mr(u.d).slice(i+1,i+15)+1==1e14&&(u=Ze(u,f+1,0));break}while(Ch(u.d,i+=10,d));return lt=!0,Ze(u,f,d)};De.minus=De.sub=function(t){var e,n,r,i,a,o,s,u,l,c,f,d,h=this,p=h.constructor;if(t=new p(t),!h.d||!t.d)return!h.s||!t.s?t=new p(NaN):h.d?t.s=-t.s:t=new p(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(l=h.d,d=t.d,s=p.precision,u=p.rounding,!l[0]||!d[0]){if(d[0])t.s=-t.s;else if(l[0])t=new p(h);else return new p(u===3?-0:0);return lt?Ze(t,s,u):t}if(n=Lr(t.e/tt),c=Lr(h.e/tt),l=l.slice(),a=c-n,a){for(f=a<0,f?(e=l,a=-a,o=d.length):(e=d,n=c,o=l.length),r=Math.max(Math.ceil(s/tt),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=l.length,o=d.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}a=0}for(f&&(e=l,l=d,d=e,t.s=-t.s),o=l.length,r=d.length-o;r>0;--r)l[o++]=0;for(r=d.length;r>a;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=Da-1;--l[i],l[r]+=Da}l[r]-=d[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=V0(l,n),lt?Ze(t,s,u):t):new p(u===3?-0:0)};De.modulo=De.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Ze(new r(n),r.precision,r.rounding):(lt=!1,r.modulo==9?(e=en(n,t.abs(),0,3,1),e.s*=t.s):e=en(n,t,0,r.modulo,1),e=e.times(t),lt=!0,n.minus(e))};De.naturalExponential=De.exp=function(){return kb(this)};De.naturalLogarithm=De.ln=function(){return Ds(this)};De.negated=De.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ze(t)};De.plus=De.add=function(t){var e,n,r,i,a,o,s,u,l,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,s=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(t=new d(f)),lt?Ze(t,s,u):t;if(a=Lr(f.e/tt),r=Lr(t.e/tt),l=l.slice(),i=a-r,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,r=a,o=l.length),a=Math.ceil(s/tt),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/Da|0,l[i]%=Da;for(e&&(l.unshift(e),++r),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=V0(l,r),lt?Ze(t,s,u):t};De.precision=De.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Xs+t);return n.d?(e=nO(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};De.round=function(){var t=this,e=t.constructor;return Ze(new e(t),t.e+1,e.rounding)};De.sine=De.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+tt,r.rounding=1,n=xH(r,oO(r,n)),r.precision=t,r.rounding=e,Ze(Do>2?n.neg():n,t,e,!0)):new r(NaN)};De.squareRoot=De.sqrt=function(){var t,e,n,r,i,a,o=this,s=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!s||!s[0])return new c(!l||l<0&&(!s||s[0])?NaN:s?o:1/0);for(lt=!1,l=Math.sqrt(+o),l==0||l==1/0?(e=mr(s),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Lr((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new c(e)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(a=r,r=a.plus(en(o,a,n+2,1)).times(.5),mr(a.d).slice(0,n)===(e=mr(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ze(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ze(r,u+1,1),t=!r.times(r).eq(o));break}return lt=!0,Ze(r,u,c.rounding,t)};De.tangent=De.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=en(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Ze(Do==2||Do==4?n.neg():n,t,e,!0)):new r(NaN)};De.times=De.mul=function(t){var e,n,r,i,a,o,s,u,l,c=this,f=c.constructor,d=c.d,h=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!t.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?t.s/0:t.s*0);for(n=Lr(c.e/tt)+Lr(t.e/tt),u=d.length,l=h.length,u<l&&(a=d,d=h,h=a,o=u,u=l,l=o),a=[],o=u+l,r=o;r--;)a.push(0);for(r=l;--r>=0;){for(e=0,i=u+r;i>r;)s=a[i]+h[r]*d[i-r-1]+e,a[i--]=s%Da|0,e=s/Da|0;a[i]=(a[i]+e)%Da|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=V0(a,n),lt?Ze(t,f.precision,f.rounding):t};De.toBinary=function(t,e){return a_(this,2,t,e)};De.toDecimalPlaces=De.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(xi(t,0,cu),e===void 0?e=r.rounding:xi(e,0,8),Ze(n,t+n.e+1,e))};De.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=ao(r,!0):(xi(t,0,cu),e===void 0?e=i.rounding:xi(e,0,8),r=Ze(new i(r),t+1,e),n=ao(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};De.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=ao(i):(xi(t,0,cu),e===void 0?e=a.rounding:xi(e,0,8),r=Ze(new a(i),t+i.e+1,e),n=ao(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};De.toFraction=function(t){var e,n,r,i,a,o,s,u,l,c,f,d,h=this,p=h.d,m=h.constructor;if(!p)return new m(h);if(l=n=new m(1),r=u=new m(0),e=new m(r),a=e.e=nO(p)-h.e-1,o=a%tt,e.d[0]=$n(10,o<0?tt+o:o),t==null)t=a>0?e:l;else{if(s=new m(t),!s.isInt()||s.lt(l))throw Error(Xs+s);t=s.gt(e)?a>0?e:l:s}for(lt=!1,s=new m(mr(p)),c=m.precision,m.precision=a=p.length*tt*2;f=en(s,e,0,1,1),i=n.plus(f.times(r)),i.cmp(t)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=e,e=s.minus(f.times(i)),s=i;return i=en(t.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=en(l,r,a,1).minus(h).abs().cmp(en(u,n,a,1).minus(h).abs())<1?[l,r]:[u,n],m.precision=c,lt=!0,d};De.toHexadecimal=De.toHex=function(t,e){return a_(this,16,t,e)};De.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:xi(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(lt=!1,n=en(n,t,0,e,1).times(t),lt=!0,Ze(n)):(t.s=n.s,n=t),n};De.toNumber=function(){return+this};De.toOctal=function(t,e){return a_(this,8,t,e)};De.toPower=De.pow=function(t){var e,n,r,i,a,o,s=this,u=s.constructor,l=+(t=new u(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new u($n(+s,l));if(s=new u(s),s.eq(1))return s;if(r=u.precision,a=u.rounding,t.eq(1))return Ze(s,r,a);if(e=Lr(t.e/tt),e>=t.d.length-1&&(n=l<0?-l:l)<=mH)return i=rO(u,s,n,r),t.s<0?new u(1).div(i):Ze(i,r,a);if(o=s.s,o<0){if(e<t.d.length-1)return new u(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return n=$n(+s,l),e=n==0||!isFinite(n)?Lr(l*(Math.log("0."+mr(s.d))/Math.LN10+s.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(lt=!1,u.rounding=s.s=1,n=Math.min(12,(e+"").length),i=kb(t.times(Ds(s,r+n)),r),i.d&&(i=Ze(i,r+5,1),Ch(i.d,r,a)&&(e=r+10,i=Ze(kb(t.times(Ds(s,e+n)),e),e+5,1),+mr(i.d).slice(r+1,r+15)+1==1e14&&(i=Ze(i,r+1,0)))),i.s=o,lt=!0,u.rounding=a,Ze(i,r,a))};De.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=ao(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(xi(t,1,cu),e===void 0?e=i.rounding:xi(e,0,8),r=Ze(new i(r),t,e),n=ao(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};De.toSignificantDigits=De.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(xi(t,1,cu),e===void 0?e=r.rounding:xi(e,0,8)),Ze(new r(n),t,e)};De.toString=function(){var t=this,e=t.constructor,n=ao(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};De.truncated=De.trunc=function(){return Ze(new this.constructor(this),this.e+1,1)};De.valueOf=De.toJSON=function(){var t=this,e=t.constructor,n=ao(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function mr(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=tt-r.length,n&&(a+=vs(n)),a+=r;o=t[e],r=o+"",n=tt-r.length,n&&(a+=vs(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function xi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Xs+t)}function Ch(t,e,n,r){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=tt,i=0):(i=Math.ceil((e+1)/tt),e%=tt),a=$n(10,tt-e),s=t[i]%a|0,r==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=n<4&&s==99999||n>3&&s==49999||s==5e4||s==0):o=(n<4&&s+1==a||n>3&&s+1==a/2)&&(t[i+1]/a/100|0)==$n(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(r||n<4)&&s==9999||!r&&n>3&&s==4999):o=((r||n<4)&&s+1==a||!r&&n>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==$n(10,e-3)-1,o}function iv(t,e,n){for(var r,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=Tb.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function gH(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/W0(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=af(t,1,e.times(i),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var en=function(){function t(r,i,a){var o,s=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+s,r[u]=o%a|0,s=o/a|0;return s&&r.unshift(s),r}function e(r,i,a,o){var s,u;if(a!=o)u=a>o?1:-1;else for(s=u=0;s<a;s++)if(r[s]!=i[s]){u=r[s]>i[s]?1:-1;break}return u}function n(r,i,a,o){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,s,u){var l,c,f,d,h,p,m,y,v,x,g,b,w,_,E,C,N,D,A,T,R=r.constructor,F=r.s==i.s?1:-1,O=r.d,I=i.d;if(!O||!O[0]||!I||!I[0])return new R(!r.s||!i.s||(O?I&&O[0]==I[0]:!I)?NaN:O&&O[0]==0||!I?F*0:F/0);for(u?(h=1,c=r.e-i.e):(u=Da,h=tt,c=Lr(r.e/h)-Lr(i.e/h)),A=I.length,N=O.length,v=new R(F),x=v.d=[],f=0;I[f]==(O[f]||0);f++);if(I[f]>(O[f]||0)&&c--,a==null?(_=a=R.precision,o=R.rounding):s?_=a+(r.e-i.e)+1:_=a,_<0)x.push(1),p=!0;else{if(_=_/h+2|0,f=0,A==1){for(d=0,I=I[0],_++;(f<N||d)&&_--;f++)E=d*u+(O[f]||0),x[f]=E/I|0,d=E%I|0;p=d||f<N}else{for(d=u/(I[0]+1)|0,d>1&&(I=t(I,d,u),O=t(O,d,u),A=I.length,N=O.length),C=A,g=O.slice(0,A),b=g.length;b<A;)g[b++]=0;T=I.slice(),T.unshift(0),D=I[0],I[1]>=u/2&&++D;do d=0,l=e(I,g,A,b),l<0?(w=g[0],A!=b&&(w=w*u+(g[1]||0)),d=w/D|0,d>1?(d>=u&&(d=u-1),m=t(I,d,u),y=m.length,b=g.length,l=e(m,g,y,b),l==1&&(d--,n(m,A<y?T:I,y,u))):(d==0&&(l=d=1),m=I.slice()),y=m.length,y<b&&m.unshift(0),n(g,m,b,u),l==-1&&(b=g.length,l=e(I,g,A,b),l<1&&(d++,n(g,A<b?T:I,b,u))),b=g.length):l===0&&(d++,g=[0]),x[f++]=d,l&&g[0]?g[b++]=O[C]||0:(g=[O[C]],b=1);while((C++<N||g[0]!==void 0)&&_--);p=g[0]!==void 0}x[0]||x.shift()}if(h==1)v.e=c,QP=p;else{for(f=1,d=x[0];d>=10;d/=10)f++;v.e=f+c*h-1,Ze(v,s?a+v.e+1:a,o,p)}return v}}();function Ze(t,e,n,r){var i,a,o,s,u,l,c,f,d,h=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,s=f[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=tt,o=e,c=f[d=0],u=c/$n(10,i-o-1)%10|0;else if(d=Math.ceil((a+1)/tt),s=f.length,d>=s)if(r){for(;s++<=d;)f.push(0);c=u=0,i=1,a%=tt,o=a-tt+1}else break e;else{for(c=s=f[d],i=1;s>=10;s/=10)i++;a%=tt,o=a-tt+i,u=o<0?0:c/$n(10,i-o-1)%10|0}if(r=r||e<0||f[d+1]!==void 0||(o<0?c:c%$n(10,i-o-1)),l=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?o>0?c/$n(10,i-o):0:f[d-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=$n(10,(tt-e%tt)%tt),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=d,s=1,d--):(f.length=d+1,s=$n(10,tt-a),f[d]=o>0?(c/$n(10,i-o)%$n(10,o)|0)*s:0),l)for(;;)if(d==0){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,f[0]==Da&&(f[0]=1));break}else{if(f[d]+=s,f[d]!=Da)break;f[d--]=0,s=1}for(a=f.length;f[--a]===0;)f.pop()}return lt&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function ao(t,e,n){if(!t.isFinite())return aO(t);var r,i=t.e,a=mr(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+vs(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+vs(-i-1)+a,n&&(r=n-o)>0&&(a+=vs(r))):i>=o?(a+=vs(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+vs(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=vs(r))),a}function V0(t,e){var n=t[0];for(e*=tt;n>=10;n/=10)e++;return e}function Yv(t,e,n){if(e>vH)throw lt=!0,n&&(t.precision=n),Error(ZP);return Ze(new t(Gv),e,1,!0)}function Ya(t,e,n){if(e>Ib)throw Error(ZP);return Ze(new t(Kv),e,n,!0)}function nO(t){var e=t.length-1,n=e*tt+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function vs(t){for(var e="";t--;)e+="0";return e}function rO(t,e,n,r){var i,a=new t(1),o=Math.ceil(r/tt+4);for(lt=!1;;){if(n%2&&(a=a.times(e),eD(a.d,o)&&(i=!0)),n=Lr(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),eD(e.d,o)}return lt=!0,a}function JS(t){return t.d[t.d.length-1]&1}function iO(t,e,n){for(var r,i,a=new t(e[0]),o=0;++o<e.length;){if(i=new t(e[o]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function kb(t,e){var n,r,i,a,o,s,u,l=0,c=0,f=0,d=t.constructor,h=d.rounding,p=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(lt=!1,u=p):u=e,s=new d(.03125);t.e>-2;)t=t.times(s),f+=5;for(r=Math.log($n(2,f))/Math.LN10*2+5|0,u+=r,n=a=o=new d(1),d.precision=u;;){if(a=Ze(a.times(t),u,1),n=n.times(++c),s=o.plus(en(a,n,u,1)),mr(s.d).slice(0,u)===mr(o.d).slice(0,u)){for(i=f;i--;)o=Ze(o.times(o),u,1);if(e==null)if(l<3&&Ch(o.d,u-r,h,l))d.precision=u+=10,n=a=s=new d(1),c=0,l++;else return Ze(o,d.precision=p,h,lt=!0);else return d.precision=p,o}o=s}}function Ds(t,e){var n,r,i,a,o,s,u,l,c,f,d,h=1,p=10,m=t,y=m.d,v=m.constructor,x=v.rounding,g=v.precision;if(m.s<0||!y||!y[0]||!m.e&&y[0]==1&&y.length==1)return new v(y&&!y[0]?-1/0:m.s!=1?NaN:y?0:m);if(e==null?(lt=!1,c=g):c=e,v.precision=c+=p,n=mr(y),r=n.charAt(0),Math.abs(a=m.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=mr(m.d),r=n.charAt(0),h++;a=m.e,r>1?(m=new v("0."+n),a++):m=new v(r+"."+n.slice(1))}else return l=Yv(v,c+2,g).times(a+""),m=Ds(new v(r+"."+n.slice(1)),c-p).plus(l),v.precision=g,e==null?Ze(m,g,x,lt=!0):m;for(f=m,u=o=m=en(m.minus(1),m.plus(1),c,1),d=Ze(m.times(m),c,1),i=3;;){if(o=Ze(o.times(d),c,1),l=u.plus(en(o,new v(i),c,1)),mr(l.d).slice(0,c)===mr(u.d).slice(0,c))if(u=u.times(2),a!==0&&(u=u.plus(Yv(v,c+2,g).times(a+""))),u=en(u,new v(h),c,1),e==null)if(Ch(u.d,c-p,x,s))v.precision=c+=p,l=o=m=en(f.minus(1),f.plus(1),c,1),d=Ze(m.times(m),c,1),i=s=1;else return Ze(u,v.precision=g,x,lt=!0);else return v.precision=g,u;u=l,i+=2}}function aO(t){return String(t.s*t.s/0)}function av(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%tt,n<0&&(r+=tt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=tt;r<i;)t.d.push(+e.slice(r,r+=tt));e=e.slice(r),r=tt-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),lt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function yH(t,e){var n,r,i,a,o,s,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),tO.test(e))return av(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(hH.test(e))n=16,e=e.toLowerCase();else if(dH.test(e))n=2;else if(pH.test(e))n=8;else throw Error(Xs+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=rO(r,new r(n),a,a*2)),l=iv(e,n,Da),c=l.length-1,a=c;l[a]===0;--a)l.pop();return a<0?new r(t.s*0):(t.e=V0(l,c),t.d=l,lt=!1,o&&(t=en(t,i,s*4)),u&&(t=t.times(Math.abs(u)<54?$n(2,u):Qs.pow(2,u))),lt=!0,t)}function xH(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:af(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/W0(5,n)),e=af(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function af(t,e,n,r,i){var a,o,s,u,l=t.precision,c=Math.ceil(l/tt);for(lt=!1,u=n.times(n),s=new t(r);;){if(o=en(s.times(u),new t(e++*e++),l,1),s=i?r.plus(o):r.minus(o),r=en(o.times(u),new t(e++*e++),l,1),o=s.plus(r),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=r,r=o,o=a}return lt=!0,o.d.length=c+1,o}function W0(t,e){for(var n=t;--e;)n*=t;return n}function oO(t,e){var n,r=e.s<0,i=Ya(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Do=r?4:1,e;if(n=e.divToInt(i),n.isZero())Do=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return Do=JS(n)?r?2:3:r?4:1,e;Do=JS(n)?r?1:4:r?3:2}return e.minus(i).abs()}function a_(t,e,n,r){var i,a,o,s,u,l,c,f,d,h=t.constructor,p=n!==void 0;if(p?(xi(n,1,cu),r===void 0?r=h.rounding:xi(r,0,8)):(n=h.precision,r=h.rounding),!t.isFinite())c=aO(t);else{for(c=ao(t),o=c.indexOf("."),p?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-o,d.d=iv(ao(d),10,i),d.e=d.d.length),f=iv(c,10,i),a=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?a--:(t=new h(t),t.d=f,t.e=a,t=en(t,d,n,r,0,i),f=t.d,a=t.e,l=QP),o=f[n],s=i/2,l=l||f[n+1]!==void 0,l=r<4?(o!==void 0||l)&&(r===0||r===(t.s<0?3:2)):o>s||o===s&&(r===4||l||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++a,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,c="";o<u;o++)c+=Tb.charAt(f[o]);if(p){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)c+="0";for(f=iv(c,i,e),u=f.length;!f[u-1];--u);for(o=1,c="1.";o<u;o++)c+=Tb.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>u)for(a-=u;a--;)c+="0";else a<u&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function eD(t,e){if(t.length>e)return t.length=e,!0}function bH(t){return new this(t).abs()}function wH(t){return new this(t).acos()}function _H(t){return new this(t).acosh()}function EH(t,e){return new this(t).plus(e)}function CH(t){return new this(t).asin()}function NH(t){return new this(t).asinh()}function SH(t){return new this(t).atan()}function DH(t){return new this(t).atanh()}function AH(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Ya(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Ya(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Ya(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(en(t,e,a,1)),e=Ya(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(en(t,e,a,1)),n}function TH(t){return new this(t).cbrt()}function MH(t){return Ze(t=new this(t),t.e+1,2)}function IH(t,e,n){return new this(t).clamp(e,n)}function kH(t){if(!t||typeof t!="object")throw Error(U0+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,cu,"rounding",0,8,"toExpNeg",-yc,0,"toExpPos",0,yc,"maxE",0,yc,"minE",-yc,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=Mb[n]),(r=t[n])!==void 0)if(Lr(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(Xs+n+": "+r);if(n="crypto",i&&(this[n]=Mb[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(JP);else this[n]=!1;else throw Error(Xs+n+": "+r);return this}function RH(t){return new this(t).cos()}function FH(t){return new this(t).cosh()}function sO(t){var e,n,r;function i(a){var o,s,u,l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,tD(a)){l.s=a.s,lt?!a.d||a.e>i.maxE?(l.e=NaN,l.d=null):a.e<i.minE?(l.e=0,l.d=[0]):(l.e=a.e,l.d=a.d.slice()):(l.e=a.e,l.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){l.s=1/a<0?-1:1,l.e=0,l.d=[0];return}if(a<0?(a=-a,l.s=-1):l.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;lt?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[a]):(l.e=o,l.d=[a]);return}if(a*0!==0){a||(l.s=NaN),l.e=NaN,l.d=null;return}return av(l,a.toString())}if(u==="string")return(s=a.charCodeAt(0))===45?(a=a.slice(1),l.s=-1):(s===43&&(a=a.slice(1)),l.s=1),tO.test(a)?av(l,a):yH(l,a);if(u==="bigint")return a<0?(a=-a,l.s=-1):l.s=1,av(l,a.toString());throw Error(Xs+a)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=kH,i.clone=sO,i.isDecimal=tD,i.abs=bH,i.acos=wH,i.acosh=_H,i.add=EH,i.asin=CH,i.asinh=NH,i.atan=SH,i.atanh=DH,i.atan2=AH,i.cbrt=TH,i.ceil=MH,i.clamp=IH,i.cos=RH,i.cosh=FH,i.div=PH,i.exp=OH,i.floor=BH,i.hypot=LH,i.ln=jH,i.log=$H,i.log10=UH,i.log2=zH,i.max=VH,i.min=WH,i.mod=qH,i.mul=HH,i.pow=GH,i.random=KH,i.round=YH,i.sign=XH,i.sin=QH,i.sinh=ZH,i.sqrt=JH,i.sub=eG,i.sum=tG,i.tan=nG,i.tanh=rG,i.trunc=iG,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function PH(t,e){return new this(t).div(e)}function OH(t){return new this(t).exp()}function BH(t){return Ze(t=new this(t),t.e+1,3)}function LH(){var t,e,n=new this(0);for(lt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return lt=!0,new this(1/0);n=e}return lt=!0,n.sqrt()}function tD(t){return t instanceof Qs||t&&t.toStringTag===eO||!1}function jH(t){return new this(t).ln()}function $H(t,e){return new this(t).log(e)}function zH(t){return new this(t).log(2)}function UH(t){return new this(t).log(10)}function VH(){return iO(this,arguments,-1)}function WH(){return iO(this,arguments,1)}function qH(t,e){return new this(t).mod(e)}function HH(t,e){return new this(t).mul(e)}function GH(t,e){return new this(t).pow(e)}function KH(t){var e,n,r,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:xi(t,1,cu),r=Math.ceil(t/tt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=r/4}else throw Error(JP);else for(;a<r;)s[a++]=Math.random()*1e7|0;for(r=s[--a],t%=tt,r&&t&&(i=$n(10,tt-t),s[a]=(r/i|0)*i);s[a]===0;a--)s.pop();if(a<0)n=0,s=[0];else{for(n=-1;s[0]===0;n-=tt)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<tt&&(n-=tt-r)}return o.e=n,o.d=s,o}function YH(t){return Ze(t=new this(t),t.e+1,this.rounding)}function XH(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function QH(t){return new this(t).sin()}function ZH(t){return new this(t).sinh()}function JH(t){return new this(t).sqrt()}function eG(t,e){return new this(t).sub(e)}function tG(){var t=0,e=arguments,n=new this(e[t]);for(lt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return lt=!0,Ze(n,this.precision,this.rounding)}function nG(t){return new this(t).tan()}function rG(t){return new this(t).tanh()}function iG(t){return Ze(t=new this(t),t.e+1,1)}De[Symbol.for("nodejs.util.inspect.custom")]=De.toString;De[Symbol.toStringTag]="Decimal";var Qs=De.constructor=sO(Mb);Gv=new Qs(Gv);Kv=new Qs(Kv);var aG="BigNumber",oG=["?on","config"],sG=z(aG,oG,t=>{var{on:e,config:n}=t,r=Qs.clone({precision:n.precision,modulo:Qs.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const Nr=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},Ui=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},uG=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},m1=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},Hl=function(){throw SyntaxError("Invalid Param")};function v1(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const lG={re:0,im:0},Iu=function(t,e){const n=lG;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return we.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return we.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):Hl();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,a=0;r===null&&Hl();for(let o=0;o<r.length;o++){const s=r[o];s===" "||s==="	"||s===`
`||(s==="+"?i++:s==="-"?a++:s==="i"||s==="I"?(i+a===0&&Hl(),r[o+1]!==" "&&!isNaN(r[o+1])?(n.im+=parseFloat((a%2?"-":"")+r[o+1]),o++):n.im+=parseFloat((a%2?"-":"")+"1"),i=a=0):((i+a===0||isNaN(s))&&Hl(),r[o+1]==="i"||r[o+1]==="I"?(n.im+=parseFloat((a%2?"-":"")+s),o++):n.re+=parseFloat((a%2?"-":"")+s),i=a=0))}i+a>0&&Hl();break;case"number":n.im=0,n.re=t;break;default:Hl()}return isNaN(n.re)||isNaN(n.im),n};function we(t,e){if(!(this instanceof we))return new we(t,e);const n=Iu(t,e);this.re=n.re,this.im=n.im}we.prototype={re:0,im:0,sign:function(){const t=m1(this.re,this.im);return new we(this.re/t,this.im/t)},add:function(t,e){const n=Iu(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?we.NAN:we.INFINITY:new we(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=Iu(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?we.NAN:we.INFINITY:new we(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=Iu(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=this.re===0&&this.im===0,o=n.re===0&&n.im===0;return r&&o||i&&a?we.NAN:r||i?we.INFINITY:n.im===0&&this.im===0?new we(this.re*n.re,0):new we(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=Iu(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=this.re===0&&this.im===0,o=n.re===0&&n.im===0;if(a&&o||r&&i)return we.NAN;if(o||r)return we.INFINITY;if(a||i)return we.ZERO;if(n.im===0)return new we(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const s=n.re/n.im,u=n.re*s+n.im;return new we((this.re*s+this.im)/u,(this.im*s-this.re)/u)}else{const s=n.im/n.re,u=n.im*s+n.re;return new we((this.re+this.im*s)/u,(this.im-this.re*s)/u)}},pow:function(t,e){const n=Iu(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return we.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new we(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new we(Math.pow(this.im,n.re),0);case 1:return new we(0,Math.pow(this.im,n.re));case 2:return new we(-Math.pow(this.im,n.re),0);case 3:return new we(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return we.ZERO;const a=Math.atan2(this.im,this.re),o=v1(this.re,this.im);let s=Math.exp(n.re*o-n.im*a),u=n.im*o+n.re*a;return new we(s*Math.cos(u),s*Math.sin(u))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new we(Math.sqrt(t),0):new we(0,Math.sqrt(-t));const n=m1(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),i=Math.abs(e)/(2*r);return t>=0?new we(r,e<0?-i:i):new we(i,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new we(t,0):new we(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new we(Math.expm1(t)*Math.cos(e)+uG(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new we(Math.log(t),0):new we(v1(t,e),Math.atan2(e,t))},abs:function(){return m1(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new we(Math.sin(t)*Nr(e),Math.cos(t)*Ui(e))},cos:function(){const t=this.re,e=this.im;return new we(Math.cos(t)*Nr(e),-Math.sin(t)*Ui(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+Nr(e);return new we(Math.sin(t)/n,Ui(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-Nr(e);return new we(-Math.sin(t)/n,Ui(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*Nr(2*e)+.5*Math.cos(2*t);return new we(Math.cos(t)*Nr(e)/n,Math.sin(t)*Ui(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*Nr(2*e)-.5*Math.cos(2*t);return new we(Math.sin(t)*Nr(e)/n,-Math.cos(t)*Ui(e)/n)},asin:function(){const t=this.re,e=this.im,n=new we(e*e-t*t+1,-2*t*e).sqrt(),r=new we(n.re-e,n.im+t).log();return new we(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new we(e*e-t*t+1,-2*t*e).sqrt(),r=new we(n.re-e,n.im+t).log();return new we(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new we(0,1/0);if(e===-1)return new we(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new we((1-e*e-t*t)/n,-2*t/n).log();return new we(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new we(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new we(t/n,-e/n).atan():new we(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new we(0,1/0);const n=t*t+e*e;return n!==0?new we(t/n,-e/n).acos():new we(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new we(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new we(t/n,-e/n).asin():new we(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new we(Ui(t)*Math.cos(e),Nr(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new we(Nr(t)*Math.cos(e),Ui(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=Nr(t)+Math.cos(e);return new we(Ui(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=Nr(t)-Math.cos(e);return new we(Ui(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-Nr(2*t);return new we(-2*Ui(t)*Math.cos(e)/n,2*Nr(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+Nr(2*t);return new we(2*Nr(t)*Math.cos(e)/n,-2*Ui(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&e===0,r=1-t,i=1+t,a=r*r+e*e,o=a!==0?new we((i*r-e*e)/a,(e*r+i*e)/a):new we(t!==-1?t/0:0,e!==0?e/0:0),s=o.re;return o.re=v1(o.re,o.im)/2,o.im=Math.atan2(o.im,s)/2,n&&(o.im=-o.im),o},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new we(0,Math.PI/2);const n=t*t+e*e;return n!==0?new we(t/n,-e/n).atanh():new we(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new we(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return n!==0?new we(t/n,-e/n).asinh():new we(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return we.INFINITY;const n=t*t+e*e;return n!==0?new we(t/n,-e/n).acosh():new we(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return we.INFINITY;if(this.isInfinite())return we.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new we(t/n,-e/n)},conjugate:function(){return new we(this.re,-this.im)},neg:function(){return new we(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new we(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new we(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new we(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=Iu(t,e);return Math.abs(n.re-this.re)<=we.EPSILON&&Math.abs(n.im-this.im)<=we.EPSILON},clone:function(){return new we(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<we.EPSILON&&(t=0),Math.abs(e)<we.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};we.ZERO=new we(0,0);we.ONE=new we(1,0);we.I=new we(0,1);we.PI=new we(Math.PI,0);we.E=new we(Math.E,0);we.INFINITY=new we(1/0,1/0);we.NAN=new we(NaN,NaN);we.EPSILON=1e-15;var cG="Complex",fG=[],dG=z(cG,fG,()=>(Object.defineProperty(we,"name",{value:"Complex"}),we.prototype.constructor=we,we.prototype.type="Complex",we.prototype.isComplex=!0,we.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},we.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},we.prototype.format=function(t){var e="",n=this.im,r=this.re,i=el(this.re,t),a=el(this.im,t),o=dt(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(r/n)<s&&(r=0),Math.abs(n/r)<s&&(n=0)}return n===0?e=i:r===0?n===1?e="i":n===-1?e="-i":e=a+"i":n<0?n===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+a+"i",e},we.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return we(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(dt(n)){if(Yi(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),dt(r))return new we({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},we.prototype.valueOf=we.prototype.toString,we.fromJSON=function(t){return new we(t)},we.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},we),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const Qe=BigInt(0),yt=BigInt(1),Nh=BigInt(2),Rb=BigInt(5),ii=BigInt(10),hG=2e3,Le={s:yt,n:Qe,d:yt};function go(t,e){try{t=BigInt(t)}catch{throw ds()}return t*e}function da(t){return typeof t=="bigint"?t:Math.floor(t)}function pn(t,e){if(e===Qe)throw o_();const n=Object.create(qi.prototype);n.s=t<Qe?-yt:yt,t=t<Qe?-t:t;const r=Lu(t,e);return n.n=t/r,n.d=e/r,n}function Gl(t){const e={};let n=t,r=Nh,i=Rb-yt;for(;i<=n;){for(;n%r===Qe;)n/=r,e[r]=(e[r]||Qe)+yt;i+=yt+Nh*r++}return n!==t?n>1&&(e[n]=(e[n]||Qe)+yt):e[t]=(e[t]||Qe)+yt,e}const Jn=function(t,e){let n=Qe,r=yt,i=yt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw ds();if(t%1!==0)throw nD();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw ds();if(e%1!==0)throw nD();r=BigInt(e)}i=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw ds();i=n*r}else if(typeof t=="number"){if(isNaN(t))throw ds();if(t<0&&(i=-yt,t=-t),t%1===0)n=BigInt(t);else{let a=1,o=0,s=1,u=1,l=1,c=1e7;for(t>=1&&(a=10**Math.floor(1+Math.log10(t)),t/=a);s<=c&&l<=c;){let f=(o+u)/(s+l);if(t===f){s+l<=c?(n=o+u,r=s+l):l>s?(n=u,r=l):(n=o,r=s);break}else t>f?(o+=u,s+=l):(u+=o,l+=s),s>c?(n=u,r=l):(n=o,r=s)}n=BigInt(n)*BigInt(a),r=BigInt(r)}}else if(typeof t=="string"){let a=0,o=Qe,s=Qe,u=Qe,l=yt,c=yt,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw ds();if(f[a]==="-"?(i=-yt,a++):f[a]==="+"&&a++,f.length===a+1?s=go(f[a++],i):f[a+1]==="."||f[a]==="."?(f[a]!=="."&&(o=go(f[a++],i)),a++,(a+1===f.length||f[a+1]==="("&&f[a+3]===")"||f[a+1]==="'"&&f[a+3]==="'")&&(s=go(f[a],i),l=ii**BigInt(f[a].length),a++),(f[a]==="("&&f[a+2]===")"||f[a]==="'"&&f[a+2]==="'")&&(u=go(f[a+1],i),c=ii**BigInt(f[a+1].length)-yt,a+=3)):f[a+1]==="/"||f[a+1]===":"?(s=go(f[a],i),l=go(f[a+2],yt),a+=3):f[a+3]==="/"&&f[a+1]===" "&&(o=go(f[a],i),s=go(f[a+2],i),l=go(f[a+4],yt),a+=5),f.length<=a)r=l*c,i=n=u+r*o+c*s;else throw ds()}else if(typeof t=="bigint")n=t,i=t,r=yt;else throw ds();if(r===Qe)throw o_();Le.s=i<Qe?-yt:yt,Le.n=n<Qe?-n:n,Le.d=r<Qe?-r:r};function pG(t,e,n){let r=yt;for(;e>Qe;t=t*t%n,e>>=yt)e&yt&&(r=r*t%n);return r}function mG(t,e){for(;e%Nh===Qe;e/=Nh);for(;e%Rb===Qe;e/=Rb);if(e===yt)return Qe;let n=ii%e,r=1;for(;n!==yt;r++)if(n=n*ii%e,r>hG)return Qe;return BigInt(r)}function vG(t,e,n){let r=yt,i=pG(ii,n,e);for(let a=0;a<300;a++){if(r===i)return BigInt(a);r=r*ii%e,i=i*ii%e}return 0}function Lu(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function qi(t,e){if(Jn(t,e),this instanceof qi)t=Lu(Le.d,Le.n),this.s=Le.s,this.n=Le.n/t,this.d=Le.d/t;else return pn(Le.s*Le.n,Le.d)}var o_=function(){return new Error("Division by Zero")},ds=function(){return new Error("Invalid argument")},nD=function(){return new Error("Parameters must be integer")};qi.prototype={s:yt,n:Qe,d:yt,abs:function(){return pn(this.n,this.d)},neg:function(){return pn(-this.s*this.n,this.d)},add:function(t,e){return Jn(t,e),pn(this.s*this.n*Le.d+Le.s*this.d*Le.n,this.d*Le.d)},sub:function(t,e){return Jn(t,e),pn(this.s*this.n*Le.d-Le.s*this.d*Le.n,this.d*Le.d)},mul:function(t,e){return Jn(t,e),pn(this.s*Le.s*this.n*Le.n,this.d*Le.d)},div:function(t,e){return Jn(t,e),pn(this.s*Le.s*this.n*Le.d,this.d*Le.n)},clone:function(){return pn(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return pn(this.s*this.n%this.d,yt);if(Jn(t,e),Qe===Le.n*this.d)throw o_();return pn(this.s*(Le.d*this.n)%(Le.n*this.d),Le.d*this.d)},gcd:function(t,e){return Jn(t,e),pn(Lu(Le.n,this.n)*Lu(Le.d,this.d),Le.d*this.d)},lcm:function(t,e){return Jn(t,e),Le.n===Qe&&this.n===Qe?pn(Qe,yt):pn(Le.n*this.n,Lu(Le.n,this.n)*Lu(Le.d,this.d))},inverse:function(){return pn(this.s*this.d,this.n)},pow:function(t,e){if(Jn(t,e),Le.d===yt)return Le.s<Qe?pn((this.s*this.d)**Le.n,this.n**Le.n):pn((this.s*this.n)**Le.n,this.d**Le.n);if(this.s<Qe)return null;let n=Gl(this.n),r=Gl(this.d),i=yt,a=yt;for(let o in n)if(o!=="1"){if(o==="0"){i=Qe;break}if(n[o]*=Le.n,n[o]%Le.d===Qe)n[o]/=Le.d;else return null;i*=BigInt(o)**n[o]}for(let o in r)if(o!=="1"){if(r[o]*=Le.n,r[o]%Le.d===Qe)r[o]/=Le.d;else return null;a*=BigInt(o)**r[o]}return Le.s<Qe?pn(a,i):pn(i,a)},log:function(t,e){if(Jn(t,e),this.s<=Qe||Le.s<=Qe)return null;const n={},r=Gl(Le.n),i=Gl(Le.d),a=Gl(this.n),o=Gl(this.d);for(const l in i)r[l]=(r[l]||Qe)-i[l];for(const l in o)a[l]=(a[l]||Qe)-o[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in a)l!=="1"&&(n[l]=!0);let s=null,u=null;for(const l in n){const c=r[l]||Qe,f=a[l]||Qe;if(c===Qe){if(f!==Qe)return null;continue}let d=f,h=c;const p=Lu(d,h);if(d/=p,h/=p,s===null&&u===null)s=d,u=h;else if(d*u!==s*h)return null}return s!==null&&u!==null?pn(s,u):null},equals:function(t,e){return Jn(t,e),this.s*this.n*Le.d===Le.s*Le.n*this.d},lt:function(t,e){return Jn(t,e),this.s*this.n*Le.d<Le.s*Le.n*this.d},lte:function(t,e){return Jn(t,e),this.s*this.n*Le.d<=Le.s*Le.n*this.d},gt:function(t,e){return Jn(t,e),this.s*this.n*Le.d>Le.s*Le.n*this.d},gte:function(t,e){return Jn(t,e),this.s*this.n*Le.d>=Le.s*Le.n*this.d},compare:function(t,e){Jn(t,e);let n=this.s*this.n*Le.d-Le.s*Le.n*this.d;return(Qe<n)-(n<Qe)},ceil:function(t){return t=ii**BigInt(t||0),pn(da(this.s*t*this.n/this.d)+(t*this.n%this.d>Qe&&this.s>=Qe?yt:Qe),t)},floor:function(t){return t=ii**BigInt(t||0),pn(da(this.s*t*this.n/this.d)-(t*this.n%this.d>Qe&&this.s<Qe?yt:Qe),t)},round:function(t){return t=ii**BigInt(t||0),pn(da(this.s*t*this.n/this.d)+this.s*((this.s>=Qe?yt:Qe)+Nh*(t*this.n%this.d)>this.d?yt:Qe),t)},roundTo:function(t,e){Jn(t,e);const n=this.n*Le.d,r=this.d*Le.n,i=n%r;let a=da(n/r);return i+i>=r&&a++,pn(this.s*a*Le.n,Le.d)},divisible:function(t,e){return Jn(t,e),!(!(Le.n*this.d)||this.n*Le.d%(Le.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let r=mG(e,n),i=vG(e,n,r),a=this.s<Qe?"-":"";if(a+=da(e/n),e%=n,e*=ii,e&&(a+="."),r){for(let o=i;o--;)a+=da(e/n),e%=n,e*=ii;a+="(";for(let o=r;o--;)a+=da(e/n),e%=n,e*=ii;a+=")"}else for(let o=t;e&&o--;)a+=da(e/n),e%=n,e*=ii;return a},toFraction:function(t){let e=this.n,n=this.d,r=this.s<Qe?"-":"";if(n===yt)r+=e;else{let i=da(e/n);t&&i>Qe&&(r+=i,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t){let e=this.n,n=this.d,r=this.s<Qe?"-":"";if(n===yt)r+=e;else{let i=da(e/n);t&&i>Qe&&(r+=i,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(da(t/e));let r=t%e;t=e,e=r}while(t!==yt);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let a=pn(r[i-1],yt);for(let s=i-2;s>=0;s--)a=a.inverse().add(r[s]);let o=a.sub(n);if(o.n*e<o.d)return a.mul(this.s)}return this}};var gG="Fraction",yG=[],xG=z(gG,yG,()=>(Object.defineProperty(qi,"name",{value:"Fraction"}),qi.prototype.constructor=qi,qi.prototype.type="Fraction",qi.prototype.isFraction=!0,qi.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},qi.fromJSON=function(t){return new qi(t)},qi),{isClass:!0}),bG="Range",wG=[],_G=z(bG,wG,()=>{function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=n!=null,o=r!=null;if(i){if(ht(e))e=e.toNumber();else if(typeof e!="number"&&!zd(e))throw new TypeError("Parameter start must be a number or bigint")}if(a){if(ht(n))n=n.toNumber();else if(typeof n!="number"&&!zd(n))throw new TypeError("Parameter end must be a number or bigint")}if(o){if(ht(r))r=r.toNumber();else if(typeof r!="number"&&!zd(r))throw new TypeError("Parameter step must be a number or bigint")}this.start=i?parseFloat(e):0,this.end=a?parseFloat(n):0,this.step=o?parseFloat(r):1}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var n=e.split(":"),r=n.map(function(a){return parseFloat(a)}),i=r.some(function(a){return isNaN(a)});if(i)return null;switch(r.length){case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[2],r[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,n=this.start,r=this.step,i=this.end,a=i-n;return Ss(r)===Ss(a)?e=Math.ceil(a/r):a===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var n=this.start,r=this.step,i=this.end,a=0;if(r>0)for(;n<i;)e(n,[a],this),n+=r,a++;else if(r<0)for(;n>i;)e(n,[a],this),n+=r,a++},t.prototype.map=function(e){var n=[];return this.forEach(function(r,i,a){n[i[0]]=e(r,i,a)}),n},t.prototype.toArray=function(){var e=[];return this.forEach(function(n,r){e[r[0]]=n}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var n=el(this.start,e);return this.step!==1&&(n+=":"+el(this.step,e)),n+=":"+el(this.end,e),n},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),EG="Matrix",CG=[],NG=z(EG,CG,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function g1(t,e,n){var r=t.constructor,i=new r(2),a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!qe(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),a="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function SG(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=GP(e);switch(n){case"fixed":return AG(t,r);case"exponential":return rD(t,r);case"engineering":return DG(t,r);case"bin":return g1(t,2,i);case"oct":return g1(t,8,i);case"hex":return g1(t,16,i);case"auto":{var a=iD(e==null?void 0:e.lowerExp,-3),o=iD(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var s,u=t.toSignificantDigits(r),l=u.e;return l>=a&&l<o?s=u.toFixed():s=rD(t,r),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function DG(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),a=i.toPrecision(e);if(a.includes("e")){var o=t.constructor;a=new o(a).toFixed()}return a+"e"+(n>=0?"+":"")+r.toString()}function rD(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function AG(t,e){return t.toFixed(e)}function iD(t,e){return dt(t)?t:ht(t)?t.toNumber():e}function TG(t,e){var n=t.length-e.length,r=t.length;return t.substring(n,r)===e}function xt(t,e){var n=MG(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function MG(t,e){if(typeof t=="number")return el(t,e);if(ht(t))return SG(t,e);if(IG(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return uO(t,e);if(Tr(t))return xc(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>xc(r)+": "+xt(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function xc(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);n+=i in aD?aD[i]:i,r++}return'"'+n+'"'}var aD={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Qi(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function uO(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=uO(t[i],e);return n+="]",n}else return xt(t,e)}function IG(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function Fb(t,e){if(!Tr(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Zt(t)+", index: 0)");if(!Tr(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Zt(e)+", index: 1)");return t===e?0:t>e?1:-1}function bt(t,e,n){if(!(this instanceof bt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}bt.prototype=new RangeError;bt.prototype.constructor=RangeError;bt.prototype.name="DimensionError";bt.prototype.isDimensionError=!0;function ka(t,e,n){if(!(this instanceof ka))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}ka.prototype=new RangeError;ka.prototype.constructor=RangeError;ka.prototype.name="IndexError";ka.prototype.isIndexError=!0;function ot(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function lO(t,e,n){var r,i=t.length;if(i!==e[n])throw new bt(i,e[n]);if(n<e.length-1){var a=n+1;for(r=0;r<i;r++){var o=t[r];if(!Array.isArray(o))throw new bt(e.length-1,e.length,"<");lO(t[r],e,a)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new bt(e.length+1,e.length,">")}function oD(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new bt(t.length,0)}else lO(t,e,0)}function Xv(t,e){var n=t.isMatrix?t._size:ot(t),r=e._sourceSize;r.forEach((i,a)=>{if(i!==null&&i!==n[a])throw new bt(i,n[a])})}function Xt(t,e){if(t!==void 0){if(!dt(t)||!qe(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new ka(t,e)}}function of(t){for(var e=0;e<t._dimensions.length;++e){var n=t._dimensions[e];if(n._data&&Ht(n._data)){if(n._size[0]===0)return!0}else if(n.isRange){if(n.start===n.end)return!0}else if(Tr(n)&&n.length===0)return!0}return!1}function sf(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!dt(i)||!qe(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+xt(e)+")")}),(dt(t)||ht(t))&&(t=[t]);var r=n!==void 0?n:0;return Pb(t,e,0,r),t}function Pb(t,e,n,r){var i,a,o=t.length,s=e[n],u=Math.min(o,s);if(t.length=s,n<e.length-1){var l=n+1;for(i=0;i<u;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),Pb(a,e,l,r);for(i=u;i<s;i++)a=[],t[i]=a,Pb(a,e,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=u;i<s;i++)t[i]=r}}function s_(t,e){var n=Ot(t,!0),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new bt(0,r,"!=");e=u_(e,r);var i=cO(e);if(r!==i)throw new bt(i,r,"!=");try{return kG(n,e)}catch(a){throw a instanceof bt?new bt(i,r,"!="):a}}function u_(t,e){var n=cO(t),r=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,u=e%n===0;if(s)if(u)r[a]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function cO(t){return t.reduce((e,n)=>e*n,1)}function kG(t,e){for(var n=t,r,i=e.length-1;i>0;i--){var a=e[i];r=[];for(var o=n.length/a,s=0;s<o;s++)r.push(n.slice(s*a,(s+1)*a));n=r}return n}function Qv(t,e){for(var n=ot(t);Array.isArray(t)&&t.length===1;)t=t[0],n.shift();for(var r=n.length;n[r-1]===1;)r--;return r<n.length&&(t=fO(t,r,0),n.length=r),t}function fO(t,e,n){var r,i;if(n<e){var a=n+1;for(r=0,i=t.length;r<i;r++)t[r]=fO(t[r],e,a)}else for(;Array.isArray(t);)t=t[0];return t}function dO(t,e,n,r){var i=r||ot(t);if(n)for(var a=0;a<n;a++)t=[t],i.unshift(1);for(t=hO(t,e,0);i.length<e;)i.push(1);return t}function hO(t,e,n){var r,i;if(Array.isArray(t)){var a=n+1;for(r=0,i=t.length;r<i;r++)t[r]=hO(t[r],e,a)}else for(var o=n;o<e;o++)t=[t];return t}function Ot(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var n=[];return e?i(t):r(t),n;function r(a){for(var o=0;o<a.length;o++){var s=a[o];Array.isArray(s)?r(s):n.push(s)}}function i(a){if(Array.isArray(a[0]))for(var o=0;o<a.length;o++)i(a[o]);else for(var s=0;s<a.length;s++)n.push(a[s])}}function js(t,e){return Array.prototype.map.call(t,e)}function pO(t,e){Array.prototype.forEach.call(t,e)}function sD(t,e){if(ot(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function uD(t,e){if(ot(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,n=>e.test(n))}function lD(t,e){return Array.prototype.join.call(t,e)}function uf(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e}function Zv(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e}function q0(t,e){for(var n,r=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(r=a.length),o&&a.length!==r)return;var s=o?q0(a,e):e(a);if(n===void 0)n=s;else if(n!==s)return"mixed"}return n}function mO(t,e,n,r){if(r<n){if(t.length!==e.length)throw new bt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=mO(t[a],e[a],n,r+1);return i}else return t.concat(e)}function vO(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return mO(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function l_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(d=>d.length),i=Math.max(...r),a=new Array(i).fill(null),o=0;o<e.length;o++)for(var s=e[o],u=r[o],l=0;l<u;l++){var c=i-u+l;s[l]>a[c]&&(a[c]=s[l])}for(var f=0;f<e.length;f++)gO(e[f],a);return a}function gO(t,e){for(var n=e.length,r=t.length,i=0;i<r;i++){var a=n-r+i;if(t[i]<e[a]&&t[i]>1||t[i]>e[a])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[i]," to size ").concat(e[a]))}}function Wu(t,e){var n=ot(t);if(qo(n,e))return t;gO(n,e);var r=l_(n,e),i=r.length,a=[...Array(i-n.length).fill(1),...n],o=FG(t);n.length<i&&(o=s_(o,a),n=ot(o));for(var s=0;s<i;s++)n[s]<r[s]&&(o=RG(o,r[s],s),n=ot(o));return o}function RG(t,e,n){return vO(...Array(e).fill(t),n)}function c_(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=ot(t);if(e.length!==n.length)throw new bt(e.length,n.length);for(var r=0;r<e.length;r++)Xt(e[r],n[r]);return e.reduce((i,a)=>i[a],t)}function Ob(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(n)return a(t);var r=[];return i(t,0);function i(o,s){if(Array.isArray(o)){for(var u=o.length,l=Array(u),c=0;c<u;c++)r[s]=c,l[c]=i(o[c],s+1);return l}else return e(o,r.slice(0,s),t)}function a(o){if(Array.isArray(o)){for(var s=o.length,u=Array(s),l=0;l<s;l++)u[l]=a(o[l]);return u}else return e(o)}}function yO(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return;if(n){a(t);return}var r=[];i(t,0);function i(o,s){if(Array.isArray(o))for(var u=o.length,l=0;l<u;l++)r[s]=l,i(o[l],s+1);else e(o,r.slice(0,s),t)}function a(o){if(Array.isArray(o))for(var s=o.length,u=0;u<s;u++)a(o[u]);else e(o)}}function FG(t){return zn([],t)}function cl(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Hv.isTypedFunction(t)){var i;if(r)i=1;else{var a=(e.isMatrix?e.size():ot(e)).map(()=>0),o=e.isMatrix?e.get(a):c_(e,a);i=BG(t,o,a,e)}var s;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var u=PG(t,i);s=u!==void 0?u:t}else s=t;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return cD(s,f.slice(0,i),n,t.name)}}:{isUnary:!1,fn:function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return cD(s,f,n,t.name)}}}return r===void 0?{isUnary:OG(t),fn:t}:{isUnary:r,fn:t}}function PG(t,e){var n=[];if(Object.entries(t.signatures).forEach(r=>{var[i,a]=r;i.split(",").length===e&&n.push(a)}),n.length===1)return n[0]}function OG(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var n=e.match(/\(.*?\)/);return!/\.\.\./.test(n)}function BG(t,e,n,r){for(var i=[e,n,r],a=3;a>0;a--){var o=i.slice(0,a);if(Hv.resolve(t,o)!==null)return a}}function cD(t,e,n,r){try{return t(...e)}catch(i){LG(i,e,n,r)}}function LG(t,e,n,r){var i;if(t instanceof TypeError&&((i=t.data)===null||i===void 0?void 0:i.category)==="wrongType"){var a=[];throw a.push("value: ".concat(Zt(e[0]))),e.length>=2&&a.push("index: ".concat(Zt(e[1]))),e.length>=3&&a.push("array: ".concat(Zt(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(a.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}var jG="DenseMatrix",$G=["Matrix"],zG=z(jG,$G,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Tr(f))throw new Error("Invalid datatype: "+f);if(Je(c))c.type==="DenseMatrix"?(this._data=ut(c._data),this._size=ut(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Ht(c.data)&&Ht(c.size))this._data=c.data,this._size=c.size,oD(this._data,this._size),this._datatype=f||c.datatype;else if(Ht(c))this._data=l(c),this._size=ot(this._data),oD(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Zt(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return q0(this._data,Zt)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return a(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return c_(this._data,c)},n.prototype.set=function(c,f,d){if(!Ht(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new bt(c.length,this._size.length,"<");var h,p,m,y=c.map(function(x){return x+1});u(this,y,d);var v=this._data;for(h=0,p=c.length-1;h<p;h++)m=c[h],Xt(m,v.length),v=v[m];return m=c[c.length-1],Xt(m,v.length),v[m]=f,this};function r(c,f){if(!L0(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new bt(h.length,c._size.length);for(var p=f.min(),m=f.max(),y=0,v=c._size.length;y<v;y++)Xt(p[y],c._size[y]),Xt(m[y],c._size[y]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var p=h===d-1,m=f.dimension(h);return p?m.map(function(y){return Xt(y,c.length),c[y]}).valueOf():m.map(function(y){Xt(y,c.length);var v=c[y];return i(v,f,d,h+1)}).valueOf()}function a(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),m=f.isScalar(),y;if(Je(d)?(y=d.size(),d=d.valueOf()):y=ot(d),m){if(y.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!qo(y,p))try{y.length===0?d=Wu([d],p):d=Wu(d,p),y=ot(d)}catch{}if(p.length<c._size.length)throw new bt(p.length,c._size.length,"<");if(y.length<p.length){for(var v=0,x=0;p[v]===1&&y[v]===1;)v++;for(;p[v]===1;)x++,v++;d=dO(d,p.length,x,y)}if(!qo(p,y))throw new bt(p,y,">");var g=f.max().map(function(_){return _+1});u(c,g,h);var b=p.length,w=0;o(c._data,f,d,b,w)}return c}function o(c,f,d,h,p){var m=p===h-1,y=f.dimension(p);m?y.forEach(function(v,x){Xt(v),c[v]=d[x[0]]}):y.forEach(function(v,x){Xt(v),o(c[v],f,d[x[0]],h,p+1)})}n.prototype.resize=function(c,f,d){if(!aa(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),p=d?this.clone():this;return s(p,h,f)};function s(c,f,d){if(f.length===0){for(var h=c._data;Ht(h);)h=h[0];return h}return c._size=f.slice(0),c._data=sf(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=s_(d._data,c);var h=d._size.reduce((p,m)=>p*m);return d._size=u_(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),p=!1;h.length<f.length;)h.push(0),p=!0;for(var m=0,y=f.length;m<y;m++)f[m]>h[m]&&(h[m]=f[m],p=!0);p&&s(c,h,d)}n.prototype.clone=function(){var c=new n({data:ut(this._data),size:ut(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(c){var f=c.length===2,d=this._size.length-1;if(d<0)return;if(f){y(this._data);return}if(d===0){for(var h=0;h<this._data.length;h++)c(this._data,h,[h]);return}var p=new Array(d+1);m(this._data);function m(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(x<d)for(var g=0;g<v.length;g++)p[x]=g,m(v[g],x+1);else for(var b=0;b<v.length;b++)p[x]=b,c(v,b,p.slice())}function y(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(x<d)for(var g=0;g<v.length;g++)y(v[g],x+1);else for(var b=0;b<v.length;b++)c(v,b)}},n.prototype.map=function(c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,h=new n(d),p=cl(c,d._data,"map",f),m=f||p.isUnary?(y,v)=>{y[v]=p.fn(y[v])}:(y,v,x)=>{y[v]=p.fn(y[v],x,d)};return h._forEach(m),h},n.prototype.forEach=function(c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=this,h=cl(c,d._data,"map",f),p=f||h.isUnary?(m,y)=>{h.fn(m[y])}:(m,y,v)=>{h.fn(m[y],v,d)};d._forEach(p)},n.prototype[Symbol.iterator]=function*(){var c=this._size.length-1;if(!(c<0)){if(c===0){for(var f=0;f<this._data.length;f++)yield{value:this._data[f],index:[f]};return}var d=[],h=function*(m,y){if(y<c)for(var v=0;v<m.length;v++)d[y]=v,yield*h(m[v],y+1);else for(var x=0;x<m.length;x++)d[y]=x,yield{value:m[x],index:d.slice()}};yield*h(this._data,0)}},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,p=function(v){var x=h.map(g=>[g[v]]);f.push(new n(x,c._datatype))},m=0;m<d[1];m++)p(m);return f},n.prototype.toArray=function(){return ut(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return xt(this._data,c)},n.prototype.toString=function(){return xt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(ht(c)&&(c=c.toNumber()),!dt(c)||!qe(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],p=this._size[1],m=Math.min(h-d,p-f),y=[],v=0;v<m;v++)y[v]=this._data[v+d][v+f];return new n({data:y,size:[m],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!Ht(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(E){if(ht(E)&&(E=E.toNumber()),!dt(E)||!qe(E)||E<1)throw new Error("Size values must be positive integers");return E}),d){if(ht(d)&&(d=d.toNumber()),!dt(d)||!qe(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,m=d<0?-d:0,y=c[0],v=c[1],x=Math.min(y-m,v-p),g;if(Ht(f)){if(f.length!==x)throw new Error("Invalid value array length");g=function(C){return f[C]}}else if(Je(f)){var b=f.size();if(b.length!==1||b[0]!==x)throw new Error("Invalid matrix length");g=function(C){return f.get([C])}}else g=function(){return f};h||(h=ht(g(0))?g(0).mul(0):0);var w=[];if(c.length>0){w=sf(w,c,h);for(var _=0;_<x;_++)w[_+m][_+p]=g(_)}return new n({data:w,size:[y,v]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!dt(c)||!qe(c)||!dt(f)||!qe(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Xt(c,this._size[0]),Xt(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return Je(c)?l(c.valueOf()):Ht(c)?c.map(l):c}return n},{isClass:!0}),fD="clone",UG=["typed"],VG=z(fD,UG,t=>{var{typed:e}=t;return e(fD,{any:ut})});function xO(t){var e=t.length,n=t[0].length,r,i,a=[];for(i=0;i<n;i++){var o=[];for(r=0;r<e;r++)o.push(t[r][i]);a.push(o)}return a}function Mf(t){for(var e=0;e<t.length;e++)if(aa(t[e]))return!0;return!1}function Zs(t,e){Je(t)?t.forEach(n=>e(n),!1,!0):yO(t,e,!0)}function pt(t,e,n){if(!n)return Je(t)?t.map(i=>e(i),!1,!0):Ob(t,e,!0);var r=i=>i===0?i:e(i);return Je(t)?t.map(i=>r(i),!1,!0):Ob(t,r,!0)}function H0(t,e,n){var r=Array.isArray(t)?ot(t):t.size();if(e<0||e>=r.length)throw new ka(e,r.length);return Je(t)?t.create(Jv(t.valueOf(),e,n),t.datatype()):Jv(t,e,n)}function Jv(t,e,n){var r,i,a,o;if(e<=0)if(Array.isArray(t[0])){for(o=xO(t),i=[],r=0;r<o.length;r++)i[r]=Jv(o[r],e-1,n);return i}else{for(a=t[0],r=1;r<t.length;r++)a=n(a,t[r]);return a}else{for(i=[],r=0;r<t.length;r++)i[r]=Jv(t[r],e-1,n);return i}}function dD(t,e,n,r,i,a,o,s,u,l,c){var f=t._values,d=t._index,h=t._ptr,p,m,y,v;if(r)for(m=h[e],y=h[e+1],p=m;p<y;p++)v=d[p],n[v]!==a?(n[v]=a,o.push(v),r[v]=f[p]):(r[v]=s(r[v],f[p]),i[v]=a);else for(m=h[e],y=h[e+1],p=m;p<y;p++)v=d[p],n[v]!==a?(n[v]=a,o.push(v)):i[v]=a}var hD="isInteger",WG=["typed"],qG=z(hD,WG,t=>{var{typed:e}=t;return e(hD,{number:qe,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1n},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),Ra="number",If="number, number";function bO(t){return Math.abs(t)}bO.signature=Ra;function wO(t,e){return t+e}wO.signature=If;function _O(t,e){return t-e}_O.signature=If;function EO(t,e){return t*e}EO.signature=If;function CO(t){return-t}CO.signature=Ra;function NO(t){return t}NO.signature=Ra;function Nd(t){return Kq(t)}Nd.signature=Ra;function SO(t){return t*t*t}SO.signature=Ra;function DO(t){return Math.exp(t)}DO.signature=Ra;function AO(t){return Yq(t)}AO.signature=Ra;function TO(t,e){if(!qe(t)||!qe(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var n,r=t*e;e!==0;)n=e,e=t%n,t=n;return Math.abs(r/t)}TO.signature=If;function pD(t,e){return e?Math.log(t)/Math.log(e):Math.log(t)}function eg(t){return Hq(t)}eg.signature=Ra;function Bb(t){return qq(t)}Bb.signature=Ra;function mD(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=e<0;if(n&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return n?1/0:0;if(!isFinite(t))return n?0:t;var r=Math.pow(Math.abs(t),1/e);return r=t<0?-r:r,n?1/r:r}function Lb(t){return Ss(t)}Lb.signature=Ra;function MO(t){return t*t}MO.signature=Ra;function IO(t,e){var n,r,i,a=0,o=1,s=1,u=0;if(!qe(t)||!qe(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(t/e),i=t-r*e,n=a,a=o-r*a,o=n,n=s,s=u-r*s,u=n,t=e,e=i;var l;return t<0?l=[-t,-o,-u]:l=[t,t?o:0,u],l}IO.signature=If;function kO(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}kO.signature=If;function ld(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!qe(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(KP(t,e))}var HG="number",kf="number, number";function RO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function bitAnd");return t&e}RO.signature=kf;function FO(t){if(!qe(t))throw new Error("Integer expected in function bitNot");return~t}FO.signature=HG;function PO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function bitOr");return t|e}PO.signature=kf;function OO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function bitXor");return t^e}OO.signature=kf;function BO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function leftShift");return t<<e}BO.signature=kf;function LO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function rightArithShift");return t>>e}LO.signature=kf;function jO(t,e){if(!qe(t)||!qe(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}jO.signature=kf;function Ao(t,e){if(e<t)return 1;if(e===t)return e;var n=e+t>>1;return Ao(t,n)*Ao(n+1,e)}function $O(t,e){if(!qe(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!qe(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var n=t-e,r=1,i=e<n?n+1:e+1,a=2,o=e<n?e:n,s=i;s<=t;++s)for(r*=s;a<=o&&r%a===0;)r/=a,++a;return a<=o&&(r/=Ao(a,o)),r}$O.signature="number, number";var GG=Math.PI,KG=2*Math.PI,YG=Math.E,XG=1.618033988749895,QG="number",f_="number, number";function zO(t){return!t}zO.signature=QG;function jb(t,e){return!!(t||e)}jb.signature=f_;function $b(t,e){return!!t!=!!e}$b.signature=f_;function zb(t,e){return!!(t&&e)}zb.signature=f_;function tg(t){var e;if(qe(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:Ao(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*tg(1-t));if(t>=171.35)return 1/0;if(t>85){var n=t*t,r=n*t,i=r*t,a=i*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*t))}--t,e=Fc[0];for(var o=1;o<Fc.length;++o)e+=Fc[o]/(t+o);var s=t+UO+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,t+.5)*Math.exp(-s)*e}tg.signature="number";var UO=4.7421875,Fc=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],VO=.9189385332046728,ZG=5,JG=7,vD=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function ng(t){if(t<0)return NaN;if(t===0)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-ng(1-t);t=t-1;for(var e=t+ZG+.5,n=vD[0],r=JG-1;r>=1;r--)n+=vD[r]/(t+r);return VO+(t+.5)*Math.log(e)-e+Math.log(n)}ng.signature="number";var $r="number";function WO(t){return Jq(t)}WO.signature=$r;function qO(t){return Math.atan(1/t)}qO.signature=$r;function HO(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}HO.signature=$r;function GO(t){return Math.asin(1/t)}GO.signature=$r;function KO(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}KO.signature=$r;function YO(t){return Math.acos(1/t)}YO.signature=$r;function XO(t){var e=1/t,n=Math.sqrt(e*e-1);return Math.log(n+e)}XO.signature=$r;function QO(t){return eH(t)}QO.signature=$r;function ZO(t){return tH(t)}ZO.signature=$r;function JO(t){return 1/Math.tan(t)}JO.signature=$r;function eB(t){var e=Math.exp(2*t);return(e+1)/(e-1)}eB.signature=$r;function tB(t){return 1/Math.sin(t)}tB.signature=$r;function nB(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*Ss(t)}nB.signature=$r;function rB(t){return 1/Math.cos(t)}rB.signature=$r;function iB(t){return 2/(Math.exp(t)+Math.exp(-t))}iB.signature=$r;function aB(t){return rH(t)}aB.signature=$r;var d_="number";function oB(t){return t<0}oB.signature=d_;function sB(t){return t>0}sB.signature=d_;function uB(t){return Number.isNaN(t)}uB.signature=d_;function oa(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r))}var gD="isNegative",eK=["typed","config"],tK=z(gD,eK,t=>{var{typed:e,config:n}=t;return e(gD,{number:r=>br(r,0,n.relTol,n.absTol)?!1:oB(r),BigNumber:r=>oa(r,new r.constructor(0),n.relTol,n.absTol)?!1:r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r<0n,Fraction:r=>r.s<0n,Unit:e.referToSelf(r=>i=>e.find(r,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),yD="isNumeric",nK=["typed"],rK=z(yD,nK,t=>{var{typed:e}=t;return e(yD,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),xD="hasNumericValue",iK=["typed","isNumeric"],aK=z(xD,iK,t=>{var{typed:e,isNumeric:n}=t;return e(xD,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return n(i)}})}),bD="isPositive",oK=["typed","config"],sK=z(bD,oK,t=>{var{typed:e,config:n}=t;return e(bD,{number:r=>br(r,0,n.relTol,n.absTol)?!1:sB(r),BigNumber:r=>oa(r,new r.constructor(0),n.relTol,n.absTol)?!1:!r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r>0n,Fraction:r=>r.s>0n&&r.n>0n,Unit:e.referToSelf(r=>i=>e.find(r,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),wD="isZero",uK=["typed","equalScalar"],lK=z(wD,uK,t=>{var{typed:e,equalScalar:n}=t;return e(wD,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:e.referToSelf(r=>i=>e.find(r,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),_D="isNaN",cK=["typed"],fK=z(_D,cK,t=>{var{typed:e}=t;return e(_D,{number:uB,BigNumber:function(r){return r.isNaN()},bigint:function(r){return!1},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),ED="typeOf",dK=["typed"],hK=z(ED,dK,t=>{var{typed:e}=t;return e(ED,{any:Zt})});function pK(t,e,n,r){return br(t.re,e.re,n,r)&&br(t.im,e.im,n,r)}var Rf=z("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),rg="equalScalar",mK=["typed","config"],vK=z(rg,mK,t=>{var{typed:e,config:n}=t,r=Rf({typed:e});return e(rg,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return br(a,o,n.relTol,n.absTol)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||oa(a,o,n.relTol,n.absTol)},"bigint, bigint":function(a,o){return a===o},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return pK(a,o,n.relTol,n.absTol)}},r)});z(rg,["typed","config"],t=>{var{typed:e,config:n}=t;return e(rg,{"number, number":function(i,a){return br(i,a,n.relTol,n.absTol)}})});var gK="SparseMatrix",yK=["typed","equalScalar","Matrix"],xK=z(gK,yK,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(m,y){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!Tr(y))throw new Error("Invalid datatype: "+y);if(Je(m))a(this,m,y);else if(m&&Ht(m.index)&&Ht(m.ptr)&&Ht(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=y||m.datatype;else if(Ht(m))o(this,m,y);else{if(m)throw new TypeError("Unsupported type of data ("+Zt(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function a(m,y,v){y.type==="SparseMatrix"?(m._values=y._values?ut(y._values):void 0,m._index=ut(y._index),m._ptr=ut(y._ptr),m._size=ut(y._size),m._datatype=v||y._datatype):o(m,y.valueOf(),v||y._datatype)}function o(m,y,v){m._values=[],m._index=[],m._ptr=[],m._datatype=v;var x=y.length,g=0,b=n,w=0;if(Tr(v)&&(b=e.find(n,[v,v])||n,w=e.convert(0,v)),x>0){var _=0;do{m._ptr.push(m._index.length);for(var E=0;E<x;E++){var C=y[E];if(Ht(C)){if(_===0&&g<C.length&&(g=C.length),_<C.length){var N=C[_];b(N,w)||(m._values.push(N),m._index.push(E))}}else _===0&&g<1&&(g=1),b(C,w)||(m._values.push(C),m._index.push(E))}_++}while(_<g)}m._ptr.push(m._index.length),m._size=[x,g]}i.prototype=new r,i.prototype.createSparseMatrix=function(m,y){return new i(m,y)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return q0(this._values,Zt)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,y){return new i(m,y)},i.prototype.density=function(){var m=this._size[0],y=this._size[1];return m!==0&&y!==0?this._index.length/(m*y):0},i.prototype.subset=function(m,y,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,m);case 2:case 3:return u(this,m,y,v);default:throw new SyntaxError("Wrong number of arguments")}};function s(m,y){if(!L0(y))throw new TypeError("Invalid index");var v=y.isScalar();if(v)return m.get(y.min());var x=y.size();if(x.length!==m._size.length)throw new bt(x.length,m._size.length);var g,b,w,_,E=y.min(),C=y.max();for(g=0,b=m._size.length;g<b;g++)Xt(E[g],m._size[g]),Xt(C[g],m._size[g]);var N=m._values,D=m._index,A=m._ptr,T=y.dimension(0),R=y.dimension(1),F=[],O=[];T.forEach(function(k,j){O[k]=j[0],F[k]=!0});var I=N?[]:void 0,M=[],B=[];return R.forEach(function(k){for(B.push(M.length),w=A[k],_=A[k+1];w<_;w++)g=D[w],F[g]===!0&&(M.push(O[g]),I&&I.push(N[w]))}),B.push(M.length),new i({values:I,index:M,ptr:B,size:x,datatype:m._datatype})}function u(m,y,v,x){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var g=y.size(),b=y.isScalar(),w;if(Je(v)?(w=v.size(),v=v.toArray()):w=ot(v),b){if(w.length!==0)throw new TypeError("Scalar expected");m.set(y.min(),v,x)}else{if(g.length!==1&&g.length!==2)throw new bt(g.length,m._size.length,"<");if(w.length<g.length){for(var _=0,E=0;g[_]===1&&w[_]===1;)_++;for(;g[_]===1;)E++,_++;v=dO(v,g.length,E,w)}if(!qo(g,w))throw new bt(g,w,">");if(g.length===1){var C=y.dimension(0);C.forEach(function(A,T){Xt(A),m.set([A,0],v[T[0]],x)})}else{var N=y.dimension(0),D=y.dimension(1);N.forEach(function(A,T){Xt(A),D.forEach(function(R,F){Xt(R),m.set([A,R],v[T[0]][F[0]],x)})})}}return m}i.prototype.get=function(m){if(!Ht(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new bt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=m[0],v=m[1];Xt(y,this._size[0]),Xt(v,this._size[1]);var x=l(y,this._ptr[v],this._ptr[v+1],this._index);return x<this._ptr[v+1]&&this._index[x]===y?this._values[x]:0},i.prototype.set=function(m,y,v){if(!Ht(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new bt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var x=m[0],g=m[1],b=this._size[0],w=this._size[1],_=n,E=0;Tr(this._datatype)&&(_=e.find(n,[this._datatype,this._datatype])||n,E=e.convert(0,this._datatype)),(x>b-1||g>w-1)&&(d(this,Math.max(x+1,b),Math.max(g+1,w),v),b=this._size[0],w=this._size[1]),Xt(x,b),Xt(g,w);var C=l(x,this._ptr[g],this._ptr[g+1],this._index);return C<this._ptr[g+1]&&this._index[C]===x?_(y,E)?c(C,g,this._values,this._index,this._ptr):this._values[C]=y:_(y,E)||f(C,x,g,y,this._values,this._index,this._ptr),this};function l(m,y,v,x){if(v-y===0)return v;for(var g=y;g<v;g++)if(x[g]===m)return g;return y}function c(m,y,v,x,g){v.splice(m,1),x.splice(m,1);for(var b=y+1;b<g.length;b++)g[b]--}function f(m,y,v,x,g,b,w){g.splice(m,0,x),b.splice(m,0,y);for(var _=v+1;_<w.length;_++)w[_]++}i.prototype.resize=function(m,y,v){if(!aa(m))throw new TypeError("Array or Matrix expected");var x=m.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b);if(x.length!==2)throw new Error("Only two dimensions matrix are supported");x.forEach(function(b){if(!dt(b)||!qe(b)||b<0)throw new TypeError("Invalid size, must contain positive integers (size: "+xt(x)+")")});var g=v?this.clone():this;return d(g,x[0],x[1],y)};function d(m,y,v,x){var g=x||0,b=n,w=0;Tr(m._datatype)&&(b=e.find(n,[m._datatype,m._datatype])||n,w=e.convert(0,m._datatype),g=e.convert(g,m._datatype));var _=!b(g,w),E=m._size[0],C=m._size[1],N,D,A;if(v>C){for(D=C;D<v;D++)if(m._ptr[D]=m._values.length,_)for(N=0;N<E;N++)m._values.push(g),m._index.push(N);m._ptr[v]=m._values.length}else v<C&&(m._ptr.splice(v+1,C-v),m._values.splice(m._ptr[v],m._values.length),m._index.splice(m._ptr[v],m._index.length));if(C=v,y>E){if(_){var T=0;for(D=0;D<C;D++){m._ptr[D]=m._ptr[D]+T,A=m._ptr[D+1]+T;var R=0;for(N=E;N<y;N++,R++)m._values.splice(A+R,0,g),m._index.splice(A+R,0,N),T++}m._ptr[C]=m._values.length}}else if(y<E){var F=0;for(D=0;D<C;D++){m._ptr[D]=m._ptr[D]-F;var O=m._ptr[D],I=m._ptr[D+1]-F;for(A=O;A<I;A++)N=m._index[A],N>y-1&&(m._values.splice(A,1),m._index.splice(A,1),F++)}m._ptr[D]=m._values.length}return m._size[0]=y,m._size[1]=v,m}i.prototype.reshape=function(m,y){if(!Ht(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(k){if(!dt(k)||!qe(k)||k<=-2||k===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+xt(m)+")")});var v=this._size[0]*this._size[1];m=u_(m,v);var x=m[0]*m[1];if(v!==x)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var g=y?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return g;for(var b=[],w=0;w<g._ptr.length;w++)for(var _=0;_<g._ptr[w+1]-g._ptr[w];_++)b.push(w);for(var E=g._values.slice(),C=g._index.slice(),N=0;N<g._index.length;N++){var D=C[N],A=b[N],T=D*g._size[1]+A;b[N]=T%m[1],C[N]=Math.floor(T/m[1])}g._values.length=0,g._index.length=0,g._ptr.length=m[1]+1,g._size=m.slice();for(var R=0;R<g._ptr.length;R++)g._ptr[R]=0;for(var F=0;F<E.length;F++){var O=C[F],I=b[F],M=E[F],B=l(O,g._ptr[I],g._ptr[I+1],g._index);f(B,O,I,M,g._values,g._index,g._ptr)}return g},i.prototype.clone=function(){var m=new i({values:this._values?ut(this._values):void 0,index:ut(this._index),ptr:ut(this._ptr),size:ut(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,x=this._size[0],g=this._size[1],b=cl(m,v,"map"),w=function(E,C,N){return b.fn(E,[C,N],v)};return h(this,0,x-1,0,g-1,w,y)};function h(m,y,v,x,g,b,w){var _=[],E=[],C=[],N=n,D=0;Tr(m._datatype)&&(N=e.find(n,[m._datatype,m._datatype])||n,D=e.convert(0,m._datatype));for(var A=function(L,ne,fe){var te=b(L,ne,fe);N(te,D)||(_.push(te),E.push(ne))},T=x;T<=g;T++){C.push(_.length);var R=m._ptr[T],F=m._ptr[T+1];if(w)for(var O=R;O<F;O++){var I=m._index[O];I>=y&&I<=v&&A(m._values[O],I-y,T-x)}else{for(var M={},B=R;B<F;B++){var k=m._index[B];M[k]=m._values[B]}for(var j=y;j<=v;j++){var Y=j in M?M[j]:0;A(Y,j-y,T-x)}}}return C.push(_.length),new i({values:_,index:E,ptr:C,size:[v-y+1,g-x+1]})}i.prototype.forEach=function(m,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,x=this._size[0],g=this._size[1],b=cl(m,v,"forEach"),w=0;w<g;w++){var _=this._ptr[w],E=this._ptr[w+1];if(y)for(var C=_;C<E;C++){var N=this._index[C];b.fn(this._values[C],[N,w],v)}else{for(var D={},A=_;A<E;A++){var T=this._index[A];D[T]=this._values[A]}for(var R=0;R<x;R++){var F=R in D?D[R]:0;b.fn(F,[R,w],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],y=0;y<m;y++)for(var v=this._ptr[y],x=this._ptr[y+1],g=v;g<x;g++){var b=this._index[g];yield{value:this._values[g],index:[b,y]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(m,y,v,x,g){var b=x[0],w=x[1],_=[],E,C;for(E=0;E<b;E++)for(_[E]=[],C=0;C<w;C++)_[E][C]=0;for(C=0;C<w;C++)for(var N=v[C],D=v[C+1],A=N;A<D;A++)E=y[A],_[E][C]=m?g?ut(m[A]):m[A]:1;return _}return i.prototype.format=function(m){for(var y=this._size[0],v=this._size[1],x=this.density(),g="Sparse Matrix ["+xt(y,m)+" x "+xt(v,m)+"] density: "+xt(x,m)+`
`,b=0;b<v;b++)for(var w=this._ptr[b],_=this._ptr[b+1],E=w;E<_;E++){var C=this._index[E];g+=`
    (`+xt(C,m)+", "+xt(b,m)+") ==> "+(this._values?xt(this._values[E],m):"X")}return g},i.prototype.toString=function(){return xt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(ht(m)&&(m=m.toNumber()),!dt(m)||!qe(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var y=m>0?m:0,v=m<0?-m:0,x=this._size[0],g=this._size[1],b=Math.min(x-v,g-y),w=[],_=[],E=[];E[0]=0;for(var C=y;C<g&&w.length<b;C++)for(var N=this._ptr[C],D=this._ptr[C+1],A=N;A<D;A++){var T=this._index[A];if(T===C-y+v){w.push(this._values[A]),_[w.length-1]=T-v;break}}return E.push(w.length),new i({values:w,index:_,ptr:E,size:[b,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,y,v,x,g){if(!Ht(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(k){if(ht(k)&&(k=k.toNumber()),!dt(k)||!qe(k)||k<1)throw new Error("Size values must be positive integers");return k}),v){if(ht(v)&&(v=v.toNumber()),!dt(v)||!qe(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var b=n,w=0;Tr(g)&&(b=e.find(n,[g,g])||n,w=e.convert(0,g));var _=v>0?v:0,E=v<0?-v:0,C=m[0],N=m[1],D=Math.min(C-E,N-_),A;if(Ht(y)){if(y.length!==D)throw new Error("Invalid value array length");A=function(j){return y[j]}}else if(Je(y)){var T=y.size();if(T.length!==1||T[0]!==D)throw new Error("Invalid matrix length");A=function(j){return y.get([j])}}else A=function(){return y};for(var R=[],F=[],O=[],I=0;I<N;I++){O.push(R.length);var M=I-_;if(M>=0&&M<D){var B=A(M);b(B,w)||(F.push(M+E),R.push(B))}}return O.push(R.length),new i({values:R,index:F,ptr:O,size:[C,N]})},i.prototype.swapRows=function(m,y){if(!dt(m)||!qe(m)||!dt(y)||!qe(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Xt(m,this._size[0]),Xt(y,this._size[0]),i._swapRows(m,y,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,y,v,x,g){for(var b=x[m],w=x[m+1],_=b;_<w;_++)g(v[_],y[_])},i._swapRows=function(m,y,v,x,g,b){for(var w=0;w<v;w++){var _=b[w],E=b[w+1],C=l(m,_,E,g),N=l(y,_,E,g);if(C<E&&N<E&&g[C]===m&&g[N]===y){if(x){var D=x[C];x[C]=x[N],x[N]=D}continue}if(C<E&&g[C]===m&&(N>=E||g[N]!==y)){var A=x?x[C]:void 0;g.splice(N,0,y),x&&x.splice(N,0,A),g.splice(N<=C?C+1:C,1),x&&x.splice(N<=C?C+1:C,1);continue}if(N<E&&g[N]===y&&(C>=E||g[C]!==m)){var T=x?x[N]:void 0;g.splice(C,0,m),x&&x.splice(C,0,T),g.splice(C<=N?N+1:N,1),x&&x.splice(C<=N?N+1:N,1)}}},i},{isClass:!0}),bK="number",wK=["typed"];function _K(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:i}}else return null}function EK(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var i=parseInt(t.fractionalPart[r],t.radix);n+=i/Math.pow(t.radix,r+1)}var a=e+n;if(isNaN(a))throw new SyntaxError('String "'+t.input+'" is not a valid number');return a}var CK=z(bK,wK,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=_K(i);if(a)return EK(a);var o=0,s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(o=Number(s[2]),i=s[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(s){if(u>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),NK="bigint",SK=["typed"],DK=z(NK,SK,t=>{var{typed:e}=t,n=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))});return n.fromJSON=function(r){return BigInt(r.value)},n}),CD="string",AK=["typed"],TK=z(CD,AK,t=>{var{typed:e}=t;return e(CD,{"":function(){return""},number:el,null:function(r){return"null"},boolean:function(r){return r+""},string:function(r){return r},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n)),any:function(r){return String(r)}})}),ND="boolean",MK=["typed"],IK=z(ND,MK,t=>{var{typed:e}=t;return e(ND,{"":function(){return!1},boolean:function(r){return r},number:function(r){return!!r},null:function(r){return!1},BigNumber:function(r){return!r.isZero()},string:function(r){var i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var a=Number(r);if(r!==""&&!isNaN(a))return!!a;throw new Error('Cannot convert "'+r+'" to a boolean')},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),kK="bignumber",RK=["typed","BigNumber"],FK=z(kK,RK,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var o=a[2],s=n(a[1]),u=new n(2).pow(Number(o));if(s.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(o)-1);return s.gte(l)?s.sub(u):s}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Fraction:function(i){return new n(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new n(0)},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),PK="complex",OK=["typed","Complex"],BK=z(PK,OK,t=>{var{typed:e,Complex:n}=t;return e("complex",{"":function(){return n.ZERO},number:function(i){return new n(i,0)},"number, number":function(i,a){return new n(i,a)},"BigNumber, BigNumber":function(i,a){return new n(i.toNumber(),a.toNumber())},Fraction:function(i){return new n(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return n(i)},null:function(i){return n(0)},Object:function(i){if("re"in i&&"im"in i)return new n(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new n(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),LK="fraction",jK=["typed","Fraction"],$K=z(LK,jK,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,a){return new n(i,a)},"bigint, bigint":function(i,a){return new n(i,a)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Object:function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),SD="matrix",zK=["typed","Matrix","DenseMatrix","SparseMatrix"],UK=z(SD,zK,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(SD,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,u){return a([],s,u)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,u){if(s==="dense"||s==="default"||s===void 0)return new r(o,u);if(s==="sparse")return new i(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),DD="matrixFromFunction",VK=["typed","matrix","isZero"],WK=z(DD,VK,t=>{var{typed:e,matrix:n,isZero:r}=t;return e(DD,{"Array | Matrix, function, string, string":function(o,s,u,l){return i(o,s,u,l)},"Array | Matrix, function, string":function(o,s,u){return i(o,s,u)},"Matrix, function":function(o,s){return i(o,s,"dense")},"Array, function":function(o,s){return i(o,s,"dense").toArray()},"Array | Matrix, string, function":function(o,s,u){return i(o,u,s)},"Array | Matrix, string, string, function":function(o,s,u,l){return i(o,l,s,u)}});function i(a,o,s,u){var l;return u!==void 0?l=n(s,u):l=n(s),l.resize(a),l.forEach(function(c,f){var d=o(f);r(d)||l.set(f,d)}),l}}),AD="matrixFromRows",qK=["typed","matrix","flatten","size"],HK=z(AD,qK,t=>{var{typed:e,matrix:n,flatten:r,size:i}=t;return e(AD,{"...Array":function(u){return a(u)},"...Matrix":function(u){return n(a(u.map(l=>l.toArray())))}});function a(s){if(s.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=o(s[0]),l=[];for(var c of s){var f=o(c);if(f!==u)throw new TypeError("The vectors had different length: "+(u|0)+" ≠ "+(f|0));l.push(r(c))}return l}function o(s){var u=i(s);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),TD="matrixFromColumns",GK=["typed","matrix","flatten","size"],KK=z(TD,GK,t=>{var{typed:e,matrix:n,flatten:r,size:i}=t;return e(TD,{"...Array":function(u){return a(u)},"...Matrix":function(u){return n(a(u.map(l=>l.toArray())))}});function a(s){if(s.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=o(s[0]),l=[],c=0;c<u;c++)l[c]=[];for(var f of s){var d=o(f);if(d!==u)throw new TypeError("The vectors had different length: "+(u|0)+" ≠ "+(d|0));for(var h=r(f),p=0;p<u;p++)l[p].push(h[p])}return l}function o(s){var u=i(s);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),MD="splitUnit",YK=["typed"],XK=z(MD,YK,t=>{var{typed:e}=t;return e(MD,{"Unit, Array":function(r,i){return r.splitUnit(i)}})}),ID="unaryMinus",QK=["typed"],ZK=z(ID,QK,t=>{var{typed:e}=t;return e(ID,{number:CO,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:e.referToSelf(n=>r=>{var i=r.clone();return i.value=e.find(n,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(n=>r=>pt(r,n,!0))})}),kD="unaryPlus",JK=["typed","config","numeric"],eY=z(kD,JK,t=>{var{typed:e,config:n,numeric:r}=t;return e(kD,{number:NO,Complex:function(a){return a},BigNumber:function(a){return a},bigint:function(a){return a},Fraction:function(a){return a},Unit:function(a){return a.clone()},"Array | Matrix":e.referToSelf(i=>a=>pt(a,i,!0)),boolean:function(a){return r(a?1:0,n.number)},string:function(a){return r(a,lu(a,n))}})}),RD="abs",tY=["typed"],nY=z(RD,tY,t=>{var{typed:e}=t;return e(RD,{number:bO,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":e.referToSelf(n=>r=>pt(r,n,!0))})}),FD="mapSlices",rY=["typed","isInteger"],Ub=z(FD,rY,t=>{var{typed:e,isInteger:n}=t;return e(FD,{"Array | Matrix, number | BigNumber, function":function(i,a,o){if(!n(a))throw new TypeError("Integer number expected for dimension");var s=Array.isArray(i)?ot(i):i.size();if(a<0||a>=s.length)throw new ka(a,s.length);return Je(i)?i.create(ig(i.valueOf(),a,o),i.datatype()):ig(i,a,o)}})},{formerly:"apply"});function ig(t,e,n){var r,i,a;if(e<=0)if(Array.isArray(t[0])){for(a=iY(t),i=[],r=0;r<a.length;r++)i[r]=ig(a[r],e-1,n);return i}else return n(t);else{for(i=[],r=0;r<t.length;r++)i[r]=ig(t[r],e-1,n);return i}}function iY(t){var e=t.length,n=t[0].length,r,i,a=[];for(i=0;i<n;i++){var o=[];for(r=0;r<e;r++)o.push(t[r][i]);a.push(o)}return a}var PD="addScalar",aY=["typed"],oY=z(PD,aY,t=>{var{typed:e}=t;return e(PD,{"number, number":wO,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var a=r.clone();return a.value=e.find(n,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),OD="subtractScalar",sY=["typed"],uY=z(OD,sY,t=>{var{typed:e}=t;return e(OD,{"number, number":_O,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var a=r.clone();return a.value=e.find(n,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),BD="cbrt",lY=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],cY=z(BD,lY,t=>{var{config:e,typed:n,isNegative:r,unaryMinus:i,matrix:a,Complex:o,BigNumber:s,Fraction:u}=t;return n(BD,{number:Nd,Complex:l,"Complex, boolean":l,BigNumber:function(d){return d.cbrt()},Unit:c});function l(f,d){var h=f.arg()/3,p=f.abs(),m=new o(Nd(p),0).mul(new o(0,h).exp());if(d){var y=[m,new o(Nd(p),0).mul(new o(0,h+Math.PI*2/3).exp()),new o(Nd(p),0).mul(new o(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?y:a(y)}else return m}function c(f){if(f.value&&Ro(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=l(f.value),d}else{var h=r(f.value);h&&(f.value=i(f.value));var p;ht(f.value)?p=new s(1).div(3):ap(f.value)?p=new u(1,3):p=1/3;var m=f.pow(p);return h&&(m.value=i(m.value)),m}}}),fY="matAlgo11xS0s",dY=["typed","equalScalar"],wr=z(fY,dY,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,y=n,v=0,x=o;typeof d=="string"&&(m=d,y=e.find(n,[m,m]),v=e.convert(0,m),a=e.convert(a,m),x=e.find(o,[m,m]));for(var g=[],b=[],w=[],_=0;_<p;_++){w[_]=b.length;for(var E=c[_],C=c[_+1],N=E;N<C;N++){var D=l[N],A=s?x(a,u[N]):x(u[N],a);y(A,v)||(b.push(D),g.push(A))}}return w[p]=b.length,i.createSparseMatrix({values:g,index:b,ptr:w,size:[h,p],datatype:m})}}),hY="matAlgo12xSfs",pY=["typed","DenseMatrix"],Kn=z(hY,pY,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,y=o;typeof d=="string"&&(m=d,a=e.convert(a,m),y=e.find(o,[m,m]));for(var v=[],x=[],g=[],b=0;b<p;b++){for(var w=b+1,_=c[b],E=c[b+1],C=_;C<E;C++){var N=l[C];x[N]=u[C],g[N]=w}for(var D=0;D<h;D++)b===0&&(v[D]=[]),g[D]===w?v[D][b]=s?y(a,x[D]):y(x[D],a):v[D][b]=s?y(a,0):y(0,a)}return new n({data:v,size:[h,p],datatype:m})}}),mY="matAlgo14xDs",vY=["typed"],Fa=z(mY,vY,t=>{var{typed:e}=t;return function(i,a,o,s){var u=i._data,l=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,a=e.convert(a,f),d=e.find(o,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,a,s):[];return i.createDenseMatrix({data:h,size:ut(l),datatype:f})};function n(r,i,a,o,s,u,l){var c=[];if(i===a.length-1)for(var f=0;f<o;f++)c[f]=l?r(u,s[f]):r(s[f],u);else for(var d=0;d<o;d++)c[d]=n(r,i+1,a,a[i+1],s[d],u,l);return c}}),Vb="ceil",gY=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],yY=new Qs(10),xY=z(Vb,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;function i(a){var o=Math.ceil(a),s=r(a);return o===s?o:br(a,s,n.relTol,n.absTol)&&!br(a,o,n.relTol,n.absTol)?s:o}return e(Vb,{number:i,"number, number":function(o,s){if(!qe(s))throw new RangeError("number of decimals in function ceil must be an integer");if(s<0||s>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var u=10**s;return i(o*u)/u}})}),bY=z(Vb,gY,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=t,u=wr({typed:e,equalScalar:a}),l=Kn({typed:e,DenseMatrix:s}),c=Fa({typed:e}),f=xY({typed:e,config:n,round:r});function d(h){var p=(v,x)=>oa(v,x,n.relTol,n.absTol),m=h.ceil(),y=r(h);return m.eq(y)?m:p(h,y)&&!p(h,m)?y:m}return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,m){return p.ceil(m)},"Complex, BigNumber":function(p,m){return p.ceil(m.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,m){var y=yY.pow(m);return d(p.mul(y)).div(y)},bigint:h=>h,"bigint, number":(h,p)=>h,"bigint, BigNumber":(h,p)=>h,Fraction:function(p){return p.ceil()},"Fraction, number":function(p,m){return p.ceil(m)},"Fraction, BigNumber":function(p,m){return p.ceil(m.toNumber())},"Unit, number, Unit":e.referToSelf(h=>function(p,m,y){var v=p.toNumeric(y);return y.multiply(h(v,m))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(p,m,y)=>h(p,m.toNumber(),y)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(p,m,y)=>pt(p,v=>h(v,m,y),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(p,m)=>h(p,0,m)),"Array | Matrix":e.referToSelf(h=>p=>pt(p,h,!0)),"Array, number | BigNumber":e.referToSelf(h=>(p,m)=>pt(p,y=>h(y,m),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(p,m)=>u(p,m,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(p,m)=>c(p,m,h,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(p,m)=>c(i(m),p,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(p,m)=>a(p,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,p,h,!0):l(m,p,h,!0))})}),LD="cube",wY=["typed"],_Y=z(LD,wY,t=>{var{typed:e}=t;return e(LD,{number:SO,Complex:function(r){return r.mul(r).mul(r)},BigNumber:function(r){return r.times(r).times(r)},bigint:function(r){return r*r*r},Fraction:function(r){return r.pow(3)},Unit:function(r){return r.pow(3)}})}),jD="exp",EY=["typed"],CY=z(jD,EY,t=>{var{typed:e}=t;return e(jD,{number:DO,Complex:function(r){return r.exp()},BigNumber:function(r){return r.exp()}})}),$D="expm1",NY=["typed","Complex"],SY=z($D,NY,t=>{var{typed:e,Complex:n}=t;return e($D,{number:AO,Complex:function(i){var a=Math.exp(i.re);return new n(a*Math.cos(i.im)-1,a*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),Wb="fix",DY=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],AY=z(Wb,["typed","ceil","floor"],t=>{var{typed:e,ceil:n,floor:r}=t;return e(Wb,{number:function(a){return a>0?r(a):n(a)},"number, number":function(a,o){return a>0?r(a,o):n(a,o)}})}),TY=z(Wb,DY,t=>{var{typed:e,Complex:n,matrix:r,ceil:i,floor:a,equalScalar:o,zeros:s,DenseMatrix:u}=t,l=Kn({typed:e,DenseMatrix:u}),c=Fa({typed:e}),f=AY({typed:e,ceil:i,floor:a});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(h){return new n(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,p){return new n(h.re>0?a(h.re,p):i(h.re,p),h.im>0?a(h.im,p):i(h.im,p))},"Complex, BigNumber":function(h,p){var m=p.toNumber();return new n(h.re>0?a(h.re,m):i(h.re,m),h.im>0?a(h.im,m):i(h.im,m))},BigNumber:function(h){return h.isNegative()?i(h):a(h)},"BigNumber, number | BigNumber":function(h,p){return h.isNegative()?i(h,p):a(h,p)},bigint:d=>d,"bigint, number":(d,h)=>d,"bigint, BigNumber":(d,h)=>d,Fraction:function(h){return h.s<0n?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,p){return h.s<0n?i(h,p):a(h,p)},"Unit, number, Unit":e.referToSelf(d=>function(h,p,m){var y=h.toNumeric(m);return m.multiply(d(y,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,p,m)=>d(h,p.toNumber(),m)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,p,m)=>pt(h,y=>d(y,p,m),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,p)=>d(h,0,p)),"Array | Matrix":e.referToSelf(d=>h=>pt(h,d,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(h,p)=>pt(h,m=>d(m,p),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,p)=>c(r(p),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,p)=>o(h,0)?s(p.size(),p.storage()):p.storage()==="dense"?c(p,h,d,!0):l(p,h,d,!0))})}),qb="floor",MY=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],IY=new Qs(10),kY=z(qb,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;function i(a){var o=Math.floor(a),s=r(a);return o===s?o:br(a,s,n.relTol,n.absTol)&&!br(a,o,n.relTol,n.absTol)?s:o}return e(qb,{number:i,"number, number":function(o,s){if(!qe(s))throw new RangeError("number of decimals in function floor must be an integer");if(s<0||s>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var u=10**s;return i(o*u)/u}})}),lB=z(qb,MY,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=t,u=wr({typed:e,equalScalar:a}),l=Kn({typed:e,DenseMatrix:s}),c=Fa({typed:e}),f=kY({typed:e,config:n,round:r});function d(h){var p=(v,x)=>oa(v,x,n.relTol,n.absTol),m=h.floor(),y=r(h);return m.eq(y)?m:p(h,y)&&!p(h,m)?y:m}return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,m){return p.floor(m)},"Complex, BigNumber":function(p,m){return p.floor(m.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,m){var y=IY.pow(m);return d(p.mul(y)).div(y)},bigint:h=>h,"bigint, number":(h,p)=>h,"bigint, BigNumber":(h,p)=>h,Fraction:function(p){return p.floor()},"Fraction, number":function(p,m){return p.floor(m)},"Fraction, BigNumber":function(p,m){return p.floor(m.toNumber())},"Unit, number, Unit":e.referToSelf(h=>function(p,m,y){var v=p.toNumeric(y);return y.multiply(h(v,m))}),"Unit, BigNumber, Unit":e.referToSelf(h=>(p,m,y)=>h(p,m.toNumber(),y)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(h=>(p,m,y)=>pt(p,v=>h(v,m,y),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(h=>(p,m)=>h(p,0,m)),"Array | Matrix":e.referToSelf(h=>p=>pt(p,h,!0)),"Array, number | BigNumber":e.referToSelf(h=>(p,m)=>pt(p,y=>h(y,m),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(h=>(p,m)=>u(p,m,h,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(h=>(p,m)=>c(p,m,h,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(h=>(p,m)=>c(i(m),p,h,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(h=>(p,m)=>a(p,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,p,h,!0):l(m,p,h,!0))})}),RY="matAlgo02xDS0",FY=["typed","equalScalar"],Pa=z(RY,FY,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o,s){var u=i._data,l=i._size,c=i._datatype||i.getDataType(),f=a._values,d=a._index,h=a._ptr,p=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==p.length)throw new bt(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=l[0],v=l[1],x,g=n,b=0,w=o;typeof c=="string"&&c===m&&c!=="mixed"&&(x=c,g=e.find(n,[x,x]),b=e.convert(0,x),w=e.find(o,[x,x]));for(var _=[],E=[],C=[],N=0;N<v;N++){C[N]=E.length;for(var D=h[N],A=h[N+1],T=D;T<A;T++){var R=d[T],F=s?w(f[T],u[R][N]):w(u[R][N],f[T]);g(F,b)||(E.push(R),_.push(F))}}return C[v]=E.length,a.createSparseMatrix({values:_,index:E,ptr:C,size:[y,v],datatype:c===i._datatype&&m===a._datatype?x:void 0})}}),PY="matAlgo03xDSf",OY=["typed"],Jr=z(PY,OY,t=>{var{typed:e}=t;return function(r,i,a,o){var s=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new bt(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],y=u[1],v,x=0,g=a;typeof l=="string"&&l===p&&l!=="mixed"&&(v=l,x=e.convert(0,v),g=e.find(a,[v,v]));for(var b=[],w=0;w<m;w++)b[w]=[];for(var _=[],E=[],C=0;C<y;C++){for(var N=C+1,D=d[C],A=d[C+1],T=D;T<A;T++){var R=f[T];_[R]=o?g(c[T],s[R][C]):g(s[R][C],c[T]),E[R]=N}for(var F=0;F<m;F++)E[F]===N?b[F][C]=_[F]:b[F][C]=o?g(x,s[F][C]):g(s[F][C],x)}return r.createDenseMatrix({data:b,size:[m,y],datatype:l===r._datatype&&p===i._datatype?v:void 0})}}),BY="matAlgo05xSfSf",LY=["typed","equalScalar"],G0=z(BY,LY,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,h=a._index,p=a._ptr,m=a._size,y=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new bt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var v=c[0],x=c[1],g,b=n,w=0,_=o;typeof f=="string"&&f===y&&f!=="mixed"&&(g=f,b=e.find(n,[g,g]),w=e.convert(0,g),_=e.find(o,[g,g]));var E=s&&d?[]:void 0,C=[],N=[],D=E?[]:void 0,A=E?[]:void 0,T=[],R=[],F,O,I,M;for(O=0;O<x;O++){N[O]=C.length;var B=O+1;for(I=l[O],M=l[O+1];I<M;I++)F=u[I],C.push(F),T[F]=B,D&&(D[F]=s[I]);for(I=p[O],M=p[O+1];I<M;I++)F=h[I],T[F]!==B&&C.push(F),R[F]=B,A&&(A[F]=d[I]);if(E)for(I=N[O];I<C.length;){F=C[I];var k=T[F],j=R[F];if(k===B||j===B){var Y=k===B?D[F]:w,q=j===B?A[F]:w,L=_(Y,q);b(L,w)?C.splice(I,1):(E.push(L),I++)}}}return N[x]=C.length,i.createSparseMatrix({values:E,index:C,ptr:N,size:[v,x],datatype:f===i._datatype&&y===a._datatype?g:void 0})}}),jY="matAlgo13xDD",$Y=["typed"],zY=z(jY,$Y,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,u=i._size,l=i._datatype,c=a._data,f=a._size,d=a._datatype,h=[];if(u.length!==f.length)throw new bt(u.length,f.length);for(var p=0;p<u.length;p++){if(u[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[p]=u[p]}var m,y=o;typeof l=="string"&&l===d&&(m=l,y=e.find(o,[m,m]));var v=h.length>0?n(y,0,h,h[0],s,c):[];return i.createDenseMatrix({data:v,size:h,datatype:m})};function n(r,i,a,o,s,u){var l=[];if(i===a.length-1)for(var c=0;c<o;c++)l[c]=r(s[c],u[c]);else for(var f=0;f<o;f++)l[f]=n(r,i+1,a,a[i+1],s[f],u[f]);return l}});function Zn(t,e){if(qo(t.size(),e.size()))return[t,e];var n=l_(t.size(),e.size());return[t,e].map(r=>UY(r,n))}function UY(t,e){return qo(t.size(),e)?t:t.create(Wu(t.valueOf(),e),t.datatype())}var VY="matrixAlgorithmSuite",WY=["typed","matrix"],Jt=z(VY,WY,t=>{var{typed:e,matrix:n}=t,r=zY({typed:e}),i=Fa({typed:e});return function(o){var s=o.elop,u=o.SD||o.DS,l;s?(l={"DenseMatrix, DenseMatrix":(h,p)=>r(...Zn(h,p),s),"Array, Array":(h,p)=>r(...Zn(n(h),n(p)),s).valueOf(),"Array, DenseMatrix":(h,p)=>r(...Zn(n(h),p),s),"DenseMatrix, Array":(h,p)=>r(...Zn(h,n(p)),s)},o.SS&&(l["SparseMatrix, SparseMatrix"]=(h,p)=>o.SS(...Zn(h,p),s,!1)),o.DS&&(l["DenseMatrix, SparseMatrix"]=(h,p)=>o.DS(...Zn(h,p),s,!1),l["Array, SparseMatrix"]=(h,p)=>o.DS(...Zn(n(h),p),s,!1)),u&&(l["SparseMatrix, DenseMatrix"]=(h,p)=>u(...Zn(p,h),s,!0),l["SparseMatrix, Array"]=(h,p)=>u(...Zn(n(p),h),s,!0))):(l={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(p,m)=>r(...Zn(p,m),h)),"Array, Array":e.referToSelf(h=>(p,m)=>r(...Zn(n(p),n(m)),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(p,m)=>r(...Zn(n(p),m),h)),"DenseMatrix, Array":e.referToSelf(h=>(p,m)=>r(...Zn(p,n(m)),h))},o.SS&&(l["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(p,m)=>o.SS(...Zn(p,m),h,!1))),o.DS&&(l["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(p,m)=>o.DS(...Zn(p,m),h,!1)),l["Array, SparseMatrix"]=e.referToSelf(h=>(p,m)=>o.DS(...Zn(n(p),m),h,!1))),u&&(l["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(p,m)=>u(...Zn(m,p),h,!0)),l["SparseMatrix, Array"]=e.referToSelf(h=>(p,m)=>u(...Zn(n(m),p),h,!0))));var c=o.scalar||"any",f=o.Ds||o.Ss;f&&(s?(l["DenseMatrix,"+c]=(h,p)=>i(h,p,s,!1),l[c+", DenseMatrix"]=(h,p)=>i(p,h,s,!0),l["Array,"+c]=(h,p)=>i(n(h),p,s,!1).valueOf(),l[c+", Array"]=(h,p)=>i(n(p),h,s,!0).valueOf()):(l["DenseMatrix,"+c]=e.referToSelf(h=>(p,m)=>i(p,m,h,!1)),l[c+", DenseMatrix"]=e.referToSelf(h=>(p,m)=>i(m,p,h,!0)),l["Array,"+c]=e.referToSelf(h=>(p,m)=>i(n(p),m,h,!1).valueOf()),l[c+", Array"]=e.referToSelf(h=>(p,m)=>i(n(m),p,h,!0).valueOf())));var d=o.sS!==void 0?o.sS:o.Ss;return s?(o.Ss&&(l["SparseMatrix,"+c]=(h,p)=>o.Ss(h,p,s,!1)),d&&(l[c+", SparseMatrix"]=(h,p)=>d(p,h,s,!0))):(o.Ss&&(l["SparseMatrix,"+c]=e.referToSelf(h=>(p,m)=>o.Ss(p,m,h,!1))),d&&(l[c+", SparseMatrix"]=e.referToSelf(h=>(p,m)=>d(m,p,h,!0)))),s&&s.signatures&&qP(l,s.signatures),l}}),zD="mod",qY=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],cB=z(zD,qY,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s,concat:u}=t,l=lB({typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}),c=Pa({typed:e,equalScalar:a}),f=Jr({typed:e}),d=G0({typed:e,equalScalar:a}),h=wr({typed:e,equalScalar:a}),p=Kn({typed:e,DenseMatrix:s}),m=Jt({typed:e,matrix:i,concat:u});return e(zD,{"number, number":y,"BigNumber, BigNumber":function(x,g){return g.isZero()?x:x.sub(g.mul(l(x.div(g))))},"bigint, bigint":function(x,g){if(g===0n)return x;if(x<0){var b=x%g;return b===0n?b:b+g}return x%g},"Fraction, Fraction":function(x,g){return g.equals(0)?x:x.sub(g.mul(l(x.div(g))))}},m({SS:d,DS:f,SD:c,Ss:h,sS:p}));function y(v,x){return x===0?v:v-x*l(v/x)}}),HY="matAlgo01xDSid",GY=["typed"],fu=z(HY,GY,t=>{var{typed:e}=t;return function(r,i,a,o){var s=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new bt(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=u[0],y=u[1],v=typeof l=="string"&&l!=="mixed"&&l===p?l:void 0,x=v?e.find(a,[v,v]):a,g,b,w=[];for(g=0;g<m;g++)w[g]=[];var _=[],E=[];for(b=0;b<y;b++){for(var C=b+1,N=d[b],D=d[b+1],A=N;A<D;A++)g=f[A],_[g]=o?x(c[A],s[g][b]):x(s[g][b],c[A]),E[g]=C;for(g=0;g<m;g++)E[g]===C?w[g][b]=_[g]:w[g][b]=s[g][b]}return r.createDenseMatrix({data:w,size:[m,y],datatype:l===r._datatype&&p===i._datatype?v:void 0})}}),KY="matAlgo04xSidSid",YY=["typed","equalScalar"],h_=z(KY,YY,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,h=a._index,p=a._ptr,m=a._size,y=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new bt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var v=c[0],x=c[1],g,b=n,w=0,_=o;typeof f=="string"&&f===y&&f!=="mixed"&&(g=f,b=e.find(n,[g,g]),w=e.convert(0,g),_=e.find(o,[g,g]));var E=s&&d?[]:void 0,C=[],N=[],D=s&&d?[]:void 0,A=s&&d?[]:void 0,T=[],R=[],F,O,I,M,B;for(O=0;O<x;O++){N[O]=C.length;var k=O+1;for(M=l[O],B=l[O+1],I=M;I<B;I++)F=u[I],C.push(F),T[F]=k,D&&(D[F]=s[I]);for(M=p[O],B=p[O+1],I=M;I<B;I++)if(F=h[I],T[F]===k){if(D){var j=_(D[F],d[I]);b(j,w)?T[F]=null:D[F]=j}}else C.push(F),R[F]=k,A&&(A[F]=d[I]);if(D&&A)for(I=N[O];I<C.length;)F=C[I],T[F]===k?(E[I]=D[F],I++):R[F]===k?(E[I]=A[F],I++):C.splice(I,1)}return N[x]=C.length,i.createSparseMatrix({values:E,index:C,ptr:N,size:[v,x],datatype:f===i._datatype&&y===a._datatype?g:void 0})}}),XY="matAlgo10xSids",QY=["typed","DenseMatrix"],Sl=z(XY,QY,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,a,o,s){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,y=o;typeof d=="string"&&(m=d,a=e.convert(a,m),y=e.find(o,[m,m]));for(var v=[],x=[],g=[],b=0;b<p;b++){for(var w=b+1,_=c[b],E=c[b+1],C=_;C<E;C++){var N=l[C];x[N]=u[C],g[N]=w}for(var D=0;D<h;D++)b===0&&(v[D]=[]),g[D]===w?v[D][b]=s?y(a,x[D]):y(x[D],a):v[D][b]=a}return new n({data:v,size:[h,p],datatype:m})}});function Dl(t,e,n,r){if(!(this instanceof Dl))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}Dl.prototype=new Error;Dl.prototype.constructor=Error;Dl.prototype.name="ArgumentsError";Dl.prototype.isArgumentsError=!0;var UD="gcd",ZY=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],y1="number | BigNumber | Fraction | Matrix | Array",JY="".concat(y1,", ").concat(y1,", ...").concat(y1);function VD(t){return!t.some(e=>Array.isArray(e))}var eX=z(UD,ZY,t=>{var{typed:e,matrix:n,config:r,round:i,equalScalar:a,zeros:o,BigNumber:s,DenseMatrix:u,concat:l}=t,c=cB({typed:e,config:r,round:i,matrix:n,equalScalar:a,zeros:o,DenseMatrix:u,concat:l}),f=fu({typed:e}),d=h_({typed:e,equalScalar:a}),h=Sl({typed:e,DenseMatrix:u}),p=Jt({typed:e,matrix:n,concat:l});return e(UD,{"number, number":m,"BigNumber, BigNumber":y,"Fraction, Fraction":(v,x)=>v.gcd(x)},p({SS:d,DS:f,Ss:h}),{[JY]:e.referToSelf(v=>(x,g,b)=>{for(var w=v(x,g),_=0;_<b.length;_++)w=v(w,b[_]);return w}),Array:e.referToSelf(v=>x=>{if(x.length===1&&Array.isArray(x[0])&&VD(x[0]))return v(...x[0]);if(VD(x))return v(...x);throw new Dl("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(v=>x=>v(x.toArray()))});function m(v,x){if(!qe(v)||!qe(x))throw new Error("Parameters in function gcd must be integer numbers");for(var g;x!==0;)g=c(v,x),v=x,x=g;return v<0?-v:v}function y(v,x){if(!v.isInt()||!x.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var g=new s(0);!x.isZero();){var b=c(v,x);v=x,x=b}return v.lt(g)?v.neg():v}}),tX="matAlgo06xS0S0",nX=["typed","equalScalar"],K0=z(tX,nX,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=a._values,f=a._size,d=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==f.length)throw new bt(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var h=u[0],p=u[1],m,y=n,v=0,x=o;typeof l=="string"&&l===d&&l!=="mixed"&&(m=l,y=e.find(n,[m,m]),v=e.convert(0,m),x=e.find(o,[m,m]));for(var g=s&&c?[]:void 0,b=[],w=[],_=g?[]:void 0,E=[],C=[],N=0;N<p;N++){w[N]=b.length;var D=N+1;if(dD(i,N,E,_,C,D,b,x),dD(a,N,E,_,C,D,b,x),_)for(var A=w[N];A<b.length;){var T=b[A];if(C[T]===D){var R=_[T];y(R,v)?b.splice(A,1):(g.push(R),A++)}else b.splice(A,1)}else for(var F=w[N];F<b.length;){var O=b[F];C[O]!==D?b.splice(F,1):F++}}return w[p]=b.length,i.createSparseMatrix({values:g,index:b,ptr:w,size:[h,p],datatype:l===i._datatype&&d===a._datatype?m:void 0})}}),WD="lcm",rX=["typed","matrix","equalScalar","concat"],iX=z(WD,rX,t=>{var{typed:e,matrix:n,equalScalar:r,concat:i}=t,a=Pa({typed:e,equalScalar:r}),o=K0({typed:e,equalScalar:r}),s=wr({typed:e,equalScalar:r}),u=Jt({typed:e,matrix:n,concat:i}),l="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(l,", ").concat(l,", ...").concat(l)]=e.referToSelf(d=>(h,p,m)=>{for(var y=d(h,p),v=0;v<m.length;v++)y=d(y,m[v]);return y}),e(WD,{"number, number":TO,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,h)=>d.lcm(h)},u({SS:o,DS:a,Ss:s}),c);function f(d,h){if(!d.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(h.isZero())return h;for(var p=d.times(h);!h.isZero();){var m=h;h=d.mod(m),d=m}return p.div(d).abs()}});function p_(t,e,n,r){return function(i){if(i>0||n.predictable){if(i<=0)return NaN;var a=i.toString(16),o=a.substring(0,15);return t*(a.length-o.length)+e(+("0x"+o))}return r(i.toNumber())}}var qD="log10",aX=["typed","config","Complex"],oX=eg(16),sX=z(qD,aX,t=>{var{typed:e,config:n,Complex:r}=t;function i(o){return o.log().div(Math.LN10)}function a(o){return i(new r(o,0))}return e(qD,{number:function(s){return s>=0||n.predictable?eg(s):a(s)},bigint:p_(oX,eg,n,a),Complex:i,BigNumber:function(s){return!s.isNegative()||n.predictable?s.log():a(s.toNumber())},"Array | Matrix":e.referToSelf(o=>s=>pt(s,o))})}),HD="log2",uX=["typed","config","Complex"],lX=z(HD,uX,t=>{var{typed:e,config:n,Complex:r}=t;function i(o){return a(new r(o,0))}return e(HD,{number:function(s){return s>=0||n.predictable?Bb(s):i(s)},bigint:p_(4,Bb,n,i),Complex:a,BigNumber:function(s){return!s.isNegative()||n.predictable?s.log(2):i(s.toNumber())},"Array | Matrix":e.referToSelf(o=>s=>pt(s,o))});function a(o){var s=Math.sqrt(o.re*o.re+o.im*o.im);return new r(Math.log2?Math.log2(s):Math.log(s)/Math.LN2,Math.atan2(o.im,o.re)/Math.LN2)}}),cX="multiplyScalar",fX=["typed"],dX=z(cX,fX,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":EO,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),GD="multiply",hX=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],pX=z(GD,hX,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:a,dot:o}=t,s=wr({typed:e,equalScalar:a}),u=Fa({typed:e});function l(w,_){switch(w.length){case 1:switch(_.length){case 1:if(w[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;case 2:switch(_.length){case 1:if(w[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+_[0]+")");break;case 2:if(w[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function c(w,_,E){if(E===0)throw new Error("Cannot multiply two empty vectors");return o(w,_)}function f(w,_){if(_.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(w,_)}function d(w,_){var E=w._data,C=w._size,N=w._datatype||w.getDataType(),D=_._data,A=_._size,T=_._datatype||_.getDataType(),R=C[0],F=A[1],O,I=r,M=i;N&&T&&N===T&&typeof N=="string"&&N!=="mixed"&&(O=N,I=e.find(r,[O,O]),M=e.find(i,[O,O]));for(var B=[],k=0;k<F;k++){for(var j=M(E[0],D[0][k]),Y=1;Y<R;Y++)j=I(j,M(E[Y],D[Y][k]));B[k]=j}return w.createDenseMatrix({data:B,size:[F],datatype:N===w._datatype&&T===_._datatype?O:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":x}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":g,"SparseMatrix, SparseMatrix":b});function m(w,_){var E=w._data,C=w._size,N=w._datatype||w.getDataType(),D=_._data,A=_._datatype||_.getDataType(),T=C[0],R=C[1],F,O=r,I=i;N&&A&&N===A&&typeof N=="string"&&N!=="mixed"&&(F=N,O=e.find(r,[F,F]),I=e.find(i,[F,F]));for(var M=[],B=0;B<T;B++){for(var k=E[B],j=I(k[0],D[0]),Y=1;Y<R;Y++)j=O(j,I(k[Y],D[Y]));M[B]=j}return w.createDenseMatrix({data:M,size:[T],datatype:N===w._datatype&&A===_._datatype?F:void 0})}function y(w,_){var E=w._data,C=w._size,N=w._datatype||w.getDataType(),D=_._data,A=_._size,T=_._datatype||_.getDataType(),R=C[0],F=C[1],O=A[1],I,M=r,B=i;N&&T&&N===T&&typeof N=="string"&&N!=="mixed"&&N!=="mixed"&&(I=N,M=e.find(r,[I,I]),B=e.find(i,[I,I]));for(var k=[],j=0;j<R;j++){var Y=E[j];k[j]=[];for(var q=0;q<O;q++){for(var L=B(Y[0],D[0][q]),ne=1;ne<F;ne++)L=M(L,B(Y[ne],D[ne][q]));k[j][q]=L}}return w.createDenseMatrix({data:k,size:[R,O],datatype:N===w._datatype&&T===_._datatype?I:void 0})}function v(w,_){var E=w._data,C=w._size,N=w._datatype||w.getDataType(),D=_._values,A=_._index,T=_._ptr,R=_._size,F=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var O=C[0],I=R[1],M,B=r,k=i,j=a,Y=0;N&&F&&N===F&&typeof N=="string"&&N!=="mixed"&&(M=N,B=e.find(r,[M,M]),k=e.find(i,[M,M]),j=e.find(a,[M,M]),Y=e.convert(0,M));for(var q=[],L=[],ne=[],fe=_.createSparseMatrix({values:q,index:L,ptr:ne,size:[O,I],datatype:N===w._datatype&&F===_._datatype?M:void 0}),te=0;te<I;te++){ne[te]=L.length;var oe=T[te],G=T[te+1];if(G>oe)for(var U=0,Q=0;Q<O;Q++){for(var re=Q+1,ie=void 0,de=oe;de<G;de++){var he=A[de];U!==re?(ie=k(E[Q][he],D[de]),U=re):ie=B(ie,k(E[Q][he],D[de]))}U===re&&!j(ie,Y)&&(L.push(Q),q.push(ie))}}return ne[I]=L.length,fe}function x(w,_){var E=w._values,C=w._index,N=w._ptr,D=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var A=_._data,T=_._datatype||_.getDataType(),R=w._size[0],F=_._size[0],O=[],I=[],M=[],B,k=r,j=i,Y=a,q=0;D&&T&&D===T&&typeof D=="string"&&D!=="mixed"&&(B=D,k=e.find(r,[B,B]),j=e.find(i,[B,B]),Y=e.find(a,[B,B]),q=e.convert(0,B));var L=[],ne=[];M[0]=0;for(var fe=0;fe<F;fe++){var te=A[fe];if(!Y(te,q))for(var oe=N[fe],G=N[fe+1],U=oe;U<G;U++){var Q=C[U];ne[Q]?L[Q]=k(L[Q],j(te,E[U])):(ne[Q]=!0,I.push(Q),L[Q]=j(te,E[U]))}}for(var re=I.length,ie=0;ie<re;ie++){var de=I[ie];O[ie]=L[de]}return M[1]=I.length,w.createSparseMatrix({values:O,index:I,ptr:M,size:[R,1],datatype:D===w._datatype&&T===_._datatype?B:void 0})}function g(w,_){var E=w._values,C=w._index,N=w._ptr,D=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var A=_._data,T=_._datatype||_.getDataType(),R=w._size[0],F=_._size[0],O=_._size[1],I,M=r,B=i,k=a,j=0;D&&T&&D===T&&typeof D=="string"&&D!=="mixed"&&(I=D,M=e.find(r,[I,I]),B=e.find(i,[I,I]),k=e.find(a,[I,I]),j=e.convert(0,I));for(var Y=[],q=[],L=[],ne=w.createSparseMatrix({values:Y,index:q,ptr:L,size:[R,O],datatype:D===w._datatype&&T===_._datatype?I:void 0}),fe=[],te=[],oe=0;oe<O;oe++){L[oe]=q.length;for(var G=oe+1,U=0;U<F;U++){var Q=A[U][oe];if(!k(Q,j))for(var re=N[U],ie=N[U+1],de=re;de<ie;de++){var he=C[de];te[he]!==G?(te[he]=G,q.push(he),fe[he]=B(Q,E[de])):fe[he]=M(fe[he],B(Q,E[de]))}}for(var $=L[oe],K=q.length,ue=$;ue<K;ue++){var ce=q[ue];Y[ue]=fe[ce]}}return L[O]=q.length,ne}function b(w,_){var E=w._values,C=w._index,N=w._ptr,D=w._datatype||w._data===void 0?w._datatype:w.getDataType(),A=_._values,T=_._index,R=_._ptr,F=_._datatype||_._data===void 0?_._datatype:_.getDataType(),O=w._size[0],I=_._size[1],M=E&&A,B,k=r,j=i;D&&F&&D===F&&typeof D=="string"&&D!=="mixed"&&(B=D,k=e.find(r,[B,B]),j=e.find(i,[B,B]));for(var Y=M?[]:void 0,q=[],L=[],ne=w.createSparseMatrix({values:Y,index:q,ptr:L,size:[O,I],datatype:D===w._datatype&&F===_._datatype?B:void 0}),fe=M?[]:void 0,te=[],oe,G,U,Q,re,ie,de,he,$=0;$<I;$++){L[$]=q.length;var K=$+1;for(re=R[$],ie=R[$+1],Q=re;Q<ie;Q++)if(he=T[Q],M)for(G=N[he],U=N[he+1],oe=G;oe<U;oe++)de=C[oe],te[de]!==K?(te[de]=K,q.push(de),fe[de]=j(A[Q],E[oe])):fe[de]=k(fe[de],j(A[Q],E[oe]));else for(G=N[he],U=N[he+1],oe=G;oe<U;oe++)de=C[oe],te[de]!==K&&(te[de]=K,q.push(de));if(M)for(var ue=L[$],ce=q.length,ge=ue;ge<ce;ge++){var Ce=q[ge];Y[ge]=fe[Ce]}}return L[I]=q.length,ne}return e(GD,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(_,E)=>{l(ot(_),ot(E));var C=w(n(_),n(E));return Je(C)?C.valueOf():C}),"Matrix, Matrix":function(_,E){var C=_.size(),N=E.size();return l(C,N),C.length===1?N.length===1?c(_,E,C[0]):f(_,E):N.length===1?h(_,E):p(_,E)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(_,E)=>w(_,n(E))),"Array, Matrix":e.referToSelf(w=>(_,E)=>w(n(_,E.storage()),E)),"SparseMatrix, any":function(_,E){return s(_,E,i,!1)},"DenseMatrix, any":function(_,E){return u(_,E,i,!1)},"any, SparseMatrix":function(_,E){return s(E,_,i,!0)},"any, DenseMatrix":function(_,E){return u(E,_,i,!0)},"Array, any":function(_,E){return u(n(_),E,i,!1).valueOf()},"any, Array":function(_,E){return u(n(E),_,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(_,E,C)=>{for(var N=w(_,E),D=0;D<C.length;D++)N=w(N,C[D]);return N})})}),KD="nthRoot",mX=["typed","matrix","equalScalar","BigNumber","concat"],vX=z(KD,mX,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,concat:a}=t,o=fu({typed:e}),s=Pa({typed:e,equalScalar:r}),u=K0({typed:e,equalScalar:r}),l=wr({typed:e,equalScalar:r}),c=Jt({typed:e,matrix:n,concat:a});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(KD,{number:mD,"number, number":mD,BigNumber:h=>d(h,new i(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",h=>p=>h(n(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>p=>h(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>p=>h(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(p,m)=>{if(m.density()===1)return u(p,m,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(p,m)=>{if(m.density()===1)return o(p,m,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(p,m)=>h(n(p),m)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(p,m)=>{if(m.density()===1)return l(m,p,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:s,Ss:l,sS:!1}));function d(h,p){var m=i.precision,y=i.clone({precision:m+2}),v=new i(0),x=new y(1),g=p.isNegative();if(g&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return g?new y(1/0):0;if(!h.isFinite())return g?v:h;var b=h.abs().pow(x.div(p));return b=h.isNeg()?b.neg():b,new i((g?x.div(b):b).toPrecision(m))}}),YD="sign",gX=["typed","BigNumber","Fraction","complex"],yX=z(YD,gX,t=>{var{typed:e,BigNumber:n,complex:r,Fraction:i}=t;return e(YD,{number:Lb,Complex:function(o){return o.im===0?r(Lb(o.re)):o.sign()},BigNumber:function(o){return new n(o.cmp(0))},bigint:function(o){return o>0n?1n:o<0n?-1n:0n},Fraction:function(o){return new i(o.s)},"Array | Matrix":e.referToSelf(a=>o=>pt(o,a,!0)),Unit:e.referToSelf(a=>o=>{if(!o._isDerived()&&o.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,o.valueType())(o.value)})})}),xX="sqrt",bX=["config","typed","Complex"],wX=z(xX,bX,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(o){return o.sqrt()},BigNumber:function(o){return!o.isNegative()||e.predictable?o.sqrt():i(o.toNumber())},Unit:function(o){return o.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new r(a,0).sqrt()}}),XD="square",_X=["typed"],EX=z(XD,_X,t=>{var{typed:e}=t;return e(XD,{number:MO,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},bigint:function(r){return r*r},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),QD="subtract",CX=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],NX=z(QD,CX,t=>{var{typed:e,matrix:n,equalScalar:r,subtractScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,u=fu({typed:e}),l=Jr({typed:e}),c=G0({typed:e,equalScalar:r}),f=Sl({typed:e,DenseMatrix:o}),d=Kn({typed:e,DenseMatrix:o}),h=Jt({typed:e,matrix:n,concat:s});return e(QD,{"any, any":i},h({elop:i,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),ZD="xgcd",SX=["typed","config","matrix","BigNumber"],DX=z(ZD,SX,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e(ZD,{"number, number":function(s,u){var l=IO(s,u);return n.matrix==="Array"?l:r(l)},"BigNumber, BigNumber":a});function a(o,s){var u,l,c,f=new i(0),d=new i(1),h=f,p=d,m=d,y=f;if(!o.isInt()||!s.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!s.isZero();)l=o.div(s).floor(),c=o.mod(s),u=h,h=p.minus(l.times(h)),p=u,u=m,m=y.minus(l.times(m)),y=u,o=s,s=c;var v;return o.lt(f)?v=[o.neg(),p.neg(),y.neg()]:v=[o,o.isZero()?0:p,y],n.matrix==="Array"?v:r(v)}}),JD="invmod",AX=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],TX=z(JD,AX,t=>{var{typed:e,config:n,BigNumber:r,xgcd:i,equal:a,smaller:o,mod:s,add:u,isInteger:l}=t;return e(JD,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!l(f)||!l(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=s(f,d),a(d,0))throw new Error("Divisor must be non zero");var h=i(f,d);h=h.valueOf();var[p,m]=h;return a(p,r(1))?(m=s(m,d),o(m,r(0))&&(m=u(m,d)),m):NaN}}),MX="matAlgo09xS0Sf",IX=["typed","equalScalar"],fB=z(MX,IX,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,h=a._index,p=a._ptr,m=a._size,y=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new bt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var v=c[0],x=c[1],g,b=n,w=0,_=o;typeof f=="string"&&f===y&&f!=="mixed"&&(g=f,b=e.find(n,[g,g]),w=e.convert(0,g),_=e.find(o,[g,g]));var E=s&&d?[]:void 0,C=[],N=[],D=E?[]:void 0,A=[],T,R,F,O,I;for(R=0;R<x;R++){N[R]=C.length;var M=R+1;if(D)for(O=p[R],I=p[R+1],F=O;F<I;F++)T=h[F],A[T]=M,D[T]=d[F];for(O=l[R],I=l[R+1],F=O;F<I;F++)if(T=u[F],D){var B=A[T]===M?D[T]:w,k=_(s[F],B);b(k,w)||(C.push(T),E.push(k))}else C.push(T)}return N[x]=C.length,i.createSparseMatrix({values:E,index:C,ptr:N,size:[v,x],datatype:f===i._datatype&&y===a._datatype?g:void 0})}}),eA="dotMultiply",kX=["typed","matrix","equalScalar","multiplyScalar","concat"],RX=z(eA,kX,t=>{var{typed:e,matrix:n,equalScalar:r,multiplyScalar:i,concat:a}=t,o=Pa({typed:e,equalScalar:r}),s=fB({typed:e,equalScalar:r}),u=wr({typed:e,equalScalar:r}),l=Jt({typed:e,matrix:n,concat:a});return e(eA,l({elop:i,SS:s,DS:o,Ss:u}))});function FX(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new n(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t}return m_(t,e,function(r,i){return r&i})}function Sh(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,n=e.precision;e.config({precision:1e9});var r=t.plus(new e(1));return r.s=-r.s||null,e.config({precision:n}),r}function PX(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);var r=new n(-1);return t.isZero()||e.eq(r)||t.eq(e)?e:e.isZero()||t.eq(r)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?r:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:m_(t,e,function(i,a){return i|a})}function m_(t,e,n){var r=t.constructor,i,a,o=+(t.s<0),s=+(e.s<0);if(o){i=lm(Sh(t));for(var u=0;u<i.length;++u)i[u]^=1}else i=lm(t);if(s){a=lm(Sh(e));for(var l=0;l<a.length;++l)a[l]^=1}else a=lm(e);var c,f,d;i.length<=a.length?(c=i,f=a,d=o):(c=a,f=i,d=s);var h=c.length,p=f.length,m=n(o,s)^1,y=new r(m^1),v=new r(1),x=new r(2),g=r.precision;for(r.config({precision:1e9});h>0;)n(c[--h],f[--p])===m&&(y=y.plus(v)),v=v.times(x);for(;p>0;)n(d,f[--p])===m&&(y=y.plus(v)),v=v.times(x);return r.config({precision:g}),m===0&&(y.s=-y.s),y}function lm(t){for(var e=t.d,n=e[0]+"",r=1;r<e.length;++r){for(var i=e[r]+"",a=7-i.length;a--;)i="0"+i;n+=i}for(var o=n.length;n.charAt(o)==="0";)o--;var s=t.e,u=n.slice(0,o+1||1),l=u.length;if(s>0)if(++s>l)for(s-=l;s--;)u+="0";else s<l&&(u=u.slice(0,s)+"."+u.slice(s));for(var c=[0],f=0;f<u.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(u.charAt(f++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function OX(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new n(0);var r=new n(-1);return t.eq(r)?Sh(e):e.eq(r)?Sh(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?r:new n(t.isNegative()===e.isNegative()?1/0:-1/0):m_(t,e,function(i,a){return i^a})}function BX(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new n(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new n(2).pow(e))}function LX(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new n(2).pow(e)).floor():t.isNegative()?new n(-1):t.isFinite()?new n(0):new n(NaN)}var tA="bitAnd",jX=["typed","matrix","equalScalar","concat"],dB=z(tA,jX,t=>{var{typed:e,matrix:n,equalScalar:r,concat:i}=t,a=Pa({typed:e,equalScalar:r}),o=K0({typed:e,equalScalar:r}),s=wr({typed:e,equalScalar:r}),u=Jt({typed:e,matrix:n,concat:i});return e(tA,{"number, number":RO,"BigNumber, BigNumber":FX,"bigint, bigint":(l,c)=>l&c},u({SS:o,DS:a,Ss:s}))}),nA="bitNot",$X=["typed"],zX=z(nA,$X,t=>{var{typed:e}=t;return e(nA,{number:FO,BigNumber:Sh,bigint:n=>~n,"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),rA="bitOr",UX=["typed","matrix","equalScalar","DenseMatrix","concat"],hB=z(rA,UX,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,o=fu({typed:e}),s=h_({typed:e,equalScalar:r}),u=Sl({typed:e,DenseMatrix:i}),l=Jt({typed:e,matrix:n,concat:a});return e(rA,{"number, number":PO,"BigNumber, BigNumber":PX,"bigint, bigint":(c,f)=>c|f},l({SS:s,DS:o,Ss:u}))}),VX="matAlgo07xSSf",WX=["typed","SparseMatrix"],so=z(VX,WX,t=>{var{typed:e,SparseMatrix:n}=t;return function(a,o,s){var u=a._size,l=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=o._size,f=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(u.length!==c.length)throw new bt(u.length,c.length);if(u[0]!==c[0]||u[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+c+")");var d=u[0],h=u[1],p,m=0,y=s;typeof l=="string"&&l===f&&l!=="mixed"&&(p=l,m=e.convert(0,p),y=e.find(s,[p,p]));for(var v=[],x=[],g=new Array(h+1).fill(0),b=[],w=[],_=[],E=[],C=0;C<h;C++){var N=C+1,D=0;r(a,C,_,b,N),r(o,C,E,w,N);for(var A=0;A<d;A++){var T=_[A]===N?b[A]:m,R=E[A]===N?w[A]:m,F=y(T,R);F!==0&&F!==!1&&(x.push(A),v.push(F),D++)}g[C+1]=g[C]+D}return new n({values:v,index:x,ptr:g,size:[d,h],datatype:l===a._datatype&&f===o._datatype?p:void 0})};function r(i,a,o,s,u){for(var l=i._values,c=i._index,f=i._ptr,d=f[a],h=f[a+1];d<h;d++){var p=c[d];o[p]=u,s[p]=l[d]}}}),iA="bitXor",qX=["typed","matrix","DenseMatrix","concat","SparseMatrix"],HX=z(iA,qX,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:i,SparseMatrix:a}=t,o=Jr({typed:e}),s=so({typed:e,SparseMatrix:a}),u=Kn({typed:e,DenseMatrix:r}),l=Jt({typed:e,matrix:n,concat:i});return e(iA,{"number, number":OO,"BigNumber, BigNumber":OX,"bigint, bigint":(c,f)=>c^f},l({SS:s,DS:o,Ss:u}))}),aA="arg",GX=["typed"],KX=z(aA,GX,t=>{var{typed:e}=t;return e(aA,{number:function(r){return Math.atan2(0,r)},BigNumber:function(r){return r.constructor.atan2(0,r)},Complex:function(r){return r.arg()},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),oA="conj",YX=["typed"],XX=z(oA,YX,t=>{var{typed:e}=t;return e(oA,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),sA="im",QX=["typed"],ZX=z(sA,QX,t=>{var{typed:e}=t;return e(sA,{number:()=>0,"BigNumber | Fraction":n=>n.mul(0),Complex:n=>n.im,"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),uA="re",JX=["typed"],eQ=z(uA,JX,t=>{var{typed:e}=t;return e(uA,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.re,"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),lA="not",tQ=["typed"],nQ=z(lA,tQ,t=>{var{typed:e}=t;return e(lA,{"null | undefined":()=>!0,number:zO,Complex:function(r){return r.re===0&&r.im===0},BigNumber:function(r){return r.isZero()||r.isNaN()},bigint:n=>!n,Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),cA="or",rQ=["typed","matrix","equalScalar","DenseMatrix","concat"],pB=z(cA,rQ,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,o=Jr({typed:e}),s=G0({typed:e,equalScalar:r}),u=Kn({typed:e,DenseMatrix:i}),l=Jt({typed:e,matrix:n,concat:a});return e(cA,{"number, number":jb,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":jb,"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:s,DS:o,Ss:u}))}),fA="xor",iQ=["typed","matrix","DenseMatrix","concat","SparseMatrix"],aQ=z(fA,iQ,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:i,SparseMatrix:a}=t,o=Jr({typed:e}),s=so({typed:e,SparseMatrix:a}),u=Kn({typed:e,DenseMatrix:r}),l=Jt({typed:e,matrix:n,concat:i});return e(fA,{"number, number":$b,"Complex, Complex":function(f,d){return(f.re!==0||f.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":$b,"BigNumber, BigNumber":function(f,d){return(!f.isZero()&&!f.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:s,DS:o,Ss:u}))}),dA="concat",oQ=["typed","matrix","isInteger"],mB=z(dA,oQ,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(dA,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,u=-1,l,c=!1,f=[];for(o=0;o<s;o++){var d=a[o];if(Je(d)&&(c=!0),dt(d)||ht(d)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||o>0&&u>l)throw new ka(u,l+1)}else{var h=ut(d).valueOf(),p=ot(h);if(f[o]=h,l=u,u=p.length-1,o>0&&u!==l)throw new bt(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var m=f.shift();f.length;)m=vO(m,f.shift(),u);return c?n(m):m},"...string":function(a){return a.join("")}})}),hA="column",sQ=["typed","Index","matrix","range"],vB=z(hA,sQ,t=>{var{typed:e,Index:n,matrix:r,range:i}=t;return e(hA,{"Matrix, number":a,"Array, number":function(s,u){return a(r(ut(s)),u).valueOf()}});function a(o,s){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Xt(s,o.size()[1]);var u=i(0,o.size()[0]),l=new n(u,s),c=o.subset(l);return Je(c)?c:r([[c]])}}),pA="count",uQ=["typed","size","prod"],lQ=z(pA,uQ,t=>{var{typed:e,size:n,prod:r}=t;return e(pA,{string:function(a){return a.length},"Matrix | Array":function(a){return r(n(a))}})}),mA="cross",cQ=["typed","matrix","subtract","multiply"],fQ=z(mA,cQ,t=>{var{typed:e,matrix:n,subtract:r,multiply:i}=t;return e(mA,{"Matrix, Matrix":function(s,u){return n(a(s.toArray(),u.toArray()))},"Matrix, Array":function(s,u){return n(a(s.toArray(),u))},"Array, Matrix":function(s,u){return n(a(s,u.toArray()))},"Array, Array":a});function a(o,s){var u=Math.max(ot(o).length,ot(s).length);o=Qv(o),s=Qv(s);var l=ot(o),c=ot(s);if(l.length!==1||c.length!==1||l[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+l.join(", ")+"], B = ["+c.join(", ")+"])");var f=[r(i(o[1],s[2]),i(o[2],s[1])),r(i(o[2],s[0]),i(o[0],s[2])),r(i(o[0],s[1]),i(o[1],s[0]))];return u>1?[f]:f}}),vA="diag",dQ=["typed","matrix","DenseMatrix","SparseMatrix"],hQ=z(vA,dQ,t=>{var{typed:e,matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(vA,{Array:function(l){return a(l,0,ot(l),null)},"Array, number":function(l,c){return a(l,c,ot(l),null)},"Array, BigNumber":function(l,c){return a(l,c.toNumber(),ot(l),null)},"Array, string":function(l,c){return a(l,0,ot(l),c)},"Array, number, string":function(l,c,f){return a(l,c,ot(l),f)},"Array, BigNumber, string":function(l,c,f){return a(l,c.toNumber(),ot(l),f)},Matrix:function(l){return a(l,0,l.size(),l.storage())},"Matrix, number":function(l,c){return a(l,c,l.size(),l.storage())},"Matrix, BigNumber":function(l,c){return a(l,c.toNumber(),l.size(),l.storage())},"Matrix, string":function(l,c){return a(l,0,l.size(),c)},"Matrix, number, string":function(l,c,f){return a(l,c,l.size(),f)},"Matrix, BigNumber, string":function(l,c,f){return a(l,c.toNumber(),l.size(),f)}});function a(u,l,c,f){if(!qe(l))throw new TypeError("Second parameter in function diag must be an integer");var d=l>0?l:0,h=l<0?-l:0;switch(c.length){case 1:return o(u,l,f,c[0],h,d);case 2:return s(u,l,f,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function o(u,l,c,f,d,h){var p=[f+d,f+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var m=c==="sparse"?i.diagonal(p,u,l):r.diagonal(p,u,l);return c!==null?m:m.valueOf()}function s(u,l,c,f,d,h){if(Je(u)){var p=u.diagonal(l);return c!==null?c!==p.storage()?n(p,c):p:p.valueOf()}for(var m=Math.min(f[0]-d,f[1]-h),y=[],v=0;v<m;v++)y[v]=u[v+d][v+h];return c!==null?n(y):y}}),pQ="filter",mQ=["typed"],gB=z(pQ,mQ,t=>{var{typed:e}=t;return e("filter",{"Array, function":gA,"Matrix, function":function(r,i){return r.create(gA(r.valueOf(),i),r.datatype())},"Array, RegExp":uD,"Matrix, RegExp":function(r,i){return r.create(uD(r.valueOf(),i),r.datatype())}})});function gA(t,e){var n=cl(e,t,"filter");return n.isUnary?sD(t,n.fn):sD(t,function(r,i,a){return n.fn(r,[i],a)})}var yA="flatten",vQ=["typed"],gQ=z(yA,vQ,t=>{var{typed:e}=t;return e(yA,{Array:function(r){return Ot(r)},Matrix:function(r){return r.create(Ot(r.valueOf(),!0),r.datatype())}})}),Hb="forEach",yQ=["typed"],yB=z(Hb,yQ,t=>{var{typed:e}=t;return e(Hb,{"Array, function":xQ,"Matrix, function":function(r,i){r.forEach(i)}})});function xQ(t,e){var n=cl(e,t,Hb);yO(t,n.fn,n.isUnary)}var xA="getMatrixDataType",bQ=["typed"],wQ=z(xA,bQ,t=>{var{typed:e}=t;return e(xA,{Array:function(r){return q0(r,Zt)},Matrix:function(r){return r.getDataType()}})}),bA="identity",_Q=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],EQ=z(bA,_Q,t=>{var{typed:e,config:n,matrix:r,BigNumber:i,DenseMatrix:a,SparseMatrix:o}=t;return e(bA,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return s(c)},"Array, string":function(c,f){return s(c,f)},Matrix:function(c){return s(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return s(c.valueOf(),f)}});function s(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=ht(l)||ht(c)?i:null;if(ht(l)&&(l=l.toNumber()),ht(c)&&(c=c.toNumber()),!qe(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!qe(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,p=d?new d(0):0,m=[l,c];if(f){if(f==="sparse")return o.diagonal(m,h,0,p);if(f==="dense")return a.diagonal(m,h,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var y=sf([],m,p),v=l<c?l:c,x=0;x<v;x++)y[x][x]=h;return y}}),wA="kron",CQ=["typed","matrix","multiplyScalar"],NQ=z(wA,CQ,t=>{var{typed:e,matrix:n,multiplyScalar:r}=t;return e(wA,{"Matrix, Matrix":function(o,s){return n(i(o.toArray(),s.toArray()))},"Matrix, Array":function(o,s){return n(i(o.toArray(),s))},"Array, Matrix":function(o,s){return n(i(o,s.toArray()))},"Array, Array":i});function i(a,o){if(ot(a).length===1&&(a=[a]),ot(o).length===1&&(o=[o]),ot(a).length>2||ot(o).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(a.length)+", y = "+JSON.stringify(o.length)+")");var s=[],u=[];return a.map(function(l){return o.map(function(c){return u=[],s.push(u),l.map(function(f){return c.map(function(d){return u.push(r(f,d))})})})})&&s}}),x1="map",SQ=["typed"],xB=z(x1,SQ,t=>{var{typed:e}=t;return e(x1,{"Array, function":r,"Matrix, function":function(a,o){return a.map(o)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(i,a,o)=>n([i,a,...o.slice(0,o.length-1)],o[o.length-1])});function n(i,a){if(typeof a!="function")throw new Error("Last argument must be a callback function");var o=i[0].isMatrix,s=l_(...i.map(b=>b.isMatrix?b.size():ot(b))),u=o?(b,w)=>b.get(w):c_,l=o?i.map(b=>b.isMatrix?b.create(Wu(b.toArray(),s),b.datatype()):i[0].create(Wu(b.valueOf(),s))):i.map(b=>b.isMatrix?Wu(b.toArray(),s):Wu(b,s)),c;if(e.isTypedFunction(a)){var f=s.map(()=>0),d=l.map(b=>u(b,f)),h=g(a,d,f,l);c=v(h)}else{var p=i.length,m=x(a,p);c=v(m)}var y=(b,w)=>c([b,...l.slice(1).map(_=>u(_,w))],w);if(o)return l[0].map(y);return r(l[0],y);function v(b){switch(b){case 0:return w=>a(...w);case 1:return(w,_)=>a(...w,_);case 2:return(w,_)=>a(...w,_,...l)}}function x(b,w){return b.length>w+1?2:b.length===w+1?1:0}function g(b,w,_,E){return e.resolve(b,[...w,_,...E])!==null?2:e.resolve(b,[...w,_])!==null?1:(e.resolve(b,w)!==null,0)}}function r(i,a){var o=cl(a,i,x1);return Ob(i,o.fn,o.isUnary)}}),_A="diff",DQ=["typed","matrix","subtract","number"],bB=z(_A,DQ,t=>{var{typed:e,matrix:n,subtract:r,number:i}=t;return e(_A,{"Array | Matrix":function(c){return Je(c)?n(o(c.toArray())):o(c)},"Array | Matrix, number":function(c,f){if(!qe(f))throw new RangeError("Dimension must be a whole number");return Je(c)?n(a(c.toArray(),f)):a(c,f)},"Array, BigNumber":e.referTo("Array,number",l=>(c,f)=>l(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",l=>(c,f)=>l(c,i(f)))});function a(l,c){if(Je(l)&&(l=l.toArray()),!Array.isArray(l))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return l.forEach(d=>{f.push(a(d,c-1))}),f}else{if(c===0)return o(l);throw RangeError("Cannot have negative dimension")}}function o(l){for(var c=[],f=l.length,d=1;d<f;d++)c.push(s(l[d-1],l[d]));return c}function s(l,c){Je(l)&&(l=l.toArray()),Je(c)&&(c=c.toArray());var f=Array.isArray(l),d=Array.isArray(c);if(f&&d)return u(l,c);if(!f&&!d)return r(c,l);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(l,c){if(l.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=l.length,h=0;h<d;h++)f.push(s(l[h],c[h]));return f}}),AQ="ones",TQ=["typed","config","matrix","BigNumber"],MQ=z(AQ,TQ,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e("ones",{"":function(){return n.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return a(l,f)}else return n.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var c=l.storage();return a(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return a(l.valueOf(),c)}});function a(u,l){var c=o(u),f=c?new i(1):1;if(s(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?sf(h,u,f):h}}function o(u){var l=!1;return u.forEach(function(c,f,d){ht(c)&&(l=!0,d[f]=c.toNumber())}),l}function s(u){u.forEach(function(l){if(typeof l!="number"||!qe(l)||l<0)throw new Error("Parameters in function ones must be positive integers")})}});function v_(){throw new Error('No "bignumber" implementation available')}function wB(){throw new Error('No "fraction" implementation available')}function _B(){throw new Error('No "matrix" implementation available')}var EA="range",IQ=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],EB=z(EA,IQ,t=>{var{typed:e,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:u,add:l,isPositive:c}=t;return e(EA,{string:d,"string, boolean":d,number:function(y){throw new TypeError("Too few arguments to function range(): ".concat(y))},boolean:function(y){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(y,", number|bigint|BigNumber|Fraction"))},"number, number":function(y,v){return f(h(y,v,1,!1))},"number, number, number":function(y,v,x){return f(h(y,v,x,!1))},"number, number, boolean":function(y,v,x){return f(h(y,v,1,x))},"number, number, number, boolean":function(y,v,x,g){return f(h(y,v,x,g))},"bigint, bigint|number":function(y,v){return f(h(y,v,1n,!1))},"number, bigint":function(y,v){return f(h(BigInt(y),v,1n,!1))},"bigint, bigint|number, bigint|number":function(y,v,x){return f(h(y,v,BigInt(x),!1))},"number, bigint, bigint|number":function(y,v,x){return f(h(BigInt(y),v,BigInt(x),!1))},"bigint, bigint|number, boolean":function(y,v,x){return f(h(y,v,1n,x))},"number, bigint, boolean":function(y,v,x){return f(h(BigInt(y),v,1n,x))},"bigint, bigint|number, bigint|number, boolean":function(y,v,x,g){return f(h(y,v,BigInt(x),g))},"number, bigint, bigint|number, boolean":function(y,v,x,g){return f(h(BigInt(y),v,BigInt(x),g))},"BigNumber, BigNumber":function(y,v){var x=y.constructor;return f(h(y,v,new x(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,v,x){return f(h(y,v,x,!1))},"BigNumber, BigNumber, boolean":function(y,v,x){var g=y.constructor;return f(h(y,v,new g(1),x))},"BigNumber, BigNumber, BigNumber, boolean":function(y,v,x,g){return f(h(y,v,x,g))},"Fraction, Fraction":function(y,v){return f(h(y,v,1,!1))},"Fraction, Fraction, Fraction":function(y,v,x){return f(h(y,v,x,!1))},"Fraction, Fraction, boolean":function(y,v,x){return f(h(y,v,1,x))},"Fraction, Fraction, Fraction, boolean":function(y,v,x,g){return f(h(y,v,x,g))},"Unit, Unit, Unit":function(y,v,x){return f(h(y,v,x,!1))},"Unit, Unit, Unit, boolean":function(y,v,x,g){return f(h(y,v,x,g))}});function f(m){return n.matrix==="Matrix"?r?r(m):_B():m}function d(m,y){var v=p(m);if(!v)throw new SyntaxError('String "'+m+'" is no valid range');return n.number==="BigNumber"?(i===void 0&&v_(),f(h(i(v.start),i(v.end),i(v.step)))):f(h(v.start,v.end,v.step,y))}function h(m,y,v,x){for(var g=[],b=c(v)?x?o:a:x?u:s,w=m;b(w,y);)g.push(w),w=l(w,v);return g}function p(m){var y=m.split(":"),v=y.map(function(g){return Number(g)}),x=v.some(function(g){return isNaN(g)});if(x)return null;switch(v.length){case 2:return{start:v[0],end:v[1],step:1};case 3:return{start:v[0],end:v[2],step:v[1]};default:return null}}}),CA="reshape",kQ=["typed","isInteger","matrix"],RQ=z(CA,kQ,t=>{var{typed:e,isInteger:n}=t;return e(CA,{"Matrix, Array":function(i,a){return i.reshape(a,!0)},"Array, Array":function(i,a){return a.forEach(function(o){if(!n(o))throw new TypeError("Invalid size for dimension: "+o)}),s_(i,a)}})}),FQ="resize",PQ=["config","matrix"],OQ=z(FQ,PQ,t=>{var{config:e,matrix:n}=t;return function(a,o,s){if(arguments.length!==2&&arguments.length!==3)throw new Dl("resize",arguments.length,2,3);if(Je(o)&&(o=o.valueOf()),ht(o[0])&&(o=o.map(function(c){return ht(c)?c.toNumber():c})),Je(a))return a.resize(o,s,!0);if(typeof a=="string")return r(a,o,s);var u=Array.isArray(a)?!1:e.matrix!=="Array";if(o.length===0){for(;Array.isArray(a);)a=a[0];return ut(a)}else{Array.isArray(a)||(a=[a]),a=ut(a);var l=sf(a,o,s);return u?n(l):l}};function r(i,a,o){if(o!==void 0){if(typeof o!="string"||o.length!==1)throw new TypeError("Single character expected as defaultValue")}else o=" ";if(a.length!==1)throw new bt(a.length,1);var s=a[0];if(typeof s!="number"||!qe(s))throw new TypeError("Invalid size, must contain positive integers (size: "+xt(a)+")");if(i.length>s)return i.substring(0,s);if(i.length<s){for(var u=i,l=0,c=s-i.length;l<c;l++)u+=o;return u}else return i}}),NA="rotate",BQ=["typed","multiply","rotationMatrix"],LQ=z(NA,BQ,t=>{var{typed:e,multiply:n,rotationMatrix:r}=t;return e(NA,{"Array , number | BigNumber | Complex | Unit":function(o,s){i(o,2);var u=n(r(s),o);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(o,s){return i(o,2),n(r(s),o)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(o,s,u){i(o,3);var l=n(r(s,u),o);return l},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(o,s,u){return i(o,3),n(r(s,u),o)}});function i(a,o){var s=Array.isArray(a)?ot(a):a.size();if(s.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(s.length===2&&s[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(s[0]!==o)throw new RangeError("Vector must be of dimensions 1x".concat(o))}}),SA="rotationMatrix",jQ=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],$Q=z(SA,jQ,t=>{var{typed:e,config:n,multiplyScalar:r,addScalar:i,unaryMinus:a,norm:o,BigNumber:s,matrix:u,DenseMatrix:l,SparseMatrix:c,cos:f,sin:d}=t;return e(SA,{"":function(){return n.matrix==="Matrix"?u([]):[]},string:function(g){return u(g)},"number | BigNumber | Complex | Unit":function(g){return h(g,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(g,b){return h(g,b)},"number | BigNumber | Complex | Unit, Array":function(g,b){var w=u(b);return p(w),v(g,w,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(g,b){p(b);var w=b.storage()||(n.matrix==="Matrix"?"dense":void 0);return v(g,b,w)},"number | BigNumber | Complex | Unit, Array, string":function(g,b,w){var _=u(b);return p(_),v(g,_,w)},"number | BigNumber | Complex | Unit, Matrix, string":function(g,b,w){return p(b),v(g,b,w)}});function h(x,g){var b=ht(x),w=b?new s(-1):-1,_=f(x),E=d(x),C=[[_,r(w,E)],[E,_]];return y(C,g)}function p(x){var g=x.size();if(g.length<1||g[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function m(x){return x.reduce((g,b)=>r(g,b))}function y(x,g){if(g){if(g==="sparse")return new c(x);if(g==="dense")return new l(x);throw new TypeError('Unknown matrix type "'.concat(g,'"'))}return x}function v(x,g,b){var w=o(g);if(w===0)throw new RangeError("Rotation around zero vector");var _=ht(x)?s:null,E=_?new _(1):1,C=_?new _(-1):-1,N=_?new _(g.get([0])/w):g.get([0])/w,D=_?new _(g.get([1])/w):g.get([1])/w,A=_?new _(g.get([2])/w):g.get([2])/w,T=f(x),R=i(E,a(T)),F=d(x),O=i(T,m([N,N,R])),I=i(m([N,D,R]),m([C,A,F])),M=i(m([N,A,R]),m([D,F])),B=i(m([N,D,R]),m([A,F])),k=i(T,m([D,D,R])),j=i(m([D,A,R]),m([C,N,F])),Y=i(m([N,A,R]),m([C,D,F])),q=i(m([D,A,R]),m([N,F])),L=i(T,m([A,A,R])),ne=[[O,I,M],[B,k,j],[Y,q,L]];return y(ne,b)}}),DA="row",zQ=["typed","Index","matrix","range"],CB=z(DA,zQ,t=>{var{typed:e,Index:n,matrix:r,range:i}=t;return e(DA,{"Matrix, number":a,"Array, number":function(s,u){return a(r(ut(s)),u).valueOf()}});function a(o,s){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Xt(s,o.size()[0]);var u=i(0,o.size()[1]),l=new n(s,u),c=o.subset(l);return Je(c)?c:r([[c]])}}),AA="size",UQ=["typed","config","?matrix"],VQ=z(AA,UQ,t=>{var{typed:e,config:n,matrix:r}=t;return e(AA,{Matrix:function(a){return a.create(a.size(),"number")},Array:ot,string:function(a){return n.matrix==="Array"?[a.length]:r([a.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(a){return n.matrix==="Array"?[]:r?r([],"dense","number"):_B()}})}),TA="squeeze",WQ=["typed"],qQ=z(TA,WQ,t=>{var{typed:e}=t;return e(TA,{Array:function(r){return Qv(ut(r))},Matrix:function(r){var i=Qv(r.toArray());return Array.isArray(i)?r.create(i,r.datatype()):i},any:function(r){return ut(r)}})}),MA="subset",HQ=["typed","matrix","zeros","add"],NB=z(MA,HQ,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t;return e(MA,{"Matrix, Index":function(s,u){return of(u)?n():(Xv(s,u),s.subset(u))},"Array, Index":e.referTo("Matrix, Index",function(o){return function(s,u){var l=o(n(s),u);return u.isScalar()?l:l.valueOf()}}),"Object, Index":KQ,"string, Index":GQ,"Matrix, Index, any, any":function(s,u,l,c){return of(u)?s:(Xv(s,u),s.clone().subset(u,a(l,u),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,u,l,c){var f=o(n(s),u,l,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,u,l){return o(n(s),u,l,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(s,u,l){return o(s,u,l,void 0)}}),"string, Index, string":IA,"string, Index, string, string":IA,"Object, Index, any":YQ});function a(o,s){if(typeof o=="string")throw new Error("can't boradcast a string");if(s._isScalar)return o;var u=s.size();if(u.every(l=>l>0))try{return i(o,r(u))}catch{return o}else return o}});function GQ(t,e){if(!L0(e))throw new TypeError("Index expected");if(of(e))return"";if(Xv(Array.from(t),e),e.size().length!==1)throw new bt(e.size().length,1);var n=t.length;Xt(e.min()[0],n),Xt(e.max()[0],n);var r=e.dimension(0),i="";return r.forEach(function(a){i+=t.charAt(a)}),i}function IA(t,e,n,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(of(e))return t;if(Xv(Array.from(t),e),e.size().length!==1)throw new bt(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=e.dimension(0),a=i.size()[0];if(a!==n.length)throw new bt(i.size()[0],n.length);var o=t.length;Xt(e.min()[0]),Xt(e.max()[0]);for(var s=[],u=0;u<o;u++)s[u]=t.charAt(u);if(i.forEach(function(f,d){s[f]=n.charAt(d[0])}),s.length>o)for(var l=o-1,c=s.length;l<c;l++)s[l]||(s[l]=r);return s.join("")}function KQ(t,e){if(!of(e)){if(e.size().length!==1)throw new bt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");return Hr(t,n)}}function YQ(t,e,n){if(of(e))return t;if(e.size().length!==1)throw new bt(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var i=ut(t);return rf(i,r,n),i}var kA="transpose",XQ=["typed","matrix"],QQ=z(kA,XQ,t=>{var{typed:e,matrix:n}=t;return e(kA,{Array:o=>r(n(o)).valueOf(),Matrix:r,any:ut});function r(o){var s=o.size(),u;switch(s.length){case 1:u=o.clone();break;case 2:{var l=s[0],c=s[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+xt(s)+")");switch(o.storage()){case"dense":u=i(o,l,c);break;case"sparse":u=a(o,l,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+xt(s)+")")}return u}function i(o,s,u){for(var l=o._data,c=[],f,d=0;d<u;d++){f=c[d]=[];for(var h=0;h<s;h++)f[h]=ut(l[h][d])}return o.createDenseMatrix({data:c,size:[u,s],datatype:o._datatype})}function a(o,s,u){for(var l=o._values,c=o._index,f=o._ptr,d=l?[]:void 0,h=[],p=[],m=[],y=0;y<s;y++)m[y]=0;var v,x,g;for(v=0,x=c.length;v<x;v++)m[c[v]]++;for(var b=0,w=0;w<s;w++)p.push(b),b+=m[w],m[w]=p[w];for(p.push(b),g=0;g<u;g++)for(var _=f[g],E=f[g+1],C=_;C<E;C++){var N=m[c[C]]++;h[N]=g,l&&(d[N]=ut(l[C]))}return o.createSparseMatrix({values:d,index:h,ptr:p,size:[u,s],datatype:o._datatype})}}),RA="ctranspose",ZQ=["typed","transpose","conj"],JQ=z(RA,ZQ,t=>{var{typed:e,transpose:n,conj:r}=t;return e(RA,{any:function(a){return r(n(a))}})}),FA="zeros",eZ=["typed","config","matrix","BigNumber"],tZ=z(FA,eZ,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e(FA,{"":function(){return n.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return a(l,f)}else return n.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var c=l.storage();return a(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return a(l.valueOf(),c)}});function a(u,l){var c=o(u),f=c?new i(0):0;if(s(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?sf(h,u,f):h}}function o(u){var l=!1;return u.forEach(function(c,f,d){ht(c)&&(l=!0,d[f]=c.toNumber())}),l}function s(u){u.forEach(function(l){if(typeof l!="number"||!qe(l)||l<0)throw new Error("Parameters in function zeros must be positive integers")})}}),PA="fft",nZ=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],rZ=z(PA,nZ,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,divideScalar:a,exp:o,tau:s,i:u,dotDivide:l,conj:c,pow:f,ceil:d,log2:h}=t;return e(PA,{Array:p,Matrix:function(g){return g.create(p(g.valueOf()),g.datatype())}});function p(x){var g=ot(x);return g.length===1?v(x,g[0]):m(x.map(b=>p(b,g.slice(1))),0)}function m(x,g){var b=ot(x);if(g!==0)return new Array(b[0]).fill(0).map((_,E)=>m(x[E],g-1));if(b.length===1)return v(x);function w(_){var E=ot(_);return new Array(E[1]).fill(0).map((C,N)=>new Array(E[0]).fill(0).map((D,A)=>_[A][N]))}return w(m(w(x),1))}function y(x){for(var g=x.length,b=o(a(i(-1,i(u,s)),g)),w=[],_=1-g;_<g;_++)w.push(f(b,a(f(_,2),2)));for(var E=f(2,d(h(g+g-1))),C=[...new Array(g).fill(0).map((I,M)=>i(x[M],w[g-1+M])),...new Array(E-g).fill(0)],N=[...new Array(g+g-1).fill(0).map((I,M)=>a(1,w[M])),...new Array(E-(g+g-1)).fill(0)],D=v(C),A=v(N),T=new Array(E).fill(0).map((I,M)=>i(D[M],A[M])),R=l(c(p(c(T))),E),F=[],O=g-1;O<g+g-1;O++)F.push(i(R[O],w[O]));return F}function v(x){var g=x.length;if(g===1)return[x[0]];if(g%2===0){for(var b=[...v(x.filter((C,N)=>N%2===0)),...v(x.filter((C,N)=>N%2===1))],w=0;w<g/2;w++){var _=b[w],E=i(b[w+g/2],o(i(i(s,u),a(-w,g))));b[w]=r(_,E),b[w+g/2]=r(_,i(-1,E))}return b}else return y(x)}}),OA="ifft",iZ=["typed","fft","dotDivide","conj"],aZ=z(OA,iZ,t=>{var{typed:e,fft:n,dotDivide:r,conj:i}=t;return e(OA,{"Array | Matrix":function(o){var s=Je(o)?o.size():ot(o);return r(i(n(i(o))),s.reduce((u,l)=>u*l,1))}})});function Dh(t){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(t)}function oZ(t,e){if(Dh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sZ(t){var e=oZ(t,"string");return Dh(e)=="symbol"?e:e+""}function Bn(t,e,n){return(e=sZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uZ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BA(Object(n),!0).forEach(function(r){Bn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var lZ="solveODE",cZ=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],fZ=z(lZ,cZ,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,max:o,map:s,abs:u,isPositive:l,isNegative:c,larger:f,smaller:d,matrix:h,bignumber:p,unaryMinus:m}=t;function y(C){return function(N,D,A,T){var R=!(D.length===2&&(D.every(_)||D.every(Yi)));if(R)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var F=D[0],O=D[1],I=f(O,F),M=T.firstStep;if(M!==void 0&&!l(M))throw new Error('"firstStep" must be positive');var B=T.maxStep;if(B!==void 0&&!l(B))throw new Error('"maxStep" must be positive');var k=T.minStep;if(k&&c(k))throw new Error('"minStep" must be positive or zero');var j=[F,O,M,k,B].filter(H=>H!==void 0);if(!(j.every(_)||j.every(Yi)))throw new Error('Inconsistent type of "t" dependant variables');for(var Y=1,q=T.tol?T.tol:1e-4,L=T.minDelta?T.minDelta:.2,ne=T.maxDelta?T.maxDelta:5,fe=T.maxIter?T.maxIter:1e4,te=[F,O,...A,B,k].some(ht),[oe,G,U,Q]=te?[p(C.a),p(C.c),p(C.b),p(C.bp)]:[C.a,C.c,C.b,C.bp],re=M?I?M:m(M):a(r(O,F),Y),ie=[F],de=[A],he=r(U,Q),$=0,K=0,ue=b(I),ce=w(I);ue(ie[$],O);){var ge=[];re=ce(ie[$],O,re),ge.push(N(ie[$],de[$]));for(var Ce=1;Ce<G.length;++Ce)ge.push(N(n(ie[$],i(G[Ce],re)),n(de[$],i(re,oe[Ce],ge))));var Ae=o(u(s(i(he,ge),H=>Yi(H)?H.value:H)));Ae<q&&q/Ae>1/4&&(ie.push(n(ie[$],re)),de.push(n(de[$],i(re,U,ge))),$++);var Pe=.84*(q/Ae)**(1/5);if(d(Pe,L)?Pe=L:f(Pe,ne)&&(Pe=ne),Pe=te?p(Pe):Pe,re=i(re,Pe),B&&f(u(re),B)?re=I?B:m(B):k&&d(u(re),k)&&(re=I?k:m(k)),K++,K>fe)throw new Error("Maximum number of iterations reached, try changing options")}return{t:ie,y:de}}}function v(C,N,D,A){var T=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],R=[null,1/2,3/4,1],F=[2/9,1/3,4/9,0],O=[7/24,1/4,1/3,1/8],I={a:T,c:R,b:F,bp:O};return y(I)(C,N,D,A)}function x(C,N,D,A){var T=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],R=[null,1/5,3/10,4/5,8/9,1,1],F=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],O=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],I={a:T,c:R,b:F,bp:O};return y(I)(C,N,D,A)}function g(C,N,D,A){var T=A.method?A.method:"RK45",R={RK23:v,RK45:x};if(T.toUpperCase()in R){var F=uZ({},A);return delete F.method,R[T.toUpperCase()](C,N,D,F)}else{var O=Object.keys(R).map(M=>'"'.concat(M,'"')),I="".concat(O.slice(0,-1).join(", ")," and ").concat(O.slice(-1));throw new Error('Unavailable method "'.concat(T,'". Available methods are ').concat(I))}}function b(C){return C?d:f}function w(C){var N=C?f:d;return function(D,A,T){var R=n(D,T);return N(R,A)?r(A,D):T}}function _(C){return ht(C)||dt(C)}function E(C,N,D,A){var T=g(C,N.toArray(),D.toArray(),A);return{t:h(T.t),y:h(T.y)}}return e("solveODE",{"function, Array, Array, Object":g,"function, Matrix, Matrix, Object":E,"function, Array, Array":(C,N,D)=>g(C,N,D,{}),"function, Matrix, Matrix":(C,N,D)=>E(C,N,D,{}),"function, Array, number | BigNumber | Unit":(C,N,D)=>{var A=g(C,N,[D],{});return{t:A.t,y:A.y.map(T=>T[0])}},"function, Matrix, number | BigNumber | Unit":(C,N,D)=>{var A=g(C,N.toArray(),[D],{});return{t:h(A.t),y:h(A.y.map(T=>T[0]))}},"function, Array, number | BigNumber | Unit, Object":(C,N,D,A)=>{var T=g(C,N,[D],A);return{t:T.t,y:T.y.map(R=>R[0])}},"function, Matrix, number | BigNumber | Unit, Object":(C,N,D,A)=>{var T=g(C,N.toArray(),[D],A);return{t:h(T.t),y:h(T.y.map(R=>R[0]))}}})}),dZ="erf",hZ=["typed"],pZ=z(dZ,hZ,t=>{var{typed:e}=t;return e("name",{number:function(o){var s=Math.abs(o);return s>=gZ?Ss(o):s<=mZ?Ss(o)*n(s):s<=4?Ss(o)*(1-r(s)):Ss(o)*(1-i(s))},"Array | Matrix":e.referToSelf(a=>o=>pt(o,a))});function n(a){var o=a*a,s=yo[0][4]*o,u=o,l;for(l=0;l<3;l+=1)s=(s+yo[0][l])*o,u=(u+Kl[0][l])*o;return a*(s+yo[0][3])/(u+Kl[0][3])}function r(a){var o=yo[1][8]*a,s=a,u;for(u=0;u<7;u+=1)o=(o+yo[1][u])*a,s=(s+Kl[1][u])*a;var l=(o+yo[1][7])/(s+Kl[1][7]),c=parseInt(a*16)/16,f=(a-c)*(a+c);return Math.exp(-c*c)*Math.exp(-f)*l}function i(a){var o=1/(a*a),s=yo[2][5]*o,u=o,l;for(l=0;l<4;l+=1)s=(s+yo[2][l])*o,u=(u+Kl[2][l])*o;var c=o*(s+yo[2][4])/(u+Kl[2][4]);c=(vZ-c)/a,o=parseInt(a*16)/16;var f=(a-o)*(a+o);return Math.exp(-o*o)*Math.exp(-f)*c}}),mZ=.46875,vZ=.5641895835477563,yo=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Kl=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],gZ=Math.pow(2,53),LA="zeta",yZ=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],xZ=z(LA,yZ,t=>{var{typed:e,config:n,multiply:r,pow:i,divide:a,factorial:o,equal:s,smallerEq:u,isNegative:l,gamma:c,sin:f,subtract:d,add:h,Complex:p,BigNumber:m,pi:y}=t;return e(LA,{number:_=>v(_,E=>E,()=>20),BigNumber:_=>v(_,E=>new m(E),()=>Math.abs(Math.log10(n.relTol))),Complex:x});function v(_,E,C){return s(_,0)?E(-.5):s(_,1)?E(NaN):isFinite(_)?g(_,E,C,N=>N):l(_)?E(NaN):E(1)}function x(_){return _.re===0&&_.im===0?new p(-.5):_.re===1?new p(NaN,NaN):_.re===1/0&&_.im===0?new p(1):_.im===1/0||_.re===-1/0?new p(NaN,NaN):g(_,E=>E,E=>Math.round(1.3*15+.9*Math.abs(E.im)),E=>E.re)}function g(_,E,C,N){var D=C(_);if(N(_)>-(D-1)/2)return w(_,E(D),E);var A=r(i(2,_),i(E(y),d(_,1)));return A=r(A,f(r(a(E(y),2),_))),A=r(A,c(d(1,_))),r(A,g(d(1,_),E,C,N))}function b(_,E){for(var C=_,N=_;u(N,E);N=h(N,1)){var D=a(r(o(h(E,d(N,1))),i(4,N)),r(o(d(E,N)),o(r(2,N))));C=h(C,D)}return r(E,C)}function w(_,E,C){for(var N=a(1,r(b(C(0),E),d(1,i(2,d(1,_))))),D=C(0),A=C(1);u(A,E);A=h(A,1))D=h(D,a(r((-1)**(A-1),b(A,E)),i(A,_)));return r(N,D)}}),jA="mode",bZ=["typed","isNaN","isNumeric"],wZ=z(jA,bZ,t=>{var{typed:e,isNaN:n,isNumeric:r}=t;return e(jA,{"Array | Matrix":i,"...":function(o){return i(o)}});function i(a){a=Ot(a.valueOf());var o=a.length;if(o===0)throw new Error("Cannot calculate mode of an empty array");for(var s={},u=[],l=0,c=0;c<a.length;c++){var f=a[c];if(r(f)&&n(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in s||(s[f]=0),s[f]++,s[f]===l?u.push(f):s[f]>l&&(l=s[f],u=[f])}return u}});function Yr(t,e,n){var r;return String(t).includes("Unexpected type")?(r=arguments.length>2?" (type: "+Zt(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(t).includes("complex numbers")?(r=arguments.length>2?" (type: "+Zt(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var $A="prod",_Z=["typed","config","multiplyScalar","numeric"],EZ=z($A,_Z,t=>{var{typed:e,config:n,multiplyScalar:r,numeric:i}=t;return e($A,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(s,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(s){return a(s)}});function a(o){var s;if(Zs(o,function(u){try{s=s===void 0?u:r(s,u)}catch(l){throw Yr(l,"prod",u)}}),typeof s=="string"&&(s=i(s,lu(s,n))),s===void 0)throw new Error("Cannot calculate prod of an empty array");return s}}),zA="format",CZ=["typed"],NZ=z(zA,CZ,t=>{var{typed:e}=t;return e(zA,{any:xt,"any, Object | function | number | BigNumber":xt})}),UA="bin",SZ=["typed","format"],DZ=z(UA,SZ,t=>{var{typed:e,format:n}=t;return e(UA,{"number | BigNumber":function(i){return n(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,a){return n(i,{notation:"bin",wordSize:a})}})}),VA="oct",AZ=["typed","format"],TZ=z(VA,AZ,t=>{var{typed:e,format:n}=t;return e(VA,{"number | BigNumber":function(i){return n(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,a){return n(i,{notation:"oct",wordSize:a})}})}),WA="hex",MZ=["typed","format"],IZ=z(WA,MZ,t=>{var{typed:e,format:n}=t;return e(WA,{"number | BigNumber":function(i){return n(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,a){return n(i,{notation:"hex",wordSize:a})}})}),SB=/\$([\w.]+)/g,qA="print",kZ=["typed"],DB=z(qA,kZ,t=>{var{typed:e}=t;return e(qA,{"string, Object | Array":HA,"string, Object | Array, number | Object":HA})});function HA(t,e,n){return t.replace(SB,function(r,i){var a=i.split("."),o=e[a.shift()];for(o!==void 0&&o.isMatrix&&(o=o.toArray());a.length&&o!==void 0;){var s=a.shift();o=s?o[s]:o+"."}return o!==void 0?Tr(o)?o:xt(o,n):r})}var GA="to",RZ=["typed","matrix","concat"],FZ=z(GA,RZ,t=>{var{typed:e,matrix:n,concat:r}=t,i=Jt({typed:e,matrix:n,concat:r});return e(GA,{"Unit, Unit | string":(a,o)=>a.to(o)},i({Ds:!0}))}),KA="isPrime",PZ=["typed"],OZ=z(KA,PZ,t=>{var{typed:e}=t;return e(KA,{number:function(r){if(r<=3)return r>1;if(r%2===0||r%3===0)return!1;for(var i=5;i*i<=r;i+=6)if(r%i===0||r%(i+2)===0)return!1;return!0},bigint:function(r){if(r<=3n)return r>1n;if(r%2n===0n||r%3n===0n)return!1;for(var i=5n;i*i<=r;i+=6n)if(r%i===0n||r%(i+2n)===0n)return!1;return!0},BigNumber:function(r){if(r.lte(3))return r.gt(1);if(r.mod(2).eq(0)||r.mod(3).eq(0))return!1;if(r.lt(Math.pow(2,32))){for(var i=r.toNumber(),a=5;a*a<=i;a+=6)if(i%a===0||i%(a+2)===0)return!1;return!0}function o(x,g,b){for(var w=1;!g.eq(0);)g.mod(2).eq(0)?(g=g.div(2),x=x.mul(x).mod(b)):(g=g.sub(1),w=x.mul(w).mod(b));return w}var s=r.constructor.clone({precision:r.toFixed(0).length*2});r=new s(r);for(var u=0,l=r.sub(1);l.mod(2).eq(0);)l=l.div(2),u+=1;var c=null;if(r.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(x=>x<r);else{var f=Math.min(r.toNumber()-2,Math.floor(2*Math.pow(r.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var h=0;h<c.length;h+=1){var p=c[h],m=o(r.sub(r).add(p),l,r);if(!m.eq(1)){for(var y=0,v=m;!v.eq(r.sub(1));y+=1,v=v.mul(v).mod(r))if(y===u-1)return!1}}return!0},"Array | Matrix":e.referToSelf(n=>r=>pt(r,n))})}),BZ="numeric",LZ=["number","?bignumber","?fraction"],jZ=z(BZ,LZ,t=>{var{number:e,bignumber:n,fraction:r}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:o=>e(o),BigNumber:n?o=>n(o):v_,bigint:o=>BigInt(o),Fraction:r?o=>r(o):wB};return function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Zt(s);if(!(c in i))throw new TypeError("Cannot convert "+s+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in a))throw new TypeError("Cannot convert "+s+' to type "'+u+'"; valid output types are '+Object.keys(a).join(", "));return u===c?s:a[u](s)}}),YA="divideScalar",$Z=["typed","numeric"],zZ=z(YA,$Z,t=>{var{typed:e,numeric:n}=t;return e(YA,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"bigint, bigint":function(i,a){return i/a},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),XA="pow",UZ=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],VZ=z(XA,UZ,t=>{var{typed:e,config:n,identity:r,multiply:i,matrix:a,inv:o,number:s,fraction:u,Complex:l}=t;return e(XA,{"number, number":c,"Complex, Complex":function(p,m){return p.pow(m)},"BigNumber, BigNumber":function(p,m){return m.isInteger()||p>=0||n.predictable?p.pow(m):new l(p.toNumber(),0).pow(m.toNumber(),0)},"bigint, bigint":(h,p)=>h**p,"Fraction, Fraction":function(p,m){var y=p.pow(m);if(y!=null)return y;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),m.valueOf())},"Array, number":f,"Array, BigNumber":function(p,m){return f(p,m.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,m){return d(p,m.toNumber())},"Unit, number | BigNumber":function(p,m){return p.pow(m)}});function c(h,p){if(n.predictable&&!qe(p)&&h<0)try{var m=u(p),y=s(m);if((p===y||Math.abs((p-y)/p)<1e-14)&&m.d%2n===1n)return(m.n%2n===0n?1:-1)*Math.pow(-h,p)}catch{}return n.predictable&&(h<-1&&p===1/0||h>-1&&h<0&&p===-1/0)?NaN:qe(p)||h>=0||n.predictable?kO(h,p):h*h<1&&p===1/0||h*h>1&&p===-1/0?0:new l(h,0).pow(p,0)}function f(h,p){if(!qe(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var m=ot(h);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");if(p<0)try{return f(o(h),-p)}catch(x){throw x.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):x}for(var y=r(m[0]).valueOf(),v=h;p>=1;)(p&1)===1&&(y=i(v,y)),p>>=1,v=i(v,v);return y}function d(h,p){return a(f(h.valueOf(),p))}}),Yl="Number of decimals in function round must be an integer",QA="round",WZ=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],qZ=z(QA,WZ,t=>{var{typed:e,config:n,matrix:r,equalScalar:i,zeros:a,BigNumber:o,DenseMatrix:s}=t,u=wr({typed:e,equalScalar:i}),l=Kn({typed:e,DenseMatrix:s}),c=Fa({typed:e});function f(d){return Math.abs(sp(d).exponent)}return e(QA,{number:function(h){var p=ld(h,f(n.relTol)),m=br(h,p,n.relTol,n.absTol)?p:h;return ld(m)},"number, number":function(h,p){var m=f(n.relTol);if(p>=m)return ld(h,p);var y=ld(h,m),v=br(h,y,n.relTol,n.absTol)?y:h;return ld(v,p)},"number, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(Yl);return new o(h).toDecimalPlaces(p.toNumber())},Complex:function(h){return h.round()},"Complex, number":function(h,p){if(p%1)throw new TypeError(Yl);return h.round(p)},"Complex, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(Yl);var m=p.toNumber();return h.round(m)},BigNumber:function(h){var p=new o(h).toDecimalPlaces(f(n.relTol)),m=oa(h,p,n.relTol,n.absTol)?p:h;return m.toDecimalPlaces(0)},"BigNumber, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(Yl);var m=f(n.relTol);if(p>=m)return h.toDecimalPlaces(p.toNumber());var y=h.toDecimalPlaces(m),v=oa(h,y,n.relTol,n.absTol)?y:h;return v.toDecimalPlaces(p.toNumber())},bigint:d=>d,"bigint, number":(d,h)=>d,"bigint, BigNumber":(d,h)=>d,Fraction:function(h){return h.round()},"Fraction, number":function(h,p){if(p%1)throw new TypeError(Yl);return h.round(p)},"Fraction, BigNumber":function(h,p){if(!p.isInteger())throw new TypeError(Yl);return h.round(p.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,p,m){var y=h.toNumeric(m);return m.multiply(d(y,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,p,m)=>d(h,p.toNumber(),m)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,p,m)=>pt(h,y=>d(y,p,m),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,p)=>d(h,0,p)),"Array | Matrix":e.referToSelf(d=>h=>pt(h,d,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,p)=>u(h,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,p)=>c(h,p,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(h,p)=>c(r(h),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(h,p)=>i(h,0)?a(p.size(),p.storage()):l(p,h,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(h,p)=>i(h,0)?a(p.size(),p.storage()):c(p,h,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(h,p)=>c(r(p),h,d,!0).valueOf())})}),ZA="log",HZ=["config","typed","typeOf","divideScalar","Complex"],GZ=Math.log(16),KZ=z(ZA,HZ,t=>{var{typed:e,typeOf:n,config:r,divideScalar:i,Complex:a}=t;function o(u){return u.log()}function s(u){return o(new a(u,0))}return e(ZA,{number:function(l){return l>=0||r.predictable?pD(l):s(l)},bigint:p_(GZ,pD,r,s),Complex:o,BigNumber:function(l){return!l.isNegative()||r.predictable?l.ln():s(l.toNumber())},"any, any":e.referToSelf(u=>(l,c)=>{if(n(l)==="Fraction"&&n(c)==="Fraction"){var f=l.log(c);if(f!==null)return f}return i(u(l),u(c))})})}),JA="log1p",YZ=["typed","config","divideScalar","log","Complex"],XZ=z(JA,YZ,t=>{var{typed:e,config:n,divideScalar:r,log:i,Complex:a}=t;return e(JA,{number:function(u){return u>=-1||n.predictable?Gq(u):o(new a(u,0))},Complex:o,BigNumber:function(u){var l=u.plus(1);return!l.isNegative()||n.predictable?l.ln():o(new a(u.toNumber(),0))},"Array | Matrix":e.referToSelf(s=>u=>pt(u,s)),"any, any":e.referToSelf(s=>(u,l)=>r(s(u),i(l)))});function o(s){var u=s.re+1;return new a(Math.log(Math.sqrt(u*u+s.im*s.im)),Math.atan2(s.im,u))}}),eT="nthRoots",QZ=["config","typed","divideScalar","Complex"],ZZ=z(eT,QZ,t=>{var{typed:e,config:n,divideScalar:r,Complex:i}=t,a=[function(u){return new i(u,0)},function(u){return new i(0,u)},function(u){return new i(-u,0)},function(u){return new i(0,-u)}];function o(s,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(s===0||s.abs()===0)return[new i(0,0)];var l=typeof s=="number",c;(l||s.re===0||s.im===0)&&(l?c=2*+(s<0):s.im===0?c=2*+(s.re<0):c=2*+(s.im<0)+1);for(var f=s.arg(),d=s.abs(),h=[],p=Math.pow(d,1/u),m=0;m<u;m++){var y=(c+4*m)/u;if(y===Math.round(y)){h.push(a[y%4](p));continue}h.push(new i({r:p,phi:(f+2*Math.PI*m)/u}))}return h}return e(eT,{Complex:function(u){return o(u,2)},"Complex, number":o})}),tT="dotPow",JZ=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],eJ=z(tT,JZ,t=>{var{typed:e,equalScalar:n,matrix:r,pow:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=Jr({typed:e}),l=so({typed:e,SparseMatrix:s}),c=wr({typed:e,equalScalar:n}),f=Kn({typed:e,DenseMatrix:a}),d=Jt({typed:e,matrix:r,concat:o}),h={};for(var p in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,p)&&!p.includes("Matrix")&&!p.includes("Array")&&(h[p]=i.signatures[p]);var m=e(h);return e(tT,d({elop:m,SS:l,DS:u,Ss:c,sS:f}))}),nT="dotDivide",tJ=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],nJ=z(nT,tJ,t=>{var{typed:e,matrix:n,equalScalar:r,divideScalar:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=Pa({typed:e,equalScalar:r}),l=Jr({typed:e}),c=so({typed:e,SparseMatrix:s}),f=wr({typed:e,equalScalar:r}),d=Kn({typed:e,DenseMatrix:a}),h=Jt({typed:e,matrix:n,concat:o});return e(nT,h({elop:i,SS:c,DS:l,SD:u,Ss:f,sS:d}))});function up(t){var{DenseMatrix:e}=t;return function(r,i,a){var o=r.size();if(o.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+xt(o)+")");var s=o[0],u=o[1];if(s!==u)throw new RangeError("Matrix must be square (size: "+xt(o)+")");var l=[];if(Je(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<s;d++)l[d]=[f[d]];return new e({data:l,size:[s,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==s||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(qv(i)){if(a){l=[];for(var h=0;h<s;h++)l[h]=[f[h][0]];return new e({data:l,size:[s,1],datatype:i._datatype})}return i}if(Vu(i)){for(var p=0;p<s;p++)l[p]=[0];for(var m=i._values,y=i._index,v=i._ptr,x=v[1],g=v[0];g<x;g++){var b=y[g];l[b][0]=m[g]}return new e({data:l,size:[s,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Ht(i)){var w=ot(i);if(w.length===1){if(w[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<s;_++)l[_]=[i[_]];return new e({data:l,size:[s,1]})}if(w.length===2){if(w[0]!==s||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<s;E++)l[E]=[i[E][0]];return new e({data:l,size:[s,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var rT="lsolve",rJ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],iJ=z(rT,rJ,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=up({DenseMatrix:s});return e(rT,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var p=n(d),m=l(p,h);return m.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,p=f._size[0],m=f._size[1],y=[],v=f._data,x=0;x<m;x++){var g=h[x][0]||0,b=void 0;if(o(g,0))b=0;else{var w=v[x][x];if(o(w,0))throw new Error("Linear system cannot be solved since matrix is singular");b=r(g,w);for(var _=x+1;_<p;_++)h[_]=[a(h[_][0]||0,i(b,v[_][x]))]}y[x]=[b]}return new s({data:y,size:[p,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,p=f._size[0],m=f._size[1],y=f._values,v=f._index,x=f._ptr,g=[],b=0;b<m;b++){var w=h[b][0]||0;if(o(w,0))g[b]=[0];else{for(var _=0,E=[],C=[],N=x[b],D=x[b+1],A=N;A<D;A++){var T=v[A];T===b?_=y[A]:T>b&&(E.push(y[A]),C.push(T))}if(o(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var R=r(w,_),F=0,O=C.length;F<O;F++){var I=C[F];h[I]=[a(h[I][0]||0,i(R,E[F]))]}g[b]=[R]}}return new s({data:g,size:[p,1]})}}),iT="usolve",aJ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],oJ=z(iT,aJ,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=up({DenseMatrix:s});return e(iT,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var p=n(d),m=l(p,h);return m.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,p=f._size[0],m=f._size[1],y=[],v=f._data,x=m-1;x>=0;x--){var g=h[x][0]||0,b=void 0;if(o(g,0))b=0;else{var w=v[x][x];if(o(w,0))throw new Error("Linear system cannot be solved since matrix is singular");b=r(g,w);for(var _=x-1;_>=0;_--)h[_]=[a(h[_][0]||0,i(b,v[_][x]))]}y[x]=[b]}return new s({data:y,size:[p,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,p=f._size[0],m=f._size[1],y=f._values,v=f._index,x=f._ptr,g=[],b=m-1;b>=0;b--){var w=h[b][0]||0;if(o(w,0))g[b]=[0];else{for(var _=0,E=[],C=[],N=x[b],D=x[b+1],A=D-1;A>=N;A--){var T=v[A];T===b?_=y[A]:T<b&&(E.push(y[A]),C.push(T))}if(o(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var R=r(w,_),F=0,O=C.length;F<O;F++){var I=C[F];h[I]=[a(h[I][0],i(R,E[F]))]}g[b]=[R]}}return new s({data:g,size:[p,1]})}}),aT="lsolveAll",sJ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],uJ=z(aT,sJ,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=up({DenseMatrix:s});return e(aT,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var p=n(d),m=l(p,h);return m.map(y=>y.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(C=>C[0])],p=f._data,m=f._size[0],y=f._size[1],v=0;v<y;v++)for(var x=h.length,g=0;g<x;g++){var b=h[g];if(o(p[v][v],0))if(o(b[v],0)){if(g===0){var _=[...b];_[v]=1;for(var E=v+1;E<y;E++)_[E]=a(_[E],p[E][v]);h.push(_)}}else{if(g===0)return[];h.splice(g,1),g-=1,x-=1}else{b[v]=r(b[v],p[v][v]);for(var w=v+1;w<y;w++)b[w]=a(b[w],i(b[v],p[w][v]))}}return h.map(C=>new s({data:C.map(N=>[N]),size:[m,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(Y=>Y[0])],p=f._size[0],m=f._size[1],y=f._values,v=f._index,x=f._ptr,g=0;g<m;g++)for(var b=h.length,w=0;w<b;w++){for(var _=h[w],E=[],C=[],N=x[g],D=x[g+1],A=0,T=N;T<D;T++){var R=v[T];R===g?A=y[T]:R>g&&(E.push(y[T]),C.push(R))}if(o(A,0))if(o(_[g],0)){if(w===0){var M=[..._];M[g]=1;for(var B=0,k=C.length;B<k;B++){var j=C[B];M[j]=a(M[j],E[B])}h.push(M)}}else{if(w===0)return[];h.splice(w,1),w-=1,b-=1}else{_[g]=r(_[g],A);for(var F=0,O=C.length;F<O;F++){var I=C[F];_[I]=a(_[I],i(_[g],E[F]))}}}return h.map(Y=>new s({data:Y.map(q=>[q]),size:[p,1]}))}}),oT="usolveAll",lJ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],cJ=z(oT,lJ,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=t,u=up({DenseMatrix:s});return e(oT,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var p=n(d),m=l(p,h);return m.map(y=>y.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(C=>C[0])],p=f._data,m=f._size[0],y=f._size[1],v=y-1;v>=0;v--)for(var x=h.length,g=0;g<x;g++){var b=h[g];if(o(p[v][v],0))if(o(b[v],0)){if(g===0){var _=[...b];_[v]=1;for(var E=v-1;E>=0;E--)_[E]=a(_[E],p[E][v]);h.push(_)}}else{if(g===0)return[];h.splice(g,1),g-=1,x-=1}else{b[v]=r(b[v],p[v][v]);for(var w=v-1;w>=0;w--)b[w]=a(b[w],i(b[v],p[w][v]))}}return h.map(C=>new s({data:C.map(N=>[N]),size:[m,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(Y=>Y[0])],p=f._size[0],m=f._size[1],y=f._values,v=f._index,x=f._ptr,g=m-1;g>=0;g--)for(var b=h.length,w=0;w<b;w++){for(var _=h[w],E=[],C=[],N=x[g],D=x[g+1],A=0,T=D-1;T>=N;T--){var R=v[T];R===g?A=y[T]:R<g&&(E.push(y[T]),C.push(R))}if(o(A,0))if(o(_[g],0)){if(w===0){var M=[..._];M[g]=1;for(var B=0,k=C.length;B<k;B++){var j=C[B];M[j]=a(M[j],E[B])}h.push(M)}}else{if(w===0)return[];h.splice(w,1),w-=1,b-=1}else{_[g]=r(_[g],A);for(var F=0,O=C.length;F<O;F++){var I=C[F];_[I]=a(_[I],i(_[g],E[F]))}}}return h.map(Y=>new s({data:Y.map(q=>[q]),size:[p,1]}))}}),fJ="matAlgo08xS0Sid",dJ=["typed","equalScalar"],g_=z(fJ,dJ,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,o){var s=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=a._values,h=a._index,p=a._ptr,m=a._size,y=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(c.length!==m.length)throw new bt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");if(!s||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var v=c[0],x=c[1],g,b=n,w=0,_=o;typeof f=="string"&&f===y&&f!=="mixed"&&(g=f,b=e.find(n,[g,g]),w=e.convert(0,g),_=e.find(o,[g,g]));for(var E=[],C=[],N=[],D=[],A=[],T,R,F,O,I=0;I<x;I++){N[I]=C.length;var M=I+1;for(R=l[I],F=l[I+1],T=R;T<F;T++)O=u[T],A[O]=M,D[O]=s[T],C.push(O);for(R=p[I],F=p[I+1],T=R;T<F;T++)O=h[T],A[O]===M&&(D[O]=_(D[O],d[T]));for(T=N[I];T<C.length;){O=C[T];var B=D[O];b(B,w)?C.splice(T,1):(E.push(B),T++)}}return N[x]=C.length,i.createSparseMatrix({values:E,index:C,ptr:N,size:[v,x],datatype:f===i._datatype&&y===a._datatype?g:void 0})}}),y_=z("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:n}=t;return{"Array, number":e.referTo("DenseMatrix, number",r=>(i,a)=>r(n(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(i,a)=>r(n(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(i,a)=>r(i,n(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(i,a)=>r(i,n(a)).valueOf())}}),sT="leftShift",hJ=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],pJ=z(sT,hJ,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=t,s=fu({typed:e}),u=Pa({typed:e,equalScalar:r}),l=g_({typed:e,equalScalar:r}),c=Sl({typed:e,DenseMatrix:a}),f=wr({typed:e,equalScalar:r}),d=Fa({typed:e}),h=Jt({typed:e,matrix:n,concat:o}),p=y_({typed:e,matrix:n});return e(sT,{"number, number":BO,"BigNumber, BigNumber":BX,"bigint, bigint":(m,y)=>m<<y,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(y,v)=>r(v,0)?y.clone():f(y,v,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(y,v)=>r(v,0)?y.clone():d(y,v,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(y,v)=>r(y,0)?i(v.size(),v.storage()):c(v,y,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(y,v)=>r(y,0)?i(v.size(),v.storage()):d(v,y,m,!0))},p,h({SS:l,DS:s,SD:u}))}),uT="rightArithShift",mJ=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],vJ=z(uT,mJ,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=t,s=fu({typed:e}),u=Pa({typed:e,equalScalar:r}),l=g_({typed:e,equalScalar:r}),c=Sl({typed:e,DenseMatrix:a}),f=wr({typed:e,equalScalar:r}),d=Fa({typed:e}),h=Jt({typed:e,matrix:n,concat:o}),p=y_({typed:e,matrix:n});return e(uT,{"number, number":LO,"BigNumber, BigNumber":LX,"bigint, bigint":(m,y)=>m>>y,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(y,v)=>r(v,0)?y.clone():f(y,v,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(y,v)=>r(v,0)?y.clone():d(y,v,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(y,v)=>r(y,0)?i(v.size(),v.storage()):c(v,y,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(y,v)=>r(y,0)?i(v.size(),v.storage()):d(v,y,m,!0))},p,h({SS:l,DS:s,SD:u}))}),lT="rightLogShift",gJ=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],yJ=z(lT,gJ,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=t,s=fu({typed:e}),u=Pa({typed:e,equalScalar:r}),l=g_({typed:e,equalScalar:r}),c=Sl({typed:e,DenseMatrix:a}),f=wr({typed:e,equalScalar:r}),d=Fa({typed:e}),h=Jt({typed:e,matrix:n,concat:o}),p=y_({typed:e,matrix:n});return e(lT,{"number, number":jO,"SparseMatrix, number | BigNumber":e.referToSelf(m=>(y,v)=>r(v,0)?y.clone():f(y,v,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(y,v)=>r(v,0)?y.clone():d(y,v,m,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(y,v)=>r(y,0)?i(v.size(),v.storage()):c(v,y,m,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(m=>(y,v)=>r(y,0)?i(v.size(),v.storage()):d(v,y,m,!0))},p,h({SS:l,DS:s,SD:u}))}),cT="and",xJ=["typed","matrix","equalScalar","zeros","not","concat"],AB=z(cT,xJ,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=t,s=Pa({typed:e,equalScalar:r}),u=K0({typed:e,equalScalar:r}),l=wr({typed:e,equalScalar:r}),c=Fa({typed:e}),f=Jt({typed:e,matrix:n,concat:o});return e(cT,{"number, number":zb,"Complex, Complex":function(h,p){return(h.re!==0||h.im!==0)&&(p.re!==0||p.im!==0)},"BigNumber, BigNumber":function(h,p){return!h.isZero()&&!p.isZero()&&!h.isNaN()&&!p.isNaN()},"bigint, bigint":zb,"Unit, Unit":e.referToSelf(d=>(h,p)=>d(h.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(d=>(h,p)=>a(p)?i(h.size(),h.storage()):l(h,p,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(h,p)=>a(p)?i(h.size(),h.storage()):c(h,p,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(h,p)=>a(h)?i(h.size(),h.storage()):l(p,h,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(h,p)=>a(h)?i(h.size(),h.storage()):c(p,h,d,!0)),"Array, any":e.referToSelf(d=>(h,p)=>d(n(h),p).valueOf()),"any, Array":e.referToSelf(d=>(h,p)=>d(h,n(p)).valueOf())},f({SS:u,DS:s}))}),ag="compare",bJ=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],wJ=z(ag,bJ,t=>{var{typed:e,config:n,equalScalar:r,matrix:i,BigNumber:a,Fraction:o,DenseMatrix:s,concat:u}=t,l=Jr({typed:e}),c=G0({typed:e,equalScalar:r}),f=Kn({typed:e,DenseMatrix:s}),d=Jt({typed:e,matrix:i,concat:u}),h=Rf({typed:e});return e(ag,_J({typed:e,config:n}),{"boolean, boolean":function(m,y){return m===y?0:m>y?1:-1},"BigNumber, BigNumber":function(m,y){return oa(m,y,n.relTol,n.absTol)?new a(0):new a(m.cmp(y))},"bigint, bigint":function(m,y){return m===y?0n:m>y?1n:-1n},"Fraction, Fraction":function(m,y){return new o(m.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:c,DS:l,Ss:f}))}),_J=z(ag,["typed","config"],t=>{var{typed:e,config:n}=t;return e(ag,{"number, number":function(i,a){return br(i,a,n.relTol,n.absTol)?0:i>a?1:-1}})}),EJ=function t(e,n){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,s=/^0/,u=function(g){return t.insensitive&&(""+g).toLowerCase()||""+g},l=u(e).replace(i,"")||"",c=u(n).replace(i,"")||"",f=l.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(l.match(o),16)||f.length!==1&&l.match(a)&&Date.parse(l),p=parseInt(c.match(o),16)||h&&c.match(a)&&Date.parse(c)||null,m,y;if(p){if(h<p)return-1;if(h>p)return 1}for(var v=0,x=Math.max(f.length,d.length);v<x;v++){if(m=!(f[v]||"").match(s)&&parseFloat(f[v])||f[v]||0,y=!(d[v]||"").match(s)&&parseFloat(d[v])||d[v]||0,isNaN(m)!==isNaN(y))return isNaN(m)?1:-1;if(typeof m!=typeof y&&(m+="",y+=""),m<y)return-1;if(m>y)return 1}return 0};const Xl=p0(EJ);var fT="compareNatural",CJ=["typed","compare"],NJ=z(fT,CJ,t=>{var{typed:e,compare:n}=t,r=n.signatures["boolean,boolean"];return e(fT,{"any, any":i});function i(u,l){var c=Zt(u),f=Zt(l),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=n(u,l),d.toString()!=="0"?d>0?1:-1:Xl(c,f);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(f))return d=a(i,u,l),d!==0?d:Xl(c,f);if(c!==f)return Xl(c,f);if(c==="Complex")return SJ(u,l);if(c==="Unit")return u.equalBase(l)?i(u.value,l.value):o(i,u.formatUnits(),l.formatUnits());if(c==="boolean")return r(u,l);if(c==="string")return Xl(u,l);if(c==="Object")return s(i,u,l);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function a(u,l,c){return Vu(l)&&Vu(c)?o(u,l.toJSON().values,c.toJSON().values):Vu(l)?a(u,l.toArray(),c):Vu(c)?a(u,l,c.toArray()):qv(l)?a(u,l.toJSON().data,c):qv(c)?a(u,l,c.toJSON().data):Array.isArray(l)?Array.isArray(c)?o(u,l,c):a(u,l,[c]):a(u,[l],c)}function o(u,l,c){for(var f=0,d=Math.min(l.length,c.length);f<d;f++){var h=u(l[f],c[f]);if(h!==0)return h}return l.length>c.length?1:l.length<c.length?-1:0}function s(u,l,c){var f=Object.keys(l),d=Object.keys(c);f.sort(Xl),d.sort(Xl);var h=o(u,f,d);if(h!==0)return h;for(var p=0;p<f.length;p++){var m=u(l[f[p]],c[d[p]]);if(m!==0)return m}return 0}});function SJ(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var dT="compareText",DJ=["typed","matrix","concat"];Fb.signature="any, any";var AJ=z(dT,DJ,t=>{var{typed:e,matrix:n,concat:r}=t,i=Jt({typed:e,matrix:n,concat:r});return e(dT,Fb,i({elop:Fb,Ds:!0}))}),og="equal",TJ=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],MJ=z(og,TJ,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a,SparseMatrix:o}=t,s=Jr({typed:e}),u=so({typed:e,SparseMatrix:o}),l=Kn({typed:e,DenseMatrix:i}),c=Jt({typed:e,matrix:n,concat:a});return e(og,IJ({typed:e,equalScalar:r}),c({elop:r,SS:u,DS:s,Ss:l}))}),IJ=z(og,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(og,{"any, any":function(i,a){return i===null?a===null:a===null?i===null:i===void 0?a===void 0:a===void 0?i===void 0:n(i,a)}})}),hT="equalText",kJ=["typed","compareText","isZero"],RJ=z(hT,kJ,t=>{var{typed:e,compareText:n,isZero:r}=t;return e(hT,{"any, any":function(a,o){return r(n(a,o))}})}),sg="smaller",FJ=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],PJ=z(sg,FJ,t=>{var{typed:e,config:n,bignumber:r,matrix:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=Jr({typed:e}),l=so({typed:e,SparseMatrix:s}),c=Kn({typed:e,DenseMatrix:a}),f=Jt({typed:e,matrix:i,concat:o}),d=Rf({typed:e});function h(p,m){return p.lt(m)&&!oa(p,m,n.relTol,n.absTol)}return e(sg,OJ({typed:e,config:n}),{"boolean, boolean":(p,m)=>p<m,"BigNumber, BigNumber":h,"bigint, bigint":(p,m)=>p<m,"Fraction, Fraction":(p,m)=>p.compare(m)===-1,"Fraction, BigNumber":function(m,y){return h(r(m),y)},"BigNumber, Fraction":function(m,y){return h(m,r(y))},"Complex, Complex":function(m,y){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:l,DS:u,Ss:c}))}),OJ=z(sg,["typed","config"],t=>{var{typed:e,config:n}=t;return e(sg,{"number, number":function(i,a){return i<a&&!br(i,a,n.relTol,n.absTol)}})}),ug="smallerEq",BJ=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],LJ=z(ug,BJ,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:a,SparseMatrix:o}=t,s=Jr({typed:e}),u=so({typed:e,SparseMatrix:o}),l=Kn({typed:e,DenseMatrix:i}),c=Jt({typed:e,matrix:r,concat:a}),f=Rf({typed:e});return e(ug,jJ({typed:e,config:n}),{"boolean, boolean":(d,h)=>d<=h,"BigNumber, BigNumber":function(h,p){return h.lte(p)||oa(h,p,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d<=h,"Fraction, Fraction":(d,h)=>d.compare(h)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:s,Ss:l}))}),jJ=z(ug,["typed","config"],t=>{var{typed:e,config:n}=t;return e(ug,{"number, number":function(i,a){return i<=a||br(i,a,n.relTol,n.absTol)}})}),lg="larger",$J=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],zJ=z(lg,$J,t=>{var{typed:e,config:n,bignumber:r,matrix:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=Jr({typed:e}),l=so({typed:e,SparseMatrix:s}),c=Kn({typed:e,DenseMatrix:a}),f=Jt({typed:e,matrix:i,concat:o}),d=Rf({typed:e});function h(p,m){return p.gt(m)&&!oa(p,m,n.relTol,n.absTol)}return e(lg,UJ({typed:e,config:n}),{"boolean, boolean":(p,m)=>p>m,"BigNumber, BigNumber":h,"bigint, bigint":(p,m)=>p>m,"Fraction, Fraction":(p,m)=>p.compare(m)===1,"Fraction, BigNumber":function(m,y){return h(r(m),y)},"BigNumber, Fraction":function(m,y){return h(m,r(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,f({SS:l,DS:u,Ss:c}))}),UJ=z(lg,["typed","config"],t=>{var{typed:e,config:n}=t;return e(lg,{"number, number":function(i,a){return i>a&&!br(i,a,n.relTol,n.absTol)}})}),cg="largerEq",VJ=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],WJ=z(cg,VJ,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:a,SparseMatrix:o}=t,s=Jr({typed:e}),u=so({typed:e,SparseMatrix:o}),l=Kn({typed:e,DenseMatrix:i}),c=Jt({typed:e,matrix:r,concat:a}),f=Rf({typed:e});return e(cg,qJ({typed:e,config:n}),{"boolean, boolean":(d,h)=>d>=h,"BigNumber, BigNumber":function(h,p){return h.gte(p)||oa(h,p,n.relTol,n.absTol)},"bigint, bigint":function(h,p){return h>=p},"Fraction, Fraction":(d,h)=>d.compare(h)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:s,Ss:l}))}),qJ=z(cg,["typed","config"],t=>{var{typed:e,config:n}=t;return e(cg,{"number, number":function(i,a){return i>=a||br(i,a,n.relTol,n.absTol)}})}),pT="deepEqual",HJ=["typed","equal"],GJ=z(pT,HJ,t=>{var{typed:e,equal:n}=t;return e(pT,{"any, any":function(a,o){return r(a.valueOf(),o.valueOf())}});function r(i,a){if(Array.isArray(i))if(Array.isArray(a)){var o=i.length;if(o!==a.length)return!1;for(var s=0;s<o;s++)if(!r(i[s],a[s]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:n(i,a)}}),fg="unequal",KJ=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],YJ=z(fg,KJ,t=>{var{typed:e,config:n,equalScalar:r,matrix:i,DenseMatrix:a,concat:o,SparseMatrix:s}=t,u=Jr({typed:e}),l=so({typed:e,SparseMatrix:s}),c=Kn({typed:e,DenseMatrix:a}),f=Jt({typed:e,matrix:i,concat:o});return e(fg,XJ({typed:e,equalScalar:r}),f({elop:d,SS:l,DS:u,Ss:c}));function d(h,p){return!r(h,p)}}),XJ=z(fg,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(fg,{"any, any":function(i,a){return i===null?a!==null:a===null?i!==null:i===void 0?a!==void 0:a===void 0?i!==void 0:!n(i,a)}})}),mT="partitionSelect",QJ=["typed","isNumeric","isNaN","compare"],ZJ=z(mT,QJ,t=>{var{typed:e,isNumeric:n,isNaN:r,compare:i}=t,a=i,o=(l,c)=>-i(l,c);return e(mT,{"Array | Matrix, number":function(c,f){return s(c,f,a)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return s(c,f,a);if(d==="desc")return s(c,f,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(l,c,f){if(!qe(c)||c<0)throw new Error("k must be a non-negative integer");if(Je(l)){var d=l.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return u(l.valueOf(),c,f)}if(Array.isArray(l))return u(l,c,f)}function u(l,c,f){if(c>=l.length)throw new Error("k out of bounds");for(var d=0;d<l.length;d++)if(n(l[d])&&r(l[d]))return l[d];for(var h=0,p=l.length-1;h<p;){for(var m=h,y=p,v=l[Math.floor(Math.random()*(p-h+1))+h];m<y;)if(f(l[m],v)>=0){var x=l[y];l[y]=l[m],l[m]=x,--y}else++m;f(l[m],v)>0&&--m,c<=m?p=m:h=m+1}return l[c]}}),vT="sort",JJ=["typed","matrix","compare","compareNatural"],eee=z(vT,JJ,t=>{var{typed:e,matrix:n,compare:r,compareNatural:i}=t,a=r,o=(c,f)=>-r(c,f);return e(vT,{Array:function(f){return u(f),f.sort(a)},Matrix:function(f){return l(f),n(f.toArray().sort(a),f.storage())},"Array, function":function(f,d){return u(f),f.sort(d)},"Matrix, function":function(f,d){return l(f),n(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return u(f),f.sort(s(d))},"Matrix, string":function(f,d){return l(f),n(f.toArray().sort(s(d)),f.storage())}});function s(c){if(c==="asc")return a;if(c==="desc")return o;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function u(c){if(ot(c).length!==1)throw new Error("One dimensional array expected")}function l(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),gT="max",tee=["typed","config","numeric","larger","isNaN"],TB=z(gT,tee,t=>{var{typed:e,config:n,numeric:r,larger:i,isNaN:a}=t;return e(gT,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,c){return H0(l,c.valueOf(),o)},"...":function(l){if(Mf(l))throw new TypeError("Scalar values expected in function max");return s(l)}});function o(u,l){try{return i(u,l)?u:l}catch(c){throw Yr(c,"max",l)}}function s(u){var l;if(Zs(u,function(c){try{(a(c)||l===void 0||i(c,l))&&(l=c)}catch(f){throw Yr(f,"max",c)}}),l===void 0)throw new Error("Cannot calculate max of an empty array");return typeof l=="string"&&(l=r(l,lu(l,n))),l}}),yT="min",nee=["typed","config","numeric","smaller","isNaN"],MB=z(yT,nee,t=>{var{typed:e,config:n,numeric:r,smaller:i,isNaN:a}=t;return e(yT,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,c){return H0(l,c.valueOf(),o)},"...":function(l){if(Mf(l))throw new TypeError("Scalar values expected in function min");return s(l)}});function o(u,l){try{return i(u,l)?u:l}catch(c){throw Yr(c,"min",l)}}function s(u){var l;if(Zs(u,function(c){try{(a(c)||l===void 0||i(c,l))&&(l=c)}catch(f){throw Yr(f,"min",c)}}),l===void 0)throw new Error("Cannot calculate min of an empty array");return typeof l=="string"&&(l=r(l,lu(l,n))),l}}),ree="ImmutableDenseMatrix",iee=["smaller","DenseMatrix"],aee=z(ree,iee,t=>{var{smaller:e,DenseMatrix:n}=t;function r(i,a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Tr(a))throw new Error("Invalid datatype: "+a);if(Je(i)||Ht(i)){var o=new n(i,a);this._data=o._data,this._size=o._size,this._datatype=o._datatype,this._min=null,this._max=null}else if(i&&Ht(i.data)&&Ht(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Zt(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return r.prototype=new n,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(i){switch(arguments.length){case 1:{var a=n.prototype.subset.call(this,i);return Je(a)?new r({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:ut(this._data),size:ut(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(i){return new r(i)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},r},{isClass:!0}),oee="Index",see=["ImmutableDenseMatrix","getMatrixDataType"],uee=z(oee,see,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:n}=t;function r(a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var o=0,s=arguments.length;o<s;o++){var u=arguments[o],l=Ht(u),c=Je(u),f=typeof u,d=null;if(i_(u))this._dimensions.push(u),this._isScalar=!1;else if(l||c){var h=void 0;n(u)==="boolean"?(l&&(h=i(xT(u).valueOf())),c&&(h=i(xT(u._data).valueOf())),d=u.valueOf().length):h=i(u.valueOf()),this._dimensions.push(h);var p=h.size();(p.length!==1||p[0]!==1||d!==null)&&(this._isScalar=!1)}else if(f==="number")this._dimensions.push(i([u]));else if(f==="bigint")this._dimensions.push(i([Number(u)]));else if(f==="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(d)}}r.prototype.type="Index",r.prototype.isIndex=!0;function i(a){for(var o=0,s=a.length;o<s;o++)if(typeof a[o]!="number"||!qe(a[o]))throw new TypeError("Index parameters must be positive integer numbers");return new e(a)}return r.prototype.clone=function(){var a=new r;return a._dimensions=ut(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},r.create=function(a){var o=new r;return r.apply(o,a),o},r.prototype.size=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a[o]=typeof u=="string"?1:u.size()[0]}return a},r.prototype.max=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a[o]=typeof u=="string"?u:u.max()}return a},r.prototype.min=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a[o]=typeof u=="string"?u:u.min()}return a},r.prototype.forEach=function(a){for(var o=0,s=this._dimensions.length;o<s;o++)a(this._dimensions[o],o,this)},r.prototype.dimension=function(a){return typeof a!="number"?null:this._dimensions[a]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];a.push(typeof u=="string"?u:u.toArray())}return a},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var a=[],o=0,s=this._dimensions.length;o<s;o++){var u=this._dimensions[o];typeof u=="string"?a.push(JSON.stringify(u)):a.push(u.toString())}return"["+a.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(a){return r.create(a.dimensions)},r},{isClass:!0});function xT(t){var e=[];return t.forEach((n,r)=>{n&&e.push(r)}),e}var lee="FibonacciHeap",cee=["smaller","larger"],fee=z(lee,cee,t=>{var{smaller:e,larger:n}=t,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,h=c.child;d>0;){var p=h.right;h.left.right=h.right,h.right.left=h.left,h.left=f,h.right=f.right,f.right=h,h.right.left=h,h.parent=null,h=p,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=l(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=a(this._minimum,c,-1),this.extractMinimum()};function a(c,f,d){f.key=d;var h=f.parent;return h&&e(f.key,h.key)&&(o(c,f,h),s(c,h)),e(f.key,c.key)&&(c=f),c}function o(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function s(c,f){var d=f.parent;d&&(f.mark?(o(c,f,d),s(d)):f.mark=!0)}var u=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function l(c,f){var d=Math.floor(Math.log(f)*r)+1,h=new Array(d),p=0,m=c;if(m)for(p++,m=m.right;m!==c;)p++,m=m.right;for(var y;p>0;){for(var v=m.degree,x=m.right;y=h[v],!!y;){if(n(m.key,y.key)){var g=y;y=m,m=g}u(y,m),h[v]=null,v++}h[v]=m,m=x,p--}c=null;for(var b=0;b<d;b++)y=h[b],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return i},{isClass:!0}),dee="Spa",hee=["addScalar","equalScalar","FibonacciHeap"],pee=z(dee,hee,t=>{var{addScalar:e,equalScalar:n,FibonacciHeap:r}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,o){if(this._values[a])this._values[a].value=o;else{var s=this._heap.insert(a,o);this._values[a]=s}},i.prototype.get=function(a){var o=this._values[a];return o?o.value:0},i.prototype.accumulate=function(a,o){var s=this._values[a];s?s.value=e(s.value,o):(s=this._heap.insert(a,o),this._values[a]=s)},i.prototype.forEach=function(a,o,s){var u=this._heap,l=this._values,c=[],f=u.extractMinimum();for(f&&c.push(f);f&&f.key<=o;)f.key>=a&&(n(f.value,0)||s(f.key,f.value,this)),f=u.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var h=c[d];f=u.insert(h.key,h.value),l[f.key]=f}},i.prototype.swap=function(a,o){var s=this._values[a],u=this._values[o];if(!s&&u)s=this._heap.insert(a,u.value),this._heap.remove(u),this._values[a]=s,this._values[o]=void 0;else if(s&&!u)u=this._heap.insert(o,s.value),this._heap.remove(s),this._values[o]=u,this._values[a]=void 0;else if(s&&u){var l=s.value;s.value=u.value,u.value=l}},i},{isClass:!0});function mee(t){var e=0,n=1,r=Object.create(null),i=Object.create(null),a=0,o=function(u){var l=i[u];if(l&&(delete r[l],delete i[u],--e,n===l)){if(!e){a=0,n=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(u){var l=i[u],c=++a;if(r[c]=u,i[u]=c,!l)return++e,e<=t?void 0:(u=r[n],o(u),u);if(delete r[l],n===l)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:o,clear:function(){e=a=0,n=1,r=Object.create(null),i=Object.create(null)}}}function lp(t){var{hasher:e,limit:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=n??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:mee(n||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e(i);if(r.cache.values.has(o))return r.cache.lru.hit(o),r.cache.values.get(o);var s=t.apply(t,i);return r.cache.values.set(o,s),r.cache.values.delete(r.cache.lru.hit(o)),s}}var vee=lp(function(t){return new t(1).exp()},{hasher:Y0}),gee=lp(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:Y0}),x_=lp(function(t){return t.acos(-1)},{hasher:Y0}),yee=lp(function(t){return x_(t).times(2)},{hasher:Y0});function Y0(t){return t[0].precision}function bT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bT(Object(n),!0).forEach(function(r){Bn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var xee="Unit",bee=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],wee=z(xee,bee,t=>{var{on:e,config:n,addScalar:r,subtractScalar:i,multiplyScalar:a,divideScalar:o,pow:s,abs:u,fix:l,round:c,equal:f,isNumeric:d,format:h,number:p,Complex:m,BigNumber:y,Fraction:v}=t,x=p;function g($,K){if(!(this instanceof g))throw new Error("Constructor must be called with the new operator");if(!($==null||d($)||Ro($)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,K===void 0)this.units=[],this.dimensions=B.map(ce=>0);else if(typeof K=="string"){var ue=g.parse(K);this.units=ue.units,this.dimensions=ue.dimensions}else if(Yi(K)&&K.value===null)this.fixPrefix=K.fixPrefix,this.skipAutomaticSimplification=K.skipAutomaticSimplification,this.dimensions=K.dimensions.slice(0),this.units=K.units.map(ce=>zn({},ce));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize($)}Object.defineProperty(g,"name",{value:"Unit"}),g.prototype.constructor=g,g.prototype.type="Unit",g.prototype.isUnit=!0;var b,w,_;function E(){for(;_===" "||_==="	";)D()}function C($){return $>="0"&&$<="9"||$==="."}function N($){return $>="0"&&$<="9"}function D(){w++,_=b.charAt(w)}function A($){w=$,_=b.charAt(w)}function T(){var $="",K=w;if(_==="+"?D():_==="-"&&($+=_,D()),!C(_))return A(K),null;if(_==="."){if($+=_,D(),!N(_))return A(K),null}else{for(;N(_);)$+=_,D();_==="."&&($+=_,D())}for(;N(_);)$+=_,D();if(_==="E"||_==="e"){var ue="",ce=w;if(ue+=_,D(),(_==="+"||_==="-")&&(ue+=_,D()),!N(_))return A(ce),$;for($=$+ue;N(_);)$+=_,D()}return $}function R(){for(var $="";N(_)||g.isValidAlpha(_);)$+=_,D();var K=$.charAt(0);return g.isValidAlpha(K)?$:null}function F($){return _===$?(D(),$):null}g.parse=function($,K){if(K=K||{},b=$,w=-1,_="",typeof b!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var ue=new g;ue.units=[];var ce=1,ge=!1;D(),E();var Ce=T(),Ae=null;if(Ce){if(n.number==="BigNumber")Ae=new y(Ce);else if(n.number==="Fraction")try{Ae=new v(Ce)}catch{Ae=parseFloat(Ce)}else Ae=parseFloat(Ce);E(),F("*")?(ce=1,ge=!0):F("/")&&(ce=-1,ge=!0)}for(var Pe=[],H=1;;){for(E();_==="(";)Pe.push(ce),H*=ce,ce=1,D(),E();var ee=void 0;if(_){var le=_;if(ee=R(),ee===null)throw new SyntaxError('Unexpected "'+le+'" in "'+b+'" at index '+w.toString())}else break;var pe=O(ee);if(pe===null)throw new SyntaxError('Unit "'+ee+'" not found.');var be=ce*H;if(E(),F("^")){E();var xe=T();if(xe===null)throw new SyntaxError('In "'+$+'", "^" must be followed by a floating-point number');be*=xe}ue.units.push({unit:pe.unit,prefix:pe.prefix,power:be});for(var Fe=0;Fe<B.length;Fe++)ue.dimensions[Fe]+=(pe.unit.dimensions[Fe]||0)*be;for(E();_===")";){if(Pe.length===0)throw new SyntaxError('Unmatched ")" in "'+b+'" at index '+w.toString());H/=Pe.pop(),D(),E()}if(ge=!1,F("*")?(ce=1,ge=!0):F("/")?(ce=-1,ge=!0):ce=1,pe.unit.base){var Te=pe.unit.base.key;te.auto[Te]={unit:pe.unit,prefix:pe.prefix}}}if(E(),_)throw new SyntaxError('Could not parse: "'+$+'"');if(ge)throw new SyntaxError('Trailing characters: "'+$+'"');if(Pe.length!==0)throw new SyntaxError('Unmatched "(" in "'+b+'"');if(ue.units.length===0&&!K.allowNoUnits)throw new SyntaxError('"'+$+'" contains no units');return ue.value=Ae!==void 0?ue._normalize(Ae):null,ue},g.prototype.clone=function(){var $=new g;$.fixPrefix=this.fixPrefix,$.skipAutomaticSimplification=this.skipAutomaticSimplification,$.value=ut(this.value),$.dimensions=this.dimensions.slice(0),$.units=[];for(var K=0;K<this.units.length;K++){$.units[K]={};for(var ue in this.units[K])Ue(this.units[K],ue)&&($.units[K][ue]=this.units[K][ue])}return $},g.prototype.valueType=function(){return Zt(this.value)},g.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},g.prototype._normalize=function($){if($==null||this.units.length===0)return $;for(var K=$,ue=g._getNumberConverter(Zt($)),ce=0;ce<this.units.length;ce++){var ge=ue(this.units[ce].unit.value),Ce=ue(this.units[ce].prefix.value),Ae=ue(this.units[ce].power);K=a(K,s(a(ge,Ce),Ae))}return K},g.prototype._denormalize=function($,K){if($==null||this.units.length===0)return $;for(var ue=$,ce=g._getNumberConverter(Zt($)),ge=0;ge<this.units.length;ge++){var Ce=ce(this.units[ge].unit.value),Ae=ce(this.units[ge].prefix.value),Pe=ce(this.units[ge].power);ue=o(ue,s(a(Ce,Ae),Pe))}return ue};var O=lp($=>{if(Ue(L,$)){var K=L[$],ue=K.prefixes[""];return{unit:K,prefix:ue}}for(var ce in L)if(Ue(L,ce)&&TG($,ce)){var ge=L[ce],Ce=$.length-ce.length,Ae=$.substring(0,Ce),Pe=Ue(ge.prefixes,Ae)?ge.prefixes[Ae]:void 0;if(Pe!==void 0)return{unit:ge,prefix:Pe}}return null},{hasher:$=>$[0],limit:100});g.isValuelessUnit=function($){return O($)!==null},g.prototype.hasBase=function($){if(typeof $=="string"&&($=k[$]),!$)return!1;for(var K=0;K<B.length;K++)if(Math.abs((this.dimensions[K]||0)-($.dimensions[K]||0))>1e-12)return!1;return!0},g.prototype.equalBase=function($){for(var K=0;K<B.length;K++)if(Math.abs((this.dimensions[K]||0)-($.dimensions[K]||0))>1e-12)return!1;return!0},g.prototype.equals=function($){return this.equalBase($)&&f(this.value,$.value)},g.prototype.multiply=function($){for(var K=this.clone(),ue=Yi($)?$:new g($),ce=0;ce<B.length;ce++)K.dimensions[ce]=(this.dimensions[ce]||0)+(ue.dimensions[ce]||0);for(var ge=0;ge<ue.units.length;ge++){var Ce=b1({},ue.units[ge]);K.units.push(Ce)}if(this.value!==null||ue.value!==null){var Ae=this.value===null?this._normalize(1):this.value,Pe=ue.value===null?ue._normalize(1):ue.value;K.value=a(Ae,Pe)}else K.value=null;return Yi($)&&(K.skipAutomaticSimplification=!1),I(K)},g.prototype.divideInto=function($){return new g($).divide(this)},g.prototype.divide=function($){for(var K=this.clone(),ue=Yi($)?$:new g($),ce=0;ce<B.length;ce++)K.dimensions[ce]=(this.dimensions[ce]||0)-(ue.dimensions[ce]||0);for(var ge=0;ge<ue.units.length;ge++){var Ce=b1(b1({},ue.units[ge]),{},{power:-ue.units[ge].power});K.units.push(Ce)}if(this.value!==null||ue.value!==null){var Ae=this.value===null?this._normalize(1):this.value,Pe=ue.value===null?ue._normalize(1):ue.value;K.value=o(Ae,Pe)}else K.value=null;return Yi($)&&(K.skipAutomaticSimplification=!1),I(K)},g.prototype.pow=function($){for(var K=this.clone(),ue=0;ue<B.length;ue++)K.dimensions[ue]=(this.dimensions[ue]||0)*$;for(var ce=0;ce<K.units.length;ce++)K.units[ce].power*=$;return K.value!==null?K.value=s(K.value,$):K.value=null,K.skipAutomaticSimplification=!1,I(K)};function I($){return $.equalBase(k.NONE)&&$.value!==null&&!n.predictable?$.value:$}g.prototype.abs=function(){var $=this.clone();if($.value!==null)if($._isDerived()||$.units.length===0||$.units[0].unit.offset===0)$.value=u($.value);else{var K=$._numberConverter(),ue=K($.units[0].unit.value),ce=K($.units[0].unit.offset),ge=a(ue,ce);$.value=i(u(r($.value,ge)),ge)}for(var Ce in $.units)($.units[Ce].unit.name==="VA"||$.units[Ce].unit.name==="VAR")&&($.units[Ce].unit=L.W);return $},g.prototype.to=function($){var K=this.value===null?this._normalize(1):this.value,ue;if(typeof $=="string")ue=g.parse($);else if(Yi($))ue=$.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(ue))throw new Error("Units do not match ('".concat(ue.toString(),"' != '").concat(this.toString(),"')"));if(ue.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||ue.units.length===0||this.units[0].unit.offset===ue.units[0].unit.offset)ue.value=ut(K);else{var ce=g._getNumberConverter(Zt(K)),ge=this.units[0].unit.value,Ce=this.units[0].unit.offset,Ae=a(ge,Ce),Pe=ue.units[0].unit.value,H=ue.units[0].unit.offset,ee=a(Pe,H);ue.value=r(K,ce(i(Ae,ee)))}return ue.fixPrefix=!0,ue.skipAutomaticSimplification=!0,ue},g.prototype.toNumber=function($){return x(this.toNumeric($))},g.prototype.toNumeric=function($){var K;return $?K=this.to($):K=this.clone(),K._isDerived()||K.units.length===0?K._denormalize(K.value):K._denormalize(K.value,K.units[0].prefix.value)},g.prototype.toString=function(){return this.format()},g.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},g.fromJSON=function($){var K,ue=new g($.value,(K=$.unit)!==null&&K!==void 0?K:void 0);return ue.fixPrefix=$.fixPrefix||!1,ue},g.prototype.valueOf=g.prototype.toString,g.prototype.simplify=function(){var $=this.clone(),K=[],ue;for(var ce in oe)if(Ue(oe,ce)&&$.hasBase(k[ce])){ue=ce;break}if(ue==="NONE")$.units=[];else{var ge;if(ue&&Ue(oe,ue)&&(ge=oe[ue]),ge)$.units=[{unit:ge.unit,prefix:ge.prefix,power:1}];else{for(var Ce=!1,Ae=0;Ae<B.length;Ae++){var Pe=B[Ae];Math.abs($.dimensions[Ae]||0)>1e-12&&(Ue(oe,Pe)?K.push({unit:oe[Pe].unit,prefix:oe[Pe].prefix,power:$.dimensions[Ae]||0}):Ce=!0)}K.length<$.units.length&&!Ce&&($.units=K)}}return $},g.prototype.toSI=function(){for(var $=this.clone(),K=[],ue=0;ue<B.length;ue++){var ce=B[ue];if(Math.abs($.dimensions[ue]||0)>1e-12)if(Ue(te.si,ce))K.push({unit:te.si[ce].unit,prefix:te.si[ce].prefix,power:$.dimensions[ue]||0});else throw new Error("Cannot express custom unit "+ce+" in SI units")}return $.units=K,$.fixPrefix=!0,$.skipAutomaticSimplification=!0,this.value!==null?($.value=null,this.to($)):$},g.prototype.formatUnits=function(){for(var $="",K="",ue=0,ce=0,ge=0;ge<this.units.length;ge++)this.units[ge].power>0?(ue++,$+=" "+this.units[ge].prefix.name+this.units[ge].unit.name,Math.abs(this.units[ge].power-1)>1e-15&&($+="^"+this.units[ge].power)):this.units[ge].power<0&&ce++;if(ce>0)for(var Ce=0;Ce<this.units.length;Ce++)this.units[Ce].power<0&&(ue>0?(K+=" "+this.units[Ce].prefix.name+this.units[Ce].unit.name,Math.abs(this.units[Ce].power+1)>1e-15&&(K+="^"+-this.units[Ce].power)):(K+=" "+this.units[Ce].prefix.name+this.units[Ce].unit.name,K+="^"+this.units[Ce].power));$=$.substr(1),K=K.substr(1),ue>1&&ce>0&&($="("+$+")"),ce>1&&ue>0&&(K="("+K+")");var Ae=$;return ue>0&&ce>0&&(Ae+=" / "),Ae+=K,Ae},g.prototype.format=function($){var K=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),ue=!1;typeof K.value<"u"&&K.value!==null&&Ro(K.value)&&(ue=Math.abs(K.value.re)<1e-14);for(var ce in K.units)Ue(K.units,ce)&&K.units[ce].unit&&(K.units[ce].unit.name==="VA"&&ue?K.units[ce].unit=L.VAR:K.units[ce].unit.name==="VAR"&&!ue&&(K.units[ce].unit=L.VA));K.units.length===1&&!K.fixPrefix&&Math.abs(K.units[0].power-Math.round(K.units[0].power))<1e-14&&(K.units[0].prefix=K._bestPrefix());var ge=K._denormalize(K.value),Ce=K.value!==null?h(ge,$||{}):"",Ae=K.formatUnits();return K.value&&Ro(K.value)&&(Ce="("+Ce+")"),Ae.length>0&&Ce.length>0&&(Ce+=" "),Ce+=Ae,Ce},g.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var $=this.value!==null?u(this.value):0,K=u(this.units[0].unit.value),ue=this.units[0].prefix;if($===0)return ue;var ce=this.units[0].power,ge=Math.log($/Math.pow(ue.value*K,ce))/Math.LN10-1.2;if(ge>-2.200001&&ge<1.800001)return ue;ge=Math.abs(ge);var Ce=this.units[0].unit.prefixes;for(var Ae in Ce)if(Ue(Ce,Ae)){var Pe=Ce[Ae];if(Pe.scientific){var H=Math.abs(Math.log($/Math.pow(Pe.value*K,ce))/Math.LN10-1.2);(H<ge||H===ge&&Pe.name.length<ue.name.length)&&(ue=Pe,ge=H)}}return ue},g.prototype.splitUnit=function($){for(var K=this.clone(),ue=[],ce=0;ce<$.length&&(K=K.to($[ce]),ce!==$.length-1);ce++){var ge=K.toNumeric(),Ce=c(ge),Ae=void 0,Pe=f(Ce,ge);Pe?Ae=Ce:Ae=l(K.toNumeric());var H=new g(Ae,$[ce].toString());ue.push(H),K=i(K,H)}for(var ee=0,le=0;le<ue.length;le++)ee=r(ee,ue[le].value);return f(ee,this.value)&&(K.value=0),ue.push(K),ue};var M={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};M.SHORTLONG=zn({},M.SHORT,M.LONG),M.BINARY_SHORT=zn({},M.BINARY_SHORT_SI,M.BINARY_SHORT_IEC),M.BINARY_LONG=zn({},M.BINARY_LONG_SI,M.BINARY_LONG_IEC);var B=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],k={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var j in k)Ue(k,j)&&(k[j].key=j);var Y={},q={name:"",base:Y,value:1,offset:0,dimensions:B.map($=>0)},L={meter:{name:"meter",base:k.LENGTH,prefixes:M.LONG,value:1,offset:0},inch:{name:"inch",base:k.LENGTH,prefixes:M.NONE,value:.0254,offset:0},foot:{name:"foot",base:k.LENGTH,prefixes:M.NONE,value:.3048,offset:0},yard:{name:"yard",base:k.LENGTH,prefixes:M.NONE,value:.9144,offset:0},mile:{name:"mile",base:k.LENGTH,prefixes:M.NONE,value:1609.344,offset:0},link:{name:"link",base:k.LENGTH,prefixes:M.NONE,value:.201168,offset:0},rod:{name:"rod",base:k.LENGTH,prefixes:M.NONE,value:5.0292,offset:0},chain:{name:"chain",base:k.LENGTH,prefixes:M.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:k.LENGTH,prefixes:M.NONE,value:1e-10,offset:0},m:{name:"m",base:k.LENGTH,prefixes:M.SHORT,value:1,offset:0},in:{name:"in",base:k.LENGTH,prefixes:M.NONE,value:.0254,offset:0},ft:{name:"ft",base:k.LENGTH,prefixes:M.NONE,value:.3048,offset:0},yd:{name:"yd",base:k.LENGTH,prefixes:M.NONE,value:.9144,offset:0},mi:{name:"mi",base:k.LENGTH,prefixes:M.NONE,value:1609.344,offset:0},li:{name:"li",base:k.LENGTH,prefixes:M.NONE,value:.201168,offset:0},rd:{name:"rd",base:k.LENGTH,prefixes:M.NONE,value:5.02921,offset:0},ch:{name:"ch",base:k.LENGTH,prefixes:M.NONE,value:20.1168,offset:0},mil:{name:"mil",base:k.LENGTH,prefixes:M.NONE,value:254e-7,offset:0},m2:{name:"m2",base:k.SURFACE,prefixes:M.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:k.SURFACE,prefixes:M.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:k.SURFACE,prefixes:M.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:k.SURFACE,prefixes:M.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:k.SURFACE,prefixes:M.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:k.SURFACE,prefixes:M.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:k.SURFACE,prefixes:M.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:k.SURFACE,prefixes:M.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:k.SURFACE,prefixes:M.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:k.SURFACE,prefixes:M.NONE,value:1e4,offset:0},m3:{name:"m3",base:k.VOLUME,prefixes:M.CUBIC,value:1,offset:0},L:{name:"L",base:k.VOLUME,prefixes:M.SHORT,value:.001,offset:0},l:{name:"l",base:k.VOLUME,prefixes:M.SHORT,value:.001,offset:0},litre:{name:"litre",base:k.VOLUME,prefixes:M.LONG,value:.001,offset:0},cuin:{name:"cuin",base:k.VOLUME,prefixes:M.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:k.VOLUME,prefixes:M.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:k.VOLUME,prefixes:M.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:k.VOLUME,prefixes:M.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:k.VOLUME,prefixes:M.NONE,value:15e-6,offset:0},drop:{name:"drop",base:k.VOLUME,prefixes:M.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:k.VOLUME,prefixes:M.NONE,value:5e-8,offset:0},minim:{name:"minim",base:k.VOLUME,prefixes:M.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:k.VOLUME,prefixes:M.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:k.VOLUME,prefixes:M.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:k.VOLUME,prefixes:M.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:k.VOLUME,prefixes:M.NONE,value:1e-6,offset:0},cup:{name:"cup",base:k.VOLUME,prefixes:M.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:k.VOLUME,prefixes:M.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:k.VOLUME,prefixes:M.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:k.VOLUME,prefixes:M.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:k.VOLUME,prefixes:M.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:k.VOLUME,prefixes:M.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:k.VOLUME,prefixes:M.NONE,value:.238480942392,offset:0},g:{name:"g",base:k.MASS,prefixes:M.SHORT,value:.001,offset:0},gram:{name:"gram",base:k.MASS,prefixes:M.LONG,value:.001,offset:0},ton:{name:"ton",base:k.MASS,prefixes:M.SHORT,value:907.18474,offset:0},t:{name:"t",base:k.MASS,prefixes:M.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:k.MASS,prefixes:M.LONG,value:1e3,offset:0},grain:{name:"grain",base:k.MASS,prefixes:M.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:k.MASS,prefixes:M.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:k.MASS,prefixes:M.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:k.MASS,prefixes:M.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:k.MASS,prefixes:M.NONE,value:45.359237,offset:0},stick:{name:"stick",base:k.MASS,prefixes:M.NONE,value:.115,offset:0},stone:{name:"stone",base:k.MASS,prefixes:M.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:k.MASS,prefixes:M.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:k.MASS,prefixes:M.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:k.MASS,prefixes:M.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:k.MASS,prefixes:M.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:k.MASS,prefixes:M.NONE,value:45.359237,offset:0},s:{name:"s",base:k.TIME,prefixes:M.SHORT,value:1,offset:0},min:{name:"min",base:k.TIME,prefixes:M.NONE,value:60,offset:0},h:{name:"h",base:k.TIME,prefixes:M.NONE,value:3600,offset:0},second:{name:"second",base:k.TIME,prefixes:M.LONG,value:1,offset:0},sec:{name:"sec",base:k.TIME,prefixes:M.LONG,value:1,offset:0},minute:{name:"minute",base:k.TIME,prefixes:M.NONE,value:60,offset:0},hour:{name:"hour",base:k.TIME,prefixes:M.NONE,value:3600,offset:0},day:{name:"day",base:k.TIME,prefixes:M.NONE,value:86400,offset:0},week:{name:"week",base:k.TIME,prefixes:M.NONE,value:7*86400,offset:0},month:{name:"month",base:k.TIME,prefixes:M.NONE,value:2629800,offset:0},year:{name:"year",base:k.TIME,prefixes:M.NONE,value:31557600,offset:0},decade:{name:"decade",base:k.TIME,prefixes:M.NONE,value:315576e3,offset:0},century:{name:"century",base:k.TIME,prefixes:M.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:k.TIME,prefixes:M.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:k.FREQUENCY,prefixes:M.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:k.FREQUENCY,prefixes:M.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:k.ANGLE,prefixes:M.SHORT,value:1,offset:0},radian:{name:"radian",base:k.ANGLE,prefixes:M.LONG,value:1,offset:0},deg:{name:"deg",base:k.ANGLE,prefixes:M.SHORT,value:null,offset:0},degree:{name:"degree",base:k.ANGLE,prefixes:M.LONG,value:null,offset:0},grad:{name:"grad",base:k.ANGLE,prefixes:M.SHORT,value:null,offset:0},gradian:{name:"gradian",base:k.ANGLE,prefixes:M.LONG,value:null,offset:0},cycle:{name:"cycle",base:k.ANGLE,prefixes:M.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:k.ANGLE,prefixes:M.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:k.ANGLE,prefixes:M.NONE,value:null,offset:0},A:{name:"A",base:k.CURRENT,prefixes:M.SHORT,value:1,offset:0},ampere:{name:"ampere",base:k.CURRENT,prefixes:M.LONG,value:1,offset:0},K:{name:"K",base:k.TEMPERATURE,prefixes:M.SHORT,value:1,offset:0},degC:{name:"degC",base:k.TEMPERATURE,prefixes:M.SHORT,value:1,offset:273.15},degF:{name:"degF",base:k.TEMPERATURE,prefixes:M.SHORT,value:new v(5,9),offset:459.67},degR:{name:"degR",base:k.TEMPERATURE,prefixes:M.SHORT,value:new v(5,9),offset:0},kelvin:{name:"kelvin",base:k.TEMPERATURE,prefixes:M.LONG,value:1,offset:0},celsius:{name:"celsius",base:k.TEMPERATURE,prefixes:M.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:k.TEMPERATURE,prefixes:M.LONG,value:new v(5,9),offset:459.67},rankine:{name:"rankine",base:k.TEMPERATURE,prefixes:M.LONG,value:new v(5,9),offset:0},mol:{name:"mol",base:k.AMOUNT_OF_SUBSTANCE,prefixes:M.SHORT,value:1,offset:0},mole:{name:"mole",base:k.AMOUNT_OF_SUBSTANCE,prefixes:M.LONG,value:1,offset:0},cd:{name:"cd",base:k.LUMINOUS_INTENSITY,prefixes:M.SHORT,value:1,offset:0},candela:{name:"candela",base:k.LUMINOUS_INTENSITY,prefixes:M.LONG,value:1,offset:0},N:{name:"N",base:k.FORCE,prefixes:M.SHORT,value:1,offset:0},newton:{name:"newton",base:k.FORCE,prefixes:M.LONG,value:1,offset:0},dyn:{name:"dyn",base:k.FORCE,prefixes:M.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:k.FORCE,prefixes:M.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:k.FORCE,prefixes:M.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:k.FORCE,prefixes:M.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:k.FORCE,prefixes:M.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:k.FORCE,prefixes:M.NONE,value:9.80665,offset:0},J:{name:"J",base:k.ENERGY,prefixes:M.SHORT,value:1,offset:0},joule:{name:"joule",base:k.ENERGY,prefixes:M.LONG,value:1,offset:0},erg:{name:"erg",base:k.ENERGY,prefixes:M.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:k.ENERGY,prefixes:M.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:k.ENERGY,prefixes:M.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:k.ENERGY,prefixes:M.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:k.ENERGY,prefixes:M.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:k.POWER,prefixes:M.SHORT,value:1,offset:0},watt:{name:"watt",base:k.POWER,prefixes:M.LONG,value:1,offset:0},hp:{name:"hp",base:k.POWER,prefixes:M.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:k.POWER,prefixes:M.SHORT,value:m.I,offset:0},VA:{name:"VA",base:k.POWER,prefixes:M.SHORT,value:1,offset:0},Pa:{name:"Pa",base:k.PRESSURE,prefixes:M.SHORT,value:1,offset:0},psi:{name:"psi",base:k.PRESSURE,prefixes:M.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:k.PRESSURE,prefixes:M.NONE,value:101325,offset:0},bar:{name:"bar",base:k.PRESSURE,prefixes:M.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:k.PRESSURE,prefixes:M.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:k.PRESSURE,prefixes:M.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:k.PRESSURE,prefixes:M.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:k.PRESSURE,prefixes:M.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:k.ELECTRIC_CHARGE,prefixes:M.LONG,value:1,offset:0},C:{name:"C",base:k.ELECTRIC_CHARGE,prefixes:M.SHORT,value:1,offset:0},farad:{name:"farad",base:k.ELECTRIC_CAPACITANCE,prefixes:M.LONG,value:1,offset:0},F:{name:"F",base:k.ELECTRIC_CAPACITANCE,prefixes:M.SHORT,value:1,offset:0},volt:{name:"volt",base:k.ELECTRIC_POTENTIAL,prefixes:M.LONG,value:1,offset:0},V:{name:"V",base:k.ELECTRIC_POTENTIAL,prefixes:M.SHORT,value:1,offset:0},ohm:{name:"ohm",base:k.ELECTRIC_RESISTANCE,prefixes:M.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:k.ELECTRIC_INDUCTANCE,prefixes:M.LONG,value:1,offset:0},H:{name:"H",base:k.ELECTRIC_INDUCTANCE,prefixes:M.SHORT,value:1,offset:0},siemens:{name:"siemens",base:k.ELECTRIC_CONDUCTANCE,prefixes:M.LONG,value:1,offset:0},S:{name:"S",base:k.ELECTRIC_CONDUCTANCE,prefixes:M.SHORT,value:1,offset:0},weber:{name:"weber",base:k.MAGNETIC_FLUX,prefixes:M.LONG,value:1,offset:0},Wb:{name:"Wb",base:k.MAGNETIC_FLUX,prefixes:M.SHORT,value:1,offset:0},tesla:{name:"tesla",base:k.MAGNETIC_FLUX_DENSITY,prefixes:M.LONG,value:1,offset:0},T:{name:"T",base:k.MAGNETIC_FLUX_DENSITY,prefixes:M.SHORT,value:1,offset:0},b:{name:"b",base:k.BIT,prefixes:M.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:k.BIT,prefixes:M.BINARY_LONG,value:1,offset:0},B:{name:"B",base:k.BIT,prefixes:M.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:k.BIT,prefixes:M.BINARY_LONG,value:8,offset:0}},ne={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function fe($){if($.number==="BigNumber"){var K=x_(y);L.rad.value=new y(1),L.deg.value=K.div(180),L.grad.value=K.div(200),L.cycle.value=K.times(2),L.arcsec.value=K.div(648e3),L.arcmin.value=K.div(10800)}else L.rad.value=1,L.deg.value=Math.PI/180,L.grad.value=Math.PI/200,L.cycle.value=Math.PI*2,L.arcsec.value=Math.PI/648e3,L.arcmin.value=Math.PI/10800;L.radian.value=L.rad.value,L.degree.value=L.deg.value,L.gradian.value=L.grad.value}fe(n),e&&e("config",function($,K){$.number!==K.number&&fe($)});var te={si:{NONE:{unit:q,prefix:M.NONE[""]},LENGTH:{unit:L.m,prefix:M.SHORT[""]},MASS:{unit:L.g,prefix:M.SHORT.k},TIME:{unit:L.s,prefix:M.SHORT[""]},CURRENT:{unit:L.A,prefix:M.SHORT[""]},TEMPERATURE:{unit:L.K,prefix:M.SHORT[""]},LUMINOUS_INTENSITY:{unit:L.cd,prefix:M.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:L.mol,prefix:M.SHORT[""]},ANGLE:{unit:L.rad,prefix:M.SHORT[""]},BIT:{unit:L.bits,prefix:M.SHORT[""]},FORCE:{unit:L.N,prefix:M.SHORT[""]},ENERGY:{unit:L.J,prefix:M.SHORT[""]},POWER:{unit:L.W,prefix:M.SHORT[""]},PRESSURE:{unit:L.Pa,prefix:M.SHORT[""]},ELECTRIC_CHARGE:{unit:L.C,prefix:M.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:L.F,prefix:M.SHORT[""]},ELECTRIC_POTENTIAL:{unit:L.V,prefix:M.SHORT[""]},ELECTRIC_RESISTANCE:{unit:L.ohm,prefix:M.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:L.H,prefix:M.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:L.S,prefix:M.SHORT[""]},MAGNETIC_FLUX:{unit:L.Wb,prefix:M.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:L.T,prefix:M.SHORT[""]},FREQUENCY:{unit:L.Hz,prefix:M.SHORT[""]}}};te.cgs=JSON.parse(JSON.stringify(te.si)),te.cgs.LENGTH={unit:L.m,prefix:M.SHORT.c},te.cgs.MASS={unit:L.g,prefix:M.SHORT[""]},te.cgs.FORCE={unit:L.dyn,prefix:M.SHORT[""]},te.cgs.ENERGY={unit:L.erg,prefix:M.NONE[""]},te.us=JSON.parse(JSON.stringify(te.si)),te.us.LENGTH={unit:L.ft,prefix:M.NONE[""]},te.us.MASS={unit:L.lbm,prefix:M.NONE[""]},te.us.TEMPERATURE={unit:L.degF,prefix:M.NONE[""]},te.us.FORCE={unit:L.lbf,prefix:M.NONE[""]},te.us.ENERGY={unit:L.BTU,prefix:M.BTU[""]},te.us.POWER={unit:L.hp,prefix:M.NONE[""]},te.us.PRESSURE={unit:L.psi,prefix:M.NONE[""]},te.auto=JSON.parse(JSON.stringify(te.si));var oe=te.auto;g.setUnitSystem=function($){if(Ue(te,$))oe=te[$];else throw new Error("Unit system "+$+" does not exist. Choices are: "+Object.keys(te).join(", "))},g.getUnitSystem=function(){for(var $ in te)if(Ue(te,$)&&te[$]===oe)return $},g.typeConverters={BigNumber:function(K){return K!=null&&K.isFraction?new y(String(K.n)).div(String(K.d)).times(String(K.s)):new y(K+"")},Fraction:function(K){return new v(K)},Complex:function(K){return K},number:function(K){return K!=null&&K.isFraction?p(K):K}},g.prototype._numberConverter=function(){var $=g.typeConverters[this.valueType()];if($)return $;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},g._getNumberConverter=function($){if(!g.typeConverters[$])throw new TypeError('Unsupported type "'+$+'"');return g.typeConverters[$]};for(var G in L)if(Ue(L,G)){var U=L[G];U.dimensions=U.base.dimensions}for(var Q in ne)if(Ue(ne,Q)){var re=L[ne[Q]],ie={};for(var de in re)Ue(re,de)&&(ie[de]=re[de]);ie.name=Q,L[Q]=ie}g.isValidAlpha=function(K){return/^[a-zA-Z]$/.test(K)};function he($){for(var K=0;K<$.length;K++){if(_=$.charAt(K),K===0&&!g.isValidAlpha(_))throw new Error('Invalid unit name (must begin with alpha character): "'+$+'"');if(K>0&&!(g.isValidAlpha(_)||N(_)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+$+'"')}}return g.createUnit=function($,K){if(typeof $!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(K&&K.override){for(var ue in $)if(Ue($,ue)&&g.deleteUnit(ue),$[ue].aliases)for(var ce=0;ce<$[ue].aliases.length;ce++)g.deleteUnit($[ue].aliases[ce])}var ge;for(var Ce in $)Ue($,Ce)&&(ge=g.createUnitSingle(Ce,$[Ce]));return ge},g.createUnitSingle=function($,K){if((typeof K>"u"||K===null)&&(K={}),typeof $!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Ue(L,$))throw new Error('Cannot create unit "'+$+'": a unit with that name already exists');he($);var ue=null,ce=[],ge=0,Ce,Ae,Pe;if(K&&K.type==="Unit")ue=K.clone();else if(typeof K=="string")K!==""&&(Ce=K);else if(typeof K=="object")Ce=K.definition,Ae=K.prefixes,ge=K.offset,Pe=K.baseName,K.aliases&&(ce=K.aliases.valueOf());else throw new TypeError('Cannot create unit "'+$+'" from "'+K.toString()+'": expecting "string" or "Unit" or "Object"');if(ce){for(var H=0;H<ce.length;H++)if(Ue(L,ce[H]))throw new Error('Cannot create alias "'+ce[H]+'": a unit with that name already exists')}if(Ce&&typeof Ce=="string"&&!ue)try{ue=g.parse(Ce,{allowNoUnits:!0})}catch(J){throw J.message='Could not create unit "'+$+'" from "'+Ce+'": '+J.message,J}else Ce&&Ce.type==="Unit"&&(ue=Ce.clone());ce=ce||[],ge=ge||0,Ae&&Ae.toUpperCase?Ae=M[Ae.toUpperCase()]||M.NONE:Ae=M.NONE;var ee={};if(ue){ee={name:$,value:ue.value,dimensions:ue.dimensions.slice(0),prefixes:Ae,offset:ge};var xe=!1;for(var Fe in k)if(Ue(k,Fe)){for(var Te=!0,Oe=0;Oe<B.length;Oe++)if(Math.abs((ee.dimensions[Oe]||0)-(k[Fe].dimensions[Oe]||0))>1e-12){Te=!1;break}if(Te){xe=!0,ee.base=k[Fe];break}}if(!xe){Pe=Pe||$+"_STUFF";var Me={dimensions:ue.dimensions.slice(0)};Me.key=Pe,k[Pe]=Me,oe[Pe]={unit:ee,prefix:M.NONE[""]},ee.base=k[Pe]}}else{if(Pe=Pe||$+"_STUFF",B.indexOf(Pe)>=0)throw new Error('Cannot create new base unit "'+$+'": a base unit with that name already exists (and cannot be overridden)');B.push(Pe);for(var le in k)Ue(k,le)&&(k[le].dimensions[B.length-1]=0);for(var pe={dimensions:[]},be=0;be<B.length;be++)pe.dimensions[be]=0;pe.dimensions[B.length-1]=1,pe.key=Pe,k[Pe]=pe,ee={name:$,value:1,dimensions:k[Pe].dimensions.slice(0),prefixes:Ae,offset:ge,base:k[Pe]},oe[Pe]={unit:ee,prefix:M.NONE[""]}}g.UNITS[$]=ee;for(var Et=0;Et<ce.length;Et++){var Xe=ce[Et],jt={};for(var P in ee)Ue(ee,P)&&(jt[P]=ee[P]);jt.name=Xe,g.UNITS[Xe]=jt}return delete O.cache,new g(null,$)},g.deleteUnit=function($){delete g.UNITS[$],delete O.cache},g.PREFIXES=M,g.BASE_DIMENSIONS=B,g.BASE_UNITS=k,g.UNIT_SYSTEMS=te,g.UNITS=L,g},{isClass:!0}),wT="unit",_ee=["typed","Unit"],Eee=z(wT,_ee,t=>{var{typed:e,Unit:n}=t;return e(wT,{Unit:function(i){return i.clone()},string:function(i){return n.isValuelessUnit(i)?new n(null,i):n.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,a){return new n(i,a)},"number | BigNumber | Fraction":function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),_T="sparse",Cee=["typed","SparseMatrix"],Nee=z(_T,Cee,t=>{var{typed:e,SparseMatrix:n}=t;return e(_T,{"":function(){return new n([])},string:function(i){return new n([],i)},"Array | Matrix":function(i){return new n(i)},"Array | Matrix, string":function(i,a){return new n(i,a)}})}),ET="createUnit",See=["typed","Unit"],Dee=z(ET,See,t=>{var{typed:e,Unit:n}=t;return e(ET,{"Object, Object":function(i,a){return n.createUnit(i,a)},Object:function(i){return n.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,a,o){var s={};return s[i]=a,n.createUnit(s,o)},"string, Unit | string | Object":function(i,a){var o={};return o[i]=a,n.createUnit(o,{})},string:function(i){var a={};return a[i]={},n.createUnit(a,{})}})}),CT="acos",Aee=["typed","config","Complex"],Tee=z(CT,Aee,t=>{var{typed:e,config:n,Complex:r}=t;return e(CT,{number:function(a){return a>=-1&&a<=1||n.predictable?Math.acos(a):new r(a,0).acos()},Complex:function(a){return a.acos()},BigNumber:function(a){return a.acos()}})}),NT="acosh",Mee=["typed","config","Complex"],Iee=z(NT,Mee,t=>{var{typed:e,config:n,Complex:r}=t;return e(NT,{number:function(a){return a>=1||n.predictable?WO(a):a<=-1?new r(Math.log(Math.sqrt(a*a-1)-a),Math.PI):new r(a,0).acosh()},Complex:function(a){return a.acosh()},BigNumber:function(a){return a.acosh()}})}),ST="acot",kee=["typed","BigNumber"],Ree=z(ST,kee,t=>{var{typed:e,BigNumber:n}=t;return e(ST,{number:qO,Complex:function(i){return i.acot()},BigNumber:function(i){return new n(1).div(i).atan()}})}),DT="acoth",Fee=["typed","config","Complex","BigNumber"],Pee=z(DT,Fee,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(DT,{number:function(o){return o>=1||o<=-1||n.predictable?HO(o):new r(o,0).acoth()},Complex:function(o){return o.acoth()},BigNumber:function(o){return new i(1).div(o).atanh()}})}),AT="acsc",Oee=["typed","config","Complex","BigNumber"],Bee=z(AT,Oee,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(AT,{number:function(o){return o<=-1||o>=1||n.predictable?GO(o):new r(o,0).acsc()},Complex:function(o){return o.acsc()},BigNumber:function(o){return new i(1).div(o).asin()}})}),TT="acsch",Lee=["typed","BigNumber"],jee=z(TT,Lee,t=>{var{typed:e,BigNumber:n}=t;return e(TT,{number:KO,Complex:function(i){return i.acsch()},BigNumber:function(i){return new n(1).div(i).asinh()}})}),MT="asec",$ee=["typed","config","Complex","BigNumber"],zee=z(MT,$ee,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(MT,{number:function(o){return o<=-1||o>=1||n.predictable?YO(o):new r(o,0).asec()},Complex:function(o){return o.asec()},BigNumber:function(o){return new i(1).div(o).acos()}})}),IT="asech",Uee=["typed","config","Complex","BigNumber"],Vee=z(IT,Uee,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(IT,{number:function(o){if(o<=1&&o>=-1||n.predictable){var s=1/o;if(s>0||n.predictable)return XO(o);var u=Math.sqrt(s*s-1);return new r(Math.log(u-s),Math.PI)}return new r(o,0).asech()},Complex:function(o){return o.asech()},BigNumber:function(o){return new i(1).div(o).acosh()}})}),kT="asin",Wee=["typed","config","Complex"],qee=z(kT,Wee,t=>{var{typed:e,config:n,Complex:r}=t;return e(kT,{number:function(a){return a>=-1&&a<=1||n.predictable?Math.asin(a):new r(a,0).asin()},Complex:function(a){return a.asin()},BigNumber:function(a){return a.asin()}})}),Hee="asinh",Gee=["typed"],Kee=z(Hee,Gee,t=>{var{typed:e}=t;return e("asinh",{number:QO,Complex:function(r){return r.asinh()},BigNumber:function(r){return r.asinh()}})}),Yee="atan",Xee=["typed"],Qee=z(Yee,Xee,t=>{var{typed:e}=t;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),RT="atan2",Zee=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],Jee=z(RT,Zee,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,DenseMatrix:a,concat:o}=t,s=Pa({typed:e,equalScalar:r}),u=Jr({typed:e}),l=fB({typed:e,equalScalar:r}),c=wr({typed:e,equalScalar:r}),f=Kn({typed:e,DenseMatrix:a}),d=Jt({typed:e,matrix:n,concat:o});return e(RT,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,p)=>i.atan2(h,p)},d({scalar:"number | BigNumber",SS:l,DS:u,SD:s,Ss:c,sS:f}))}),FT="atanh",ete=["typed","config","Complex"],tte=z(FT,ete,t=>{var{typed:e,config:n,Complex:r}=t;return e(FT,{number:function(a){return a<=1&&a>=-1||n.predictable?ZO(a):new r(a,0).atanh()},Complex:function(a){return a.atanh()},BigNumber:function(a){return a.atanh()}})}),Ff=z("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(n=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(n,r.valueType())(r.value)})}}),PT="cos",nte=["typed"],rte=z(PT,nte,t=>{var{typed:e}=t,n=Ff({typed:e});return e(PT,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},n)}),OT="cosh",ite=["typed"],ate=z(OT,ite,t=>{var{typed:e}=t;return e(OT,{number:nH,"Complex | BigNumber":n=>n.cosh()})}),BT="cot",ote=["typed","BigNumber"],ste=z(BT,ote,t=>{var{typed:e,BigNumber:n}=t,r=Ff({typed:e});return e(BT,{number:JO,Complex:i=>i.cot(),BigNumber:i=>new n(1).div(i.tan())},r)}),LT="coth",ute=["typed","BigNumber"],lte=z(LT,ute,t=>{var{typed:e,BigNumber:n}=t;return e(LT,{number:eB,Complex:r=>r.coth(),BigNumber:r=>new n(1).div(r.tanh())})}),jT="csc",cte=["typed","BigNumber"],fte=z(jT,cte,t=>{var{typed:e,BigNumber:n}=t,r=Ff({typed:e});return e(jT,{number:tB,Complex:i=>i.csc(),BigNumber:i=>new n(1).div(i.sin())},r)}),$T="csch",dte=["typed","BigNumber"],hte=z($T,dte,t=>{var{typed:e,BigNumber:n}=t;return e($T,{number:nB,Complex:r=>r.csch(),BigNumber:r=>new n(1).div(r.sinh())})}),zT="sec",pte=["typed","BigNumber"],mte=z(zT,pte,t=>{var{typed:e,BigNumber:n}=t,r=Ff({typed:e});return e(zT,{number:rB,Complex:i=>i.sec(),BigNumber:i=>new n(1).div(i.cos())},r)}),UT="sech",vte=["typed","BigNumber"],gte=z(UT,vte,t=>{var{typed:e,BigNumber:n}=t;return e(UT,{number:iB,Complex:r=>r.sech(),BigNumber:r=>new n(1).div(r.cosh())})}),VT="sin",yte=["typed"],xte=z(VT,yte,t=>{var{typed:e}=t,n=Ff({typed:e});return e(VT,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},n)}),WT="sinh",bte=["typed"],wte=z(WT,bte,t=>{var{typed:e}=t;return e(WT,{number:aB,"Complex | BigNumber":n=>n.sinh()})}),qT="tan",_te=["typed"],Ete=z(qT,_te,t=>{var{typed:e}=t,n=Ff({typed:e});return e(qT,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},n)}),Cte="tanh",Nte=["typed"],Ste=z(Cte,Nte,t=>{var{typed:e}=t;return e("tanh",{number:iH,"Complex | BigNumber":n=>n.tanh()})}),HT="setCartesian",Dte=["typed","size","subset","compareNatural","Index","DenseMatrix"],Ate=z(HT,Dte,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(HT,{"Array | Matrix, Array | Matrix":function(u,l){var c=[];if(r(n(u),new a(0))!==0&&r(n(l),new a(0))!==0){var f=Ot(Array.isArray(u)?u:u.toArray()).sort(i),d=Ot(Array.isArray(l)?l:l.toArray()).sort(i);c=[];for(var h=0;h<f.length;h++)for(var p=0;p<d.length;p++)c.push([f[h],d[p]])}return Array.isArray(u)&&Array.isArray(l)?c:new o(c)}})}),GT="setDifference",Tte=["typed","size","subset","compareNatural","Index","DenseMatrix"],Mte=z(GT,Tte,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(GT,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new a(0))===0)c=[];else{if(r(n(l),new a(0))===0)return Ot(u.toArray());var f=uf(Ot(Array.isArray(u)?u:u.toArray()).sort(i)),d=uf(Ot(Array.isArray(l)?l:l.toArray()).sort(i));c=[];for(var h,p=0;p<f.length;p++){h=!1;for(var m=0;m<d.length;m++)if(i(f[p].value,d[m].value)===0&&f[p].identifier===d[m].identifier){h=!0;break}h||c.push(f[p])}}return Array.isArray(u)&&Array.isArray(l)?Zv(c):new o(Zv(c))}})}),KT="setDistinct",Ite=["typed","size","subset","compareNatural","Index","DenseMatrix"],kte=z(KT,Ite,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(KT,{"Array | Matrix":function(u){var l;if(r(n(u),new a(0))===0)l=[];else{var c=Ot(Array.isArray(u)?u:u.toArray()).sort(i);l=[],l.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&l.push(c[f])}return Array.isArray(u)?l:new o(l)}})}),YT="setIntersect",Rte=["typed","size","subset","compareNatural","Index","DenseMatrix"],Fte=z(YT,Rte,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=t;return e(YT,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new a(0))===0||r(n(l),new a(0))===0)c=[];else{var f=uf(Ot(Array.isArray(u)?u:u.toArray()).sort(i)),d=uf(Ot(Array.isArray(l)?l:l.toArray()).sort(i));c=[];for(var h=0;h<f.length;h++)for(var p=0;p<d.length;p++)if(i(f[h].value,d[p].value)===0&&f[h].identifier===d[p].identifier){c.push(f[h]);break}}return Array.isArray(u)&&Array.isArray(l)?Zv(c):new o(Zv(c))}})}),XT="setIsSubset",Pte=["typed","size","subset","compareNatural","Index"],Ote=z(XT,Pte,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a}=t;return e(XT,{"Array | Matrix, Array | Matrix":function(s,u){if(r(n(s),new a(0))===0)return!0;if(r(n(u),new a(0))===0)return!1;for(var l=uf(Ot(Array.isArray(s)?s:s.toArray()).sort(i)),c=uf(Ot(Array.isArray(u)?u:u.toArray()).sort(i)),f,d=0;d<l.length;d++){f=!1;for(var h=0;h<c.length;h++)if(i(l[d].value,c[h].value)===0&&l[d].identifier===c[h].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),QT="setMultiplicity",Bte=["typed","size","subset","compareNatural","Index"],Lte=z(QT,Bte,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a}=t;return e(QT,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(s,u){if(r(n(u),new a(0))===0)return 0;for(var l=Ot(Array.isArray(u)?u:u.toArray()),c=0,f=0;f<l.length;f++)i(l[f],s)===0&&c++;return c}})}),ZT="setPowerset",jte=["typed","size","subset","compareNatural","Index"],$te=z(ZT,jte,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a}=t;return e(ZT,{"Array | Matrix":function(l){if(r(n(l),new a(0))===0)return[];for(var c=Ot(Array.isArray(l)?l:l.toArray()).sort(i),f=[],d=0;d.toString(2).length<=c.length;)f.push(o(c,d.toString(2).split("").reverse())),d++;return s(f)}});function o(u,l){for(var c=[],f=0;f<l.length;f++)l[f]==="1"&&c.push(u[f]);return c}function s(u){for(var l=[],c=u.length-1;c>0;c--)for(var f=0;f<c;f++)u[f].length>u[f+1].length&&(l=u[f],u[f]=u[f+1],u[f+1]=l);return u}}),JT="setSize",zte=["typed","compareNatural"],Ute=z(JT,zte,t=>{var{typed:e,compareNatural:n}=t;return e(JT,{"Array | Matrix":function(i){return Array.isArray(i)?Ot(i).length:Ot(i.toArray()).length},"Array | Matrix, boolean":function(i,a){if(a===!1||i.length===0)return Array.isArray(i)?Ot(i).length:Ot(i.toArray()).length;for(var o=Ot(Array.isArray(i)?i:i.toArray()).sort(n),s=1,u=1;u<o.length;u++)n(o[u],o[u-1])!==0&&s++;return s}})}),e3="setSymDifference",Vte=["typed","size","concat","subset","setDifference","Index"],Wte=z(e3,Vte,t=>{var{typed:e,size:n,concat:r,subset:i,setDifference:a,Index:o}=t;return e(e3,{"Array | Matrix, Array | Matrix":function(u,l){if(i(n(u),new o(0))===0)return Ot(l);if(i(n(l),new o(0))===0)return Ot(u);var c=Ot(u),f=Ot(l);return r(a(c,f),a(f,c))}})}),t3="setUnion",qte=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],Hte=z(t3,qte,t=>{var{typed:e,size:n,concat:r,subset:i,setIntersect:a,setSymDifference:o,Index:s}=t;return e(t3,{"Array | Matrix, Array | Matrix":function(l,c){if(i(n(l),new s(0))===0)return Ot(c);if(i(n(c),new s(0))===0)return Ot(l);var f=Ot(l),d=Ot(c);return r(o(f,d),a(f,d))}})}),n3="add",Gte=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],Kte=z(n3,Gte,t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,u=fu({typed:e}),l=h_({typed:e,equalScalar:i}),c=Sl({typed:e,DenseMatrix:a}),f=Jt({typed:e,matrix:n,concat:s});return e(n3,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(h,p,m)=>{for(var y=d(h,p),v=0;v<m.length;v++)y=d(y,m[v]);return y})},f({elop:r,DS:u,SS:l,Ss:c}))}),r3="hypot",Yte=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],Xte=z(r3,Yte,t=>{var{typed:e,abs:n,addScalar:r,divideScalar:i,multiplyScalar:a,sqrt:o,smaller:s,isPositive:u}=t;return e(r3,{"... number | BigNumber":l,Array:l,Matrix:c=>l(Ot(c.toArray(),!0))});function l(c){for(var f=0,d=0,h=0;h<c.length;h++){if(Ro(c[h]))throw new TypeError("Unexpected type of argument to hypot");var p=n(c[h]);s(d,p)?(f=a(f,a(i(d,p),i(d,p))),f=r(f,1),d=p):f=r(f,u(p)?a(i(p,d),i(p,d)):p)}return a(d,o(f))}}),i3="norm",Qte=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],Zte=z(i3,Qte,t=>{var{typed:e,abs:n,add:r,pow:i,conj:a,sqrt:o,multiply:s,equalScalar:u,larger:l,smaller:c,matrix:f,ctranspose:d,eigs:h}=t;return e(i3,{number:Math.abs,Complex:function(C){return C.abs()},BigNumber:function(C){return C.abs()},boolean:function(C){return Math.abs(C)},Array:function(C){return _(f(C),2)},Matrix:function(C){return _(C,2)},"Array, number | BigNumber | string":function(C,N){return _(f(C),N)},"Matrix, number | BigNumber | string":function(C,N){return _(C,N)}});function p(E){var C=0;return E.forEach(function(N){var D=n(N);l(D,C)&&(C=D)},!0),C}function m(E){var C;return E.forEach(function(N){var D=n(N);(!C||c(D,C))&&(C=D)},!0),C||0}function y(E,C){if(C===Number.POSITIVE_INFINITY||C==="inf")return p(E);if(C===Number.NEGATIVE_INFINITY||C==="-inf")return m(E);if(C==="fro")return _(E,2);if(typeof C=="number"&&!isNaN(C)){if(!u(C,0)){var N=0;return E.forEach(function(D){N=r(i(n(D),C),N)},!0),i(N,1/C)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function v(E){var C=0;return E.forEach(function(N,D){C=r(C,s(N,a(N)))}),n(o(C))}function x(E){var C=[],N=0;return E.forEach(function(D,A){var T=A[1],R=r(C[T]||0,n(D));l(R,N)&&(N=R),C[T]=R},!0),N}function g(E){var C=E.size();if(C[0]!==C[1])throw new RangeError("Invalid matrix dimensions");var N=d(E),D=s(N,E),A=h(D).values.toArray(),T=A[A.length-1];return n(o(T))}function b(E){var C=[],N=0;return E.forEach(function(D,A){var T=A[0],R=r(C[T]||0,n(D));l(R,N)&&(N=R),C[T]=R},!0),N}function w(E,C){if(C===1)return x(E);if(C===Number.POSITIVE_INFINITY||C==="inf")return b(E);if(C==="fro")return v(E);if(C===2)return g(E);throw new Error("Unsupported parameter value "+C)}function _(E,C){var N=E.size();if(N.length===1)return y(E,C);if(N.length===2){if(N[0]&&N[1])return w(E,C);throw new RangeError("Invalid matrix dimensions")}}}),a3="dot",Jte=["typed","addScalar","multiplyScalar","conj","size"],ene=z(a3,Jte,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:i,size:a}=t;return e(a3,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":u});function o(c,f){var d=l(c),h=l(f),p,m;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(p!==m)throw new RangeError("Vectors must have equal length ("+p+" != "+m+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function s(c,f){var d=o(c,f),h=Je(c)?c._data:c,p=Je(c)?c._datatype||c.getDataType():void 0,m=Je(f)?f._data:f,y=Je(f)?f._datatype||f.getDataType():void 0,v=l(c).length===2,x=l(f).length===2,g=n,b=r;if(p&&y&&p===y&&typeof p=="string"&&p!=="mixed"){var w=p;g=e.find(n,[w,w]),b=e.find(r,[w,w])}if(!v&&!x){for(var _=b(i(h[0]),m[0]),E=1;E<d;E++)_=g(_,b(i(h[E]),m[E]));return _}if(!v&&x){for(var C=b(i(h[0]),m[0][0]),N=1;N<d;N++)C=g(C,b(i(h[N]),m[N][0]));return C}if(v&&!x){for(var D=b(i(h[0][0]),m[0]),A=1;A<d;A++)D=g(D,b(i(h[A][0]),m[A]));return D}if(v&&x){for(var T=b(i(h[0][0]),m[0][0]),R=1;R<d;R++)T=g(T,b(i(h[R][0]),m[R][0]));return T}}function u(c,f){o(c,f);for(var d=c._index,h=c._values,p=f._index,m=f._values,y=0,v=n,x=r,g=0,b=0;g<d.length&&b<p.length;){var w=d[g],_=p[b];if(w<_){g++;continue}if(w>_){b++;continue}w===_&&(y=v(y,x(h[g],m[b])),g++,b++)}return y}function l(c){return Je(c)?c.size():a(c)}}),tne="trace",nne=["typed","matrix","add"],rne=z(tne,nne,t=>{var{typed:e,matrix:n,add:r}=t;return e("trace",{Array:function(s){return i(n(s))},SparseMatrix:a,DenseMatrix:i,any:ut});function i(o){var s=o._size,u=o._data;switch(s.length){case 1:if(s[0]===1)return ut(u[0]);throw new RangeError("Matrix must be square (size: "+xt(s)+")");case 2:{var l=s[0],c=s[1];if(l===c){for(var f=0,d=0;d<l;d++)f=r(f,u[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+xt(s)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+xt(s)+")")}}function a(o){var s=o._values,u=o._index,l=o._ptr,c=o._size,f=c[0],d=c[1];if(f===d){var h=0;if(s.length>0)for(var p=0;p<d;p++)for(var m=l[p],y=l[p+1],v=m;v<y;v++){var x=u[v];if(x===p){h=r(h,s[v]);break}if(x>p)break}return h}throw new RangeError("Matrix must be square (size: "+xt(c)+")")}}),o3="index",ine=["typed","Index"],ane=z(o3,ine,t=>{var{typed:e,Index:n}=t;return e(o3,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var a=i.map(function(s){return ht(s)?s.toNumber():Ht(s)||Je(s)?s.map(function(u){return ht(u)?u.toNumber():u}):s}),o=new n;return n.apply(o,a),o}})}),IB=new Set(["end"]),one="Node",sne=["mathWithTransform"],une=z(one,sne,t=>{var{mathWithTransform:e}=t;function n(i){for(var a of[...IB])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),o={},s=null;function u(l){var c=kc(l);return n(c),a(c,o,s)}return{evaluate:u}}_compile(a,o){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!Vt(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function o(s,u){s.forEach(function(l,c,f){u(l,c,f),o(l,u)})}o(this,a)}transform(a){function o(s,u,l){var c=a(s,u,l);return c!==s?c:s.map(o)}return o(this,null,null)}filter(a){var o=[];return this.traverse(function(s,u,l){a(s,u,l)&&o.push(s)}),o}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&qo(this,a):!1}toString(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toString(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toHTML(a)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(a){var o=this._getCustomString(a);return typeof o<"u"?o:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function ei(t){return t&&t.isIndexError?new ka(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function kB(t){var{subset:e}=t;return function(r,i){try{if(Array.isArray(r))return e(r,i);if(r&&typeof r.subset=="function")return r.subset(i);if(typeof r=="string")return e(r,i);if(typeof r=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Hr(r,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw ei(a)}}}var cm="AccessorNode",lne=["subset","Node"],cne=z(cm,lne,t=>{var{subset:e,Node:n}=t,r=kB({subset:e});function i(o){return!(ll(o)||Hi(o)||Tt(o)||Ys(o)||$0(o)||Wo(o)||ar(o))}class a extends n{constructor(s,u){if(super(),!Vt(s))throw new TypeError('Node expected for parameter "object"');if(!Tf(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=s,this.index=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return cm}get isAccessorNode(){return!0}_compile(s,u){var l=this.object._compile(s,u),c=this.index._compile(s,u);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(h,p,m){return Hr(l(h,p,m),f)}}else return function(h,p,m){var y=l(h,p,m),v=c(h,p,y);return r(y,v)}}forEach(s){s(this.object,"object",this),s(this.index,"index",this)}map(s){return new a(this._ifNode(s(this.object,"object",this)),this._ifNode(s(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(s){var u=this.object.toString(s);return i(this.object)&&(u="("+u+")"),u+this.index.toString(s)}_toHTML(s){var u=this.object.toHTML(s);return i(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(s)}_toTex(s){var u=this.object.toTex(s);return i(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(s)}toJSON(){return{mathjs:cm,object:this.object,index:this.index}}static fromJSON(s){return new a(s.object,s.index)}}return Bn(a,"name",cm),a},{isClass:!0,isNode:!0}),fm="ArrayNode",fne=["Node"],dne=z(fm,fne,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(Vt))throw new TypeError("Array containing Nodes expected")}get type(){return fm}get isArrayNode(){return!0}_compile(i,a){var o=js(this.items,function(l){return l._compile(i,a)}),s=i.config.matrix!=="Array";if(s){var u=i.matrix;return function(c,f,d){return u(js(o,function(h){return h(c,f,d)}))}}else return function(c,f,d){return js(o,function(h){return h(c,f,d)})}}forEach(i){for(var a=0;a<this.items.length;a++){var o=this.items[a];i(o,"items["+a+"]",this)}}map(i){for(var a=[],o=0;o<this.items.length;o++)a[o]=this._ifNode(i(this.items[o],"items["+o+"]",this));return new n(a)}clone(){return new n(this.items.slice(0))}_toString(i){var a=this.items.map(function(o){return o.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:fm,items:this.items}}static fromJSON(i){return new n(i.items)}_toHTML(i){var a=this.items.map(function(o){return o.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(o,s){var u=o.some(Hi)&&!o.every(Hi),l=s||u,c=l?"&":"\\\\",f=o.map(function(d){return d.items?a(d.items,!s):d.toTex(i)}).join(c);return u||!l||l&&!s?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return a(this.items,!1)}}return Bn(n,"name",fm),n},{isClass:!0,isNode:!0});function hne(t){var{subset:e,matrix:n}=t;return function(i,a,o){try{if(Array.isArray(i)){var s=n(i).subset(a,o).valueOf();return s.forEach((u,l)=>{i[l]=u}),i}else{if(i&&typeof i.subset=="function")return i.subset(a,o);if(typeof i=="string")return e(i,a,o);if(typeof i=="object"){if(!a.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return rf(i,a.getObjectProperty(),o),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(u){throw ei(u)}}}var ya=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function dm(t,e){if(!e||e!=="auto")return t;for(var n=t;Wo(n);)n=n.content;return n}function Gt(t,e,n,r){var i=t;e!=="keep"&&(i=t.getContent());for(var a=i.getIdentifier(),o=null,s=0;s<ya.length;s++)if(a in ya[s]){o=s;break}if(a==="OperatorNode:multiply"&&i.implicit&&n!=="show"){var u=dm(i.args[0],e);!(Tt(u)&&r&&r.getIdentifier()==="OperatorNode:divide"&&Ab(dm(r.args[0],e)))&&!(u.getIdentifier()==="OperatorNode:divide"&&Ab(dm(u.args[0],e))&&Tt(dm(u.args[1])))&&(o+=1)}return o}function cd(t,e){var n=t;e!=="keep"&&(n=t.getContent());var r=n.getIdentifier(),i=Gt(n,e);if(i===null)return null;var a=ya[i][r];if(Ue(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+a.associativity+"'.")}return null}function w1(t,e,n){var r=n!=="keep"?t.getContent():t,i=n!=="keep"?t.getContent():e,a=r.getIdentifier(),o=i.getIdentifier(),s=Gt(r,n);if(s===null)return null;var u=ya[s][a];if(Ue(u,"associativeWith")&&u.associativeWith instanceof Array){for(var l=0;l<u.associativeWith.length;l++)if(u.associativeWith[l]===o)return!0;return!1}return null}function pne(t){var e="OperatorNode:"+t;for(var n of ya)if(e in n)return n[e].op;return null}var hm="AssignmentNode",mne=["subset","?matrix","Node"],vne=z(hm,mne,t=>{var{subset:e,matrix:n,Node:r}=t,i=kB({subset:e}),a=hne({subset:e,matrix:n});function o(u,l,c){l||(l="keep");var f=Gt(u,l,c),d=Gt(u.value,l,c);return l==="all"||d!==null&&d<=f}class s extends r{constructor(l,c,f){if(super(),this.object=l,this.index=f?c:null,this.value=f||c,!ar(l)&&!ll(l))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(ar(l)&&l.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Tf(this.index))throw new TypeError('IndexNode expected as "index"');if(!Vt(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return hm}get isAssignmentNode(){return!0}_compile(l,c){var f=this.object._compile(l,c),d=this.index?this.index._compile(l,c):null,h=this.value._compile(l,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var m=this.index.getObjectProperty();return function(b,w,_){var E=f(b,w,_),C=h(b,w,_);return rf(E,m,C),C}}else{if(ar(this.object))return function(b,w,_){var E=f(b,w,_),C=h(b,w,_),N=d(b,w,E);return b.set(p,a(E,N,C)),C};var y=this.object.object._compile(l,c);if(this.object.index.isObjectProperty()){var v=this.object.index.getObjectProperty();return function(b,w,_){var E=y(b,w,_),C=Hr(E,v),N=d(b,w,C),D=h(b,w,_);return rf(E,v,a(C,N,D)),D}}else{var x=this.object.index._compile(l,c);return function(b,w,_){var E=y(b,w,_),C=x(b,w,E),N=i(E,C),D=d(b,w,N),A=h(b,w,_);return a(E,C,a(N,D,A)),A}}}else{if(!ar(this.object))throw new TypeError("SymbolNode expected as object");return function(b,w,_){var E=h(b,w,_);return b.set(p,E),E}}}forEach(l){l(this.object,"object",this),this.index&&l(this.index,"index",this),l(this.value,"value",this)}map(l){var c=this._ifNode(l(this.object,"object",this)),f=this.index?this._ifNode(l(this.index,"index",this)):null,d=this._ifNode(l(this.value,"value",this));return new s(c,f,d)}clone(){return new s(this.object,this.index,this.value)}_toString(l){var c=this.object.toString(l),f=this.index?this.index.toString(l):"",d=this.value.toString(l);return o(this,l&&l.parenthesis,l&&l.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:hm,object:this.object,index:this.index,value:this.value}}static fromJSON(l){return new s(l.object,l.index,l.value)}_toHTML(l){var c=this.object.toHTML(l),f=this.index?this.index.toHTML(l):"",d=this.value.toHTML(l);return o(this,l&&l.parenthesis,l&&l.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(l){var c=this.object.toTex(l),f=this.index?this.index.toTex(l):"",d=this.value.toTex(l);return o(this,l&&l.parenthesis,l&&l.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return Bn(s,"name",hm),s},{isClass:!0,isNode:!0}),pm="BlockNode",gne=["ResultSet","Node"],yne=z(pm,gne,t=>{var{ResultSet:e,Node:n}=t;class r extends n{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(o){var s=o&&o.node,u=o&&o.visible!==void 0?o.visible:!0;if(!Vt(s))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:s,visible:u}})}get type(){return pm}get isBlockNode(){return!0}_compile(a,o){var s=js(this.blocks,function(u){return{evaluate:u.node._compile(a,o),visible:u.visible}});return function(l,c,f){var d=[];return pO(s,function(p){var m=p.evaluate(l,c,f);p.visible&&d.push(m)}),new e(d)}}forEach(a){for(var o=0;o<this.blocks.length;o++)a(this.blocks[o].node,"blocks["+o+"].node",this)}map(a){for(var o=[],s=0;s<this.blocks.length;s++){var u=this.blocks[s],l=this._ifNode(a(u.node,"blocks["+s+"].node",this));o[s]={node:l,visible:u.visible}}return new r(o)}clone(){var a=this.blocks.map(function(o){return{node:o.node,visible:o.visible}});return new r(a)}_toString(a){return this.blocks.map(function(o){return o.node.toString(a)+(o.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:pm,blocks:this.blocks}}static fromJSON(a){return new r(a.blocks)}_toHTML(a){return this.blocks.map(function(o){return o.node.toHTML(a)+(o.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(o){return o.node.toTex(a)+(o.visible?"":";")}).join(`\\;\\;
`)}}return Bn(r,"name",pm),r},{isClass:!0,isNode:!0}),mm="ConditionalNode",xne=["Node"],bne=z(mm,xne,t=>{var{Node:e}=t;function n(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(ht(i))return!i.isZero();if(Ro(i))return!!(i.re||i.im);if(Yi(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Zt(i)+'"')}class r extends e{constructor(a,o,s){if(super(),!Vt(a))throw new TypeError("Parameter condition must be a Node");if(!Vt(o))throw new TypeError("Parameter trueExpr must be a Node");if(!Vt(s))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=o,this.falseExpr=s}get type(){return mm}get isConditionalNode(){return!0}_compile(a,o){var s=this.condition._compile(a,o),u=this.trueExpr._compile(a,o),l=this.falseExpr._compile(a,o);return function(f,d,h){return n(s(f,d,h))?u(f,d,h):l(f,d,h)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new r(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=Gt(this,o,a&&a.implicit),u=this.condition.toString(a),l=Gt(this.condition,o,a&&a.implicit);(o==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=s)&&(u="("+u+")");var c=this.trueExpr.toString(a),f=Gt(this.trueExpr,o,a&&a.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=s)&&(c="("+c+")");var d=this.falseExpr.toString(a),h=Gt(this.falseExpr,o,a&&a.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=s)&&(d="("+d+")"),u+" ? "+c+" : "+d}toJSON(){return{mathjs:mm,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new r(a.condition,a.trueExpr,a.falseExpr)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=Gt(this,o,a&&a.implicit),u=this.condition.toHTML(a),l=Gt(this.condition,o,a&&a.implicit);(o==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=s)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(a),f=Gt(this.trueExpr,o,a&&a.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=s)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(a),h=Gt(this.falseExpr,o,a&&a.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=s)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Bn(r,"name",mm),r},{isClass:!0,isNode:!0}),Gb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wne={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},_ne={"–":"\\--","—":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},Ene=function(e,n){return Gb({},e,n)},Cne=function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.preserveFormatting,r=n===void 0?!1:n,i=e.escapeMapFn,a=i===void 0?Ene:i,o=String(t),s="",u=a(Gb({},wne),r?Gb({},_ne):{}),l=Object.keys(u),c=function(){var d=!1;l.forEach(function(h,p){d||o.length>=h.length&&o.slice(0,h.length)===h&&(s+=u[l[p]],o=o.slice(h.length,o.length),d=!0)}),d||(s+=o.slice(0,1),o=o.slice(1,o.length))};o;)c();return s};const Nne=p0(Cne);var Kb={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Pt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},s3={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Pt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Pt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Pt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Pt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Pt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Pt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Pt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Pt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Pt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Pt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Pt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Pt.bitAnd,"${args[1]}\\right)")},bitNot:{1:Pt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Pt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Pt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Pt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Pt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Pt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Pt.and,"${args[1]}\\right)")},not:{1:Pt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Pt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Pt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Pt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Pt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Pt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Pt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Pt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Pt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Pt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Pt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Pt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Pt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Pt.to,"${args[1]}\\right)")},numeric:function(e,n){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(Kb.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},Sne="\\mathrm{${name}}\\left(${args}\\right)",u3={deg:"^\\circ"};function Yb(t){return Nne(t,{preserveFormatting:!0})}function RB(t,e){return e=typeof e>"u"?!1:e,e?Ue(u3,t)?u3[t]:"\\mathrm{"+Yb(t)+"}":Ue(Kb,t)?Kb[t]:Yb(t)}var vm="ConstantNode",Dne=["Node"],Ane=z(vm,Dne,t=>{var{Node:e}=t;class n extends e{constructor(i){super(),this.value=i}get type(){return vm}get isConstantNode(){return!0}_compile(i,a){var o=this.value;return function(){return o}}forEach(i){}map(i){return this.clone()}clone(){return new n(this.value)}_toString(i){return xt(this.value,i)}_toHTML(i){var a=this._toString(i);switch(Zt(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:vm,value:this.value}}static fromJSON(i){return new n(i.value)}_toTex(i){var a=this._toString(i),o=Zt(this.value);switch(o){case"string":return"\\mathtt{"+Yb(a)+"}";case"number":case"BigNumber":{var s=o==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!s)return this.value.valueOf()<0?"-\\infty":"\\infty";var u=a.toLowerCase().indexOf("e");return u!==-1?a.substring(0,u)+"\\cdot10^{"+a.substring(u+1)+"}":a}case"bigint":return a.toString();case"Fraction":return this.value.toLatex();default:return a}}}return Bn(n,"name",vm),n},{isClass:!0,isNode:!0}),gm="FunctionAssignmentNode",Tne=["typed","Node"],Mne=z(gm,Tne,t=>{var{typed:e,Node:n}=t;function r(a,o,s){var u=Gt(a,o,s),l=Gt(a.expr,o,s);return o==="all"||l!==null&&l<=u}class i extends n{constructor(o,s,u){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(s))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Vt(u))throw new TypeError('Node expected for parameter "expr"');if(IB.has(o))throw new Error('Illegal function name, "'+o+'" is a reserved keyword');var l=new Set;for(var c of s){var f=typeof c=="string"?c:c.name;if(l.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));l.add(f)}this.name=o,this.params=s.map(function(d){return d&&d.name||d}),this.types=s.map(function(d){return d&&d.type||"any"}),this.expr=u}get type(){return gm}get isFunctionAssignmentNode(){return!0}_compile(o,s){var u=Object.create(s);pO(this.params,function(p){u[p]=!0});var l=this.expr._compile(o,u),c=this.name,f=this.params,d=lD(this.types,","),h=c+"("+lD(this.params,", ")+")";return function(m,y,v){var x={};x[d]=function(){for(var b=Object.create(y),w=0;w<f.length;w++)b[f[w]]=arguments[w];return l(m,b,v)};var g=e(c,x);return g.syntax=h,m.set(c,g),g}}forEach(o){o(this.expr,"expr",this)}map(o){var s=this._ifNode(o(this.expr,"expr",this));return new i(this.name,this.params.slice(0),s)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=this.expr.toString(o);return r(this,s,o&&o.implicit)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u}toJSON(){var o=this.types;return{mathjs:gm,name:this.name,params:this.params.map(function(s,u){return{name:s,type:o[u]}}),expr:this.expr}}static fromJSON(o){return new i(o.name,o.params,o.expr)}_toHTML(o){for(var s=o&&o.parenthesis?o.parenthesis:"keep",u=[],l=0;l<this.params.length;l++)u.push('<span class="math-symbol math-parameter">'+Qi(this.params[l])+"</span>");var c=this.expr.toHTML(o);return r(this,s,o&&o.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Qi(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=this.expr.toTex(o);return r(this,s,o&&o.implicit)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(RB).join(",")+"\\right)="+u}}return Bn(i,"name",gm),i},{isClass:!0,isNode:!0}),ym="IndexNode",Ine=["Node","size"],kne=z(ym,Ine,t=>{var{Node:e,size:n}=t;class r extends e{constructor(a,o){if(super(),this.dimensions=a,this.dotNotation=o||!1,!Array.isArray(a)||!a.every(Vt))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return ym}get isIndexNode(){return!0}_compile(a,o){var s=js(this.dimensions,function(l,c){var f=l.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(f){var d=Object.create(o);d.end=!0;var h=l._compile(a,d);return function(m,y,v){if(!Je(v)&&!Ht(v)&&!Tr(v))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Zt(v));var x=n(v).valueOf(),g=Object.create(y);return g.end=x[c],h(m,g,v)}}else return l._compile(a,o)}),u=Hr(a,"index");return function(c,f,d){var h=js(s,function(p){return p(c,f,d)});return u(...h)}}forEach(a){for(var o=0;o<this.dimensions.length;o++)a(this.dimensions[o],"dimensions["+o+"]",this)}map(a){for(var o=[],s=0;s<this.dimensions.length;s++)o[s]=this._ifNode(a(this.dimensions[s],"dimensions["+s+"]",this));return new r(o,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&Tt(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:ym,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new r(a.dimensions,a.dotNotation)}_toHTML(a){for(var o=[],s=0;s<this.dimensions.length;s++)o[s]=this.dimensions[s].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Qi(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var o=this.dimensions.map(function(s){return s.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+o.join(",")+"}"}}return Bn(r,"name",ym),r},{isClass:!0,isNode:!0}),xm="ObjectNode",Rne=["Node"],Fne=z(xm,Rne,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return Vt(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return xm}get isObjectNode(){return!0}_compile(i,a){var o={};for(var s in this.properties)if(Ue(this.properties,s)){var u=xc(s),l=JSON.parse(u),c=Hr(this.properties,s);o[l]=c._compile(i,a)}return function(d,h,p){var m={};for(var y in o)Ue(o,y)&&(m[y]=o[y](d,h,p));return m}}forEach(i){for(var a in this.properties)Ue(this.properties,a)&&i(this.properties[a],"properties["+xc(a)+"]",this)}map(i){var a={};for(var o in this.properties)Ue(this.properties,o)&&(a[o]=this._ifNode(i(this.properties[o],"properties["+xc(o)+"]",this)));return new n(a)}clone(){var i={};for(var a in this.properties)Ue(this.properties,a)&&(i[a]=this.properties[a]);return new n(i)}_toString(i){var a=[];for(var o in this.properties)Ue(this.properties,o)&&a.push(xc(o)+": "+this.properties[o].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:xm,properties:this.properties}}static fromJSON(i){return new n(i.properties)}_toHTML(i){var a=[];for(var o in this.properties)Ue(this.properties,o)&&a.push('<span class="math-symbol math-property">'+Qi(o)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[o].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var o in this.properties)Ue(this.properties,o)&&a.push("\\mathbf{"+o+":} & "+this.properties[o].toTex(i)+"\\\\");var s="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return s}}return Bn(n,"name",xm),n},{isClass:!0,isNode:!0});function Sd(t,e){return new $P(t,new B0(e),new Set(Object.keys(e)))}var bm="OperatorNode",Pne=["Node"],One=z(bm,Pne,t=>{var{Node:e}=t;function n(a,o){var s=a;if(o==="auto")for(;Wo(s);)s=s.content;return Tt(s)?!0:In(s)?n(s.args[0],o):!1}function r(a,o,s,u,l){var c=Gt(a,o,s),f=cd(a,o);if(o==="all"||u.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return u.map(function(D){switch(D.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(u.length){case 0:d=[];break;case 1:{var h=Gt(u[0],o,s,a);if(l&&h!==null){var p,m;if(o==="keep"?(p=u[0].getIdentifier(),m=a.getIdentifier()):(p=u[0].getContent().getIdentifier(),m=a.getContent().getIdentifier()),ya[c][m].latexLeftParens===!1){d=[!1];break}if(ya[h][p].latexParens===!1){d=[!1];break}}if(h===null){d=[!1];break}if(h<=c){d=[!0];break}d=[!1]}break;case 2:{var y,v=Gt(u[0],o,s,a),x=w1(a,u[0],o);v===null?y=!1:v===c&&f==="right"&&!x||v<c?y=!0:y=!1;var g,b=Gt(u[1],o,s,a),w=w1(a,u[1],o);if(b===null?g=!1:b===c&&f==="left"&&!w||b<c?g=!0:g=!1,l){var _,E,C;o==="keep"?(_=a.getIdentifier(),E=a.args[0].getIdentifier(),C=a.args[1].getIdentifier()):(_=a.getContent().getIdentifier(),E=a.args[0].getContent().getIdentifier(),C=a.args[1].getContent().getIdentifier()),v!==null&&(ya[c][_].latexLeftParens===!1&&(y=!1),ya[v][E].latexParens===!1&&(y=!1)),b!==null&&(ya[c][_].latexRightParens===!1&&(g=!1),ya[b][C].latexParens===!1&&(g=!1))}d=[y,g]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(d=u.map(function(D){var A=Gt(D,o,s,a),T=w1(a,D,o),R=cd(D,o);return A===null?!1:c===A&&f===R&&!T?!0:A<c}));break}if(u.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&o!=="all"&&s==="hide")for(var N=1;N<d.length;++N)n(u[N],o)&&!d[N-1]&&(o!=="keep"||!Wo(u[N-1]))&&(d[N]=!0);return d}class i extends e{constructor(o,s,u,l,c){if(super(),typeof o!="string")throw new TypeError('string expected for parameter "op"');if(typeof s!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(u)||!u.every(Vt))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=l===!0,this.isPercentage=c===!0,this.op=o,this.fn=s,this.args=u||[]}get type(){return bm}get isOperatorNode(){return!0}_compile(o,s){if(typeof this.fn!="string"||!r_(o,this.fn))throw o[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var u=Hr(o,this.fn),l=js(this.args,function(p){return p._compile(o,s)});if(typeof u=="function"&&u.rawArgs===!0){var c=this.args;return function(m,y,v){return u(c,o,Sd(m,y))}}else if(l.length===1){var f=l[0];return function(m,y,v){return u(f(m,y,v))}}else if(l.length===2){var d=l[0],h=l[1];return function(m,y,v){return u(d(m,y,v),h(m,y,v))}}else return function(m,y,v){return u.apply(null,js(l,function(x){return x(m,y,v)}))}}forEach(o){for(var s=0;s<this.args.length;s++)o(this.args[s],"args["+s+"]",this)}map(o){for(var s=[],u=0;u<this.args.length;u++)s[u]=this._ifNode(o(this.args[u],"args["+u+"]",this));return new i(this.op,this.fn,s,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",l=this.args,c=r(this,s,u,l,!1);if(l.length===1){var f=cd(this,s),d=l[0].toString(o);c[0]&&(d="("+d+")");var h=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(h?" ":"")+d:f==="left"?d+(h?" ":"")+this.op:d+this.op}else if(l.length===2){var p=l[0].toString(o),m=l[1].toString(o);return c[0]&&(p="("+p+")"),c[1]&&(m="("+m+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?p+" "+m:p+" "+this.op+" "+m}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=l.map(function(v,x){return v=v.toString(o),c[x]&&(v="("+v+")"),v});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:bm,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(o){return new i(o.op,o.fn,o.args,o.implicit,o.isPercentage)}_toHTML(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",l=this.args,c=r(this,s,u,l,!1);if(l.length===1){var f=cd(this,s),d=l[0].toHTML(o);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Qi(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Qi(this.op)+"</span>"}else if(l.length===2){var h=l[0].toHTML(o),p=l[1].toHTML(o);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Qi(this.op)+"</span>"+p}else{var m=l.map(function(y,v){return y=y.toHTML(o),c[v]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?m.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):m.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Qi(this.op)+"</span>"):'<span class="math-function">'+Qi(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+m.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(o){var s=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",l=this.args,c=r(this,s,u,l,!0),f=Pt[this.fn];if(f=typeof f>"u"?this.op:f,l.length===1){var d=cd(this,s),h=l[0].toTex(o);return c[0]&&(h="\\left(".concat(h,"\\right)")),d==="right"?f+h:h+f}else if(l.length===2){var p=l[0],m=p.toTex(o);c[0]&&(m="\\left(".concat(m,"\\right)"));var y=l[1],v=y.toTex(o);c[1]&&(v="\\left(".concat(v,"\\right)"));var x;switch(s==="keep"?x=p.getIdentifier():x=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+m+"}{"+v+"}";case"OperatorNode:pow":switch(m="{"+m+"}",v="{"+v+"}",x){case"ConditionalNode":case"OperatorNode:divide":m="\\left(".concat(m,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&u==="hide")return m+"~"+v}return m+f+v}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var g=l.map(function(b,w){return b=b.toTex(o),c[w]&&(b="\\left(".concat(b,"\\right)")),b});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&u==="hide"?g.join("~"):g.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+l.map(function(b){return b.toTex(o)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Bn(i,"name",bm),i},{isClass:!0,isNode:!0}),wm="ParenthesisNode",Bne=["Node"],Lne=z(wm,Bne,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),!Vt(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return wm}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new n(a)}clone(){return new n(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:wm,content:this.content}}static fromJSON(i){return new n(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return Bn(n,"name",wm),n},{isClass:!0,isNode:!0}),_m="RangeNode",jne=["Node"],$ne=z(_m,jne,t=>{var{Node:e}=t;function n(i,a,o){var s=Gt(i,a,o),u={},l=Gt(i.start,a,o);if(u.start=l!==null&&l<=s||a==="all",i.step){var c=Gt(i.step,a,o);u.step=c!==null&&c<=s||a==="all"}var f=Gt(i.end,a,o);return u.end=f!==null&&f<=s||a==="all",u}class r extends e{constructor(a,o,s){if(super(),!Vt(a))throw new TypeError("Node expected");if(!Vt(o))throw new TypeError("Node expected");if(s&&!Vt(s))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=o,this.step=s||null}get type(){return _m}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(o){return ar(o)&&o.name==="end"});return a.length>0}_compile(a,o){var s=a.range,u=this.start._compile(a,o),l=this.end._compile(a,o);if(this.step){var c=this.step._compile(a,o);return function(d,h,p){return s(u(d,h,p),l(d,h,p),c(d,h,p))}}else return function(d,h,p){return s(u(d,h,p),l(d,h,p))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new r(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=n(this,o,a&&a.implicit),u,l=this.start.toString(a);if(s.start&&(l="("+l+")"),u=l,this.step){var c=this.step.toString(a);s.step&&(c="("+c+")"),u+=":"+c}var f=this.end.toString(a);return s.end&&(f="("+f+")"),u+=":"+f,u}toJSON(){return{mathjs:_m,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new r(a.start,a.end,a.step)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=n(this,o,a&&a.implicit),u,l=this.start.toHTML(a);if(s.start&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=l,this.step){var c=this.step.toHTML(a);s.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(a);return s.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+f,u}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",s=n(this,o,a&&a.implicit),u=this.start.toTex(a);if(s.start&&(u="\\left(".concat(u,"\\right)")),this.step){var l=this.step.toTex(a);s.step&&(l="\\left(".concat(l,"\\right)")),u+=":"+l}var c=this.end.toTex(a);return s.end&&(c="\\left(".concat(c,"\\right)")),u+=":"+c,u}}return Bn(r,"name",_m),r},{isClass:!0,isNode:!0}),Em="RelationalNode",zne=["Node"],Une=z(Em,zne,t=>{var{Node:e}=t,n={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(a,o){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(o))throw new TypeError("Parameter params must be an array");if(a.length!==o.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=o}get type(){return Em}get isRelationalNode(){return!0}_compile(a,o){var s=this,u=this.params.map(l=>l._compile(a,o));return function(c,f,d){for(var h,p=u[0](c,f,d),m=0;m<s.conditionals.length;m++){h=p,p=u[m+1](c,f,d);var y=Hr(a,s.conditionals[m]);if(!y(h,p))return!1}return!0}}forEach(a){this.params.forEach((o,s)=>a(o,"params["+s+"]",this),this)}map(a){return new r(this.conditionals.slice(),this.params.map((o,s)=>this._ifNode(a(o,"params["+s+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Gt(this,o,a&&a.implicit),u=this.params.map(function(f,d){var h=Gt(f,o,a&&a.implicit);return o==="all"||h!==null&&h<=s?"("+f.toString(a)+")":f.toString(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=" "+n[this.conditionals[c]],l+=" "+u[c+1];return l}toJSON(){return{mathjs:Em,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new r(a.conditionals,a.params)}_toHTML(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Gt(this,o,a&&a.implicit),u=this.params.map(function(f,d){var h=Gt(f,o,a&&a.implicit);return o==="all"||h!==null&&h<=s?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Qi(n[this.conditionals[c]])+"</span>"+u[c+1];return l}_toTex(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",s=Gt(this,o,a&&a.implicit),u=this.params.map(function(f,d){var h=Gt(f,o,a&&a.implicit);return o==="all"||h!==null&&h<=s?"\\left("+f.toTex(a)+"\right)":f.toTex(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=Pt[this.conditionals[c]]+u[c+1];return l}}return Bn(r,"name",Em),r},{isClass:!0,isNode:!0}),Vne="SymbolNode",Wne=["math","?Unit","Node"],qne=z(Vne,Wne,t=>{var{math:e,Unit:n,Node:r}=t;function i(o){return n?n.isValuelessUnit(o):!1}class a extends r{constructor(s){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');this.name=s}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(s,u){var l=this.name;if(u[l]===!0)return function(f,d,h){return Hr(d,l)};if(l in s)return function(f,d,h){return f.has(l)?f.get(l):Hr(s,l)};var c=i(l);return function(f,d,h){return f.has(l)?f.get(l):c?new n(null,l):a.onUndefinedSymbol(l)}}forEach(s){}map(s){return this.clone()}static onUndefinedSymbol(s){throw new Error("Undefined symbol "+s)}clone(){return new a(this.name)}_toString(s){return this.name}_toHTML(s){var u=Qi(this.name);return u==="true"||u==="false"?'<span class="math-symbol math-boolean">'+u+"</span>":u==="i"?'<span class="math-symbol math-imaginary-symbol">'+u+"</span>":u==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+u+"</span>":u==="NaN"?'<span class="math-symbol math-nan-symbol">'+u+"</span>":u==="null"?'<span class="math-symbol math-null-symbol">'+u+"</span>":u==="undefined"?'<span class="math-symbol math-undefined-symbol">'+u+"</span>":'<span class="math-symbol">'+u+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(s){return new a(s.name)}_toTex(s){var u=!1;typeof e[this.name]>"u"&&i(this.name)&&(u=!0);var l=RB(this.name,u);return l[0]==="\\"?l:" "+l}}return a},{isClass:!0,isNode:!0}),Cm="FunctionNode",Hne=["math","Node","SymbolNode"],Gne=z(Cm,Hne,t=>{var e,{math:n,Node:r,SymbolNode:i}=t,a=u=>xt(u,{truncate:78});function o(u,l,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,p;(p=d.exec(u))!==null;)if(f+=u.substring(h,p.index),h=p.index,p[0]==="$$")f+="$",h++;else{h+=p[0].length;var m=l[p[1]];if(!m)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof m){case"string":f+=m;break;case"object":if(Vt(m))f+=m.toTex(c);else if(Array.isArray(m))f+=m.map(function(y,v){if(Vt(y))return y.toTex(c);throw new TypeError("Template: "+p[1]+"["+v+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(Vt(m[p[2]]&&m[p[2]]))f+=m[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return f+=u.slice(h),f}class s extends r{constructor(l,c){if(super(),typeof l=="string"&&(l=new i(l)),!Vt(l))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(Vt))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=l,this.args=c||[]}get name(){return this.fn.name||""}get type(){return Cm}get isFunctionNode(){return!0}_compile(l,c){var f=this.args.map(C=>C._compile(l,c));if(ar(this.fn)){var d=this.fn.name;if(c[d]){var v=this.args;return function(N,D,A){var T=Hr(D,d);if(typeof T!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(a(T)));if(T.rawArgs)return T(v,l,Sd(N,D));var R=f.map(F=>F(N,D,A));return T.apply(T,R)}}else{var h=d in l?Hr(l,d):void 0,p=typeof h=="function"&&h.rawArgs===!0,m=C=>{var N;if(C.has(d))N=C.get(d);else if(d in l)N=Hr(l,d);else return s.onUndefinedFunction(d);if(typeof N=="function")return N;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(a(N)))};if(p){var y=this.args;return function(N,D,A){var T=m(N);if(T.rawArgs===!0)return T(y,l,Sd(N,D));var R=f.map(F=>F(N,D,A));return T(...R)}}else switch(f.length){case 0:return function(N,D,A){var T=m(N);return T()};case 1:return function(N,D,A){var T=m(N),R=f[0];return T(R(N,D,A))};case 2:return function(N,D,A){var T=m(N),R=f[0],F=f[1];return T(R(N,D,A),F(N,D,A))};default:return function(N,D,A){var T=m(N),R=f.map(F=>F(N,D,A));return T(...R)}}}}else if(ll(this.fn)&&Tf(this.fn.index)&&this.fn.index.isObjectProperty()){var x=this.fn.object._compile(l,c),g=this.fn.index.getObjectProperty(),b=this.args;return function(N,D,A){var T=x(N,D,A),R=bq(T,g);if(R!=null&&R.rawArgs)return R(b,l,Sd(N,D));var F=f.map(O=>O(N,D,A));return R.apply(T,F)}}else{var w=this.fn.toString(),_=this.fn._compile(l,c),E=this.args;return function(N,D,A){var T=_(N,D,A);if(typeof T!="function")throw new TypeError("Expression '".concat(w,"' did not evaluate to a function; value is:")+`
  `.concat(a(T)));if(T.rawArgs)return T(E,l,Sd(N,D));var R=f.map(F=>F(N,D,A));return T.apply(T,R)}}}forEach(l){l(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)l(this.args[c],"args["+c+"]",this)}map(l){for(var c=this._ifNode(l(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(l(this.args[d],"args["+d+"]",this));return new s(c,f)}clone(){return new s(this.fn,this.args.slice(0))}toString(l){var c,f=this.fn.toString(l);return l&&typeof l.handler=="object"&&Ue(l.handler,f)&&(c=l.handler[f](this,l)),typeof c<"u"?c:super.toString(l)}_toString(l){var c=this.args.map(function(d){return d.toString(l)}),f=op(this.fn)?"("+this.fn.toString(l)+")":this.fn.toString(l);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:Cm,fn:this.fn,args:this.args}}_toHTML(l){var c=this.args.map(function(f){return f.toHTML(l)});return'<span class="math-function">'+Qi(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(l){var c;return l&&typeof l.handler=="object"&&Ue(l.handler,this.name)&&(c=l.handler[this.name](this,l)),typeof c<"u"?c:super.toTex(l)}_toTex(l){var c=this.args.map(function(h){return h.toTex(l)}),f;s3[this.name]&&(f=s3[this.name]),n[this.name]&&(typeof n[this.name].toTex=="function"||typeof n[this.name].toTex=="object"||typeof n[this.name].toTex=="string")&&(f=n[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,l);break;case"string":d=o(f,this,l);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,l);break;case"string":d=o(f[c.length],this,l);break}}return typeof d<"u"?d:o(Sne,this,l)}getIdentifier(){return this.type+":"+this.name}}return e=s,Bn(s,"name",Cm),Bn(s,"onUndefinedFunction",function(u){throw new Error("Undefined function "+u)}),Bn(s,"fromJSON",function(u){return new e(u.fn,u.args)}),s},{isClass:!0,isNode:!0}),l3="parse",Kne=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],Yne=z(l3,Kne,t=>{var{typed:e,numeric:n,config:r,AccessorNode:i,ArrayNode:a,AssignmentNode:o,BlockNode:s,ConditionalNode:u,ConstantNode:l,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:p,ParenthesisNode:m,RangeNode:y,RelationalNode:v,SymbolNode:x}=t,g=e(l3,{string:function(J){return Y(J,{})},"Array | Matrix":function(J){return b(J,{})},"string, Object":function(J,me){var Se=me.nodes!==void 0?me.nodes:{};return Y(J,Se)},"Array | Matrix, Object":b});function b(P){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=J.nodes!==void 0?J.nodes:{};return pt(P,function(Se){if(typeof Se!="string")throw new TypeError("String expected");return Y(Se,me)})}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},_={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},E={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},C={true:!0,false:!1,null:null,undefined:void 0},N=["NaN","Infinity"],D={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function A(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null}}function T(P,J){return P.expression.substr(P.index,J)}function R(P){return T(P,1)}function F(P){P.index++}function O(P){return P.expression.charAt(P.index-1)}function I(P){return P.expression.charAt(P.index+1)}function M(P){for(P.tokenType=w.NULL,P.token="",P.comment="";;){if(R(P)==="#")for(;R(P)!==`
`&&R(P)!=="";)P.comment+=R(P),F(P);if(g.isWhitespace(R(P),P.nestingLevel))F(P);else break}if(R(P)===""){P.tokenType=w.DELIMITER;return}if(R(P)===`
`&&!P.nestingLevel){P.tokenType=w.DELIMITER,P.token=R(P),F(P);return}var J=R(P),me=T(P,2),Se=T(P,3);if(Se.length===3&&_[Se]){P.tokenType=w.DELIMITER,P.token=Se,F(P),F(P),F(P);return}if(me.length===2&&_[me]){P.tokenType=w.DELIMITER,P.token=me,F(P),F(P);return}if(_[J]){P.tokenType=w.DELIMITER,P.token=J,F(P);return}if(g.isDigitDot(J)){P.tokenType=w.NUMBER;var et=T(P,2);if(et==="0b"||et==="0o"||et==="0x"){for(P.token+=R(P),F(P),P.token+=R(P),F(P);g.isHexDigit(R(P));)P.token+=R(P),F(P);if(R(P)===".")for(P.token+=".",F(P);g.isHexDigit(R(P));)P.token+=R(P),F(P);else if(R(P)==="i")for(P.token+="i",F(P);g.isDigit(R(P));)P.token+=R(P),F(P);return}if(R(P)==="."){if(P.token+=R(P),F(P),!g.isDigit(R(P))){P.tokenType=w.DELIMITER;return}}else{for(;g.isDigit(R(P));)P.token+=R(P),F(P);g.isDecimalMark(R(P),I(P))&&(P.token+=R(P),F(P))}for(;g.isDigit(R(P));)P.token+=R(P),F(P);if(R(P)==="E"||R(P)==="e"){if(g.isDigit(I(P))||I(P)==="-"||I(P)==="+"){if(P.token+=R(P),F(P),(R(P)==="+"||R(P)==="-")&&(P.token+=R(P),F(P)),!g.isDigit(R(P)))throw Xe(P,'Digit expected, got "'+R(P)+'"');for(;g.isDigit(R(P));)P.token+=R(P),F(P);if(g.isDecimalMark(R(P),I(P)))throw Xe(P,'Digit expected, got "'+R(P)+'"')}else if(g.isDecimalMark(I(P),P.expression.charAt(P.index+2)))throw F(P),Xe(P,'Digit expected, got "'+R(P)+'"')}return}if(g.isAlpha(R(P),O(P),I(P))){for(;g.isAlpha(R(P),O(P),I(P))||g.isDigit(R(P));)P.token+=R(P),F(P);Ue(E,P.token)?P.tokenType=w.DELIMITER:P.tokenType=w.SYMBOL;return}for(P.tokenType=w.UNKNOWN;R(P)!=="";)P.token+=R(P),F(P);throw Xe(P,'Syntax error in part "'+P.token+'"')}function B(P){do M(P);while(P.token===`
`)}function k(P){P.nestingLevel++}function j(P){P.nestingLevel--}g.isAlpha=function(J,me,Se){return g.isValidLatinOrGreek(J)||g.isValidMathSymbol(J,Se)||g.isValidMathSymbol(me,J)},g.isValidLatinOrGreek=function(J){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(J)},g.isValidMathSymbol=function(J,me){return/^[\uD835]$/.test(J)&&/^[\uDC00-\uDFFF]$/.test(me)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(me)},g.isWhitespace=function(J,me){return J===" "||J==="	"||J===`
`&&me>0},g.isDecimalMark=function(J,me){return J==="."&&me!=="/"&&me!=="*"&&me!=="^"},g.isDigitDot=function(J){return J>="0"&&J<="9"||J==="."},g.isDigit=function(J){return J>="0"&&J<="9"},g.isHexDigit=function(J){return J>="0"&&J<="9"||J>="a"&&J<="f"||J>="A"&&J<="F"};function Y(P,J){var me=A();zn(me,{expression:P,extraNodes:J}),M(me);var Se=q(me);if(me.token!=="")throw me.tokenType===w.DELIMITER?jt(me,"Unexpected operator "+me.token):Xe(me,'Unexpected part "'+me.token+'"');return Se}function q(P){var J,me=[],Se;for(P.token!==""&&P.token!==`
`&&P.token!==";"&&(J=L(P),P.comment&&(J.comment=P.comment));P.token===`
`||P.token===";";)me.length===0&&J&&(Se=P.token!==";",me.push({node:J,visible:Se})),M(P),P.token!==`
`&&P.token!==";"&&P.token!==""&&(J=L(P),P.comment&&(J.comment=P.comment),Se=P.token!==";",me.push({node:J,visible:Se}));return me.length>0?new s(me):(J||(J=new l(void 0),P.comment&&(J.comment=P.comment)),J)}function L(P){var J,me,Se,et,ft=ne(P);if(P.token==="="){if(ar(ft))return J=ft.name,B(P),Se=L(P),new o(new x(J),Se);if(ll(ft))return B(P),Se=L(P),new o(ft.object,ft.index,Se);if(Ys(ft)&&ar(ft.fn)&&(et=!0,me=[],J=ft.name,ft.args.forEach(function(Ur,$y){ar(Ur)?me[$y]=Ur.name:et=!1}),et))return B(P),Se=L(P),new c(J,me,Se);throw Xe(P,"Invalid left hand side of assignment operator =")}return ft}function ne(P){for(var J=fe(P);P.token==="?";){var me=P.conditionalLevel;P.conditionalLevel=P.nestingLevel,B(P);var Se=J,et=L(P);if(P.token!==":")throw Xe(P,"False part of conditional expression expected");P.conditionalLevel=null,B(P);var ft=L(P);J=new u(Se,et,ft),P.conditionalLevel=me}return J}function fe(P){for(var J=te(P);P.token==="or";)B(P),J=new p("or","or",[J,te(P)]);return J}function te(P){for(var J=oe(P);P.token==="xor";)B(P),J=new p("xor","xor",[J,oe(P)]);return J}function oe(P){for(var J=G(P);P.token==="and";)B(P),J=new p("and","and",[J,G(P)]);return J}function G(P){for(var J=U(P);P.token==="|";)B(P),J=new p("|","bitOr",[J,U(P)]);return J}function U(P){for(var J=Q(P);P.token==="^|";)B(P),J=new p("^|","bitXor",[J,Q(P)]);return J}function Q(P){for(var J=re(P);P.token==="&";)B(P),J=new p("&","bitAnd",[J,re(P)]);return J}function re(P){for(var J=[ie(P)],me=[],Se={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Ue(Se,P.token);){var et={name:P.token,fn:Se[P.token]};me.push(et),B(P),J.push(ie(P))}return J.length===1?J[0]:J.length===2?new p(me[0].name,me[0].fn,J):new v(me.map(ft=>ft.fn),J)}function ie(P){var J,me,Se,et;J=de(P);for(var ft={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Ue(ft,P.token);)me=P.token,Se=ft[me],B(P),et=[J,de(P)],J=new p(me,Se,et);return J}function de(P){var J,me,Se,et;J=he(P);for(var ft={to:"to",in:"to"};Ue(ft,P.token);)me=P.token,Se=ft[me],B(P),me==="in"&&P.token===""?J=new p("*","multiply",[J,new x("in")],!0):(et=[J,he(P)],J=new p(me,Se,et));return J}function he(P){var J,me=[];if(P.token===":"?J=new l(1):J=$(P),P.token===":"&&P.conditionalLevel!==P.nestingLevel){for(me.push(J);P.token===":"&&me.length<3;)B(P),P.token===")"||P.token==="]"||P.token===","||P.token===""?me.push(new x("end")):me.push($(P));me.length===3?J=new y(me[0],me[2],me[1]):J=new y(me[0],me[1])}return J}function $(P){var J,me,Se,et;J=K(P);for(var ft={"+":"add","-":"subtract"};Ue(ft,P.token);){me=P.token,Se=ft[me],B(P);var Ur=K(P);Ur.isPercentage?et=[J,new p("*","multiply",[J,Ur])]:et=[J,Ur],J=new p(me,Se,et)}return J}function K(P){var J,me,Se,et;J=ue(P),me=J;for(var ft={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Ue(ft,P.token);)if(Se=P.token,et=ft[Se],B(P),Se==="%"&&P.tokenType===w.DELIMITER&&P.token!=="(")if(P.token!==""&&ft[P.token]){var Ur=new p("/","divide",[J,new l(100)],!1,!0);Se=P.token,et=ft[Se],B(P),me=ue(P),J=new p(Se,et,[Ur,me])}else J=new p("/","divide",[J,new l(100)],!1,!0);else me=ue(P),J=new p(Se,et,[J,me]);return J}function ue(P){var J,me;for(J=ce(P),me=J;P.tokenType===w.SYMBOL||P.token==="in"&&Tt(J)||P.token==="in"&&In(J)&&J.fn==="unaryMinus"&&Tt(J.args[0])||P.tokenType===w.NUMBER&&!Tt(me)&&(!In(me)||me.op==="!")||P.token==="(";)me=ce(P),J=new p("*","multiply",[J,me],!0);return J}function ce(P){for(var J=ge(P),me=J,Se=[];P.token==="/"&&Ab(me);)if(Se.push(zn({},P)),B(P),P.tokenType===w.NUMBER)if(Se.push(zn({},P)),B(P),P.tokenType===w.SYMBOL||P.token==="("||P.token==="in")zn(P,Se.pop()),Se.pop(),me=ge(P),J=new p("/","divide",[J,me]);else{Se.pop(),zn(P,Se.pop());break}else{zn(P,Se.pop());break}return J}function ge(P){var J,me,Se,et={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Ue(et,P.token)?(Se=et[P.token],J=P.token,B(P),me=[ge(P)],new p(J,Se,me)):Ce(P)}function Ce(P){var J,me,Se,et;return J=Ae(P),(P.token==="^"||P.token===".^")&&(me=P.token,Se=me==="^"?"pow":"dotPow",B(P),et=[J,ge(P)],J=new p(me,Se,et)),J}function Ae(P){var J,me,Se,et;J=Pe(P);for(var ft={"!":"factorial","'":"ctranspose"};Ue(ft,P.token);)me=P.token,Se=ft[me],M(P),et=[J],J=new p(me,Se,et),J=ee(P,J);return J}function Pe(P){var J=[];if(P.tokenType===w.SYMBOL&&Ue(P.extraNodes,P.token)){var me=P.extraNodes[P.token];if(M(P),P.token==="("){if(J=[],k(P),M(P),P.token!==")")for(J.push(L(P));P.token===",";)M(P),J.push(L(P));if(P.token!==")")throw Xe(P,"Parenthesis ) expected");j(P),M(P)}return new me(J)}return H(P)}function H(P){var J,me;return P.tokenType===w.SYMBOL||P.tokenType===w.DELIMITER&&P.token in E?(me=P.token,M(P),Ue(C,me)?J=new l(C[me]):N.includes(me)?J=new l(n(me,"number")):J=new x(me),J=ee(P,J),J):le(P)}function ee(P,J,me){for(var Se;(P.token==="("||P.token==="["||P.token===".")&&!me;)if(Se=[],P.token==="(")if(ar(J)||ll(J)){if(k(P),M(P),P.token!==")")for(Se.push(L(P));P.token===",";)M(P),Se.push(L(P));if(P.token!==")")throw Xe(P,"Parenthesis ) expected");j(P),M(P),J=new f(J,Se)}else return J;else if(P.token==="["){if(k(P),M(P),P.token!=="]")for(Se.push(L(P));P.token===",";)M(P),Se.push(L(P));if(P.token!=="]")throw Xe(P,"Parenthesis ] expected");j(P),M(P),J=new i(J,new d(Se))}else{M(P);var et=P.tokenType===w.SYMBOL||P.tokenType===w.DELIMITER&&P.token in E;if(!et)throw Xe(P,"Property name expected after dot");Se.push(new l(P.token)),M(P);var ft=!0;J=new i(J,new d(Se,ft))}return J}function le(P){var J,me;return P.token==='"'||P.token==="'"?(me=pe(P,P.token),J=new l(me),J=ee(P,J),J):be(P)}function pe(P,J){for(var me="";R(P)!==""&&R(P)!==J;)if(R(P)==="\\"){F(P);var Se=R(P),et=D[Se];if(et!==void 0)me+=et,P.index+=1;else if(Se==="u"){var ft=P.expression.slice(P.index+1,P.index+5);if(/^[0-9A-Fa-f]{4}$/.test(ft))me+=String.fromCharCode(parseInt(ft,16)),P.index+=5;else throw Xe(P,"Invalid unicode character \\u".concat(ft))}else throw Xe(P,"Bad escape character \\".concat(Se))}else me+=R(P),F(P);if(M(P),P.token!==J)throw Xe(P,"End of string ".concat(J," expected"));return M(P),me}function be(P){var J,me,Se,et;if(P.token==="["){if(k(P),M(P),P.token!=="]"){var ft=xe(P);if(P.token===";"){for(Se=1,me=[ft];P.token===";";)M(P),P.token!=="]"&&(me[Se]=xe(P),Se++);if(P.token!=="]")throw Xe(P,"End of matrix ] expected");j(P),M(P),et=me[0].items.length;for(var Ur=1;Ur<Se;Ur++)if(me[Ur].items.length!==et)throw jt(P,"Column dimensions mismatch ("+me[Ur].items.length+" !== "+et+")");J=new a(me)}else{if(P.token!=="]")throw Xe(P,"End of matrix ] expected");j(P),M(P),J=ft}}else j(P),M(P),J=new a([]);return ee(P,J)}return Fe(P)}function xe(P){for(var J=[L(P)],me=1;P.token===",";)M(P),P.token!=="]"&&P.token!==";"&&(J[me]=L(P),me++);return new a(J)}function Fe(P){if(P.token==="{"){k(P);var J,me={};do if(M(P),P.token!=="}"){if(P.token==='"'||P.token==="'")J=pe(P,P.token);else if(P.tokenType===w.SYMBOL||P.tokenType===w.DELIMITER&&P.token in E)J=P.token,M(P);else throw Xe(P,"Symbol or string expected as object key");if(P.token!==":")throw Xe(P,"Colon : expected after object key");M(P),me[J]=L(P)}while(P.token===",");if(P.token!=="}")throw Xe(P,"Comma , or bracket } expected after object value");j(P),M(P);var Se=new h(me);return Se=ee(P,Se),Se}return Te(P)}function Te(P){var J;if(P.tokenType===w.NUMBER){J=P.token,M(P);var me=lu(J,r),Se=n(J,me);return new l(Se)}return Oe(P)}function Oe(P){var J;if(P.token==="("){if(k(P),M(P),J=L(P),P.token!==")")throw Xe(P,"Parenthesis ) expected");return j(P),M(P),J=new m(J),J=ee(P,J),J}return Me(P)}function Me(P){throw P.token===""?Xe(P,"Unexpected end of expression"):Xe(P,"Value expected")}function Et(P){return P.index-P.token.length+1}function Xe(P,J){var me=Et(P),Se=new SyntaxError(J+" (char "+me+")");return Se.char=me,Se}function jt(P,J){var me=Et(P),Se=new SyntaxError(J+" (char "+me+")");return Se.char=me,Se}return e.addConversion({from:"string",to:"Node",convert:g}),g}),c3="compile",Xne=["typed","parse"],Qne=z(c3,Xne,t=>{var{typed:e,parse:n}=t;return e(c3,{string:function(i){return n(i).compile()},"Array | Matrix":function(i){return pt(i,function(a){return n(a).compile()})}})}),f3="evaluate",Zne=["typed","parse"],Jne=z(f3,Zne,t=>{var{typed:e,parse:n}=t;return e(f3,{string:function(i){var a=Eh();return n(i).compile().evaluate(a)},"string, Map | Object":function(i,a){return n(i).compile().evaluate(a)},"Array | Matrix":function(i){var a=Eh();return pt(i,function(o){return n(o).compile().evaluate(a)})},"Array | Matrix, Map | Object":function(i,a){return pt(i,function(o){return n(o).compile().evaluate(a)})}})}),ere="Parser",tre=["evaluate","parse"],nre=z(ere,tre,t=>{var{evaluate:e,parse:n}=t;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Eh(),writable:!1})}r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(a){return e(a,this.scope)},r.prototype.get=function(a){if(this.scope.has(a))return this.scope.get(a)},r.prototype.getAll=function(){return Cq(this.scope)},r.prototype.getAllAsMap=function(){return this.scope};function i(a){if(a.length===0)return!1;for(var o=0;o<a.length;o++){var s=a.charAt(o-1),u=a.charAt(o),l=a.charAt(o+1),c=n.isAlpha(u,s,l)||o>0&&n.isDigit(u);if(!c)return!1}return!0}return r.prototype.set=function(a,o){if(!i(a))throw new Error("Invalid variable name: '".concat(a,"'. Variable names must follow the specified rules."));return this.scope.set(a,o),o},r.prototype.remove=function(a){this.scope.delete(a)},r.prototype.clear=function(){this.scope.clear()},r},{isClass:!0}),d3="parser",rre=["typed","Parser"],ire=z(d3,rre,t=>{var{typed:e,Parser:n}=t;return e(d3,{"":function(){return new n}})}),h3="lup",are=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],ore=z(h3,are,t=>{var{typed:e,matrix:n,abs:r,addScalar:i,divideScalar:a,multiplyScalar:o,subtractScalar:s,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:h}=t;return e(h3,{DenseMatrix:function(v){return p(v)},SparseMatrix:function(v){return m(v)},Array:function(v){var x=n(v),g=p(x);return{L:g.L.valueOf(),U:g.U.valueOf(),p:g.p}}});function p(y){var v=y._size[0],x=y._size[1],g=Math.min(v,x),b=ut(y._data),w=[],_=[v,g],E=[],C=[g,x],N,D,A,T=[];for(N=0;N<v;N++)T[N]=N;for(D=0;D<x;D++){if(D>0)for(N=0;N<v;N++){var R=Math.min(N,D),F=0;for(A=0;A<R;A++)F=i(F,o(b[N][A],b[A][D]));b[N][D]=s(b[N][D],F)}var O=D,I=0,M=0;for(N=D;N<v;N++){var B=b[N][D],k=r(B);u(k,I)&&(O=N,I=k,M=B)}if(D!==O&&(T[D]=[T[O],T[O]=T[D]][0],f._swapRows(D,O,b)),D<v)for(N=D+1;N<v;N++){var j=b[N][D];l(j,0)||(b[N][D]=a(b[N][D],M))}}for(D=0;D<x;D++)for(N=0;N<v;N++){if(D===0&&(N<x&&(E[N]=[]),w[N]=[]),N<D){N<x&&(E[N][D]=b[N][D]),D<v&&(w[N][D]=0);continue}if(N===D){N<x&&(E[N][D]=b[N][D]),D<v&&(w[N][D]=1);continue}N<x&&(E[N][D]=0),D<v&&(w[N][D]=b[N][D])}var Y=new f({data:w,size:_}),q=new f({data:E,size:C}),L=[];for(N=0,g=T.length;N<g;N++)L[T[N]]=N;return{L:Y,U:q,p:L,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function m(y){var v=y._size[0],x=y._size[1],g=Math.min(v,x),b=y._values,w=y._index,_=y._ptr,E=[],C=[],N=[],D=[v,g],A=[],T=[],R=[],F=[g,x],O,I,M,B=[],k=[];for(O=0;O<v;O++)B[O]=O,k[O]=O;var j=function(L,ne){var fe=k[L],te=k[ne];B[fe]=ne,B[te]=L,k[L]=te,k[ne]=fe},Y=function(){var L=new h;I<v&&(N.push(E.length),E.push(1),C.push(I)),R.push(A.length);var ne=_[I],fe=_[I+1];for(M=ne;M<fe;M++)O=w[M],L.set(B[O],b[M]);I>0&&L.forEach(0,I-1,function(U,Q){d._forEachRow(U,E,C,N,function(re,ie){re>U&&L.accumulate(re,c(o(ie,Q)))})});var te=I,oe=L.get(I),G=r(oe);L.forEach(I+1,v-1,function(U,Q){var re=r(Q);u(re,G)&&(te=U,G=re,oe=Q)}),I!==te&&(d._swapRows(I,te,D[1],E,C,N),d._swapRows(I,te,F[1],A,T,R),L.swap(I,te),j(I,te)),L.forEach(0,v-1,function(U,Q){U<=I?(A.push(Q),T.push(U)):(Q=a(Q,oe),l(Q,0)||(E.push(Q),C.push(U)))})};for(I=0;I<x;I++)Y();return R.push(A.length),N.push(E.length),{L:new d({values:E,index:C,ptr:N,size:D}),U:new d({values:A,index:T,ptr:R,size:F}),p:B,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),p3="qr",sre=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],ure=z(p3,sre,t=>{var{typed:e,matrix:n,zeros:r,identity:i,isZero:a,equal:o,sign:s,sqrt:u,conj:l,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:h,subtractScalar:p,complex:m}=t;return zn(e(p3,{DenseMatrix:function(b){return v(b)},SparseMatrix:function(b){return x()},Array:function(b){var w=n(b),_=v(w);return{Q:_.Q.valueOf(),R:_.R.valueOf()}}}),{_denseQRimpl:y});function y(g){var b=g._size[0],w=g._size[1],_=i([b],"dense"),E=_._data,C=g.clone(),N=C._data,D,A,T,R=r([b],"");for(T=0;T<Math.min(w,b);++T){var F=N[T][T],O=c(o(F,0)?1:s(F)),I=l(O),M=0;for(D=T;D<b;D++)M=f(M,h(N[D][T],l(N[D][T])));var B=h(O,u(M));if(!a(B)){var k=p(F,B);for(R[T]=1,D=T+1;D<b;D++)R[D]=d(N[D][T],k);var j=c(l(d(k,B))),Y=void 0;for(A=T;A<w;A++){for(Y=0,D=T;D<b;D++)Y=f(Y,h(l(R[D]),N[D][A]));for(Y=h(Y,j),D=T;D<b;D++)N[D][A]=h(p(N[D][A],h(R[D],Y)),I)}for(D=0;D<b;D++){for(Y=0,A=T;A<b;A++)Y=f(Y,h(E[D][A],R[A]));for(Y=h(Y,j),A=T;A<b;++A)E[D][A]=d(p(E[D][A],h(Y,l(R[A]))),I)}}}return{Q:_,R:C,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function v(g){var b=y(g),w=b.R._data;if(g._data.length>0)for(var _=w[0][0].type==="Complex"?m(0):0,E=0;E<w.length;++E)for(var C=0;C<E&&C<(w[0]||[]).length;++C)w[E][C]=_;return b}function x(g){throw new Error("qr not implemented for sparse matrices yet")}});function lre(t,e,n,r){t._values;for(var i=t._index,a=t._ptr,o=t._size,s=t._datatype,u=o[0],l=o[1],c=null,f=[],d=[],h=0,p=0;p<l;p++){d[p]=h;for(var m=n?n[p]:p,y=a[m],v=a[m+1],x=y;x<v;x++){var g=i[x];f[h]=g,h++}}return d[l]=h,t.createSparseMatrix({values:c,index:f,ptr:d,size:[u,l],datatype:s})}function FB(t,e,n,r,i,a,o){var s=0;for(n[o]=t;s>=0;){var u=n[o+s],l=n[r+u];l===-1?(s--,a[e++]=u):(n[r+u]=n[i+l],++s,n[o+s]=l)}return e}function cre(t,e){if(!t)return null;var n=0,r,i=[],a=[],o=0,s=e,u=2*e;for(r=0;r<e;r++)a[o+r]=-1;for(r=e-1;r>=0;r--)t[r]!==-1&&(a[s+r]=a[o+t[r]],a[o+t[r]]=r);for(r=0;r<e;r++)t[r]===-1&&(n=FB(r,n,a,o,s,i,u));return i}function fre(t,e){if(!t)return null;var n=t._index,r=t._ptr,i=t._size,a=i[0],o=i[1],s=[],u=[],l=0,c=o,f,d;for(f=0;f<a;f++)u[c+f]=-1;for(var h=0;h<o;h++){s[h]=-1,u[l+h]=-1;for(var p=r[h],m=r[h+1],y=p;y<m;y++){var v=n[y];for(f=u[c+v];f!==-1&&f<h;f=d)d=u[l+f],u[l+f]=h,d===-1&&(s[f]=h);u[c+v]=h}}return s}function dre(t,e,n){for(var r=t._values,i=t._index,a=t._ptr,o=t._size,s=o[1],u=0,l=0;l<s;l++){var c=a[l];for(a[l]=u;c<a[l+1];c++)e(i[c],l,r?r[c]:1,n)&&(i[u]=i[c],r&&(r[u]=r[c]),u++)}return a[s]=u,i.splice(u,i.length-u),r&&r.splice(u,r.length-u),u}function gs(t){return-t-2}var hre="csAmd",pre=["add","multiply","transpose"],mre=z(hre,pre,t=>{var{add:e,multiply:n,transpose:r}=t;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,h=d[0],p=d[1],m=0,y=Math.max(16,10*Math.sqrt(p));y=Math.min(p-2,y);var v=i(c,f,h,p,y);dre(v,u,null);for(var x=v._index,g=v._ptr,b=g[p],w=[],_=[],E=0,C=p+1,N=2*(p+1),D=3*(p+1),A=4*(p+1),T=5*(p+1),R=6*(p+1),F=7*(p+1),O=w,I=a(p,g,_,E,D,O,N,F,C,R,A,T),M=o(p,g,_,T,A,R,y,C,D,O,N),B=0,k,j,Y,q,L,ne,fe,te,oe,G,U,Q,re,ie,de,he;M<p;){for(Y=-1;B<p&&(Y=_[D+B])===-1;B++);_[N+Y]!==-1&&(O[_[N+Y]]=-1),_[D+B]=_[N+Y];var $=_[A+Y],K=_[C+Y];M+=K;var ue=0;_[C+Y]=-K;var ce=g[Y],ge=$===0?ce:b,Ce=ge;for(q=1;q<=$+1;q++){for(q>$?(ne=Y,fe=ce,te=_[E+Y]-$):(ne=x[ce++],fe=g[ne],te=_[E+ne]),L=1;L<=te;L++)k=x[fe++],!((oe=_[C+k])<=0)&&(ue+=oe,_[C+k]=-oe,x[Ce++]=k,_[N+k]!==-1&&(O[_[N+k]]=O[k]),O[k]!==-1?_[N+O[k]]=_[N+k]:_[D+_[T+k]]=_[N+k]);ne!==Y&&(g[ne]=gs(Y),_[R+ne]=0)}for($!==0&&(b=Ce),_[T+Y]=ue,g[Y]=ge,_[E+Y]=Ce-ge,_[A+Y]=-2,I=s(I,m,_,R,p),G=ge;G<Ce;G++)if(k=x[G],!((U=_[A+k])<=0)){oe=-_[C+k];var Ae=I-oe;for(ce=g[k],Q=g[k]+U-1;ce<=Q;ce++)ne=x[ce],_[R+ne]>=I?_[R+ne]-=oe:_[R+ne]!==0&&(_[R+ne]=_[T+ne]+Ae)}for(G=ge;G<Ce;G++){for(k=x[G],Q=g[k],re=Q+_[A+k]-1,ie=Q,de=0,he=0,ce=Q;ce<=re;ce++)if(ne=x[ce],_[R+ne]!==0){var Pe=_[R+ne]-I;Pe>0?(he+=Pe,x[ie++]=ne,de+=ne):(g[ne]=gs(Y),_[R+ne]=0)}_[A+k]=ie-Q+1;var H=ie,ee=Q+_[E+k];for(ce=re+1;ce<ee;ce++){j=x[ce];var le=_[C+j];le<=0||(he+=le,x[ie++]=j,de+=j)}he===0?(g[k]=gs(Y),oe=-_[C+k],ue-=oe,K+=oe,M+=oe,_[C+k]=0,_[A+k]=-1):(_[T+k]=Math.min(_[T+k],he),x[ie]=x[H],x[H]=x[Q],x[Q]=Y,_[E+k]=ie-Q+1,de=(de<0?-de:de)%p,_[N+k]=_[F+de],_[F+de]=k,O[k]=de)}for(_[T+Y]=ue,m=Math.max(m,ue),I=s(I+m,m,_,R,p),G=ge;G<Ce;G++)if(k=x[G],!(_[C+k]>=0))for(de=O[k],k=_[F+de],_[F+de]=-1;k!==-1&&_[N+k]!==-1;k=_[N+k],I++){for(te=_[E+k],U=_[A+k],ce=g[k]+1;ce<=g[k]+te-1;ce++)_[R+x[ce]]=I;var pe=k;for(j=_[N+k];j!==-1;){var be=_[E+j]===te&&_[A+j]===U;for(ce=g[j]+1;be&&ce<=g[j]+te-1;ce++)_[R+x[ce]]!==I&&(be=0);be?(g[j]=gs(k),_[C+k]+=_[C+j],_[C+j]=0,_[A+j]=-1,j=_[N+j],_[N+pe]=j):(pe=j,j=_[N+j])}}for(ce=ge,G=ge;G<Ce;G++)k=x[G],!((oe=-_[C+k])<=0)&&(_[C+k]=oe,he=_[T+k]+ue-oe,he=Math.min(he,p-M-oe),_[D+he]!==-1&&(O[_[D+he]]=k),_[N+k]=_[D+he],O[k]=-1,_[D+he]=k,B=Math.min(B,he),_[T+k]=he,x[ce++]=k);_[C+Y]=K,(_[E+Y]=ce-ge)===0&&(g[Y]=-1,_[R+Y]=0),$!==0&&(b=ce)}for(k=0;k<p;k++)g[k]=gs(g[k]);for(j=0;j<=p;j++)_[D+j]=-1;for(j=p;j>=0;j--)_[C+j]>0||(_[N+j]=_[D+g[j]],_[D+g[j]]=j);for(ne=p;ne>=0;ne--)_[C+ne]<=0||g[ne]!==-1&&(_[N+ne]=_[D+g[ne]],_[D+g[ne]]=ne);for(Y=0,k=0;k<=p;k++)g[k]===-1&&(Y=FB(k,Y,_,D,N,w,R));return w.splice(w.length-1,1),w};function i(l,c,f,d,h){var p=r(c);if(l===1&&d===f)return e(c,p);if(l===2){for(var m=p._index,y=p._ptr,v=0,x=0;x<f;x++){var g=y[x];if(y[x]=v,!(y[x+1]-g>h))for(var b=y[x+1];g<b;g++)m[v++]=m[g]}return y[f]=v,c=r(p),n(p,c)}return n(p,c)}function a(l,c,f,d,h,p,m,y,v,x,g,b){for(var w=0;w<l;w++)f[d+w]=c[w+1]-c[w];f[d+l]=0;for(var _=0;_<=l;_++)f[h+_]=-1,p[_]=-1,f[m+_]=-1,f[y+_]=-1,f[v+_]=1,f[x+_]=1,f[g+_]=0,f[b+_]=f[d+_];var E=s(0,0,f,x,l);return f[g+l]=-2,c[l]=-1,f[x+l]=0,E}function o(l,c,f,d,h,p,m,y,v,x,g){for(var b=0,w=0;w<l;w++){var _=f[d+w];if(_===0)f[h+w]=-2,b++,c[w]=-1,f[p+w]=0;else if(_>m)f[y+w]=0,f[h+w]=-1,b++,c[w]=gs(l),f[y+l]++;else{var E=f[v+_];E!==-1&&(x[E]=w),f[g+w]=f[v+_],f[v+_]=w}}return b}function s(l,c,f,d,h){if(l<2||l+c<0){for(var p=0;p<h;p++)f[d+p]!==0&&(f[d+p]=1);l=2}return l}function u(l,c){return l!==c}});function vre(t,e,n,r,i,a,o){var s,u,l=0,c;if(t<=e||n[r+e]<=n[i+t])return-1;n[i+t]=n[r+e];var f=n[a+t];if(n[a+t]=e,f===-1)l=1,c=t;else{for(l=2,c=f;c!==n[o+c];c=n[o+c]);for(s=f;s!==c;s=u)u=n[o+s],n[o+s]=c}return{jleaf:l,q:c}}var gre="csCounts",yre=["transpose"],xre=z(gre,yre,t=>{var{transpose:e}=t;return function(n,r,i,a){if(!n||!r||!i)return null;var o=n._size,s=o[0],u=o[1],l,c,f,d,h,p,m,y=4*u+(a?u+s+1:0),v=[],x=0,g=u,b=2*u,w=3*u,_=4*u,E=5*u+1;for(f=0;f<y;f++)v[f]=-1;var C=[],N=e(n),D=N._index,A=N._ptr;for(f=0;f<u;f++)for(c=i[f],C[c]=v[w+c]===-1?1:0;c!==-1&&v[w+c]===-1;c=r[c])v[w+c]=f;if(a){for(f=0;f<u;f++)v[i[f]]=f;for(l=0;l<s;l++){for(f=u,p=A[l],m=A[l+1],h=p;h<m;h++)f=Math.min(f,v[D[h]]);v[E+l]=v[_+f],v[_+f]=l}}for(l=0;l<u;l++)v[x+l]=l;for(f=0;f<u;f++){for(c=i[f],r[c]!==-1&&C[r[c]]--,d=a?v[_+f]:c;d!==-1;d=a?v[E+d]:-1)for(h=A[d];h<A[d+1];h++){l=D[h];var T=vre(l,c,v,w,g,b,x);T.jleaf>=1&&C[c]++,T.jleaf===2&&C[T.q]--}r[c]!==-1&&(v[x+c]=r[c])}for(c=0;c<u;c++)r[c]!==-1&&(C[r[c]]+=C[c]);return C}}),bre="csSqr",wre=["add","multiply","transpose"],_re=z(bre,wre,t=>{var{add:e,multiply:n,transpose:r}=t,i=mre({add:e,multiply:n,transpose:r}),a=xre({transpose:r});return function(u,l,c){var f=l._ptr,d=l._size,h=d[1],p,m={};if(m.q=i(u,l),u&&!m.q)return null;if(c){var y=u?lre(l,null,m.q):l;m.parent=fre(y);var v=cre(m.parent,h);if(m.cp=a(y,m.parent,v,1),y&&m.parent&&m.cp&&o(y,m))for(m.unz=0,p=0;p<h;p++)m.unz+=m.cp[p]}else m.unz=4*f[h]+h,m.lnz=m.unz;return m};function o(s,u){var l=s._ptr,c=s._index,f=s._size,d=f[0],h=f[1];u.pinv=[],u.leftmost=[];var p=u.parent,m=u.pinv,y=u.leftmost,v=[],x=0,g=d,b=d+h,w=d+2*h,_,E,C,N,D;for(E=0;E<h;E++)v[g+E]=-1,v[b+E]=-1,v[w+E]=0;for(_=0;_<d;_++)y[_]=-1;for(E=h-1;E>=0;E--)for(N=l[E],D=l[E+1],C=N;C<D;C++)y[c[C]]=E;for(_=d-1;_>=0;_--)m[_]=-1,E=y[_],E!==-1&&(v[w+E]++===0&&(v[b+E]=_),v[x+_]=v[g+E],v[g+E]=_);for(u.lnz=0,u.m2=d,E=0;E<h;E++)if(_=v[g+E],u.lnz++,_<0&&(_=u.m2++),m[_]=E,!(--w[E]<=0)){u.lnz+=v[w+E];var A=p[E];A!==-1&&(v[w+A]===0&&(v[b+A]=v[b+E]),v[x+v[b+E]]=v[g+A],v[g+A]=v[x+_],v[w+A]+=v[w+E])}for(_=0;_<d;_++)m[_]<0&&(m[_]=E++);return!0}});function Xb(t,e){return t[e]<0}function PB(t,e){t[e]=gs(t[e])}function m3(t){return t<0?gs(t):t}function Ere(t,e,n,r,i){var a=e._index,o=e._ptr,s=e._size,u=s[1],l,c,f,d=0;for(r[0]=t;d>=0;){t=r[d];var h=i?i[t]:t;Xb(o,t)||(PB(o,t),r[u+d]=h<0?0:m3(o[h]));var p=1;for(c=r[u+d],f=h<0?0:m3(o[h+1]);c<f;c++)if(l=a[c],!Xb(o,l)){r[u+d]=c,r[++d]=l,p=0;break}p&&(d--,r[--n]=t)}return n}function Cre(t,e,n,r,i){var a=t._ptr,o=t._size,s=e._index,u=e._ptr,l=o[1],c,f,d,h=l;for(f=u[n],d=u[n+1],c=f;c<d;c++){var p=s[c];Xb(a,p)||(h=Ere(p,t,h,r,i))}for(c=h;c<l;c++)PB(a,r[c]);return h}var Nre="csSpsolve",Sre=["divideScalar","multiply","subtract"],Dre=z(Nre,Sre,t=>{var{divideScalar:e,multiply:n,subtract:r}=t;return function(a,o,s,u,l,c,f){var d=a._values,h=a._index,p=a._ptr,m=a._size,y=m[1],v=o._values,x=o._index,g=o._ptr,b,w,_,E,C=Cre(a,o,s,u,c);for(b=C;b<y;b++)l[u[b]]=0;for(w=g[s],_=g[s+1],b=w;b<_;b++)l[x[b]]=v[b];for(var N=C;N<y;N++){var D=u[N],A=c?c[D]:D;if(!(A<0))for(w=p[A],_=p[A+1],l[D]=e(l[D],d[f?w:_-1]),b=f?w+1:w,E=f?_:_-1;b<E;b++){var T=h[b];l[T]=r(l[T],n(d[b],l[D]))}}return C}}),Are="csLu",Tre=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],Mre=z(Are,Tre,t=>{var{abs:e,divideScalar:n,multiply:r,subtract:i,larger:a,largerEq:o,SparseMatrix:s}=t,u=Dre({divideScalar:n,multiply:r,subtract:i});return function(c,f,d){if(!c)return null;var h=c._size,p=h[1],m,y=100,v=100;f&&(m=f.q,y=f.lnz||y,v=f.unz||v);var x=[],g=[],b=[],w=new s({values:x,index:g,ptr:b,size:[p,p]}),_=[],E=[],C=[],N=new s({values:_,index:E,ptr:C,size:[p,p]}),D=[],A,T,R=[],F=[];for(A=0;A<p;A++)R[A]=0,D[A]=-1,b[A+1]=0;y=0,v=0;for(var O=0;O<p;O++){b[O]=y,C[O]=v;var I=m?m[O]:O,M=u(w,c,I,F,R,D,1),B=-1,k=-1;for(T=M;T<p;T++)if(A=F[T],D[A]<0){var j=e(R[A]);a(j,k)&&(k=j,B=A)}else E[v]=D[A],_[v++]=R[A];if(B===-1||k<=0)return null;D[I]<0&&o(e(R[I]),r(k,d))&&(B=I);var Y=R[B];for(E[v]=O,_[v++]=Y,D[B]=O,g[y]=B,x[y++]=1,T=M;T<p;T++)A=F[T],D[A]<0&&(g[y]=A,x[y++]=n(R[A],Y)),R[A]=0}for(b[p]=y,C[p]=v,T=0;T<y;T++)g[T]=D[g[T]];return x.splice(y,x.length-y),g.splice(y,g.length-y),_.splice(v,_.length-v),E.splice(v,E.length-v),{L:w,U:N,pinv:D}}}),v3="slu",Ire=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],kre=z(v3,Ire,t=>{var{typed:e,abs:n,add:r,multiply:i,transpose:a,divideScalar:o,subtract:s,larger:u,largerEq:l,SparseMatrix:c}=t,f=_re({add:r,multiply:i,transpose:a}),d=Mre({abs:n,divideScalar:o,multiply:i,subtract:s,larger:u,largerEq:l,SparseMatrix:c});return e(v3,{"SparseMatrix, number, number":function(p,m,y){if(!qe(m)||m<0||m>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(y<0||y>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var v=f(m,p,!1),x=d(p,v,y);return{L:x.L,U:x.U,p:x.pinv,q:v.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function g3(t,e){var n,r=e.length,i=[];if(t)for(n=0;n<r;n++)i[t[n]]=e[n];else for(n=0;n<r;n++)i[n]=e[n];return i}var y3="lusolve",Rre=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Fre=z(y3,Rre,t=>{var{typed:e,matrix:n,lup:r,slu:i,usolve:a,lsolve:o,DenseMatrix:s}=t,u=up({DenseMatrix:s});return e(y3,{"Array, Array | Matrix":function(d,h){d=n(d);var p=r(d),m=c(p.L,p.U,p.p,null,h);return m.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var p=r(d);return c(p.L,p.U,p.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var p=r(d);return c(p.L,p.U,p.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,p,m){var y=i(d,p,m);return c(y.L,y.U,y.p,y.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function l(f){if(Je(f))return f;if(Ht(f))return n(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,h,p,m){f=l(f),d=l(d),h&&(m=u(f,m,!0),m._data=g3(h,m._data));var y=o(f,m),v=a(d,y);return p&&(v._data=g3(p,v._data)),v}}),x3="polynomialRoot",Pre=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],Ore=z(x3,Pre,t=>{var{typed:e,isZero:n,equalScalar:r,add:i,subtract:a,multiply:o,divide:s,sqrt:u,unaryMinus:l,cbrt:c,typeOf:f,im:d,re:h}=t;return e(x3,{"number|Complex, ...number|Complex":(p,m)=>{for(var y=[p,...m];y.length>0&&n(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(m,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[l(s(y[0],y[1]))];case 3:{var[v,x,g]=y,b=o(2,g),w=o(x,x),_=o(4,g,v);if(r(w,_))return[s(l(x),b)];var E=u(a(w,_));return[s(a(E,x),b),s(a(l(E),x),b)]}case 4:{var[C,N,D,A]=y,T=l(o(3,A)),R=o(D,D),F=o(3,A,N),O=i(o(2,D,D,D),o(27,A,A,C)),I=o(9,A,D,N);if(r(R,F)&&r(O,I))return[s(D,T)];var M=a(R,F),B=a(O,I),k=i(o(18,A,D,N,C),o(D,D,N,N)),j=i(o(4,D,D,D,C),o(4,A,N,N,N),o(27,A,A,C,C));if(r(k,j))return[s(a(o(4,A,D,N),i(o(9,A,A,C),o(D,D,D))),o(A,M)),s(a(o(9,A,C),o(D,N)),o(2,M))];var Y;r(R,F)?Y=B:Y=s(i(B,u(a(o(B,B),o(4,M,M,M)))),2);var q=!0,L=c(Y,q).toArray().map(ne=>s(i(D,ne,s(M,ne)),T));return L.map(ne=>f(ne)==="Complex"&&r(h(ne),h(ne)+d(ne))?h(ne):ne)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),Bre="Help",Lre=["evaluate"],jre=z(Bre,Lre,t=>{var{evaluate:e}=t;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var r=this.doc||{},i=`
`;if(r.name&&(i+="Name: "+r.name+`

`),r.category&&(i+="Category: "+r.category+`

`),r.description&&(i+=`Description:
    `+r.description+`

`),r.syntax&&(i+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){i+=`Examples:
`;for(var a=!1,o=e("config()"),s={config:f=>(a=!0,e("config(newConfig)",{newConfig:f}))},u=0;u<r.examples.length;u++){var l=r.examples[u];i+="    "+l+`
`;var c=void 0;try{c=e(l,s)}catch(f){c=f}c!==void 0&&!UP(c)&&(i+="        "+xt(c,{precision:14})+`
`)}i+=`
`,a&&e("config(originalConfig)",{originalConfig:o})}return r.mayThrow&&r.mayThrow.length&&(i+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(i+="See also: "+r.seealso.join(", ")+`
`),i},n.prototype.toJSON=function(){var r=ut(this.doc);return r.mathjs="Help",r},n.fromJSON=function(r){var i={};return Object.keys(r).filter(a=>a!=="mathjs").forEach(a=>{i[a]=r[a]}),new n(i)},n.prototype.valueOf=n.prototype.toString,n},{isClass:!0}),$re="Chain",zre=["?on","math","typed"],Ure=z($re,zre,t=>{var{on:e,math:n,typed:r}=t;function i(l){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");WP(l)?this.value=l.value:this.value=l}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return xt(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(l){return new i(l.value)};function a(l,c){typeof c=="function"&&(i.prototype[l]=s(c))}function o(l,c){Lq(i.prototype,l,function(){var d=c();if(typeof d=="function")return s(d)})}function s(l){return function(){if(arguments.length===0)return new i(l(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(r.isTypedFunction(l)){var d=r.resolve(l,c);if(d.params.length===1)throw new Error("chain function "+l.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(l,c))}return new i(l.apply(l,c))}}i.createProxy=function(l,c){if(typeof l=="string")a(l,c);else{var f=function(p){Ue(l,p)&&u[p]===void 0&&o(p,()=>l[p])};for(var d in l)f(d)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(n),e&&e("import",function(l,c,f){f||o(l,c)}),i},{isClass:!0}),b3={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},Vre={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},Wre={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},qre={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},Hre={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},Gre={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},Kre={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},Yre={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},Xre={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},Qre={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},Zre={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},w3={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},Jre={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},eie={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tie={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},nie={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},rie={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},iie={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},aie={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},oie={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},sie={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},uie={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},lie={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},cie={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},fie={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},die={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},hie={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},pie={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},mie={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},vie={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},gie={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},yie={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},xie={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},bie={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},wie={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},_ie={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},Eie={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},Cie={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},Nie={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},Sie={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},Die={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},Aie={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},Tie={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},Mie={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},Iie={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},kie={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},Rie={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},Fie={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},Pie={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},Oie={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},Bie={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},Lie={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},jie={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},$ie={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},zie={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},Uie={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},Vie={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},Wie={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},qie={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},Hie={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},Gie={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},Kie={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},Yie={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},Xie={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},Qie={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},Zie={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},Jie={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax ≣ 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},eae={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},tae={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},nae={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},rae={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},iae={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},aae={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},oae={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},sae={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},uae={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},lae={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},cae={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},fae={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},dae={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},hae={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},pae={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},mae={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},vae={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},gae={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},yae={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},xae={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},bae={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},wae={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},_ae={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},Eae={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Cae={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Nae={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},Sae={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},Dae={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},Aae={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},Tae={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},Mae={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},Iae={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},kae={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},Rae={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},Fae={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},Pae={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},Oae={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},Bae={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},Lae={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},jae={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},$ae={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},zae={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},Uae={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},Vae={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},Wae={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},qae={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},Hae={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},Gae={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},Kae={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Yae={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},Xae={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},Qae={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},Zae={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Jae={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},eoe={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},toe={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},noe={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},roe={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},ioe={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},aoe={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},ooe={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},soe={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},uoe={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},loe={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore–Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},coe={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},foe={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},doe={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},hoe={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},poe={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},moe={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},voe={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},goe={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},yoe={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},xoe={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},boe={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},woe={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},_oe={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},Eoe={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},Coe={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},Noe={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},Soe={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},Doe={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},Aoe={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},Toe={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},Moe={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},Ioe={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},koe={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},Roe={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},Foe={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},Poe={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},Ooe={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},Boe={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},Loe={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},joe={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},$oe={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},zoe={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},Uoe={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},Voe={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},Woe={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},qoe={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},Hoe={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},Goe={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},Koe={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},Yoe={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},Xoe={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},Qoe={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},Zoe={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},Joe={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},ese={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},tse={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},nse={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},rse={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},ise={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},ase={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},ose={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},sse={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},use={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},lse={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},cse={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},fse={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},dse={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},hse={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},pse={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},mse={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},vse={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},gse={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},yse={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},xse={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},bse={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},wse={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},_se={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},Ese={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},Cse={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},Nse={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},Sse={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},Dse={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},Ase={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},Tse={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},Mse={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},Ise={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},kse={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},Rse={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},Fse={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},Pse={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},Ose={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},Bse={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},Lse={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},jse={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},$se={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},zse={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},Use={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},Vse={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},Wse={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},qse={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},Hse={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},Gse={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},Kse={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},Yse={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},Xse={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},Qse={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},Zse={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},Jse={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},eue={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},tue={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},nue={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},rue={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},iue={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},aue={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},oue={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},sue={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},uue={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},lue={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},cue={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},fue={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},due={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},hue={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},pue={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},mue={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},vue={bignumber:iie,bigint:aie,boolean:oie,complex:sie,createUnit:uie,fraction:lie,index:cie,matrix:fie,number:die,sparse:hie,splitUnit:pie,string:mie,unit:vie,e:b3,E:b3,false:Vre,i:Wre,Infinity:qre,LN2:Gre,LN10:Hre,LOG2E:Yre,LOG10E:Kre,NaN:Xre,null:Qre,pi:w3,PI:w3,phi:Zre,SQRT1_2:Jre,SQRT2:eie,tau:tie,true:nie,version:rie,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:bie,lsolve:_ie,lsolveAll:Eie,lup:Cie,lusolve:Nie,leafCount:wie,polynomialRoot:Sie,resolve:Tie,simplify:Mie,simplifyConstant:Iie,simplifyCore:kie,symbolicEqual:Fie,rationalize:Aie,slu:Rie,usolve:Pie,usolveAll:Oie,qr:Die,abs:Bie,add:Lie,cbrt:jie,ceil:$ie,cube:zie,divide:Uie,dotDivide:Vie,dotMultiply:Wie,dotPow:qie,exp:Hie,expm:Gie,expm1:Kie,fix:Yie,floor:Xie,gcd:Qie,hypot:Zie,lcm:eae,log:tae,log2:iae,log1p:rae,log10:nae,mod:aae,multiply:oae,norm:sae,nthRoot:uae,nthRoots:lae,pow:cae,round:fae,sign:dae,sqrt:hae,sqrtm:pae,square:yae,subtract:xae,unaryMinus:bae,unaryPlus:wae,xgcd:_ae,invmod:Jie,bitAnd:Eae,bitNot:Cae,bitOr:Nae,bitXor:Sae,leftShift:Dae,rightArithShift:Aae,rightLogShift:Tae,bellNumbers:Mae,catalan:Iae,composition:kae,stirlingS2:Rae,config:gie,import:yie,typed:xie,arg:Fae,conj:Pae,re:Bae,im:Oae,evaluate:Lae,help:jae,distance:$ae,intersect:zae,and:Uae,not:Vae,or:Wae,xor:qae,mapSlices:Hae,concat:Kae,count:Yae,cross:Xae,column:Gae,ctranspose:Qae,det:Zae,diag:Jae,diff:eoe,dot:toe,getMatrixDataType:ooe,identity:soe,filter:roe,flatten:ioe,forEach:aoe,inv:uoe,pinv:loe,eigs:noe,kron:coe,matrixFromFunction:hoe,matrixFromRows:poe,matrixFromColumns:doe,map:foe,ones:moe,partitionSelect:voe,range:goe,resize:xoe,reshape:yoe,rotate:boe,rotationMatrix:woe,row:_oe,size:Eoe,sort:Coe,squeeze:Noe,subset:Soe,trace:Doe,transpose:Aoe,zeros:Toe,fft:Moe,ifft:Ioe,sylvester:mae,schur:vae,lyap:gae,solveODE:mue,combinations:koe,combinationsWithRep:Roe,factorial:Foe,gamma:Poe,kldivergence:Boe,lgamma:Ooe,multinomial:Loe,permutations:joe,pickRandom:$oe,random:zoe,randomInt:Uoe,compare:Voe,compareNatural:Woe,compareText:qoe,deepEqual:Hoe,equal:Goe,equalText:Koe,larger:Yoe,largerEq:Xoe,smaller:Qoe,smallerEq:Zoe,unequal:Joe,setCartesian:ese,setDifference:tse,setDistinct:nse,setIntersect:rse,setIsSubset:ise,setMultiplicity:ase,setPowerset:ose,setSize:sse,setSymDifference:use,setUnion:lse,zpk2tf:cse,freqz:fse,erf:dse,zeta:hse,cumsum:Ese,mad:pse,max:mse,mean:vse,median:gse,min:yse,mode:xse,prod:bse,quantileSeq:wse,std:_se,sum:Cse,variance:Nse,corr:Sse,acos:Dse,acosh:Ase,acot:Tse,acoth:Mse,acsc:Ise,acsch:kse,asec:Rse,asech:Fse,asin:Pse,asinh:Ose,atan:Bse,atanh:jse,atan2:Lse,cos:$se,cosh:zse,cot:Use,coth:Vse,csc:Wse,csch:qse,sec:Hse,sech:Gse,sin:Kse,sinh:Yse,tan:Xse,tanh:Qse,to:Zse,clone:eue,format:tue,bin:Jse,oct:due,hex:rue,isNaN:aue,isInteger:iue,isNegative:oue,isNumeric:sue,hasNumericValue:nue,isPositive:uue,isPrime:lue,isZero:cue,print:hue,typeOf:pue,numeric:fue},_3="help",gue=["typed","mathWithTransform","Help"],yue=z(_3,gue,t=>{var{typed:e,mathWithTransform:n,Help:r}=t;return e(_3,{any:function(a){var o,s=a;if(typeof a!="string"){for(o in n)if(Ue(n,o)&&a===n[o]){s=o;break}}var u=Hr(vue,s);if(!u){var l=typeof s=="function"?s.name:s;throw new Error('No documentation found on "'+l+'"')}return new r(u)}})}),E3="chain",xue=["typed","Chain"],bue=z(E3,xue,t=>{var{typed:e,Chain:n}=t;return e(E3,{"":function(){return new n},any:function(i){return new n(i)}})}),C3="det",wue=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],_ue=z(C3,wue,t=>{var{typed:e,matrix:n,subtractScalar:r,multiply:i,divideScalar:a,isZero:o,unaryMinus:s}=t;return e(C3,{any:function(c){return ut(c)},"Array | Matrix":function(c){var f;switch(Je(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return ut(c);case 1:if(f[0]===1)return ut(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+xt(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+xt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+xt(f)+")")}}});function u(l,c,f){if(c===1)return ut(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((E,C)=>C),p=0;p<c;p++){var m=h[p];if(o(l[m][p])){var y=void 0;for(y=p+1;y<c;y++)if(!o(l[h[y]][p])){m=h[y],h[y]=h[p],h[p]=m,d=!d;break}if(y===c)return l[m][p]}for(var v=l[m][p],x=p===0?1:l[h[p-1]][p-1],g=p+1;g<c;g++)for(var b=h[g],w=p+1;w<c;w++)l[b][w]=a(r(i(l[b][w],v),i(l[b][p],l[m][w])),x)}var _=l[h[c-1]][c-1];return d?s(_):_}}),N3="inv",Eue=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Cue=z(N3,Eue,t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:i,multiply:a,unaryMinus:o,det:s,identity:u,abs:l}=t;return e(N3,{"Array | Matrix":function(d){var h=Je(d)?d.size():ot(d);switch(h.length){case 1:if(h[0]===1)return Je(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+xt(h)+")");case 2:{var p=h[0],m=h[1];if(p===m)return Je(d)?n(c(d.valueOf(),p,m),d.storage()):c(d,p,m);throw new RangeError("Matrix must be square (size: "+xt(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+xt(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var p,m,y,v,x;if(d===1){if(v=f[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,v)]]}else if(d===2){var g=s(f);if(g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],g),r(o(f[0][1]),g)],[r(o(f[1][0]),g),r(f[0][0],g)]]}else{var b=f.concat();for(p=0;p<d;p++)b[p]=b[p].concat();for(var w=u(d).valueOf(),_=0;_<h;_++){var E=l(b[_][_]),C=_;for(p=_+1;p<d;)l(b[p][_])>E&&(E=l(b[p][_]),C=p),p++;if(E===0)throw Error("Cannot calculate inverse, determinant is zero");p=C,p!==_&&(x=b[_],b[_]=b[p],b[p]=x,x=w[_],w[_]=w[p],w[p]=x);var N=b[_],D=w[_];for(p=0;p<d;p++){var A=b[p],T=w[p];if(p!==_){if(A[_]!==0){for(y=r(o(A[_]),N[_]),m=_;m<h;m++)A[m]=i(A[m],a(y,N[m]));for(m=0;m<h;m++)T[m]=i(T[m],a(y,D[m]))}}else{for(y=N[_],m=_;m<h;m++)A[m]=r(A[m],y);for(m=0;m<h;m++)T[m]=r(T[m],y)}}}return w}}}),S3="pinv",Nue=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],Sue=z(S3,Nue,t=>{var{typed:e,matrix:n,inv:r,deepEqual:i,equal:a,dotDivide:o,dot:s,ctranspose:u,divideScalar:l,multiply:c,add:f,Complex:d}=t;return e(S3,{"Array | Matrix":function(g){var b=Je(g)?g.size():ot(g);switch(b.length){case 1:return v(g)?u(g):b[0]===1?r(g):o(u(g),s(g,g));case 2:{if(v(g))return u(g);var w=b[0],_=b[1];if(w===_)try{return r(g)}catch(E){if(!(E instanceof Error&&E.message.match(/Cannot calculate inverse, determinant is zero/)))throw E}return Je(g)?n(h(g.valueOf(),w,_),g.storage()):h(g,w,_)}default:throw new RangeError("Matrix must be two dimensional (size: "+xt(b)+")")}},any:function(g){return a(g,0)?ut(g):l(1,g)}});function h(x,g,b){var{C:w,F:_}=m(x,g,b),E=c(r(c(u(w),w)),u(w)),C=c(u(_),r(c(_,u(_))));return c(C,E)}function p(x,g,b){for(var w=ut(x),_=0,E=0;E<g;E++){if(b<=_)return w;for(var C=E;y(w[C][_]);)if(C++,g===C&&(C=E,_++,b===_))return w;[w[C],w[E]]=[w[E],w[C]];for(var N=w[E][_],D=0;D<b;D++)w[E][D]=o(w[E][D],N);for(var A=0;A<g;A++)if(A!==E){N=w[A][_];for(var T=0;T<b;T++)w[A][T]=f(w[A][T],c(-1,c(N,w[E][T])))}_++}return w}function m(x,g,b){var w=p(x,g,b),_=x.map((C,N)=>C.filter((D,A)=>A<g&&!y(s(w[A],w[A])))),E=w.filter((C,N)=>!y(s(w[N],w[N])));return{C:_,F:E}}function y(x){return a(f(x,d(1,1)),f(0,d(1,1)))}function v(x){return i(f(x,d(1,1)),f(c(x,0),d(1,1)))}});function Due(t){var{addScalar:e,subtract:n,flatten:r,multiply:i,multiplyScalar:a,divideScalar:o,sqrt:s,abs:u,bignumber:l,diag:c,size:f,reshape:d,inv:h,qr:p,usolve:m,usolveAll:y,equal:v,complex:x,larger:g,smaller:b,matrixFromColumns:w,dot:_}=t;function E(q,L,ne,fe){var te=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,oe=C(q,L,ne,fe,te);N(q,L,ne,fe,te,oe);var{values:G,C:U}=D(q,L,ne,fe,te);if(te){var Q=A(q,L,U,oe,G,ne,fe);return{values:G,eigenvectors:Q}}return{values:G}}function C(q,L,ne,fe,te){var oe=fe==="BigNumber",G=fe==="Complex",U=oe?l(0):0,Q=oe?l(1):G?x(1):1,re=oe?l(1):1,ie=oe?l(10):2,de=a(ie,ie),he;te&&(he=Array(L).fill(Q));for(var $=!1;!$;){$=!0;for(var K=0;K<L;K++){for(var ue=U,ce=U,ge=0;ge<L;ge++)K!==ge&&(ue=e(ue,u(q[ge][K])),ce=e(ce,u(q[K][ge])));if(!v(ue,0)&&!v(ce,0)){for(var Ce=re,Ae=ue,Pe=o(ce,ie),H=a(ce,ie);b(Ae,Pe);)Ae=a(Ae,de),Ce=a(Ce,ie);for(;g(Ae,H);)Ae=o(Ae,de),Ce=o(Ce,ie);var ee=b(o(e(Ae,ce),Ce),a(e(ue,ce),.95));if(ee){$=!1;for(var le=o(1,Ce),pe=0;pe<L;pe++)K!==pe&&(q[K][pe]=a(q[K][pe],le),q[pe][K]=a(q[pe][K],Ce));te&&(he[K]=a(he[K],le))}}}}return te?c(he):null}function N(q,L,ne,fe,te,oe){var G=fe==="BigNumber",U=fe==="Complex",Q=G?l(0):U?x(0):0;G&&(ne=l(ne));for(var re=0;re<L-2;re++){for(var ie=0,de=Q,he=re+1;he<L;he++){var $=q[he][re];b(u(de),u($))&&(de=$,ie=he)}if(!b(u(de),ne)){if(ie!==re+1){var K=q[ie];q[ie]=q[re+1],q[re+1]=K;for(var ue=0;ue<L;ue++){var ce=q[ue][ie];q[ue][ie]=q[ue][re+1],q[ue][re+1]=ce}if(te){var ge=oe[ie];oe[ie]=oe[re+1],oe[re+1]=ge}}for(var Ce=re+2;Ce<L;Ce++){var Ae=o(q[Ce][re],de);if(Ae!==0){for(var Pe=0;Pe<L;Pe++)q[Ce][Pe]=n(q[Ce][Pe],a(Ae,q[re+1][Pe]));for(var H=0;H<L;H++)q[H][re+1]=e(q[H][re+1],a(Ae,q[H][Ce]));if(te)for(var ee=0;ee<L;ee++)oe[Ce][ee]=n(oe[Ce][ee],a(Ae,oe[re+1][ee]))}}}}return oe}function D(q,L,ne,fe,te){var oe=fe==="BigNumber",G=fe==="Complex",U=oe?l(1):G?x(1):1;oe&&(ne=l(ne));for(var Q=ut(q),re=[],ie=L,de=[],he=te?c(Array(L).fill(U)):void 0,$=te?c(Array(ie).fill(U)):void 0,K=0;K<=100;){K+=1;for(var ue=Q[ie-1][ie-1],ce=0;ce<ie;ce++)Q[ce][ce]=n(Q[ce][ce],ue);var{Q:ge,R:Ce}=p(Q);Q=i(Ce,ge);for(var Ae=0;Ae<ie;Ae++)Q[Ae][Ae]=e(Q[Ae][Ae],ue);if(te&&($=i($,ge)),ie===1||b(u(Q[ie-1][ie-2]),ne)){K=0,re.push(Q[ie-1][ie-1]),te&&(de.unshift([[1]]),F($,L),he=i(he,$),ie>1&&($=c(Array(ie-1).fill(U)))),ie-=1,Q.pop();for(var Pe=0;Pe<ie;Pe++)Q[Pe].pop()}else if(ie===2||b(u(Q[ie-2][ie-3]),ne)){K=0;var H=T(Q[ie-2][ie-2],Q[ie-2][ie-1],Q[ie-1][ie-2],Q[ie-1][ie-1]);re.push(...H),te&&(de.unshift(R(Q[ie-2][ie-2],Q[ie-2][ie-1],Q[ie-1][ie-2],Q[ie-1][ie-1],H[0],H[1],ne,fe)),F($,L),he=i(he,$),ie>2&&($=c(Array(ie-2).fill(U)))),ie-=2,Q.pop(),Q.pop();for(var ee=0;ee<ie;ee++)Q[ee].pop(),Q[ee].pop()}if(ie===0)break}if(re.sort((be,xe)=>+n(u(be),u(xe))),K>100){var le=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+re.join(", "));throw le.values=re,le.vectors=[],le}var pe=te?i(he,O(de,L)):void 0;return{values:re,C:pe}}function A(q,L,ne,fe,te,oe,G){var U=h(ne),Q=i(U,q,ne),re=G==="BigNumber",ie=G==="Complex",de=re?l(0):ie?x(0):0,he=re?l(1):ie?x(1):1,$=[],K=[];for(var ue of te){var ce=I($,ue,v);ce===-1?($.push(ue),K.push(1)):K[ce]+=1}for(var ge=[],Ce=$.length,Ae=Array(L).fill(de),Pe=c(Array(L).fill(he)),H=function(){var pe=$[ee],be=n(Q,i(pe,Pe)),xe=y(be,Ae);for(xe.shift();xe.length<K[ee];){var Fe=M(be,L,xe,oe,G);if(Fe===null)break;xe.push(Fe)}var Te=i(h(fe),ne);xe=xe.map(Oe=>i(Te,Oe)),ge.push(...xe.map(Oe=>({value:pe,vector:r(Oe)})))},ee=0;ee<Ce;ee++)H();return ge}function T(q,L,ne,fe){var te=e(q,fe),oe=n(a(q,fe),a(L,ne)),G=a(te,.5),U=a(s(n(a(te,te),a(4,oe))),.5);return[e(G,U),n(G,U)]}function R(q,L,ne,fe,te,oe,G,U){var Q=U==="BigNumber",re=U==="Complex",ie=Q?l(0):re?x(0):0,de=Q?l(1):re?x(1):1;if(b(u(ne),G))return[[de,ie],[ie,de]];if(g(u(n(te,oe)),G))return[[n(te,fe),n(oe,fe)],[ne,ne]];var he=n(q,te),$=n(fe,te);return b(u(L),G)&&b(u($),G)?[[he,de],[ne,ie]]:[[L,ie],[$,de]]}function F(q,L){for(var ne=0;ne<q.length;ne++)q[ne].push(...Array(L-q[ne].length).fill(0));for(var fe=q.length;fe<L;fe++)q.push(Array(L).fill(0)),q[fe][fe]=1;return q}function O(q,L){for(var ne=[],fe=0;fe<L;fe++)ne[fe]=Array(L).fill(0);var te=0;for(var oe of q){for(var G=oe.length,U=0;U<G;U++)for(var Q=0;Q<G;Q++)ne[te+U][te+Q]=oe[U][Q];te+=G}return ne}function I(q,L,ne){for(var fe=0;fe<q.length;fe++)if(ne(q[fe],L))return fe;return-1}function M(q,L,ne,fe,te){for(var oe=te==="BigNumber"?l(1e3):1e3,G,U=0;U<5;++U){G=B(L,ne,te);try{G=m(q,G)}catch{continue}if(g(j(G),oe))break}if(U>=5)return null;for(U=0;;){var Q=m(q,G);if(b(j(k(G,[Q])),fe))break;if(++U>=10)return null;G=Y(Q)}return G}function B(q,L,ne){var fe=ne==="BigNumber",te=ne==="Complex",oe=Array(q).fill(0).map(G=>2*Math.random()-1);return fe&&(oe=oe.map(G=>l(G))),te&&(oe=oe.map(G=>x(G))),oe=k(oe,L),Y(oe,ne)}function k(q,L){var ne=f(q);for(var fe of L)fe=d(fe,ne),q=n(q,i(o(_(fe,q),_(fe,fe)),fe));return q}function j(q){return u(s(_(q,q)))}function Y(q,L){var ne=L==="BigNumber",fe=L==="Complex",te=ne?l(1):fe?x(1):1;return i(o(te,j(q)),q)}return E}function Aue(t){var{config:e,addScalar:n,subtract:r,abs:i,atan:a,cos:o,sin:s,multiplyScalar:u,inv:l,bignumber:c,multiply:f,add:d}=t;function h(N,D){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,T=arguments.length>3?arguments[3]:void 0,R=arguments.length>4?arguments[4]:void 0;if(T==="number")return p(N,A,R);if(T==="BigNumber")return m(N,A,R);throw TypeError("Unsupported data type: "+T)}function p(N,D,A){var T=N.length,R=Math.abs(D/T),F,O;if(A){O=new Array(T);for(var I=0;I<T;I++)O[I]=Array(T).fill(0),O[I][I]=1}for(var M=_(N);Math.abs(M[1])>=Math.abs(R);){var B=M[0][0],k=M[0][1];F=y(N[B][B],N[k][k],N[B][k]),N=w(N,F,B,k),A&&(O=x(O,F,B,k)),M=_(N)}for(var j=Array(T).fill(0),Y=0;Y<T;Y++)j[Y]=N[Y][Y];return C(ut(j),O,A)}function m(N,D,A){var T=N.length,R=i(D/T),F,O;if(A){O=new Array(T);for(var I=0;I<T;I++)O[I]=Array(T).fill(0),O[I][I]=1}for(var M=E(N);i(M[1])>=i(R);){var B=M[0][0],k=M[0][1];F=v(N[B][B],N[k][k],N[B][k]),N=b(N,F,B,k),A&&(O=g(O,F,B,k)),M=E(N)}for(var j=Array(T).fill(0),Y=0;Y<T;Y++)j[Y]=N[Y][Y];return C(ut(j),O,A)}function y(N,D,A){var T=D-N;return Math.abs(T)<=e.relTol?Math.PI/4:.5*Math.atan(2*A/(D-N))}function v(N,D,A){var T=r(D,N);return i(T)<=e.relTol?c(-1).acos().div(4):u(.5,a(f(2,A,l(T))))}function x(N,D,A,T){for(var R=N.length,F=Math.cos(D),O=Math.sin(D),I=Array(R).fill(0),M=Array(R).fill(0),B=0;B<R;B++)I[B]=F*N[B][A]-O*N[B][T],M[B]=O*N[B][A]+F*N[B][T];for(var k=0;k<R;k++)N[k][A]=I[k],N[k][T]=M[k];return N}function g(N,D,A,T){for(var R=N.length,F=o(D),O=s(D),I=Array(R).fill(c(0)),M=Array(R).fill(c(0)),B=0;B<R;B++)I[B]=r(u(F,N[B][A]),u(O,N[B][T])),M[B]=n(u(O,N[B][A]),u(F,N[B][T]));for(var k=0;k<R;k++)N[k][A]=I[k],N[k][T]=M[k];return N}function b(N,D,A,T){for(var R=N.length,F=c(o(D)),O=c(s(D)),I=u(F,F),M=u(O,O),B=Array(R).fill(c(0)),k=Array(R).fill(c(0)),j=f(c(2),F,O,N[A][T]),Y=n(r(u(I,N[A][A]),j),u(M,N[T][T])),q=d(u(M,N[A][A]),j,u(I,N[T][T])),L=0;L<R;L++)B[L]=r(u(F,N[A][L]),u(O,N[T][L])),k[L]=n(u(O,N[A][L]),u(F,N[T][L]));N[A][A]=Y,N[T][T]=q,N[A][T]=c(0),N[T][A]=c(0);for(var ne=0;ne<R;ne++)ne!==A&&ne!==T&&(N[A][ne]=B[ne],N[ne][A]=B[ne],N[T][ne]=k[ne],N[ne][T]=k[ne]);return N}function w(N,D,A,T){for(var R=N.length,F=Math.cos(D),O=Math.sin(D),I=F*F,M=O*O,B=Array(R).fill(0),k=Array(R).fill(0),j=I*N[A][A]-2*F*O*N[A][T]+M*N[T][T],Y=M*N[A][A]+2*F*O*N[A][T]+I*N[T][T],q=0;q<R;q++)B[q]=F*N[A][q]-O*N[T][q],k[q]=O*N[A][q]+F*N[T][q];N[A][A]=j,N[T][T]=Y,N[A][T]=0,N[T][A]=0;for(var L=0;L<R;L++)L!==A&&L!==T&&(N[A][L]=B[L],N[L][A]=B[L],N[T][L]=k[L],N[L][T]=k[L]);return N}function _(N){for(var D=N.length,A=0,T=[0,1],R=0;R<D;R++)for(var F=R+1;F<D;F++)Math.abs(A)<Math.abs(N[R][F])&&(A=Math.abs(N[R][F]),T=[R,F]);return[T,A]}function E(N){for(var D=N.length,A=0,T=[0,1],R=0;R<D;R++)for(var F=R+1;F<D;F++)i(A)<i(N[R][F])&&(A=i(N[R][F]),T=[R,F]);return[T,A]}function C(N,D,A){var T=N.length,R=Array(T),F;if(A){F=Array(T);for(var O=0;O<T;O++)F[O]=Array(T)}for(var I=0;I<T;I++){for(var M=0,B=N[0],k=0;k<N.length;k++)i(N[k])<i(B)&&(M=k,B=N[M]);if(R[I]=N.splice(M,1)[0],A)for(var j=0;j<T;j++)F[I][j]=D[j][M],D[j].splice(M,1)}if(!A)return{values:R};var Y=F.map((q,L)=>({value:R[L],vector:q}));return{values:R,eigenvectors:Y}}return h}var Tue="eigs",Mue=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],Iue=z(Tue,Mue,t=>{var{config:e,typed:n,matrix:r,addScalar:i,subtract:a,equal:o,abs:s,atan:u,cos:l,sin:c,multiplyScalar:f,divideScalar:d,inv:h,bignumber:p,multiply:m,add:y,larger:v,column:x,flatten:g,number:b,complex:w,sqrt:_,diag:E,size:C,reshape:N,qr:D,usolve:A,usolveAll:T,im:R,re:F,smaller:O,matrixFromColumns:I,dot:M}=t,B=Aue({config:e,addScalar:i,subtract:a,column:x,flatten:g,equal:o,abs:s,atan:u,cos:l,sin:c,multiplyScalar:f,inv:h,bignumber:p,complex:w,multiply:m,add:y}),k=Due({config:e,addScalar:i,subtract:a,multiply:m,multiplyScalar:f,flatten:g,divideScalar:d,sqrt:_,abs:s,bignumber:p,diag:E,size:C,reshape:N,qr:D,inv:h,usolve:A,usolveAll:T,equal:o,complex:w,larger:v,smaller:O,matrixFromColumns:I,dot:M});return n("eigs",{Array:function(oe){return j(r(oe))},"Array, number|BigNumber":function(oe,G){return j(r(oe),{precision:G})},"Array, Object"(te,oe){return j(r(te),oe)},Matrix:function(oe){return j(oe,{matricize:!0})},"Matrix, number|BigNumber":function(oe,G){return j(oe,{precision:G,matricize:!0})},"Matrix, Object":function(oe,G){var U={matricize:!0};return zn(U,G),j(oe,U)}});function j(te){var oe,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U="eigenvectors"in G?G.eigenvectors:!0,Q=(oe=G.precision)!==null&&oe!==void 0?oe:e.relTol,re=Y(te,Q,U);return G.matricize&&(re.values=r(re.values),U&&(re.eigenvectors=re.eigenvectors.map(ie=>{var{value:de,vector:he}=ie;return{value:de,vector:r(he)}}))),U&&Object.defineProperty(re,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),re}function Y(te,oe,G){var U=te.toArray(),Q=te.size();if(Q.length!==2||Q[0]!==Q[1])throw new RangeError("Matrix must be square (size: ".concat(xt(Q),")"));var re=Q[0];if(L(U,re,oe)&&(ne(U,re),q(U,re,oe))){var ie=fe(te,U,re);return B(U,re,oe,ie,G)}var de=fe(te,U,re);return k(U,re,oe,de,G)}function q(te,oe,G){for(var U=0;U<oe;U++)for(var Q=U;Q<oe;Q++)if(v(p(s(a(te[U][Q],te[Q][U]))),G))return!1;return!0}function L(te,oe,G){for(var U=0;U<oe;U++)for(var Q=0;Q<oe;Q++)if(v(p(s(R(te[U][Q]))),G))return!1;return!0}function ne(te,oe){for(var G=0;G<oe;G++)for(var U=0;U<oe;U++)te[G][U]=F(te[G][U])}function fe(te,oe,G){var U=te.datatype();if(U==="number"||U==="BigNumber"||U==="Complex")return U;for(var Q=!1,re=!1,ie=!1,de=0;de<G;de++)for(var he=0;he<G;he++){var $=oe[de][he];if(dt($)||ap($))Q=!0;else if(ht($))re=!0;else if(Ro($))ie=!0;else throw TypeError("Unsupported type in Matrix: "+Zt($))}if(re&&ie&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),ie){for(var K=0;K<G;K++)for(var ue=0;ue<G;ue++)oe[K][ue]=w(oe[K][ue]);return"Complex"}if(re){for(var ce=0;ce<G;ce++)for(var ge=0;ge<G;ge++)oe[ce][ge]=p(oe[ce][ge]);return"BigNumber"}if(Q){for(var Ce=0;Ce<G;Ce++)for(var Ae=0;Ae<G;Ae++)oe[Ce][Ae]=b(oe[Ce][Ae]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),D3="expm",kue=["typed","abs","add","identity","inv","multiply"],Rue=z(D3,kue,t=>{var{typed:e,abs:n,add:r,identity:i,inv:a,multiply:o}=t;return e(D3,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+xt(d)+")");for(var h=d[0],p=1e-15,m=s(f),y=u(m,p),v=y.q,x=y.j,g=o(f,Math.pow(2,-x)),b=i(h),w=i(h),_=1,E=g,C=-1,N=1;N<=v;N++)N>1&&(E=o(E,g),C=-C),_=_*(v-N+1)/((2*v-N+1)*N),b=r(b,o(_,E)),w=r(w,o(_*C,E));for(var D=o(a(w),b),A=0;A<x;A++)D=o(D,D);return Vu(f)?f.createSparseMatrix(D):D}});function s(c){for(var f=c.size()[0],d=0,h=0;h<f;h++){for(var p=0,m=0;m<f;m++)p+=n(c.get([h,m]));d=Math.max(p,d)}return d}function u(c,f){for(var d=30,h=0;h<d;h++)for(var p=0;p<=h;p++){var m=h-p;if(l(c,p,m)<f)return{q:p,j:m}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function l(c,f,d){for(var h=1,p=2;p<=f;p++)h*=p;for(var m=h,y=f+1;y<=2*f;y++)m*=y;var v=m*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*h*h/(m*v)}}),A3="sqrtm",Fue=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],Pue=z(A3,Fue,t=>{var{typed:e,abs:n,add:r,multiply:i,map:a,sqrt:o,subtract:s,inv:u,size:l,max:c,identity:f}=t,d=1e3,h=1e-6;function p(m){var y,v=0,x=m,g=f(l(m));do{var b=x;if(x=i(.5,r(b,u(g))),g=i(.5,r(g,u(b))),y=c(n(s(x,b))),y>h&&++v>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>h);return x}return e(A3,{"Array | Matrix":function(y){var v=Je(y)?y.size():ot(y);switch(v.length){case 1:if(v[0]===1)return a(y,o);throw new RangeError("Matrix must be square (size: "+xt(v)+")");case 2:{var x=v[0],g=v[1];if(x===g)return p(y);throw new RangeError("Matrix must be square (size: "+xt(v)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+xt(v)+")")}}})}),T3="sylvester",Oue=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Bue=z(T3,Oue,t=>{var{typed:e,schur:n,matrixFromColumns:r,matrix:i,multiply:a,range:o,concat:s,transpose:u,index:l,subset:c,add:f,subtract:d,identity:h,lusolve:p,abs:m}=t;return e(T3,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(x,g,b){return y(i(x),g,b)},"Array, Array, Matrix":function(x,g,b){return y(i(x),i(g),b)},"Array, Matrix, Array":function(x,g,b){return y(i(x),g,i(b))},"Matrix, Array, Matrix":function(x,g,b){return y(x,i(g),b)},"Matrix, Array, Array":function(x,g,b){return y(x,i(g),i(b))},"Matrix, Matrix, Array":function(x,g,b){return y(x,g,i(b))},"Array, Array, Array":function(x,g,b){return y(i(x),i(g),i(b)).toArray()}});function y(v,x,g){for(var b=x.size()[0],w=v.size()[0],_=n(v),E=_.T,C=_.U,N=n(a(-1,x)),D=N.T,A=N.U,T=a(a(u(C),g),A),R=o(0,w),F=[],O=(ie,de)=>s(ie,de,1),I=(ie,de)=>s(ie,de,0),M=0;M<b;M++)if(M<b-1&&m(c(D,l(M+1,M)))>1e-5){for(var B=I(c(T,l(R,M)),c(T,l(R,M+1))),k=0;k<M;k++)B=f(B,I(a(F[k],c(D,l(k,M))),a(F[k],c(D,l(k,M+1)))));var j=a(h(w),a(-1,c(D,l(M,M)))),Y=a(h(w),a(-1,c(D,l(M+1,M)))),q=a(h(w),a(-1,c(D,l(M,M+1)))),L=a(h(w),a(-1,c(D,l(M+1,M+1)))),ne=I(O(f(E,j),Y),O(q,f(E,L))),fe=p(ne,B);F[M]=fe.subset(l(o(0,w),0)),F[M+1]=fe.subset(l(o(w,2*w),0)),M++}else{for(var te=c(T,l(R,M)),oe=0;oe<M;oe++)te=f(te,a(F[oe],c(D,l(oe,M))));var G=c(D,l(M,M)),U=d(E,a(G,h(w)));F[M]=p(U,te)}var Q=i(r(...F)),re=a(C,a(Q,u(A)));return re}}),M3="schur",Lue=["typed","matrix","identity","multiply","qr","norm","subtract"],jue=z(M3,Lue,t=>{var{typed:e,matrix:n,identity:r,multiply:i,qr:a,norm:o,subtract:s}=t;return e(M3,{Array:function(c){var f=u(n(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return u(c)}});function u(l){var c=l.size()[0],f=l,d=r(c),h=0,p;do{p=f;var m=a(f),y=m.Q,v=m.R;if(f=i(v,y),d=i(d,y),h++>100)break}while(o(s(f,p))>1e-4);return{U:d,T:f}}}),I3="lyap",$ue=["typed","matrix","sylvester","multiply","transpose"],zue=z(I3,$ue,t=>{var{typed:e,matrix:n,sylvester:r,multiply:i,transpose:a}=t;return e(I3,{"Matrix, Matrix":function(s,u){return r(s,a(s),i(-1,u))},"Array, Matrix":function(s,u){return r(n(s),a(n(s)),i(-1,u))},"Matrix, Array":function(s,u){return r(s,a(n(s)),n(i(-1,u)))},"Array, Array":function(s,u){return r(n(s),a(n(s)),n(i(-1,u))).toArray()}})}),Uue="divide",Vue=["typed","matrix","multiply","equalScalar","divideScalar","inv"],Wue=z(Uue,Vue,t=>{var{typed:e,matrix:n,multiply:r,equalScalar:i,divideScalar:a,inv:o}=t,s=wr({typed:e,equalScalar:i}),u=Fa({typed:e});return e("divide",qP({"Array | Matrix, Array | Matrix":function(c,f){return r(c,o(f))},"DenseMatrix, any":function(c,f){return u(c,f,a,!1)},"SparseMatrix, any":function(c,f){return s(c,f,a,!1)},"Array, any":function(c,f){return u(n(c),f,a,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,o(f))}},a.signatures))}),k3="distance",que=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],Hue=z(k3,que,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:a,deepEqual:o,sqrt:s,abs:u}=t;return e(k3,{"Array, Array, Array":function(w,_,E){if(w.length===2&&_.length===2&&E.length===2){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(_))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(o(_,E))throw new TypeError("LinePoint1 should not be same with LinePoint2");var C=r(E[1],_[1]),N=r(_[0],E[0]),D=r(i(E[0],_[1]),i(_[0],E[1]));return y(w[0],w[1],C,N,D)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(w,_,E){if(Object.keys(w).length===2&&Object.keys(_).length===2&&Object.keys(E).length===2){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(o(p(_),p(E)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in w&&"pointY"in w&&"lineOnePtX"in _&&"lineOnePtY"in _&&"lineTwoPtX"in E&&"lineTwoPtY"in E){var C=r(E.lineTwoPtY,_.lineOnePtY),N=r(_.lineOnePtX,E.lineTwoPtX),D=r(i(E.lineTwoPtX,_.lineOnePtY),i(_.lineOnePtX,E.lineTwoPtY));return y(w.pointX,w.pointY,C,N,D)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(w,_){if(w.length===2&&_.length===3){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(_))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(w[0],w[1],_[0],_[1],_[2])}else if(w.length===3&&_.length===6){if(!f(w))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(_))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return v(w[0],w[1],w[2],_[0],_[1],_[2],_[3],_[4],_[5])}else if(w.length===_.length&&w.length>0){if(!d(w))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(_))throw new TypeError("All values of an array should be numbers or BigNumbers");return x(w,_)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(w,_){if(Object.keys(w).length===2&&Object.keys(_).length===3){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(_))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"xCoeffLine"in _&&"yCoeffLine"in _&&"constant"in _)return y(w.pointX,w.pointY,_.xCoeffLine,_.yCoeffLine,_.constant);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(_).length===6){if(!f(w))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(_))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"x0"in _&&"y0"in _&&"z0"in _&&"a"in _&&"b"in _&&"c"in _)return v(w.pointX,w.pointY,w.pointZ,_.x0,_.y0,_.z0,_.a,_.b,_.c);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===2&&Object.keys(_).length===2){if(!c(w))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointTwoX"in _&&"pointTwoY"in _)return x([w.pointOneX,w.pointOneY],[_.pointTwoX,_.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(_).length===3){if(!f(w))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(_))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointOneZ"in w&&"pointTwoX"in _&&"pointTwoY"in _&&"pointTwoZ"in _)return x([w.pointOneX,w.pointOneY,w.pointOneZ],[_.pointTwoX,_.pointTwoY,_.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(w){if(!m(w))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return g(w)}});function l(b){return typeof b=="number"||ht(b)}function c(b){return b.constructor!==Array&&(b=p(b)),l(b[0])&&l(b[1])}function f(b){return b.constructor!==Array&&(b=p(b)),l(b[0])&&l(b[1])&&l(b[2])}function d(b){return Array.isArray(b)||(b=p(b)),b.every(l)}function h(b){return b.constructor!==Array&&(b=p(b)),l(b[0])&&l(b[1])&&l(b[2])&&l(b[3])&&l(b[4])&&l(b[5])}function p(b){for(var w=Object.keys(b),_=[],E=0;E<w.length;E++)_.push(b[w[E]]);return _}function m(b){if(b[0].length===2&&l(b[0][0])&&l(b[0][1])){if(b.some(w=>w.length!==2||!l(w[0])||!l(w[1])))return!1}else if(b[0].length===3&&l(b[0][0])&&l(b[0][1])&&l(b[0][2])){if(b.some(w=>w.length!==3||!l(w[0])||!l(w[1])||!l(w[2])))return!1}else return!1;return!0}function y(b,w,_,E,C){var N=u(n(n(i(_,b),i(E,w)),C)),D=s(n(i(_,_),i(E,E)));return a(N,D)}function v(b,w,_,E,C,N,D,A,T){var R=[r(i(r(C,w),T),i(r(N,_),A)),r(i(r(N,_),D),i(r(E,b),T)),r(i(r(E,b),A),i(r(C,w),D))];R=s(n(n(i(R[0],R[0]),i(R[1],R[1])),i(R[2],R[2])));var F=s(n(n(i(D,D),i(A,A)),i(T,T)));return a(R,F)}function x(b,w){for(var _=b.length,E=0,C=0,N=0;N<_;N++)C=r(b[N],w[N]),E=n(i(C,C),E);return s(E)}function g(b){for(var w=[],_=[],E=[],C=0;C<b.length-1;C++)for(var N=C+1;N<b.length;N++)b[0].length===2?(_=[b[C][0],b[C][1]],E=[b[N][0],b[N][1]]):b[0].length===3&&(_=[b[C][0],b[C][1],b[C][2]],E=[b[N][0],b[N][1],b[N][2]]),w.push(x(_,E));return w}}),Gue="intersect",Kue=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],Yue=z(Gue,Kue,t=>{var{typed:e,config:n,abs:r,add:i,addScalar:a,matrix:o,multiply:s,multiplyScalar:u,divideScalar:l,subtract:c,smaller:f,equalScalar:d,flatten:h,isZero:p,isNumeric:m}=t;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":v,"Matrix, Matrix, Matrix":function(A,T,R){var F=y(A.valueOf(),T.valueOf(),R.valueOf());return F===null?null:o(F)},"Matrix, Matrix, Matrix, Matrix":function(A,T,R,F){var O=v(A.valueOf(),T.valueOf(),R.valueOf(),F.valueOf());return O===null?null:o(O)}});function y(D,A,T){if(D=x(D),A=x(A),T=x(T),!b(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(T))throw new TypeError("Array with 4 numbers expected as third argument");return N(D[0],D[1],D[2],A[0],A[1],A[2],T[0],T[1],T[2],T[3])}function v(D,A,T,R){if(D=x(D),A=x(A),T=x(T),R=x(R),D.length===2){if(!g(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!g(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!g(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!g(R))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return _(D,A,T,R)}else if(D.length===3){if(!b(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!b(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!b(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return C(D[0],D[1],D[2],A[0],A[1],A[2],T[0],T[1],T[2],R[0],R[1],R[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function x(D){return D.length===1?D[0]:D.length>1&&Array.isArray(D[0])&&D.every(A=>Array.isArray(A)&&A.length===1)?h(D):D}function g(D){return D.length===2&&m(D[0])&&m(D[1])}function b(D){return D.length===3&&m(D[0])&&m(D[1])&&m(D[2])}function w(D){return D.length===4&&m(D[0])&&m(D[1])&&m(D[2])&&m(D[3])}function _(D,A,T,R){var F=D,O=T,I=c(F,A),M=c(O,R),B=c(u(I[0],M[1]),u(M[0],I[1]));if(p(B)||f(r(B),n.relTol))return null;var k=u(M[0],F[1]),j=u(M[1],F[0]),Y=u(M[0],O[1]),q=u(M[1],O[0]),L=l(a(c(c(k,j),Y),q),B);return i(s(I,L),F)}function E(D,A,T,R,F,O,I,M,B,k,j,Y){var q=u(c(D,A),c(T,R)),L=u(c(F,O),c(I,M)),ne=u(c(B,k),c(j,Y));return a(a(q,L),ne)}function C(D,A,T,R,F,O,I,M,B,k,j,Y){var q=E(D,I,k,I,A,M,j,M,T,B,Y,B),L=E(k,I,R,D,j,M,F,A,Y,B,O,T),ne=E(D,I,R,D,A,M,F,A,T,B,O,T),fe=E(k,I,k,I,j,M,j,M,Y,B,Y,B),te=E(R,D,R,D,F,A,F,A,O,T,O,T),oe=c(u(q,L),u(ne,fe)),G=c(u(te,fe),u(L,L));if(p(G))return null;var U=l(oe,G),Q=l(a(q,u(U,L)),fe),re=a(D,u(U,c(R,D))),ie=a(A,u(U,c(F,A))),de=a(T,u(U,c(O,T))),he=a(I,u(Q,c(k,I))),$=a(M,u(Q,c(j,M))),K=a(B,u(Q,c(Y,B)));return d(re,he)&&d(ie,$)&&d(de,K)?[re,ie,de]:null}function N(D,A,T,R,F,O,I,M,B,k){var j=u(D,I),Y=u(R,I),q=u(A,M),L=u(F,M),ne=u(T,B),fe=u(O,B),te=c(c(c(k,j),q),ne),oe=c(c(c(a(a(Y,L),fe),j),q),ne),G=l(te,oe),U=a(D,u(G,c(R,D))),Q=a(A,u(G,c(F,A))),re=a(T,u(G,c(O,T)));return[U,Q,re]}}),R3="sum",Xue=["typed","config","add","numeric"],OB=z(R3,Xue,t=>{var{typed:e,config:n,add:r,numeric:i}=t;return e(R3,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":o,"...":function(u){if(Mf(u))throw new TypeError("Scalar values expected in function sum");return a(u)}});function a(s){var u;return Zs(s,function(l){try{u=u===void 0?l:r(u,l)}catch(c){throw Yr(c,"sum",l)}}),u===void 0&&(u=i(0,n.number)),typeof u=="string"&&(u=i(u,lu(u,n))),u}function o(s,u){try{var l=H0(s,u,r);return l}catch(c){throw Yr(c,"sum")}}}),Nm="cumsum",Que=["typed","add","unaryPlus"],BB=z(Nm,Que,t=>{var{typed:e,add:n,unaryPlus:r}=t;return e(Nm,{Array:i,Matrix:function(l){return l.create(i(l.valueOf(),l.datatype()))},"Array, number | BigNumber":o,"Matrix, number | BigNumber":function(l,c){return l.create(o(l.valueOf(),c),l.datatype())},"...":function(l){if(Mf(l))throw new TypeError("All values expected to be scalar in function cumsum");return i(l)}});function i(u){try{return a(u)}catch(l){throw Yr(l,Nm)}}function a(u){if(u.length===0)return[];for(var l=[r(u[0])],c=1;c<u.length;++c)l.push(n(l[c-1],u[c]));return l}function o(u,l){var c=ot(u);if(l<0||l>=c.length)throw new ka(l,c.length);try{return s(u,l)}catch(f){throw Yr(f,Nm)}}function s(u,l){var c,f,d;if(l<=0){var h=u[0][0];if(Array.isArray(h)){for(d=xO(u),f=[],c=0;c<d.length;c++)f[c]=s(d[c],l-1);return f}else return a(u)}else{for(f=[],c=0;c<u.length;c++)f[c]=s(u[c],l-1);return f}}}),F3="mean",Zue=["typed","add","divide"],LB=z(F3,Zue,t=>{var{typed:e,add:n,divide:r}=t;return e(F3,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(s){if(Mf(s))throw new TypeError("Scalar values expected in function mean");return a(s)}});function i(o,s){try{var u=H0(o,s,n),l=Array.isArray(o)?ot(o):o.size();return r(u,l[s])}catch(c){throw Yr(c,"mean")}}function a(o){var s,u=0;if(Zs(o,function(l){try{s=s===void 0?l:n(s,l),u++}catch(c){throw Yr(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return r(s,u)}}),P3="median",Jue=["typed","add","divide","compare","partitionSelect"],ele=z(P3,Jue,t=>{var{typed:e,add:n,divide:r,compare:i,partitionSelect:a}=t;function o(l){try{l=Ot(l.valueOf());var c=l.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=a(l,f+1),h=l[f],p=0;p<f;++p)i(l[p],h)>0&&(h=l[p]);return u(h,d)}else{var m=a(l,(c-1)/2);return s(m)}}catch(y){throw Yr(y,"median")}}var s=e({"number | BigNumber | Complex | Unit":function(c){return c}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return r(n(c,f),2)}});return e(P3,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(Mf(c))throw new TypeError("Scalar values expected in function median");return o(c)}})}),O3="mad",tle=["typed","abs","map","median","subtract"],nle=z(O3,tle,t=>{var{typed:e,abs:n,map:r,median:i,subtract:a}=t;return e(O3,{"Array | Matrix":o,"...":function(u){return o(u)}});function o(s){if(s=Ot(s.valueOf()),s.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=i(s);return i(r(s,function(l){return n(a(l,u))}))}catch(l){throw l instanceof TypeError&&l.message.includes("median")?new TypeError(l.message.replace("median","mad")):Yr(l,"mad")}}}),_1="unbiased",B3="variance",rle=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],jB=z(B3,rle,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,mapSlices:o,isNaN:s}=t;return e(B3,{"Array | Matrix":function(f){return u(f,_1)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,_1)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,_1)}});function u(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Zs(c,function(y){try{d=d===void 0?y:n(d,y),h++}catch(v){throw Yr(v,"variance",y)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var p=a(d,h);if(d=void 0,Zs(c,function(y){var v=r(y,p);d=d===void 0?i(v,v):n(d,i(v,v))}),s(d))return d;switch(f){case"uncorrected":return a(d,h);case"biased":return a(d,h+1);case"unbiased":{var m=ht(d)?d.mul(0):0;return h===1?m:a(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,f,h=>u(h,d))}catch(h){throw Yr(h,"variance")}}}),L3="quantileSeq",ile=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],$B=z(L3,ile,t=>{var{typed:e,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d,mapSlices:h}=t;return e(L3,{"Array | Matrix, number | BigNumber":(x,g)=>m(x,g,!1),"Array | Matrix, number | BigNumber, number":(x,g,b)=>p(x,g,!1,b,m),"Array | Matrix, number | BigNumber, boolean":m,"Array | Matrix, number | BigNumber, boolean, number":(x,g,b,w)=>p(x,g,b,w,m),"Array | Matrix, Array | Matrix":(x,g)=>y(x,g,!1),"Array | Matrix, Array | Matrix, number":(x,g,b)=>p(x,g,!1,b,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(x,g,b,w)=>p(x,g,b,w,y)});function p(x,g,b,w,_){return h(x,w,E=>_(E,g,b))}function m(x,g,b){var w,_=x.valueOf();if(c(g,0))throw new Error("N/prob must be non-negative");if(f(g,1))return dt(g)?v(_,g,b):n(v(_,g,b));if(d(g,1)){if(!l(g))throw new Error("N must be a positive integer");if(d(g,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var E=r(g,1);w=[];for(var C=0;c(C,g);C++){var N=a(C+1,E);w.push(v(_,N,b))}return dt(g)?w:n(w)}}function y(x,g,b){for(var w=x.valueOf(),_=g.valueOf(),E=[],C=0;C<_.length;++C)E.push(v(w,_[C],b));return E}function v(x,g,b){var w=Ot(x),_=w.length;if(_===0)throw new Error("Cannot calculate quantile of an empty sequence");var E=dt(g)?g*(_-1):g.times(_-1),C=dt(g)?Math.floor(E):E.floor().toNumber(),N=dt(g)?E%1:E.minus(C);if(l(E))return b?w[E]:s(w,dt(g)?E:E.valueOf());var D,A;if(b)D=w[C],A=w[C+1];else{A=s(w,C+1),D=w[C];for(var T=0;T<C;++T)u(w[T],D)>0&&(D=w[T])}return r(o(D,i(1,N)),o(A,N))}}),j3="std",ale=["typed","map","sqrt","variance"],zB=z(j3,ale,t=>{var{typed:e,map:n,sqrt:r,variance:i}=t;return e(j3,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(s){return a(s)}});function a(o,s){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=i.apply(null,arguments);return aa(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.includes(" variance")?new TypeError(l.message.replace(" variance"," std")):l}}}),$3="corr",ole=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],sle=z($3,ole,t=>{var{typed:e,matrix:n,sqrt:r,sum:i,add:a,subtract:o,multiply:s,pow:u,divide:l}=t;return e($3,{"Array, Array":function(h,p){return c(h,p)},"Matrix, Matrix":function(h,p){var m=c(h.toArray(),p.toArray());return Array.isArray(m)?n(m):m}});function c(d,h){var p=[];if(Array.isArray(d[0])&&Array.isArray(h[0])){if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var m=0;m<d.length;m++){if(d[m].length!==h[m].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(f(d[m],h[m]))}return p}else{if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,h)}}function f(d,h){var p=d.length,m=i(d),y=i(h),v=d.reduce((_,E,C)=>a(_,s(E,h[C])),0),x=i(d.map(_=>u(_,2))),g=i(h.map(_=>u(_,2))),b=o(s(p,v),s(m,y)),w=r(s(o(s(p,x),u(m,2)),o(s(p,g),u(y,2))));return l(b,w)}}),z3="combinations",ule=["typed"],lle=z(z3,ule,t=>{var{typed:e}=t;return e(z3,{"number, number":$O,"BigNumber, BigNumber":function(r,i){var a=r.constructor,o,s,u=r.minus(i),l=new a(1);if(!U3(r)||!U3(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(r))throw new TypeError("k must be less than n in function combinations");if(o=l,i.lt(u))for(s=l;s.lte(u);s=s.plus(l))o=o.times(i.plus(s)).dividedBy(s);else for(s=l;s.lte(i);s=s.plus(l))o=o.times(u.plus(s)).dividedBy(s);return o}})});function U3(t){return t.isInteger()&&t.gte(0)}var V3="combinationsWithRep",cle=["typed"],fle=z(V3,cle,t=>{var{typed:e}=t;return e(V3,{"number, number":function(r,i){if(!qe(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!qe(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<r-1){var a=Ao(r,r+i-1);return a/Ao(1,i)}var o=Ao(i+1,r+i-1);return o/Ao(1,r-1)},"BigNumber, BigNumber":function(r,i){var a=r.constructor,o,s,u=new a(1),l=r.minus(u);if(!W3(r)||!W3(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(o=u,i.lt(l))for(s=u;s.lte(l);s=s.plus(u))o=o.times(i.plus(s)).dividedBy(s);else for(s=u;s.lte(i);s=s.plus(u))o=o.times(l.plus(s)).dividedBy(s);return o}})});function W3(t){return t.isInteger()&&t.gte(0)}var q3="gamma",dle=["typed","config","multiplyScalar","pow","BigNumber","Complex"],hle=z(q3,dle,t=>{var{typed:e,config:n,multiplyScalar:r,pow:i,BigNumber:a,Complex:o}=t;function s(l){if(l.im===0)return tg(l.re);if(l.re<.5){var c=new o(1-l.re,-l.im),f=new o(Math.PI*l.re,Math.PI*l.im);return new o(Math.PI).div(f.sin()).div(s(c))}l=new o(l.re-1,l.im);for(var d=new o(Fc[0],0),h=1;h<Fc.length;++h){var p=new o(Fc[h],0);d=d.add(p.div(l.add(h)))}var m=new o(l.re+UO+.5,l.im),y=Math.sqrt(2*Math.PI),v=m.pow(l.add(.5)),x=m.neg().exp();return d.mul(y).mul(v).mul(x)}return e(q3,{number:tg,Complex:s,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new a(1/0):u(c.minus(1));if(!c.isFinite())return new a(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new a([1,1,2,6,24,120,720,5040][l]);var c=n.precision+(Math.log(l.toNumber())|0),f=a.clone({precision:c});if(l%2===1)return l.times(u(new a(l-1)));for(var d=l,h=new f(l),p=l.toNumber();d>2;)d-=2,p+=d,h=h.times(p);return new a(h.toPrecision(a.precision))}}),H3="lgamma",ple=["Complex","typed"],mle=z(H3,ple,t=>{var{Complex:e,typed:n}=t,r=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(H3,{number:ng,Complex:o,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(l){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(l.isNaN())return new e(NaN,NaN);if(l.im===0)return new e(ng(l.re),0);if(l.re>=r||Math.abs(l.im)>=i)return s(l);if(l.re<=d){var h=aH(c,l.im)*Math.floor(.5*l.re+.25),p=l.mul(Math.PI).sin().log(),m=o(new e(1-l.re,-l.im));return new e(f,h).sub(p).sub(m)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function s(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(VO),f=new e(1,0).div(l),d=f.div(l),h=a[0],p=a[1],m=2*d.re,y=d.re*d.re+d.im*d.im,v=2;v<8;v++){var x=p;p=-y*h+a[v],h=m*h+x}var g=f.mul(d.mul(h).add(p));return c.add(g)}function u(l){var c=0,f=0,d=l;for(l=l.add(1);l.re<=r;){d=d.mul(l);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,l=l.add(1)}return s(l).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),G3="factorial",vle=["typed","gamma"],gle=z(G3,vle,t=>{var{typed:e,gamma:n}=t;return e(G3,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return n(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return n(i.plus(1))},"Array | Matrix":e.referToSelf(r=>i=>pt(i,r))})}),K3="kldivergence",yle=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],xle=z(K3,yle,t=>{var{typed:e,matrix:n,divide:r,sum:i,multiply:a,map:o,dotDivide:s,log:u,isNumeric:l}=t;return e(K3,{"Array, Array":function(d,h){return c(n(d),n(h))},"Matrix, Array":function(d,h){return c(d,n(h))},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Matrix":function(d,h){return c(d,h)}});function c(f,d){var h=d.size().length,p=f.size().length;if(h>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(h!==p)throw new Error("Length of two vectors must be equal");var m=i(f);if(m===0)throw new Error("Sum of elements in first object must be non zero");var y=i(d);if(y===0)throw new Error("Sum of elements in second object must be non zero");var v=r(f,i(f)),x=r(d,i(d)),g=i(a(v,o(s(v,x),b=>u(b))));return l(g)?g:Number.NaN}}),Y3="multinomial",ble=["typed","add","divide","multiply","factorial","isInteger","isPositive"],wle=z(Y3,ble,t=>{var{typed:e,add:n,divide:r,multiply:i,factorial:a,isInteger:o,isPositive:s}=t;return e(Y3,{"Array | Matrix":function(l){var c=0,f=1;return Zs(l,function(d){if(!o(d)||!s(d))throw new TypeError("Positive integer value expected in function multinomial");c=n(c,d),f=i(f,a(d))}),r(a(c),f)}})}),X3="permutations",_le=["typed","factorial"],Ele=z(X3,_le,t=>{var{typed:e,factorial:n}=t;return e(X3,{"number | BigNumber":n,"number, number":function(i,a){if(!qe(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!qe(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(a>i)throw new TypeError("second argument k must be less than or equal to first argument n");return Ao(i-a+1,i)},"BigNumber, BigNumber":function(i,a){var o,s;if(!Q3(i)||!Q3(a))throw new TypeError("Positive integer value expected in function permutations");if(a.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var u=i.mul(0).add(1);for(o=u,s=i.minus(a).plus(1);s.lte(i);s=s.plus(1))o=o.times(s);return o}})});function Q3(t){return t.isInteger()&&t.gte(0)}var b_={exports:{}};b_.exports;(function(t){(function(e,n,r){function i(u){var l=this,c=s();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function a(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new i(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&a(f,c),d.state=function(){return a(c,{})}),d}function s(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:this.alea=o})(wl,t)})(b_);var Cle=b_.exports,w_={exports:{}};w_.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(wl,t)})(w_);var Nle=w_.exports,__={exports:{}};__.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(wl,t)})(__);var Sle=__.exports,E_={exports:{}};E_.exports;(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(wl,t)})(E_);var Dle=E_.exports,C_={exports:{}};C_.exports;(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,p;return u.w=c=c+1640531527|0,p=f[d+34&127],h=f[d=d+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=f[d]=p^h,u.i=d,p+(c^c>>>16)|0};function l(c,f){var d,h,p,m,y,v=[],x=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,x=Math.max(x,f.length)),p=0,m=-32;m<x;++m)f&&(h^=f.charCodeAt((m+32)%f.length)),m===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(y=y+1640531527|0,d=v[m&127]^=h+y,p=d==0?p+1:0);for(p>=128&&(v[(f&&f.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=v[p+34&127],d=v[p=p+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,v[p]=h^d;c.w=y,c.X=v,c.i=p}l(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(wl,t)})(C_);var Ale=C_.exports,N_={exports:{}};N_.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,p=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(d+h)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(wl,t)})(N_);var Tle=N_.exports,UB={exports:{}};const Mle={},Ile=Object.freeze(Object.defineProperty({__proto__:null,default:Mle},Symbol.toStringTag,{value:"Module"})),kle=N$(Ile);(function(t){(function(e,n,r){var i=256,a=6,o=52,s="random",u=r.pow(i,a),l=r.pow(2,o),c=l*2,f=i-1,d;function h(b,w,_){var E=[];w=w==!0?{entropy:!0}:w||{};var C=v(y(w.entropy?[b,g(n)]:b??x(),3),E),N=new p(E),D=function(){for(var A=N.g(a),T=u,R=0;A<l;)A=(A+R)*i,T*=i,R=N.g(1);for(;A>=c;)A/=2,T/=2,R>>>=1;return(A+R)/T};return D.int32=function(){return N.g(4)|0},D.quick=function(){return N.g(4)/4294967296},D.double=D,v(g(N.S),n),(w.pass||_||function(A,T,R,F){return F&&(F.S&&m(F,N),A.state=function(){return m(N,{})}),R?(r[s]=A,T):A})(D,C,"global"in w?w.global:this==r,w.state)}function p(b){var w,_=b.length,E=this,C=0,N=E.i=E.j=0,D=E.S=[];for(_||(b=[_++]);C<i;)D[C]=C++;for(C=0;C<i;C++)D[C]=D[N=f&N+b[C%_]+(w=D[C])],D[N]=w;(E.g=function(A){for(var T,R=0,F=E.i,O=E.j,I=E.S;A--;)T=I[F=f&F+1],R=R*i+I[f&(I[F]=I[O=f&O+T])+(I[O]=T)];return E.i=F,E.j=O,R})(i)}function m(b,w){return w.i=b.i,w.j=b.j,w.S=b.S.slice(),w}function y(b,w){var _=[],E=typeof b,C;if(w&&E=="object")for(C in b)try{_.push(y(b[C],w-1))}catch{}return _.length?_:E=="string"?b:b+"\0"}function v(b,w){for(var _=b+"",E,C=0;C<_.length;)w[f&C]=f&(E^=w[f&C]*19)+_.charCodeAt(C++);return g(w)}function x(){try{var b;return d&&(b=d.randomBytes)?b=b(i):(b=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(b)),g(b)}catch{var w=e.navigator,_=w&&w.plugins;return[+new Date,e,_,e.screen,g(n)]}}function g(b){return String.fromCharCode.apply(0,b)}if(v(r.random(),n),t.exports){t.exports=h;try{d=kle}catch{}}else r["seed"+s]=h})(typeof self<"u"?self:wl,[],Math)})(UB);var Rle=UB.exports,Fle=Cle,Ple=Nle,Ole=Sle,Ble=Dle,Lle=Ale,jle=Tle,Al=Rle;Al.alea=Fle;Al.xor128=Ple;Al.xorwow=Ole;Al.xorshift7=Ble;Al.xor4096=Lle;Al.tychei=jle;var $le=Al;const VB=p0($le);var zle=VB(Date.now());function lf(t){var e;function n(i){e=i===null?zle:VB(String(i))}n(t);function r(){return e()}return r}var Z3="pickRandom",Ule=["typed","config","?on"],Vle=z(Z3,Ule,t=>{var{typed:e,config:n,on:r}=t,i=lf(n.randomSeed);return r&&r("config",function(o,s){o.randomSeed!==s.randomSeed&&(i=lf(o.randomSeed))}),e(Z3,{"Array | Matrix":function(s){return a(s,{})},"Array | Matrix, Object":function(s,u){return a(s,u)},"Array | Matrix, number":function(s,u){return a(s,{number:u})},"Array | Matrix, Array | Matrix":function(s,u){return a(s,{weights:u})},"Array | Matrix, Array | Matrix, number":function(s,u,l){return a(s,{number:l,weights:u})},"Array | Matrix, number, Array | Matrix":function(s,u,l){return a(s,{number:u,weights:l})}});function a(o,s){var{number:u,weights:l,elementWise:c=!0}=s,f=typeof u>"u";f&&(u=1);var d=Je(o)?o.create:Je(l)?l.create:null;o=o.valueOf(),l&&(l=l.valueOf()),c===!0&&(o=Ot(o),l=Ot(l));var h=0;if(typeof l<"u"){if(l.length!==o.length)throw new Error("Weights must have the same length as possibles");for(var p=0,m=l.length;p<m;p++){if(!dt(l[p])||l[p]<0)throw new Error("Weights must be an array of positive numbers");h+=l[p]}}for(var y=o.length,v=[],x;v.length<u;){if(typeof l>"u")x=o[Math.floor(i()*y)];else for(var g=i()*h,b=0,w=o.length;b<w;b++)if(g-=l[b],g<0){x=o[b];break}v.push(x)}return f?v[0]:d?d(v):v}});function S_(t,e){var n=[];if(t=t.slice(0),t.length>1)for(var r=0,i=t.shift();r<i;r++)n.push(S_(t,e));else for(var a=0,o=t.shift();a<o;a++)n.push(e());return n}var J3="random",Wle=["typed","config","?on"],qle=z(J3,Wle,t=>{var{typed:e,config:n,on:r}=t,i=lf(n.randomSeed);return r&&r("config",function(s,u){s.randomSeed!==u.randomSeed&&(i=lf(s.randomSeed))}),e(J3,{"":()=>o(0,1),number:s=>o(0,s),"number, number":(s,u)=>o(s,u),"Array | Matrix":s=>a(s,0,1),"Array | Matrix, number":(s,u)=>a(s,0,u),"Array | Matrix, number, number":(s,u,l)=>a(s,u,l)});function a(s,u,l){var c=S_(s.valueOf(),()=>o(u,l));return Je(s)?s.create(c,"number"):c}function o(s,u){return s+i()*(u-s)}}),eM="randomInt",Hle=["typed","config","log2","?on"],Gle=2n**30n,Kle=z(eM,Hle,t=>{var{typed:e,config:n,log2:r,on:i}=t,a=lf(n.randomSeed);return i&&i("config",function(l,c){l.randomSeed!==c.randomSeed&&(a=lf(l.randomSeed))}),e(eM,{"":()=>s(0,2),number:l=>s(0,l),"number, number":(l,c)=>s(l,c),bigint:l=>u(0n,l),"bigint, bigint":u,"Array | Matrix":l=>o(l,0,1),"Array | Matrix, number":(l,c)=>o(l,0,c),"Array | Matrix, number, number":(l,c,f)=>o(l,c,f)});function o(l,c,f){var d=S_(l.valueOf(),()=>s(c,f));return Je(l)?l.create(d,"number"):d}function s(l,c){return Math.floor(l+a()*(c-l))}function u(l,c){var f=c-l;if(f<=Gle)return l+BigInt(s(0,Number(f)));for(var d=r(f),h=f;h>=f;){h=0n;for(var p=0;p<d;++p)h=2n*h+(a()<.5?0n:1n)}return l+h}}),tM="stirlingS2",Yle=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],Xle=z(tM,Yle,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:a,pow:o,factorial:s,combinations:u,isNegative:l,isInteger:c,number:f,bignumber:d,larger:h}=t,p=[],m=[];return e(tM,{"number | BigNumber, number | BigNumber":function(v,x){if(!c(v)||l(v)||!c(x)||l(x))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(x,v))throw new TypeError("k must be less than or equal to n in function stirlingS2");var g=!(dt(v)&&dt(x)),b=g?m:p,w=g?d:f,_=f(v),E=f(x);if(b[_]&&b[_].length>E)return b[_][E];for(var C=0;C<=_;++C)if(b[C]||(b[C]=[w(C===0?1:0)]),C!==0)for(var N=b[C],D=b[C-1],A=N.length;A<=C&&A<=E;++A)A===C?N[A]=1:N[A]=n(i(w(A),D[A]),D[A-1]);return b[_][E]}})}),nM="bellNumbers",Qle=["typed","addScalar","isNegative","isInteger","stirlingS2"],Zle=z(nM,Qle,t=>{var{typed:e,addScalar:n,isNegative:r,isInteger:i,stirlingS2:a}=t;return e(nM,{"number | BigNumber":function(s){if(!i(s)||r(s))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,l=0;l<=s;l++)u=n(u,a(s,l));return u}})}),rM="catalan",Jle=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],ece=z(rM,Jle,t=>{var{typed:e,addScalar:n,divideScalar:r,multiplyScalar:i,combinations:a,isNegative:o,isInteger:s}=t;return e(rM,{"number | BigNumber":function(l){if(!s(l)||o(l))throw new TypeError("Non-negative integer value expected in function catalan");return r(a(i(l,2),l),n(l,1))}})}),iM="composition",tce=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],nce=z(iM,tce,t=>{var{typed:e,addScalar:n,combinations:r,isPositive:i,isNegative:a,isInteger:o,larger:s}=t;return e(iM,{"number | BigNumber, number | BigNumber":function(l,c){if(!o(l)||!i(l)||!o(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(s(c,l))throw new TypeError("k must be less than or equal to n in function composition");return r(n(l,-1),n(c,-1))}})}),aM="leafCount",rce=["parse","typed"],ice=z(aM,rce,t=>{var{parse:e,typed:n}=t;function r(i){var a=0;return i.forEach(o=>{a+=r(o)}),a||1}return n(aM,{Node:function(a){return r(a)}})});function oM(t){return Tt(t)||In(t)&&t.isUnary()&&Tt(t.args[0])}function dg(t){return!!(Tt(t)||(Ys(t)||In(t))&&t.args.every(dg)||Wo(t)&&dg(t.content))}function sM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function E1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sM(Object(n),!0).forEach(function(r){Bn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ace="simplifyUtil",oce=["FunctionNode","OperatorNode","SymbolNode"],D_=z(ace,oce,t=>{var{FunctionNode:e,OperatorNode:n,SymbolNode:r}=t,i=!0,a=!1,o="defaultF",s={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},u={divide:{total:a},log:{total:a}},l={subtract:{total:a},abs:{trivial:i},log:{total:i}};function c(g,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s,_=o;if(typeof g=="string"?_=g:In(g)?_=g.fn.toString():Ys(g)?_=g.name:Wo(g)&&(_="paren"),Ue(w,_)){var E=w[_];if(Ue(E,b))return E[b];if(Ue(s,_))return s[_][b]}if(Ue(w,o)){var C=w[o];return Ue(C,b)?C[b]:s[o][b]}if(Ue(s,_)){var N=s[_];if(Ue(N,b))return N[b]}return s[o][b]}function f(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(g,"commutative",b)}function d(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return c(g,"associative",b)}function h(g,b){var w=E1({},g);for(var _ in b)Ue(g,_)?w[_]=E1(E1({},b[_]),g[_]):w[_]=b[_];return w}function p(g,b){if(!g.args||g.args.length===0)return g;g.args=m(g,b);for(var w=0;w<g.args.length;w++)p(g.args[w],b)}function m(g,b){var w,_=[],E=function(N){for(var D=0;D<N.args.length;D++){var A=N.args[D];In(A)&&w===A.op?E(A):_.push(A)}};return d(g,b)?(w=g.op,E(g),_):g.args}function y(g,b){if(!(!g.args||g.args.length===0)){for(var w=x(g),_=g.args.length,E=0;E<_;E++)y(g.args[E],b);if(_>2&&d(g,b)){for(var C=g.args.pop();g.args.length>0;)C=w([g.args.pop(),C]);g.args=C.args}}}function v(g,b){if(!(!g.args||g.args.length===0)){for(var w=x(g),_=g.args.length,E=0;E<_;E++)v(g.args[E],b);if(_>2&&d(g,b)){for(var C=g.args.shift();g.args.length>0;)C=w([C,g.args.shift()]);g.args=C.args}}}function x(g){return In(g)?function(b){try{return new n(g.op,g.fn,b,g.implicit)}catch(w){return console.error(w),[]}}:function(b){return new e(new r(g.name),b)}}return{createMakeNodeFunction:x,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:h,flatten:p,allChildren:m,unflattenr:y,unflattenl:v,defaultContext:s,realContext:u,positiveContext:l}}),sce="simplify",uce=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],lce=z(sce,uce,t=>{var{typed:e,parse:n,equal:r,resolve:i,simplifyConstant:a,simplifyCore:o,AccessorNode:s,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,ParenthesisNode:p,SymbolNode:m,replacer:y}=t,{hasProperty:v,isCommutative:x,isAssociative:g,mergeContext:b,flatten:w,unflattenr:_,unflattenl:E,createMakeNodeFunction:C,defaultContext:N,realContext:D,positiveContext:A}=D_({FunctionNode:c,OperatorNode:h,SymbolNode:m});e.addConversion({from:"Object",to:"Map",convert:kc});var T=e("simplify",{Node:k,"Node, Map":(G,U)=>k(G,!1,U),"Node, Map, Object":(G,U,Q)=>k(G,!1,U,Q),"Node, Array":k,"Node, Array, Map":k,"Node, Array, Map, Object":k});e.removeConversion({from:"Object",to:"Map",convert:kc}),T.defaultContext=N,T.realContext=D,T.positiveContext=A;function R(G){return G.transform(function(U){return Wo(U)?R(U.content):U})}var F={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};T.rules=[o,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},a,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},a,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function O(G,U){var Q={};if(G.s){var re=G.s.split("->");if(re.length===2)Q.l=re[0],Q.r=re[1];else throw SyntaxError("Could not parse rule: "+G.s)}else Q.l=G.l,Q.r=G.r;Q.l=R(n(Q.l)),Q.r=R(n(Q.r));for(var ie of["imposeContext","repeat","assuming"])ie in G&&(Q[ie]=G[ie]);if(G.evaluate&&(Q.evaluate=n(G.evaluate)),g(Q.l,U)){var de=!x(Q.l,U),he;de&&(he=B());var $=C(Q.l),K=B();Q.expanded={},Q.expanded.l=$([Q.l,K]),w(Q.expanded.l,U),_(Q.expanded.l,U),Q.expanded.r=$([Q.r,K]),de&&(Q.expandedNC1={},Q.expandedNC1.l=$([he,Q.l]),Q.expandedNC1.r=$([he,Q.r]),Q.expandedNC2={},Q.expandedNC2.l=$([he,Q.expanded.l]),Q.expandedNC2.r=$([he,Q.expanded.r]))}return Q}function I(G,U){for(var Q=[],re=0;re<G.length;re++){var ie=G[re],de=void 0,he=typeof ie;switch(he){case"string":ie={s:ie};case"object":de=O(ie,U);break;case"function":de=ie;break;default:throw TypeError("Unsupported type of rule: "+he)}Q.push(de)}return Q}var M=0;function B(){return new m("_p"+M++)}function k(G,U){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Eh(),re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ie=re.consoleDebug;U=I(U||T.rules,re.context);var de=i(G,Q);de=R(de);for(var he={},$=de.toString({parenthesis:"all"});!he[$];){he[$]=!0,M=0;var K=$;ie&&console.log("Working on: ",$);for(var ue=0;ue<U.length;ue++){var ce="";if(typeof U[ue]=="function"?(de=U[ue](de,re),ie&&(ce=U[ue].name)):(w(de,re.context),de=Y(de,U[ue],re.context),ie&&(ce="".concat(U[ue].l.toString()," -> ").concat(U[ue].r.toString()))),ie){var ge=de.toString({parenthesis:"all"});ge!==K&&(console.log("Applying",ce,"produced",ge),K=ge)}E(de,re.context)}$=de.toString({parenthesis:"all"})}return de}function j(G,U,Q){var re=G;if(G)for(var ie=0;ie<G.length;++ie){var de=Y(G[ie],U,Q);de!==G[ie]&&(re===G&&(re=G.slice()),re[ie]=de)}return re}function Y(G,U,Q){if(U.assuming){for(var re in U.assuming)for(var ie in U.assuming[re])if(v(re,ie,Q)!==U.assuming[re][ie])return G}var de=b(U.imposeContext,Q),he=G;if(he instanceof h||he instanceof c){var $=j(he.args,U,Q);$!==he.args&&(he=he.clone(),he.args=$)}else if(he instanceof p){if(he.content){var K=Y(he.content,U,Q);K!==he.content&&(he=new p(K))}}else if(he instanceof u){var ue=j(he.items,U,Q);ue!==he.items&&(he=new u(ue))}else if(he instanceof s){var ce=he.object;he.object&&(ce=Y(he.object,U,Q));var ge=he.index;he.index&&(ge=Y(he.index,U,Q)),(ce!==he.object||ge!==he.index)&&(he=new s(ce,ge))}else if(he instanceof f){var Ce=j(he.dimensions,U,Q);Ce!==he.dimensions&&(he=new f(Ce))}else if(he instanceof d){var Ae=!1,Pe={};for(var H in he.properties)Pe[H]=Y(he.properties[H],U,Q),Pe[H]!==he.properties[H]&&(Ae=!0);Ae&&(he=new d(Pe))}var ee=U.r,le=te(U.l,he,de)[0];if(!le&&U.expanded&&(ee=U.expanded.r,le=te(U.expanded.l,he,de)[0]),!le&&U.expandedNC1&&(ee=U.expandedNC1.r,le=te(U.expandedNC1.l,he,de)[0],le||(ee=U.expandedNC2.r,le=te(U.expandedNC2.l,he,de)[0])),le){var pe=he.implicit;he=ee.clone(),pe&&"implicit"in ee&&(he.implicit=!0),he=he.transform(function(be){return be.isSymbolNode&&Ue(le.placeholders,be.name)?le.placeholders[be.name].clone():be})}return U.repeat&&he!==G&&(he=Y(he,U,Q)),he}function q(G,U){var Q=[],re,ie,de=C(G);if(x(G,U))for(var he=0;he<G.args.length;he++)ie=G.args.slice(0),ie.splice(he,1),re=ie.length===1?ie[0]:de(ie),Q.push(de([G.args[he],re]));else for(var $=1;$<G.args.length;$++){var K=G.args[0];$>1&&(K=de(G.args.slice(0,$))),ie=G.args.slice($),re=ie.length===1?ie[0]:de(ie),Q.push(de([K,re]))}return Q}function L(G,U){var Q={placeholders:{}};if(!G.placeholders&&!U.placeholders)return Q;if(G.placeholders){if(!U.placeholders)return G}else return U;for(var re in G.placeholders)if(Ue(G.placeholders,re)&&(Q.placeholders[re]=G.placeholders[re],Ue(U.placeholders,re)&&!oe(G.placeholders[re],U.placeholders[re])))return null;for(var ie in U.placeholders)Ue(U.placeholders,ie)&&(Q.placeholders[ie]=U.placeholders[ie]);return Q}function ne(G,U){var Q=[];if(G.length===0||U.length===0)return Q;for(var re,ie=0;ie<G.length;ie++)for(var de=0;de<U.length;de++)re=L(G[ie],U[de]),re&&Q.push(re);return Q}function fe(G){if(G.length===0)return G;for(var U=G.reduce(ne),Q=[],re={},ie=0;ie<U.length;ie++){var de=JSON.stringify(U[ie],y);re[de]||(re[de]=!0,Q.push(U[ie]))}return Q}function te(G,U,Q,re){var ie=[{placeholders:{}}];if(G instanceof h&&U instanceof h||G instanceof c&&U instanceof c){if(G instanceof h){if(G.op!==U.op||G.fn!==U.fn)return[]}else if(G instanceof c&&G.name!==U.name)return[];if(U.args.length===1&&G.args.length===1||!g(U,Q)&&U.args.length===G.args.length||re){for(var de=[],he=0;he<G.args.length;he++){var $=te(G.args[he],U.args[he],Q);if($.length===0)break;de.push($)}if(de.length!==G.args.length){if(!x(U,Q)||G.args.length===1)return[];if(G.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var K=te(G.args[0],U.args[1],Q);if(K.length===0)return[];var ue=te(G.args[1],U.args[0],Q);if(ue.length===0)return[];de=[K,ue]}ie=fe(de)}else if(U.args.length>=2&&G.args.length===2){for(var ce=q(U,Q),ge=[],Ce=0;Ce<ce.length;Ce++){var Ae=te(G,ce[Ce],Q,!0);ge=ge.concat(Ae)}return ge}else{if(G.args.length>2)throw Error("Unexpected non-binary associative function: "+G.toString());return[]}}else if(G instanceof m){if(G.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(F[G.name]){if(G.name!==U.name)return[]}else switch(G.name[1]>="a"&&G.name[1]<="z"?G.name.substring(0,2):G.name[0]){case"n":case"_p":ie[0].placeholders[G.name]=U;break;case"c":case"cl":if(Tt(U))ie[0].placeholders[G.name]=U;else return[];break;case"v":if(!Tt(U))ie[0].placeholders[G.name]=U;else return[];break;case"vl":if(ar(U))ie[0].placeholders[G.name]=U;else return[];break;case"cd":if(oM(U))ie[0].placeholders[G.name]=U;else return[];break;case"vd":if(!oM(U))ie[0].placeholders[G.name]=U;else return[];break;case"ce":if(dg(U))ie[0].placeholders[G.name]=U;else return[];break;case"ve":if(!dg(U))ie[0].placeholders[G.name]=U;else return[];break;default:throw new Error("Invalid symbol in rule: "+G.name)}}else if(G instanceof l){if(!r(G.value,U.value))return[]}else return[];return ie}function oe(G,U){if(G instanceof l&&U instanceof l){if(!r(G.value,U.value))return!1}else if(G instanceof m&&U instanceof m){if(G.name!==U.name)return!1}else if(G instanceof h&&U instanceof h||G instanceof c&&U instanceof c){if(G instanceof h){if(G.op!==U.op||G.fn!==U.fn)return!1}else if(G instanceof c&&G.name!==U.name)return!1;if(G.args.length!==U.args.length)return!1;for(var Q=0;Q<G.args.length;Q++)if(!oe(G.args[Q],U.args[Q]))return!1}else return!1;return!0}return T}),cce="simplifyConstant",fce=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],dce=z(cce,fce,t=>{var{typed:e,config:n,mathWithTransform:r,matrix:i,fraction:a,bignumber:o,AccessorNode:s,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,SymbolNode:p}=t,{isCommutative:m,isAssociative:y,allChildren:v,createMakeNodeFunction:x}=D_({FunctionNode:c,OperatorNode:h,SymbolNode:p}),g=e("simplifyConstant",{Node:O=>E(F(O,{})),"Node, Object":function(I,M){return E(F(I,M))}});function b(O){return ap(O)?O.valueOf():O instanceof Array?O.map(b):Je(O)?i(b(O.valueOf())):O}function w(O,I,M){try{return r[O].apply(null,I)}catch{return I=I.map(b),N(r[O].apply(null,I),M)}}var _=e({Fraction:A,number:function(I){return I<0?D(new l(-I)):new l(I)},BigNumber:function(I){return I<0?D(new l(-I)):new l(I)},bigint:function(I){return I<0n?D(new l(-I)):new l(I)},Complex:function(I){throw new Error("Cannot convert Complex number to Node")},string:function(I){return new l(I)},Matrix:function(I){return new u(I.valueOf().map(M=>_(M)))}});function E(O){return Vt(O)?O:_(O)}function C(O,I){var M=I&&I.exactFractions!==!1;if(M&&isFinite(O)&&a){var B=a(O),k=I&&typeof I.fractionsLimit=="number"?I.fractionsLimit:1/0;if(B.valueOf()===O&&B.n<k&&B.d<k)return B}return O}var N=e({"string, Object":function(I,M){var B=lu(I,n);if(B==="BigNumber")return o===void 0&&v_(),o(I);if(B==="bigint")return BigInt(I);if(B==="Fraction")return a===void 0&&wB(),a(I);var k=parseFloat(I);return C(k,M)},"Fraction, Object":function(I,M){return I},"BigNumber, Object":function(I,M){return I},"number, Object":function(I,M){return C(I,M)},"bigint, Object":function(I,M){return I},"Complex, Object":function(I,M){return I.im!==0?I:C(I.re,M)},"Matrix, Object":function(I,M){return i(C(I.valueOf()))},"Array, Object":function(I,M){return I.map(C)}});function D(O){return new h("-","unaryMinus",[O])}function A(O){var I=k=>n.number==="BigNumber"&&o?o(k):Number(k),M=O.s*O.n,B=M<0n?new h("-","unaryMinus",[new l(-I(M))]):new l(I(M));return O.d===1n?B:new h("/","divide",[B,new l(I(O.d))])}function T(O,I,M){if(!Tf(I))return new s(E(O),E(I));if(Hi(O)||Je(O)){for(var B=Array.from(I.dimensions);B.length>0;)if(Tt(B[0])&&typeof B[0].value!="string"){var k=N(B.shift().value,M);Hi(O)?O=O.items[k-1]:(O=O.valueOf()[k-1],O instanceof Array&&(O=i(O)))}else if(B.length>1&&Tt(B[1])&&typeof B[1].value!="string"){var j=N(B[1].value,M),Y=[],q=Hi(O)?O.items:O.valueOf();for(var L of q)if(Hi(L))Y.push(L.items[j-1]);else if(Je(O))Y.push(L[j-1]);else break;if(Y.length===q.length)Hi(O)?O=new u(Y):O=i(Y),B.splice(1,1);else break}else break;return B.length===I.dimensions.length?new s(E(O),I):B.length>0?(I=new f(B),new s(E(O),I)):O}if($0(O)&&I.dimensions.length===1&&Tt(I.dimensions[0])){var ne=I.dimensions[0].value;return ne in O.properties?O.properties[ne]:new l}return new s(E(O),I)}function R(O,I,M,B){var k=I.shift(),j=I.reduce((Y,q)=>{if(!Vt(q)){var L=Y.pop();if(Vt(L))return[L,q];try{return Y.push(w(O,[L,q],B)),Y}catch{Y.push(L)}}Y.push(E(Y.pop()));var ne=Y.length===1?Y[0]:M(Y);return[M([ne,E(q)])]},[k]);return j.length===1?j[0]:M([j[0],_(j[1])])}function F(O,I){switch(O.type){case"SymbolNode":return O;case"ConstantNode":switch(typeof O.value){case"number":return N(O.value,I);case"bigint":return N(O.value,I);case"string":return O.value;default:if(!isNaN(O.value))return N(O.value,I)}return O;case"FunctionNode":if(r[O.name]&&r[O.name].rawArgs)return O;{var M=["add","multiply"];if(!M.includes(O.name)){var B=O.args.map(re=>F(re,I));if(!B.some(Vt))try{return w(O.name,B,I)}catch{}if(O.name==="size"&&B.length===1&&Hi(B[0])){for(var k=[],j=B[0];Hi(j);)k.push(j.items.length),j=j.items[0];return i(k)}return new c(O.name,B.map(E))}}case"OperatorNode":{var Y=O.fn.toString(),q,L,ne=x(O);if(In(O)&&O.isUnary())q=[F(O.args[0],I)],Vt(q[0])?L=ne(q):L=w(Y,q,I);else if(y(O,I.context))if(q=v(O,I.context),q=q.map(re=>F(re,I)),m(Y,I.context)){for(var fe=[],te=[],oe=0;oe<q.length;oe++)Vt(q[oe])?te.push(q[oe]):fe.push(q[oe]);fe.length>1?(L=R(Y,fe,ne,I),te.unshift(L),L=R(Y,te,ne,I)):L=R(Y,q,ne,I)}else L=R(Y,q,ne,I);else q=O.args.map(re=>F(re,I)),L=R(Y,q,ne,I);return L}case"ParenthesisNode":return F(O.content,I);case"AccessorNode":return T(F(O.object,I),F(O.index,I),I);case"ArrayNode":{var G=O.items.map(re=>F(re,I));return G.some(Vt)?new u(G.map(E)):i(G)}case"IndexNode":return new f(O.dimensions.map(re=>g(re,I)));case"ObjectNode":{var U={};for(var Q in O.properties)U[Q]=g(O.properties[Q],I);return new d(U)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(O.type))}}return g}),uM="simplifyCore",hce=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],pce=z(uM,hce,t=>{var{typed:e,parse:n,equal:r,isZero:i,add:a,subtract:o,multiply:s,divide:u,pow:l,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:h,IndexNode:p,ObjectNode:m,OperatorNode:y,ParenthesisNode:v,SymbolNode:x}=t,g=new d(0),b=new d(1),w=new d(!0),_=new d(!1);function E(A){return In(A)&&["and","not","or"].includes(A.op)}var{hasProperty:C,isCommutative:N}=D_({FunctionNode:h,OperatorNode:y,SymbolNode:x});function D(A){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=T?T.context:void 0;if(C(A,"trivial",R)){if(Ys(A)&&A.args.length===1)return D(A.args[0],T);var F=!1,O=0;if(A.forEach(te=>{++O,O===1&&(F=D(te,T))}),O===1)return F}var I=A;if(Ys(I)){var M=pne(I.name);if(M){if(I.args.length>2&&C(I,"associative",R))for(;I.args.length>2;){var B=I.args.pop(),k=I.args.pop();I.args.push(new y(M,I.name,[B,k]))}I=new y(M,I.name,I.args)}else return new h(D(I.fn),I.args.map(te=>D(te,T)))}if(In(I)&&I.isUnary()){var j=D(I.args[0],T);if(I.op==="~"&&In(j)&&j.isUnary()&&j.op==="~"||I.op==="not"&&In(j)&&j.isUnary()&&j.op==="not"&&E(j.args[0]))return j.args[0];var Y=!0;if(I.op==="-"&&In(j)&&(j.isBinary()&&j.fn==="subtract"&&(I=new y("-","subtract",[j.args[1],j.args[0]]),Y=!1),j.isUnary()&&j.op==="-"))return j.args[0];if(Y)return new y(I.op,I.fn,[j])}if(In(I)&&I.isBinary()){var q=D(I.args[0],T),L=D(I.args[1],T);if(I.op==="+"){if(Tt(q)&&i(q.value))return L;if(Tt(L)&&i(L.value))return q;In(L)&&L.isUnary()&&L.op==="-"&&(L=L.args[0],I=new y("-","subtract",[q,L]))}if(I.op==="-")return In(L)&&L.isUnary()&&L.op==="-"?D(new y("+","add",[q,L.args[0]]),T):Tt(q)&&i(q.value)?D(new y("-","unaryMinus",[L])):Tt(L)&&i(L.value)?q:new y(I.op,I.fn,[q,L]);if(I.op==="*"){if(Tt(q)){if(i(q.value))return g;if(r(q.value,1))return L}if(Tt(L)){if(i(L.value))return g;if(r(L.value,1))return q;if(N(I,R))return new y(I.op,I.fn,[L,q],I.implicit)}return new y(I.op,I.fn,[q,L],I.implicit)}if(I.op==="/")return Tt(q)&&i(q.value)?g:Tt(L)&&r(L.value,1)?q:new y(I.op,I.fn,[q,L]);if(I.op==="^"&&Tt(L)){if(i(L.value))return b;if(r(L.value,1))return q}if(I.op==="and"){if(Tt(q))if(q.value){if(E(L))return L;if(Tt(L))return L.value?w:_}else return _;if(Tt(L))if(L.value){if(E(q))return q}else return _}if(I.op==="or"){if(Tt(q)){if(q.value)return w;if(E(L))return L}if(Tt(L)){if(L.value)return w;if(E(q))return q}}return new y(I.op,I.fn,[q,L])}if(In(I))return new y(I.op,I.fn,I.args.map(te=>D(te,T)));if(Hi(I))return new f(I.items.map(te=>D(te,T)));if(ll(I))return new c(D(I.object,T),D(I.index,T));if(Tf(I))return new p(I.dimensions.map(te=>D(te,T)));if($0(I)){var ne={};for(var fe in I.properties)ne[fe]=D(I.properties[fe],T);return new m(ne)}return I}return e(uM,{Node:D,"Node,Object":D})}),mce="resolve",vce=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],gce=z(mce,vce,t=>{var{typed:e,parse:n,ConstantNode:r,FunctionNode:i,OperatorNode:a,ParenthesisNode:o}=t;function s(u,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!l)return u;if(ar(u)){if(c.has(u.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=l.get(u.name);if(Vt(d)){var h=new Set(c);return h.add(u.name),s(d,l,h)}else return typeof d=="number"?n(String(d)):d!==void 0?new r(d):u}else if(In(u)){var p=u.args.map(function(y){return s(y,l,c)});return new a(u.op,u.fn,p,u.implicit)}else{if(Wo(u))return new o(s(u.content,l,c));if(Ys(u)){var m=u.args.map(function(y){return s(y,l,c)});return new i(u.name,m)}}return u.map(y=>s(y,l,c))}return e("resolve",{Node:s,"Node, Map | null | undefined":s,"Node, Object":(u,l)=>s(u,kc(l)),"Array | Matrix":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array | Matrix, null | undefined":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array, Object":e.referTo("Array,Map",u=>(l,c)=>u(l,kc(c))),"Matrix, Object":e.referTo("Matrix,Map",u=>(l,c)=>u(l,kc(c))),"Array | Matrix, Map":e.referToSelf(u=>(l,c)=>l.map(f=>u(f,c)))})}),lM="symbolicEqual",yce=["parse","simplify","typed","OperatorNode"],xce=z(lM,yce,t=>{var{parse:e,simplify:n,typed:r,OperatorNode:i}=t;function a(o,s){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new i("-","subtract",[o,s]),c=n(l,{},u);return Tt(c)&&!c.value}return r(lM,{"Node, Node":a,"Node, Node, Object":a})}),cM="derivative",bce=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],wce=z(cM,bce,t=>{var{typed:e,config:n,parse:r,simplify:i,equal:a,isZero:o,numeric:s,ConstantNode:u,FunctionNode:l,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=t;function h(b,w){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},E=new Map,C=w.name;function N(A){var T=E.get(A);if(T!==void 0)return T;var R=v(N,A,C);return E.set(A,R),R}var D=x(b,N);return _.simplify?i(D):D}function p(b){var w=r(b);if(!w.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(b)," into a variable in function derivative"));return w}var m=e(cM,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h,"Node, string":(b,w)=>h(b,p(w)),"Node, string, Object":(b,w,_)=>h(b,p(w),_)});m._simplify=!0,m.toTex=function(b){return y.apply(null,b.args)};var y=e("_derivTex",{"Node, SymbolNode":function(w,_){return Tt(w)&&Zt(w.value)==="string"?y(r(w.value).toString(),_.toString(),1):y(w.toTex(),_.toString(),1)},"Node, ConstantNode":function(w,_){if(Zt(_.value)==="string")return y(w,r(_.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(w,_,E){return y(w.toString(),_.name,E.value)},"string, string, number":function(w,_,E){var C;return E===1?C="{d\\over d"+_+"}":C="{d^{"+E+"}\\over d"+_+"^{"+E+"}}",C+"\\left[".concat(w,"\\right]")}}),v=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(w,_,E){return _.name!==E},"function, ParenthesisNode, string":function(w,_,E){return w(_.content,E)},"function, FunctionAssignmentNode, string":function(w,_,E){return _.params.includes(E)?w(_.expr,E):!0},"function, FunctionNode | OperatorNode, string":function(w,_,E){return _.args.every(C=>w(C,E))}}),x=e("_derivative",{"ConstantNode, function":function(){return g(0)},"SymbolNode, function":function(w,_){return _(w)?g(0):g(1)},"ParenthesisNode, function":function(w,_){return new f(x(w.content,_))},"FunctionAssignmentNode, function":function(w,_){return _(w)?g(0):x(w.expr,_)},"FunctionNode, function":function(w,_){if(_(w))return g(0);var E=w.args[0],C,N=!1,D=!1,A;switch(w.name){case"cbrt":N=!0,A=new c("*","multiply",[g(3),new c("^","pow",[E,new c("/","divide",[g(2),g(3)])])]);break;case"sqrt":case"nthRoot":if(w.args.length===1)N=!0,A=new c("*","multiply",[g(2),new l("sqrt",[E])]);else if(w.args.length===2)return C=new c("/","divide",[g(1),w.args[1]]),x(new c("^","pow",[E,C]),_);break;case"log10":C=g(10);case"log":if(!C&&w.args.length===1)A=E.clone(),N=!0;else if(w.args.length===1&&C||w.args.length===2&&_(w.args[1]))A=new c("*","multiply",[E.clone(),new l("log",[C||w.args[1]])]),N=!0;else if(w.args.length===2)return x(new c("/","divide",[new l("log",[E]),new l("log",[w.args[1]])]),_);break;case"pow":if(w.args.length===2)return x(new c("^","pow",[E,w.args[1]]),_);break;case"exp":A=new l("exp",[E.clone()]);break;case"sin":A=new l("cos",[E.clone()]);break;case"cos":A=new c("-","unaryMinus",[new l("sin",[E.clone()])]);break;case"tan":A=new c("^","pow",[new l("sec",[E.clone()]),g(2)]);break;case"sec":A=new c("*","multiply",[w,new l("tan",[E.clone()])]);break;case"csc":D=!0,A=new c("*","multiply",[w,new l("cot",[E.clone()])]);break;case"cot":D=!0,A=new c("^","pow",[new l("csc",[E.clone()]),g(2)]);break;case"asin":N=!0,A=new l("sqrt",[new c("-","subtract",[g(1),new c("^","pow",[E.clone(),g(2)])])]);break;case"acos":N=!0,D=!0,A=new l("sqrt",[new c("-","subtract",[g(1),new c("^","pow",[E.clone(),g(2)])])]);break;case"atan":N=!0,A=new c("+","add",[new c("^","pow",[E.clone(),g(2)]),g(1)]);break;case"asec":N=!0,A=new c("*","multiply",[new l("abs",[E.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),g(2)]),g(1)])])]);break;case"acsc":N=!0,D=!0,A=new c("*","multiply",[new l("abs",[E.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),g(2)]),g(1)])])]);break;case"acot":N=!0,D=!0,A=new c("+","add",[new c("^","pow",[E.clone(),g(2)]),g(1)]);break;case"sinh":A=new l("cosh",[E.clone()]);break;case"cosh":A=new l("sinh",[E.clone()]);break;case"tanh":A=new c("^","pow",[new l("sech",[E.clone()]),g(2)]);break;case"sech":D=!0,A=new c("*","multiply",[w,new l("tanh",[E.clone()])]);break;case"csch":D=!0,A=new c("*","multiply",[w,new l("coth",[E.clone()])]);break;case"coth":D=!0,A=new c("^","pow",[new l("csch",[E.clone()]),g(2)]);break;case"asinh":N=!0,A=new l("sqrt",[new c("+","add",[new c("^","pow",[E.clone(),g(2)]),g(1)])]);break;case"acosh":N=!0,A=new l("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),g(2)]),g(1)])]);break;case"atanh":N=!0,A=new c("-","subtract",[g(1),new c("^","pow",[E.clone(),g(2)])]);break;case"asech":N=!0,D=!0,A=new c("*","multiply",[E.clone(),new l("sqrt",[new c("-","subtract",[g(1),new c("^","pow",[E.clone(),g(2)])])])]);break;case"acsch":N=!0,D=!0,A=new c("*","multiply",[new l("abs",[E.clone()]),new l("sqrt",[new c("+","add",[new c("^","pow",[E.clone(),g(2)]),g(1)])])]);break;case"acoth":N=!0,D=!0,A=new c("-","subtract",[g(1),new c("^","pow",[E.clone(),g(2)])]);break;case"abs":A=new c("/","divide",[new l(new d("abs"),[E.clone()]),E.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+w.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var T,R;N?(T="/",R="divide"):(T="*",R="multiply");var F=x(E,_);return D&&(F=new c("-","unaryMinus",[F])),new c(T,R,[F,A])},"OperatorNode, function":function(w,_){if(_(w))return g(0);if(w.op==="+")return new c(w.op,w.fn,w.args.map(function(I){return x(I,_)}));if(w.op==="-"){if(w.isUnary())return new c(w.op,w.fn,[x(w.args[0],_)]);if(w.isBinary())return new c(w.op,w.fn,[x(w.args[0],_),x(w.args[1],_)])}if(w.op==="*"){var E=w.args.filter(function(I){return _(I)});if(E.length>0){var C=w.args.filter(function(I){return!_(I)}),N=C.length===1?C[0]:new c("*","multiply",C),D=E.concat(x(N,_));return new c("*","multiply",D)}return new c("+","add",w.args.map(function(I){return new c("*","multiply",w.args.map(function(M){return M===I?x(M,_):M.clone()}))}))}if(w.op==="/"&&w.isBinary()){var A=w.args[0],T=w.args[1];return _(T)?new c("/","divide",[x(A,_),T]):_(A)?new c("*","multiply",[new c("-","unaryMinus",[A]),new c("/","divide",[x(T,_),new c("^","pow",[T.clone(),g(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[x(A,_),T.clone()]),new c("*","multiply",[A.clone(),x(T,_)])]),new c("^","pow",[T.clone(),g(2)])])}if(w.op==="^"&&w.isBinary()){var R=w.args[0],F=w.args[1];if(_(R))return Tt(R)&&(o(R.value)||a(R.value,1))?g(0):new c("*","multiply",[w,new c("*","multiply",[new l("log",[R.clone()]),x(F.clone(),_)])]);if(_(F)){if(Tt(F)){if(o(F.value))return g(0);if(a(F.value,1))return x(R,_)}var O=new c("^","pow",[R.clone(),new c("-","subtract",[F,g(1)])]);return new c("*","multiply",[F.clone(),new c("*","multiply",[x(R,_),O])])}return new c("*","multiply",[new c("^","pow",[R.clone(),F.clone()]),new c("+","add",[new c("*","multiply",[x(R,_),new c("/","divide",[F.clone(),R.clone()])]),new c("*","multiply",[x(F,_),new l("log",[R.clone()])])])])}throw new Error('Cannot process operator "'+w.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function g(b,w){return new u(s(b,lu(String(b),n)))}return m}),fM="rationalize",_ce=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],Ece=z(fM,_ce,t=>{var{config:e,typed:n,equal:r,isZero:i,add:a,subtract:o,multiply:s,divide:u,pow:l,parse:c,simplifyConstant:f,simplifyCore:d,simplify:h,fraction:p,bignumber:m,mathWithTransform:y,matrix:v,AccessorNode:x,ArrayNode:g,ConstantNode:b,FunctionNode:w,IndexNode:_,ObjectNode:E,OperatorNode:C,SymbolNode:N,ParenthesisNode:D}=t;function A(I){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,k=R(),j=T(I,M,!0,k.firstRules),Y=j.variables.length,q={exactFractions:!1},L={exactFractions:!0};if(I=j.expression,Y>=1){I=F(I);var ne,fe,te=!0,oe=!1;I=h(I,k.firstRules,{},q);for(var G;fe=te?k.distrDivRules:k.sucDivRules,I=h(I,fe,{},L),te=!te,G=I.toString(),G!==ne;)oe=!0,ne=G;oe&&(I=h(I,k.firstRulesAgain,{},q)),I=h(I,k.finalRules,{},q)}var U=[],Q={};return I.type==="OperatorNode"&&I.isBinary()&&I.op==="/"?(Y===1&&(I.args[0]=O(I.args[0],U),I.args[1]=O(I.args[1])),B&&(Q.numerator=I.args[0],Q.denominator=I.args[1])):(Y===1&&(I=O(I,U)),B&&(Q.numerator=I,Q.denominator=null)),B?(Q.coefficients=U,Q.variables=j.variables,Q.expression=I,Q):I}return n(fM,{Node:A,"Node, boolean":(I,M)=>A(I,{},M),"Node, Object":A,"Node, Object, boolean":A});function T(I,M,B,k){var j=[],Y=h(I,k,M,{exactFractions:!1});B=!!B;var q="+-*"+(B?"/":"");ne(Y);var L={};return L.expression=Y,L.variables=j,L;function ne(fe){var te=fe.type;if(te==="FunctionNode")throw new Error("There is an unsolved function call");if(te==="OperatorNode")if(fe.op==="^"){if(fe.args[1].type!=="ConstantNode"||!qe(parseFloat(fe.args[1].value)))throw new Error("There is a non-integer exponent");ne(fe.args[0])}else{if(!q.includes(fe.op))throw new Error("Operator "+fe.op+" invalid in polynomial expression");for(var oe=0;oe<fe.args.length;oe++)ne(fe.args[oe])}else if(te==="SymbolNode"){var G=fe.name,U=j.indexOf(G);U===-1&&j.push(G)}else if(te==="ParenthesisNode")ne(fe.content);else if(te!=="ConstantNode")throw new Error("type "+te+" is not allowed in polynomial expression")}}function R(){var I=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],M=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],B=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],k=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],j={};return j.firstRules=I.concat(M,k),j.distrDivRules=B,j.sucDivRules=k,j.firstRulesAgain=I.concat(M),j.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],j}function F(I,M,B){var k=I.type,j=arguments.length>1;if(k==="OperatorNode"&&I.isBinary()){var Y=!1,q;if(I.op==="^"&&(I.args[0].type==="ParenthesisNode"||I.args[0].type==="OperatorNode")&&I.args[1].type==="ConstantNode"&&(q=parseFloat(I.args[1].value),Y=q>=2&&qe(q)),Y){if(q>2){var L=I.args[0],ne=new C("^","pow",[I.args[0].cloneDeep(),new b(q-1)]);I=new C("*","multiply",[L,ne])}else I=new C("*","multiply",[I.args[0],I.args[0].cloneDeep()]);j&&(B==="content"?M.content=I:M.args[B]=I)}}if(k==="ParenthesisNode")F(I.content,I,"content");else if(k!=="ConstantNode"&&k!=="SymbolNode")for(var fe=0;fe<I.args.length;fe++)F(I.args[fe],I,fe);if(!j)return I}function O(I,M){M===void 0&&(M=[]),M[0]=0;var B={};B.cte=1,B.oper="+",B.fire="";var k=0,j="";G(I,null,B),k=M.length-1;for(var Y=!0,q,L=k;L>=0;L--)if(M[L]!==0){var ne=new b(Y?M[L]:Math.abs(M[L])),fe=M[L]<0?"-":"+";if(L>0){var te=new N(j);if(L>1){var oe=new b(L);te=new C("^","pow",[te,oe])}M[L]===-1&&Y?ne=new C("-","unaryMinus",[te]):Math.abs(M[L])===1?ne=te:ne=new C("*","multiply",[ne,te])}Y?q=ne:fe==="+"?q=new C("+","add",[q,ne]):q=new C("-","subtract",[q,ne]),Y=!1}if(Y)return new b(0);return q;function G(U,Q,re){var ie=U.type;if(ie==="FunctionNode")throw new Error("There is an unsolved function call");if(ie==="OperatorNode"){if(!"+-*^".includes(U.op))throw new Error("Operator "+U.op+" invalid");if(Q!==null){if((U.fn==="unaryMinus"||U.fn==="pow")&&Q.fn!=="add"&&Q.fn!=="subtract"&&Q.fn!=="multiply")throw new Error("Invalid "+U.op+" placing");if((U.fn==="subtract"||U.fn==="add"||U.fn==="multiply")&&Q.fn!=="add"&&Q.fn!=="subtract")throw new Error("Invalid "+U.op+" placing");if((U.fn==="subtract"||U.fn==="add"||U.fn==="unaryMinus")&&re.noFil!==0)throw new Error("Invalid "+U.op+" placing")}(U.op==="^"||U.op==="*")&&(re.fire=U.op);for(var de=0;de<U.args.length;de++)U.fn==="unaryMinus"&&(re.oper="-"),(U.op==="+"||U.fn==="subtract")&&(re.fire="",re.cte=1,re.oper=de===0?"+":U.op),re.noFil=de,G(U.args[de],U,re)}else if(ie==="SymbolNode"){if(U.name!==j&&j!=="")throw new Error("There is more than one variable");if(j=U.name,Q===null){M[1]=1;return}if(Q.op==="^"&&re.noFil!==0)throw new Error("In power the variable should be the first parameter");if(Q.op==="*"&&re.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(re.fire===""||re.fire==="*")&&(k<1&&(M[1]=0),M[1]+=re.cte*(re.oper==="+"?1:-1),k=Math.max(1,k))}else if(ie==="ConstantNode"){var he=parseFloat(U.value);if(Q===null){M[0]=he;return}if(Q.op==="^"){if(re.noFil!==1)throw new Error("Constant cannot be powered");if(!qe(he)||he<=0)throw new Error("Non-integer exponent is not allowed");for(var $=k+1;$<he;$++)M[$]=0;he>k&&(M[he]=0),M[he]+=re.cte*(re.oper==="+"?1:-1),k=Math.max(he,k);return}re.cte=he,re.fire===""&&(M[0]+=re.cte*(re.oper==="+"?1:-1))}else throw new Error("Type "+ie+" is not allowed")}}}),dM="zpk2tf",Cce=["typed","add","multiply","Complex","number"],Nce=z(dM,Cce,t=>{var{typed:e,add:n,multiply:r,Complex:i,number:a}=t;return e(dM,{"Array,Array,number":function(l,c,f){return o(l,c,f)},"Array,Array":function(l,c){return o(l,c,1)},"Matrix,Matrix,number":function(l,c,f){return o(l.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(l,c){return o(l.valueOf(),c.valueOf(),1)}});function o(u,l,c){u.some(x=>x.type==="BigNumber")&&(u=u.map(x=>a(x))),l.some(x=>x.type==="BigNumber")&&(l=l.map(x=>a(x)));for(var f=[i(1,0)],d=[i(1,0)],h=0;h<u.length;h++){var p=u[h];typeof p=="number"&&(p=i(p,0)),f=s(f,[i(1,0),i(-p.re,-p.im)])}for(var m=0;m<l.length;m++){var y=l[m];typeof y=="number"&&(y=i(y,0)),d=s(d,[i(1,0),i(-y.re,-y.im)])}for(var v=0;v<f.length;v++)f[v]=r(f[v],c);return[f,d]}function s(u,l){for(var c=[],f=0;f<u.length+l.length-1;f++){c[f]=i(0,0);for(var d=0;d<u.length;d++)f-d>=0&&f-d<l.length&&(c[f]=n(c[f],r(u[d],l[f-d])))}return c}}),hM="freqz",Sce=["typed","add","multiply","Complex","divide","matrix"],Dce=z(hM,Sce,t=>{var{typed:e,add:n,multiply:r,Complex:i,divide:a,matrix:o}=t;return e(hM,{"Array, Array":function(c,f){var d=u(512);return s(c,f,d)},"Array, Array, Array":function(c,f,d){return s(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d);return s(c,f,h)},"Matrix, Matrix":function(c,f){var d=u(512),{w:h,h:p}=s(c.valueOf(),f.valueOf(),d);return{w:o(h),h:o(p)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h}=s(c.valueOf(),f.valueOf(),d.valueOf());return{h:o(h),w:o(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d),{h:p}=s(c.valueOf(),f.valueOf(),h);return{h:o(p),w:o(h)}}});function s(l,c,f){for(var d=[],h=[],p=0;p<f.length;p++){for(var m=i(0,0),y=i(0,0),v=0;v<l.length;v++)m=n(m,r(l[v],i(Math.cos(-v*f[p]),Math.sin(-v*f[p]))));for(var x=0;x<c.length;x++)y=n(y,r(c[x],i(Math.cos(-x*f[p]),Math.sin(-x*f[p]))));d.push(m),h.push(y)}for(var g=[],b=0;b<d.length;b++)g.push(a(d[b],h[b]));return{h:g,w:f}}function u(l){for(var c=[],f=0;f<l;f++)c.push(f/l*Math.PI);return c}}),Ace="reviver",Tce=["classes"],Mce=z(Ace,Tce,t=>{var{classes:e}=t;return function(r,i){var a=e[i&&i.mathjs];return a&&typeof a.fromJSON=="function"?a.fromJSON(i):i}}),Ice="replacer",kce=[],Rce=z(Ice,kce,()=>function(e,n){return typeof n=="number"&&(!isFinite(n)||isNaN(n))?{mathjs:"number",value:String(n)}:typeof n=="bigint"?{mathjs:"bigint",value:String(n)}:n}),Fce="14.4.0",Pce=z("true",[],()=>!0),Oce=z("false",[],()=>!1),Bce=z("null",[],()=>null),Lce=ji("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1/0):1/0}),jce=ji("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(NaN):NaN}),$ce=ji("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?x_(n):GG}),zce=ji("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?yee(n):KG}),Uce=ji("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?vee(n):YG}),Vce=ji("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?gee(n):XG}),Wce=ji("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).ln():Math.LN2}),qce=ji("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(10).ln():Math.LN10}),Hce=ji("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(2).ln()):Math.LOG2E}),Gce=ji("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(10).ln()):Math.LOG10E}),Kce=ji("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n("0.5").sqrt():Math.SQRT1_2}),Yce=ji("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).sqrt():Math.SQRT2}),Xce=ji("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),Qce=z("version",[],()=>Fce);function ji(t,e,n){return z(t,e,n,{recreateOnConfigChange:!0})}var Zce=ct("speedOfLight","299792458","m s^-1"),Jce=ct("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),efe=ct("planckConstant","6.62607015e-34","J s"),tfe=ct("reducedPlanckConstant","1.0545718176461565e-34","J s"),nfe=ct("magneticConstant","1.25663706212e-6","N A^-2"),rfe=ct("electricConstant","8.8541878128e-12","F m^-1"),ife=ct("vacuumImpedance","376.730313667","ohm"),afe=ct("coulomb","8.987551792261171e9","N m^2 C^-2"),ofe=ct("elementaryCharge","1.602176634e-19","C"),sfe=ct("bohrMagneton","9.2740100783e-24","J T^-1"),ufe=ct("conductanceQuantum","7.748091729863649e-5","S"),lfe=ct("inverseConductanceQuantum","12906.403729652257","ohm"),cfe=ct("magneticFluxQuantum","2.0678338484619295e-15","Wb"),ffe=ct("nuclearMagneton","5.0507837461e-27","J T^-1"),dfe=ct("klitzing","25812.807459304513","ohm"),hfe=ct("bohrRadius","5.29177210903e-11","m"),pfe=ct("classicalElectronRadius","2.8179403262e-15","m"),mfe=ct("electronMass","9.1093837015e-31","kg"),vfe=ct("fermiCoupling","1.1663787e-5","GeV^-2"),gfe=X0("fineStructure",.0072973525693),yfe=ct("hartreeEnergy","4.3597447222071e-18","J"),xfe=ct("protonMass","1.67262192369e-27","kg"),bfe=ct("deuteronMass","3.3435830926e-27","kg"),wfe=ct("neutronMass","1.6749271613e-27","kg"),_fe=ct("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),Efe=ct("rydberg","10973731.568160","m^-1"),Cfe=ct("thomsonCrossSection","6.6524587321e-29","m^2"),Nfe=X0("weakMixingAngle",.2229),Sfe=X0("efimovFactor",22.7),Dfe=ct("atomicMass","1.66053906660e-27","kg"),Afe=ct("avogadro","6.02214076e23","mol^-1"),Tfe=ct("boltzmann","1.380649e-23","J K^-1"),Mfe=ct("faraday","96485.33212331001","C mol^-1"),Ife=ct("firstRadiation","3.7417718521927573e-16","W m^2"),kfe=ct("loschmidt","2.686780111798444e25","m^-3"),Rfe=ct("gasConstant","8.31446261815324","J K^-1 mol^-1"),Ffe=ct("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Pfe=ct("molarVolume","0.022413969545014137","m^3 mol^-1"),Ofe=X0("sackurTetrode",-1.16487052358),Bfe=ct("secondRadiation","0.014387768775039337","m K"),Lfe=ct("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),jfe=ct("wienDisplacement","2.897771955e-3","m K"),$fe=ct("molarMass","0.99999999965e-3","kg mol^-1"),zfe=ct("molarMassC12","11.9999999958e-3","kg mol^-1"),Ufe=ct("gravity","9.80665","m s^-2"),Vfe=ct("planckLength","1.616255e-35","m"),Wfe=ct("planckMass","2.176435e-8","kg"),qfe=ct("planckTime","5.391245e-44","s"),Hfe=ct("planckCharge","1.87554603778e-18","C"),Gfe=ct("planckTemperature","1.416785e+32","K");function ct(t,e,n){var r=["config","Unit","BigNumber"];return z(t,r,i=>{var{config:a,Unit:o,BigNumber:s}=i,u=a.number==="BigNumber"?new s(e):parseFloat(e),l=new o(u,n);return l.fixPrefix=!0,l})}function X0(t,e){var n=["config","BigNumber"];return z(t,n,r=>{var{config:i,BigNumber:a}=r;return i.number==="BigNumber"?new a(e):e})}function pM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pM(Object(n),!0).forEach(function(r){Bn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Yfe="mapSlices",Xfe=["typed","isInteger"],Qfe=z(Yfe,Xfe,t=>{var{typed:e,isInteger:n}=t,r=Ub({typed:e,isInteger:n});return e("mapSlices",{"...any":function(a){var o=a[1];dt(o)?a[1]=o-1:ht(o)&&(a[1]=o.minus(1));try{return r.apply(null,a)}catch(s){throw ei(s)}}})},Kfe({isTransformFunction:!0},Ub.meta)),Zfe="column",Jfe=["typed","Index","matrix","range"],ede=z(Zfe,Jfe,t=>{var{typed:e,Index:n,matrix:r,range:i}=t,a=vB({typed:e,Index:n,matrix:r,range:i});return e("column",{"...any":function(s){var u=s.length-1,l=s[u];dt(l)&&(s[u]=l-1);try{return a.apply(null,s)}catch(c){throw ei(c)}}})},{isTransformFunction:!0});function A_(t,e,n){var r=t.filter(function(u){return ar(u)&&!(u.name in e)&&!n.has(u.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+t+'"');var i=r.name,a=new Map,o=new $P(n,a,new Set([i])),s=t.compile();return function(l){return a.set(i,l),s.evaluate(o)}}var tde="transformCallback",nde=["typed"],T_=z(tde,nde,t=>{var{typed:e}=t;return function(r,i){return e.isTypedFunction(r)?n(r,i):mM(r,r.length,i)};function n(r,i){var a=Object.fromEntries(Object.entries(r.signatures).map(o=>{var[s,u]=o,l=s.split(",").length;return e.isTypedFunction(u)?[s,n(u,i)]:[s,mM(u,l,i)]}));return typeof r.name=="string"?e(r.name,a):e(a)}});function mM(t,e,n){return e===n?t:e===n+1?function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.slice(0,n),s=vM(i[n]);return t(...o,s)}:e>n+1?function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.slice(0,n),s=vM(i[n]),u=i.slice(n+1);return t(...o,s,...u)}:t}function vM(t){return t.map(e=>e+1)}var rde="filter",ide=["typed"],ade=z(rde,ide,t=>{var{typed:e}=t;function n(i,a,o){var s=gB({typed:e}),u=T_({typed:e});if(i.length===0)return s();var l=i[0];if(i.length===1)return s(l);var c=i.length-1,f=i[c];return l&&(l=r(l,o)),f&&(ar(f)||op(f)?f=r(f,o):f=A_(f,a,o)),s(l,u(f,c))}n.rawArgs=!0;function r(i,a){return i.compile().evaluate(a)}return n},{isTransformFunction:!0}),ode="forEach",sde=["typed"],ude=z(ode,sde,t=>{var{typed:e}=t,n=yB({typed:e}),r=T_({typed:e});function i(o,s,u){if(o.length===0)return n();var l=o[0];if(o.length===1)return n(l);var c=o.length-1,f=o[c];return l&&(l=a(l,u)),f&&(ar(f)||op(f)?f=a(f,u):f=A_(f,s,u)),n(l,r(f,c))}i.rawArgs=!0;function a(o,s){return o.compile().evaluate(s)}return i},{isTransformFunction:!0}),lde="index",cde=["Index","getMatrixDataType"],fde=z(lde,cde,t=>{var{Index:e,getMatrixDataType:n}=t;return function(){for(var i=[],a=0,o=arguments.length;a<o;a++){var s=arguments[a];if(i_(s))s.start--,s.end-=s.step>0?0:2;else if(s&&s.isSet===!0)s=s.map(function(l){return l-1});else if(Ht(s)||Je(s))n(s)!=="boolean"&&(s=s.map(function(l){return l-1}));else if(dt(s)||zd(s))s--;else if(ht(s))s=s.toNumber()-1;else if(typeof s!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");i[a]=s}var u=new e;return e.apply(u,i),u}},{isTransformFunction:!0}),dde="map",hde=["typed"],pde=z(dde,hde,t=>{var{typed:e}=t,n=xB({typed:e}),r=T_({typed:e});function i(a,o,s){if(a.length===0)return n();if(a.length===1)return n(a[0]);var u=a.length-1,l=a.slice(0,u),c=a[u];return l=l.map(d=>f(d,s)),c&&(ar(c)||op(c)?c=f(c,s):c=A_(c,o,s)),n(...l,r(c,u));function f(d,h){return d.compile().evaluate(h)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function mde(t){return dt(t)?t-1:ht(t)?t.minus(1):t}function vde(t){return dt(t)||ht(t)}function du(t){if(t.length===2&&aa(t[0])){t=t.slice();var e=t[1];vde(e)&&(t[1]=mde(e))}return t}var gde="max",yde=["typed","config","numeric","larger","isNaN"],xde=z(gde,yde,t=>{var{typed:e,config:n,numeric:r,larger:i,isNaN:a}=t,o=TB({typed:e,config:n,numeric:r,larger:i,isNaN:a});return e("max",{"...any":function(u){u=du(u);try{return o.apply(null,u)}catch(l){throw ei(l)}}})},{isTransformFunction:!0}),bde="mean",wde=["typed","add","divide"],_de=z(bde,wde,t=>{var{typed:e,add:n,divide:r}=t,i=LB({typed:e,add:n,divide:r});return e("mean",{"...any":function(o){o=du(o);try{return i.apply(null,o)}catch(s){throw ei(s)}}})},{isTransformFunction:!0}),Ede="min",Cde=["typed","config","numeric","smaller","isNaN"],Nde=z(Ede,Cde,t=>{var{typed:e,config:n,numeric:r,smaller:i,isNaN:a}=t,o=MB({typed:e,config:n,numeric:r,smaller:i,isNaN:a});return e("min",{"...any":function(u){u=du(u);try{return o.apply(null,u)}catch(l){throw ei(l)}}})},{isTransformFunction:!0}),Sde="range",Dde=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],Ade=z(Sde,Dde,t=>{var{typed:e,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:u,add:l,isPositive:c}=t,f=EB({typed:e,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:u,add:l,isPositive:c});return e("range",{"...any":function(h){var p=h.length-1,m=h[p];return typeof m!="boolean"&&h.push(!0),f.apply(null,h)}})},{isTransformFunction:!0}),Tde="row",Mde=["typed","Index","matrix","range"],Ide=z(Tde,Mde,t=>{var{typed:e,Index:n,matrix:r,range:i}=t,a=CB({typed:e,Index:n,matrix:r,range:i});return e("row",{"...any":function(s){var u=s.length-1,l=s[u];dt(l)&&(s[u]=l-1);try{return a.apply(null,s)}catch(c){throw ei(c)}}})},{isTransformFunction:!0}),kde="subset",Rde=["typed","matrix","zeros","add"],Fde=z(kde,Rde,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t,a=NB({typed:e,matrix:n,zeros:r,add:i});return e("subset",{"...any":function(s){try{return a.apply(null,s)}catch(u){throw ei(u)}}})},{isTransformFunction:!0}),Pde="concat",Ode=["typed","matrix","isInteger"],Bde=z(Pde,Ode,t=>{var{typed:e,matrix:n,isInteger:r}=t,i=mB({typed:e,matrix:n,isInteger:r});return e("concat",{"...any":function(o){var s=o.length-1,u=o[s];dt(u)?o[s]=u-1:ht(u)&&(o[s]=u.minus(1));try{return i.apply(null,o)}catch(l){throw ei(l)}}})},{isTransformFunction:!0}),gM="diff",Lde=["typed","matrix","subtract","number","bignumber"],jde=z(gM,Lde,t=>{var{typed:e,matrix:n,subtract:r,number:i,bignumber:a}=t,o=bB({typed:e,matrix:n,subtract:r,number:i,bignumber:a});return e(gM,{"...any":function(u){u=du(u);try{return o.apply(null,u)}catch(l){throw ei(l)}}})},{isTransformFunction:!0}),$de="std",zde=["typed","map","sqrt","variance"],Ude=z($de,zde,t=>{var{typed:e,map:n,sqrt:r,variance:i}=t,a=zB({typed:e,map:n,sqrt:r,variance:i});return e("std",{"...any":function(s){s=du(s);try{return a.apply(null,s)}catch(u){throw ei(u)}}})},{isTransformFunction:!0}),yM="sum",Vde=["typed","config","add","numeric"],Wde=z(yM,Vde,t=>{var{typed:e,config:n,add:r,numeric:i}=t,a=OB({typed:e,config:n,add:r,numeric:i});return e(yM,{"...any":function(s){s=du(s);try{return a.apply(null,s)}catch(u){throw ei(u)}}})},{isTransformFunction:!0}),qde="quantileSeq",Hde=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],Gde=z(qde,Hde,t=>{var{typed:e,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d,mapSlices:h}=t,p=$B({typed:e,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d,mapSlices:h});return e("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(y,v,x)=>p(y,v,m(x)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(y,v,x,g)=>p(y,v,x,m(g)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(y,v,x)=>p(y,v,m(x)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(y,v,x,g)=>p(y,v,x,m(g))});function m(y){return du([[],y])[1]}},{isTransformFunction:!0}),xM="cumsum",Kde=["typed","add","unaryPlus"],Yde=z(xM,Kde,t=>{var{typed:e,add:n,unaryPlus:r}=t,i=BB({typed:e,add:n,unaryPlus:r});return e(xM,{"...any":function(o){if(o.length===2&&aa(o[0])){var s=o[1];dt(s)?o[1]=s-1:ht(s)&&(o[1]=s.minus(1))}try{return i.apply(null,o)}catch(u){throw ei(u)}}})},{isTransformFunction:!0}),bM="variance",Xde=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],Qde=z(bM,Xde,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,mapSlices:o,isNaN:s}=t,u=jB({typed:e,add:n,subtract:r,multiply:i,divide:a,mapSlices:o,isNaN:s});return e(bM,{"...any":function(c){c=du(c);try{return u.apply(null,c)}catch(f){throw ei(f)}}})},{isTransformFunction:!0}),wM="print",Zde=["typed","matrix","zeros","add"],Jde=z(wM,Zde,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t,a=DB({typed:e,matrix:n,zeros:r,add:i});return e(wM,{"string, Object | Array":function(u,l){return a(o(u),l)},"string, Object | Array, number | Object":function(u,l,c){return a(o(u),l,c)}});function o(s){return s.replace(SB,u=>{var l=u.slice(1).split("."),c=l.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),ehe="and",the=["typed","matrix","zeros","add","equalScalar","not","concat"],nhe=z(ehe,the,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=t,s=AB({typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:o});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!aa(d)&&!s(d,!0))return!1;var h=l[1].compile().evaluate(f);return s(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),rhe="or",ihe=["typed","matrix","equalScalar","DenseMatrix","concat"],ahe=z(rhe,ihe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,o=pB({typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a});function s(u,l,c){var f=u[0].compile().evaluate(c);if(!aa(f)&&o(f,!1))return!0;var d=u[1].compile().evaluate(c);return o(f,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),ohe="bitAnd",she=["typed","matrix","zeros","add","equalScalar","not","concat"],uhe=z(ohe,she,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=t,s=dB({typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:o});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!aa(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var h=l[1].compile().evaluate(f);return s(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),lhe="bitOr",che=["typed","matrix","equalScalar","DenseMatrix","concat"],fhe=z(lhe,che,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,o=hB({typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a});function s(u,l,c){var f=u[0].compile().evaluate(c);if(!aa(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=u[1].compile().evaluate(c);return o(f,d)}return s.rawArgs=!0,s},{isTransformFunction:!0}),Re=sG({config:Ee}),Yt=dG({}),_M=Uce({BigNumber:Re,config:Ee}),dhe=Oce({}),hhe=gfe({BigNumber:Re,config:Ee}),Tl=xG({}),WB=Xce({Complex:Yt}),phe=Lce({BigNumber:Re,config:Ee}),mhe=qce({BigNumber:Re,config:Ee}),vhe=Gce({BigNumber:Re,config:Ee}),Q0=NG({}),ghe=jce({BigNumber:Re,config:Ee}),yhe=Bce({}),xhe=Vce({BigNumber:Re,config:Ee}),bhe=_G({}),qB=fH({}),whe=Kce({BigNumber:Re,config:Ee}),_he=Ofe({BigNumber:Re,config:Ee}),HB=zce({BigNumber:Re,config:Ee}),Ehe=Pce({}),Che=Qce({}),gt=zG({Matrix:Q0}),Nhe=Sfe({BigNumber:Re,config:Ee}),She=Wce({BigNumber:Re,config:Ee}),Qb=$ce({BigNumber:Re,config:Ee}),GB=Rce({}),Dhe=Yce({BigNumber:Re,config:Ee}),Z=sH({BigNumber:Re,Complex:Yt,DenseMatrix:gt,Fraction:Tl}),Ahe=Nfe({BigNumber:Re,config:Ee}),ti=nY({typed:Z}),The=Tee({Complex:Yt,config:Ee,typed:Z}),Mhe=Ree({BigNumber:Re,typed:Z}),Ihe=Bee({BigNumber:Re,Complex:Yt,config:Ee,typed:Z}),Yn=oY({typed:Z}),khe=KX({typed:Z}),Rhe=Vee({BigNumber:Re,Complex:Yt,config:Ee,typed:Z}),Fhe=Kee({typed:Z}),KB=Qee({typed:Z}),Phe=tte({Complex:Yt,config:Ee,typed:Z}),Ohe=DK({typed:Z}),Bhe=zX({typed:Z}),Lhe=IK({typed:Z}),jhe=VG({typed:Z}),Z0=lle({typed:Z}),J0=BK({Complex:Yt,typed:Z}),Ml=XX({typed:Z}),M_=rte({typed:Z}),$he=ste({BigNumber:Re,typed:Z}),zhe=fte({BigNumber:Re,typed:Z}),Uhe=_Y({typed:Z}),wt=vK({config:Ee,typed:Z}),Vhe=pZ({typed:Z}),YB=CY({typed:Z}),Whe=SY({Complex:Yt,typed:Z}),qhe=gB({typed:Z}),cp=gQ({typed:Z}),Hhe=yB({typed:Z}),fp=NZ({typed:Z}),I_=wQ({typed:Z}),Ghe=IZ({format:fp,typed:Z}),k_=ZX({typed:Z}),mi=qG({typed:Z}),hu=tK({config:Ee,typed:Z}),Il=sK({config:Ee,typed:Z}),uo=lK({equalScalar:wt,typed:Z}),Khe=Hce({BigNumber:Re,config:Ee}),Yhe=mle({Complex:Yt,typed:Z}),Xhe=sX({Complex:Yt,config:Ee,typed:Z}),R_=lX({Complex:Yt,config:Ee,typed:Z}),kl=xB({typed:Z}),Tn=dX({typed:Z}),hg=nQ({typed:Z}),Jo=CK({typed:Z}),Qhe=TZ({format:fp,typed:Z}),Zhe=Vle({config:Ee,typed:Z}),Jhe=DB({typed:Z}),epe=qle({config:Ee,typed:Z}),F_=eQ({typed:Z}),tpe=mte({BigNumber:Re,typed:Z}),XB=yX({BigNumber:Re,Fraction:Tl,complex:J0,typed:Z}),ey=xte({typed:Z}),Xn=xK({Matrix:Q0,equalScalar:wt,typed:Z}),npe=XK({typed:Z}),rpe=EX({typed:Z}),ipe=TK({typed:Z}),ua=uY({typed:Z}),ape=Ete({typed:Z}),P_=hK({typed:Z}),ope=Iee({Complex:Yt,config:Ee,typed:Z}),spe=jee({BigNumber:Re,typed:Z}),upe=zee({BigNumber:Re,Complex:Yt,config:Ee,typed:Z}),vi=FK({BigNumber:Re,typed:Z}),lpe=fle({typed:Z}),cpe=ate({typed:Z}),fpe=hte({BigNumber:Re,typed:Z}),Fo=fK({typed:Z}),dpe=OZ({typed:Z}),Ah=Ub({isInteger:mi,typed:Z}),Ie=UK({DenseMatrix:gt,Matrix:Q0,SparseMatrix:Xn,typed:Z}),hpe=WK({isZero:uo,matrix:Ie,typed:Z}),ppe=MQ({BigNumber:Re,config:Ee,matrix:Ie,typed:Z}),mpe=Kle({config:Ee,log2:R_,typed:Z}),QB=RQ({isInteger:mi,matrix:Ie,typed:Z}),vpe=gte({BigNumber:Re,typed:Z}),gpe=wte({typed:Z}),ype=Nee({SparseMatrix:Xn,typed:Z}),Oa=wX({Complex:Yt,config:Ee,typed:Z}),xpe=qQ({typed:Z}),bpe=Ste({typed:Z}),dp=QQ({matrix:Ie,typed:Z}),ZB=DX({BigNumber:Re,config:Ee,matrix:Ie,typed:Z}),vr=tZ({BigNumber:Re,config:Ee,matrix:Ie,typed:Z}),wpe=Pee({BigNumber:Re,Complex:Yt,config:Ee,typed:Z}),_pe=qee({Complex:Yt,config:Ee,typed:Z}),Epe=DZ({format:fp,typed:Z}),Ft=mB({isInteger:mi,matrix:Ie,typed:Z}),Cpe=lte({BigNumber:Re,typed:Z}),O_=JQ({conj:Ml,transpose:dp,typed:Z}),JB=hQ({DenseMatrix:gt,SparseMatrix:Xn,matrix:Ie,typed:Z}),Npe=RX({concat:Ft,equalScalar:wt,matrix:Ie,multiplyScalar:Tn,typed:Z}),la=MJ({DenseMatrix:gt,SparseMatrix:Xn,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z}),hp=$K({Fraction:Tl,typed:Z}),pu=EQ({BigNumber:Re,DenseMatrix:gt,SparseMatrix:Xn,config:Ee,matrix:Ie,typed:Z}),Rl=rK({typed:Z}),Spe=NQ({matrix:Ie,multiplyScalar:Tn,typed:Z}),ty=WJ({DenseMatrix:gt,SparseMatrix:Xn,concat:Ft,config:Ee,matrix:Ie,typed:Z}),Dpe=pJ({DenseMatrix:gt,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z,zeros:vr}),Ape=wZ({isNaN:Fo,isNumeric:Rl,typed:Z}),Tpe=vX({BigNumber:Re,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z}),na=jZ({bignumber:vi,fraction:hp,number:Jo}),e5=EZ({config:Ee,multiplyScalar:Tn,numeric:na,typed:Z}),Mpe=OQ({config:Ee,matrix:Ie}),Ipe=vJ({DenseMatrix:gt,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z,zeros:vr}),Pf=qZ({BigNumber:Re,DenseMatrix:gt,config:Ee,equalScalar:wt,matrix:Ie,typed:Z,zeros:vr}),_r=VQ({matrix:Ie,config:Ee,typed:Z}),Gr=PJ({DenseMatrix:gt,SparseMatrix:Xn,bignumber:vi,concat:Ft,config:Ee,matrix:Ie,typed:Z}),kpe=FZ({concat:Ft,matrix:Ie,typed:Z}),lo=ZK({typed:Z}),Rpe=YJ({DenseMatrix:gt,SparseMatrix:Xn,concat:Ft,config:Ee,equalScalar:wt,matrix:Ie,typed:Z}),Fpe=aQ({DenseMatrix:gt,SparseMatrix:Xn,concat:Ft,matrix:Ie,typed:Z}),Ct=Kte({DenseMatrix:gt,SparseMatrix:Xn,addScalar:Yn,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z}),Ppe=Jee({BigNumber:Re,DenseMatrix:gt,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z}),Ope=dB({concat:Ft,equalScalar:wt,matrix:Ie,typed:Z}),Bpe=hB({DenseMatrix:gt,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z}),Lpe=HX({DenseMatrix:gt,SparseMatrix:Xn,concat:Ft,matrix:Ie,typed:Z}),t5=cY({BigNumber:Re,Complex:Yt,Fraction:Tl,config:Ee,isNegative:hu,matrix:Ie,typed:Z,unaryMinus:lo}),Fl=wJ({BigNumber:Re,DenseMatrix:gt,Fraction:Tl,concat:Ft,config:Ee,equalScalar:wt,matrix:Ie,typed:Z}),n5=AJ({concat:Ft,matrix:Ie,typed:Z}),jpe=lQ({prod:e5,size:_r,typed:Z}),B_=GJ({equal:la,typed:Z}),vn=zZ({numeric:na,typed:Z}),pp=nJ({DenseMatrix:gt,SparseMatrix:Xn,concat:Ft,divideScalar:vn,equalScalar:wt,matrix:Ie,typed:Z}),$pe=RJ({compareText:n5,isZero:uo,typed:Z}),r5=lB({DenseMatrix:gt,config:Ee,equalScalar:wt,matrix:Ie,round:Pf,typed:Z,zeros:vr}),zpe=eX({BigNumber:Re,DenseMatrix:gt,concat:Ft,config:Ee,equalScalar:wt,matrix:Ie,round:Pf,typed:Z,zeros:vr}),Upe=aK({isNumeric:Rl,typed:Z}),Vpe=Xte({abs:ti,addScalar:Yn,divideScalar:vn,isPositive:Il,multiplyScalar:Tn,smaller:Gr,sqrt:Oa,typed:Z}),i5=aee({DenseMatrix:gt,smaller:Gr}),Or=uee({ImmutableDenseMatrix:i5,getMatrixDataType:I_}),Kr=zJ({DenseMatrix:gt,SparseMatrix:Xn,bignumber:vi,concat:Ft,config:Ee,matrix:Ie,typed:Z}),L_=KZ({Complex:Yt,config:Ee,divideScalar:vn,typeOf:P_,typed:Z}),a5=iJ({DenseMatrix:gt,divideScalar:vn,equalScalar:wt,matrix:Ie,multiplyScalar:Tn,subtractScalar:ua,typed:Z}),j_=KK({flatten:cp,matrix:Ie,size:_r,typed:Z}),$_=TB({config:Ee,isNaN:Fo,larger:Kr,numeric:na,typed:Z}),Wpe=MB({config:Ee,isNaN:Fo,numeric:na,smaller:Gr,typed:Z}),o5=cB({DenseMatrix:gt,concat:Ft,config:Ee,equalScalar:wt,matrix:Ie,round:Pf,typed:Z,zeros:vr}),qpe=ZZ({Complex:Yt,config:Ee,divideScalar:vn,typed:Z}),Hpe=pB({DenseMatrix:gt,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z}),ny=ZJ({compare:Fl,isNaN:Fo,isNumeric:Rl,typed:Z}),z_=ure({addScalar:Yn,complex:J0,conj:Ml,divideScalar:vn,equal:la,identity:pu,isZero:uo,matrix:Ie,multiplyScalar:Tn,sign:XB,sqrt:Oa,subtractScalar:ua,typed:Z,unaryMinus:lo,zeros:vr}),Gpe=yJ({DenseMatrix:gt,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z,zeros:vr}),cf=LJ({DenseMatrix:gt,SparseMatrix:Xn,concat:Ft,config:Ee,matrix:Ie,typed:Z}),$i=NB({add:Ct,matrix:Ie,typed:Z,zeros:vr}),Rn=NX({DenseMatrix:gt,concat:Ft,equalScalar:wt,matrix:Ie,subtractScalar:ua,typed:Z,unaryMinus:lo}),Kpe=rne({add:Ct,matrix:Ie,typed:Z}),U_=oJ({DenseMatrix:gt,divideScalar:vn,equalScalar:wt,matrix:Ie,multiplyScalar:Tn,subtractScalar:ua,typed:Z}),Ype=ece({addScalar:Yn,combinations:Z0,divideScalar:vn,isInteger:mi,isNegative:hu,multiplyScalar:Tn,typed:Z}),co=NJ({compare:Fl,typed:Z}),Xpe=nce({addScalar:Yn,combinations:Z0,isInteger:mi,isNegative:hu,isPositive:Il,larger:Kr,typed:Z}),Qpe=bB({matrix:Ie,number:Jo,subtract:Rn,typed:Z}),Zpe=Hue({abs:ti,addScalar:Yn,deepEqual:B_,divideScalar:vn,multiplyScalar:Tn,sqrt:Oa,subtractScalar:ua,typed:Z}),ry=ene({addScalar:Yn,conj:Ml,multiplyScalar:Tn,size:_r,typed:Z}),s5=fee({larger:Kr,smaller:Gr}),u5=ane({Index:Or,typed:Z}),Jpe=TX({BigNumber:Re,add:Ct,config:Ee,equal:la,isInteger:mi,mod:o5,smaller:Gr,typed:Z,xgcd:ZB}),eme=iX({concat:Ft,equalScalar:wt,matrix:Ie,typed:Z}),tme=XZ({Complex:Yt,config:Ee,divideScalar:vn,log:L_,typed:Z}),nme=uJ({DenseMatrix:gt,divideScalar:vn,equalScalar:wt,matrix:Ie,multiplyScalar:Tn,subtractScalar:ua,typed:Z}),rme=HK({flatten:cp,matrix:Ie,size:_r,typed:Z}),Ut=pX({addScalar:Yn,dot:ry,equalScalar:wt,matrix:Ie,multiplyScalar:Tn,typed:Z}),ff=EB({bignumber:vi,matrix:Ie,add:Ct,config:Ee,isPositive:Il,larger:Kr,largerEq:ty,smaller:Gr,smallerEq:cf,typed:Z}),ime=CB({Index:Or,matrix:Ie,range:ff,typed:Z}),ame=Ate({DenseMatrix:gt,Index:Or,compareNatural:co,size:_r,subset:$i,typed:Z}),ome=kte({DenseMatrix:gt,Index:Or,compareNatural:co,size:_r,subset:$i,typed:Z}),sme=Ote({Index:Or,compareNatural:co,size:_r,subset:$i,typed:Z}),ume=$te({Index:Or,compareNatural:co,size:_r,subset:$i,typed:Z}),l5=kre({SparseMatrix:Xn,abs:ti,add:Ct,divideScalar:vn,larger:Kr,largerEq:ty,multiply:Ut,subtract:Rn,transpose:dp,typed:Z}),lme=eee({compare:Fl,compareNatural:co,matrix:Ie,typed:Z}),V_=eY({config:Ee,numeric:na,typed:Z}),c5=cJ({DenseMatrix:gt,divideScalar:vn,equalScalar:wt,matrix:Ie,multiplyScalar:Tn,subtractScalar:ua,typed:Z}),cme=Nce({Complex:Yt,add:Ct,multiply:Ut,number:Jo,typed:Z}),fme=AB({concat:Ft,equalScalar:wt,matrix:Ie,not:hg,typed:Z,zeros:vr}),W_=bY({DenseMatrix:gt,config:Ee,equalScalar:wt,matrix:Ie,round:Pf,typed:Z,zeros:vr}),f5=vB({Index:Or,matrix:Ie,range:ff,typed:Z}),dme=fQ({matrix:Ie,multiply:Ut,subtract:Rn,typed:Z}),d5=_ue({divideScalar:vn,isZero:uo,matrix:Ie,multiply:Ut,subtractScalar:ua,typed:Z,unaryMinus:lo}),h5=TY({Complex:Yt,DenseMatrix:gt,ceil:W_,equalScalar:wt,floor:r5,matrix:Ie,typed:Z,zeros:vr}),Pl=Cue({abs:ti,addScalar:Yn,det:d5,divideScalar:vn,identity:pu,matrix:Ie,multiply:Ut,typed:Z,unaryMinus:lo}),hme=Sue({Complex:Yt,add:Ct,ctranspose:O_,deepEqual:B_,divideScalar:vn,dot:ry,dotDivide:pp,equal:la,inv:Pl,matrix:Ie,multiply:Ut,typed:Z}),Ba=VZ({Complex:Yt,config:Ee,fraction:hp,identity:pu,inv:Pl,matrix:Ie,multiply:Ut,number:Jo,typed:Z}),p5=Mte({DenseMatrix:gt,Index:Or,compareNatural:co,size:_r,subset:$i,typed:Z}),pme=Lte({Index:Or,compareNatural:co,size:_r,subset:$i,typed:Z}),m5=Wte({Index:Or,concat:Ft,setDifference:p5,size:_r,subset:$i,typed:Z}),v5=pee({FibonacciHeap:s5,addScalar:Yn,equalScalar:wt}),mme=Pue({abs:ti,add:Ct,identity:pu,inv:Pl,map:kl,max:$_,multiply:Ut,size:_r,sqrt:Oa,subtract:Rn,typed:Z}),q_=OB({add:Ct,config:Ee,numeric:na,typed:Z}),rt=wee({BigNumber:Re,Complex:Yt,Fraction:Tl,abs:ti,addScalar:Yn,config:Ee,divideScalar:vn,equal:la,fix:h5,format:fp,isNumeric:Rl,multiplyScalar:Tn,number:Jo,pow:Ba,round:Pf,subtractScalar:ua}),vme=ife({BigNumber:Re,Unit:rt,config:Ee}),gme=jfe({BigNumber:Re,Unit:rt,config:Ee}),yme=Dfe({BigNumber:Re,Unit:rt,config:Ee}),xme=sfe({BigNumber:Re,Unit:rt,config:Ee}),bme=Tfe({BigNumber:Re,Unit:rt,config:Ee}),wme=ufe({BigNumber:Re,Unit:rt,config:Ee}),_me=afe({BigNumber:Re,Unit:rt,config:Ee}),Eme=BB({add:Ct,typed:Z,unaryPlus:V_}),Cme=bfe({BigNumber:Re,Unit:rt,config:Ee}),Nme=eJ({DenseMatrix:gt,SparseMatrix:Xn,concat:Ft,equalScalar:wt,matrix:Ie,pow:Ba,typed:Z}),Sme=rfe({BigNumber:Re,Unit:rt,config:Ee}),Dme=ofe({BigNumber:Re,Unit:rt,config:Ee}),Ame=Rue({abs:ti,add:Ct,identity:pu,inv:Pl,multiply:Ut,typed:Z}),Tme=Mfe({BigNumber:Re,Unit:rt,config:Ee}),g5=rZ({addScalar:Yn,ceil:W_,conj:Ml,divideScalar:vn,dotDivide:pp,exp:YB,i:WB,log2:R_,matrix:Ie,multiplyScalar:Tn,pow:Ba,tau:HB,typed:Z}),H_=hle({BigNumber:Re,Complex:Yt,config:Ee,multiplyScalar:Tn,pow:Ba,typed:Z}),Mme=Jce({BigNumber:Re,Unit:rt,config:Ee}),Ime=yfe({BigNumber:Re,Unit:rt,config:Ee}),kme=aZ({conj:Ml,dotDivide:pp,fft:g5,typed:Z}),Rme=lfe({BigNumber:Re,Unit:rt,config:Ee}),Fme=dfe({BigNumber:Re,Unit:rt,config:Ee}),Pme=kfe({BigNumber:Re,Unit:rt,config:Ee}),Ome=nfe({BigNumber:Re,Unit:rt,config:Ee}),Bme=$fe({BigNumber:Re,Unit:rt,config:Ee}),Lme=Ffe({BigNumber:Re,Unit:rt,config:Ee}),jme=wfe({BigNumber:Re,Unit:rt,config:Ee}),$me=ffe({BigNumber:Re,Unit:rt,config:Ee}),zme=Hfe({BigNumber:Re,Unit:rt,config:Ee}),Ume=Vfe({BigNumber:Re,Unit:rt,config:Ee}),Vme=Gfe({BigNumber:Re,Unit:rt,config:Ee}),Wme=xfe({BigNumber:Re,Unit:rt,config:Ee}),qme=_fe({BigNumber:Re,Unit:rt,config:Ee}),Hme=tfe({BigNumber:Re,Unit:rt,config:Ee}),Gme=Efe({BigNumber:Re,Unit:rt,config:Ee}),Kme=Bfe({BigNumber:Re,Unit:rt,config:Ee}),Yme=Ute({compareNatural:co,typed:Z}),Xme=Zce({BigNumber:Re,Unit:rt,config:Ee}),Qme=Lfe({BigNumber:Re,Unit:rt,config:Ee}),Zme=Cfe({BigNumber:Re,Unit:rt,config:Ee}),Jme=Afe({BigNumber:Re,Unit:rt,config:Ee}),eve=hfe({BigNumber:Re,Unit:rt,config:Ee}),tve=Dee({Unit:rt,typed:Z}),yr=Wue({divideScalar:vn,equalScalar:wt,inv:Pl,matrix:Ie,multiply:Ut,typed:Z}),nve=mfe({BigNumber:Re,Unit:rt,config:Ee}),mp=gle({gamma:H_,typed:Z}),rve=Ife({BigNumber:Re,Unit:rt,config:Ee}),ive=Ufe({BigNumber:Re,Unit:rt,config:Ee}),ave=Yue({abs:ti,add:Ct,addScalar:Yn,config:Ee,divideScalar:vn,equalScalar:wt,flatten:cp,isNumeric:Rl,isZero:uo,matrix:Ie,multiply:Ut,multiplyScalar:Tn,smaller:Gr,subtract:Rn,typed:Z}),y5=ore({DenseMatrix:gt,Spa:v5,SparseMatrix:Xn,abs:ti,addScalar:Yn,divideScalar:vn,equalScalar:wt,larger:Kr,matrix:Ie,multiplyScalar:Tn,subtractScalar:ua,typed:Z,unaryMinus:lo}),ove=cfe({BigNumber:Re,Unit:rt,config:Ee}),sve=zfe({BigNumber:Re,Unit:rt,config:Ee}),uve=wle({add:Ct,divide:yr,factorial:mp,isInteger:mi,isPositive:Il,multiply:Ut,typed:Z}),lve=Ele({factorial:mp,typed:Z}),cve=Wfe({BigNumber:Re,Unit:rt,config:Ee}),fve=Ore({add:Ct,cbrt:t5,divide:yr,equalScalar:wt,im:k_,isZero:uo,multiply:Ut,re:F_,sqrt:Oa,subtract:Rn,typeOf:P_,typed:Z,unaryMinus:lo}),x5=Fte({DenseMatrix:gt,Index:Or,compareNatural:co,size:_r,subset:$i,typed:Z}),dve=fZ({abs:ti,add:Ct,bignumber:vi,divide:yr,isNegative:hu,isPositive:Il,larger:Kr,map:kl,matrix:Ie,max:$_,multiply:Ut,smaller:Gr,subtract:Rn,typed:Z,unaryMinus:lo}),b5=Xle({bignumber:vi,addScalar:Yn,combinations:Z0,divideScalar:vn,factorial:mp,isInteger:mi,isNegative:hu,larger:Kr,multiplyScalar:Tn,number:Jo,pow:Ba,subtractScalar:ua,typed:Z}),hve=Eee({Unit:rt,typed:Z}),pve=Zle({addScalar:Yn,isInteger:mi,isNegative:hu,stirlingS2:b5,typed:Z}),w5=Iue({abs:ti,add:Ct,addScalar:Yn,atan:KB,bignumber:vi,column:f5,complex:J0,config:Ee,cos:M_,diag:JB,divideScalar:vn,dot:ry,equal:la,flatten:cp,im:k_,inv:Pl,larger:Kr,matrix:Ie,matrixFromColumns:j_,multiply:Ut,multiplyScalar:Tn,number:Jo,qr:z_,re:F_,reshape:QB,sin:ey,size:_r,smaller:Gr,sqrt:Oa,subtract:Rn,typed:Z,usolve:U_,usolveAll:c5}),mve=vfe({BigNumber:Re,Unit:rt,config:Ee}),vve=Rfe({BigNumber:Re,Unit:rt,config:Ee}),gve=xle({divide:yr,dotDivide:pp,isNumeric:Rl,log:L_,map:kl,matrix:Ie,multiply:Ut,sum:q_,typed:Z}),_5=Fre({DenseMatrix:gt,lsolve:a5,lup:y5,matrix:Ie,slu:l5,typed:Z,usolve:U_}),E5=LB({add:Ct,divide:yr,typed:Z}),yve=Pfe({BigNumber:Re,Unit:rt,config:Ee}),xve=efe({BigNumber:Re,Unit:rt,config:Ee}),bve=$B({bignumber:vi,add:Ct,compare:Fl,divide:yr,isInteger:mi,larger:Kr,mapSlices:Ah,multiply:Ut,partitionSelect:ny,smaller:Gr,smallerEq:cf,subtract:Rn,typed:Z}),wve=Hte({Index:Or,concat:Ft,setIntersect:x5,setSymDifference:m5,size:_r,subset:$i,typed:Z}),G_=jB({add:Ct,divide:yr,isNaN:Fo,mapSlices:Ah,multiply:Ut,subtract:Rn,typed:Z}),_ve=pfe({BigNumber:Re,Unit:rt,config:Ee}),C5=ele({add:Ct,compare:Fl,divide:yr,partitionSelect:ny,typed:Z}),Eve=sle({add:Ct,divide:yr,matrix:Ie,mean:E5,multiply:Ut,pow:Ba,sqrt:Oa,subtract:Rn,sum:q_,typed:Z}),Cve=Dce({Complex:Yt,add:Ct,divide:yr,matrix:Ie,multiply:Ut,typed:Z}),Nve=nle({abs:ti,map:kl,median:C5,subtract:Rn,typed:Z}),Sve=zB({map:kl,sqrt:Oa,typed:Z,variance:G_}),Dve=xZ({BigNumber:Re,Complex:Yt,add:Ct,config:Ee,divide:yr,equal:la,factorial:mp,gamma:H_,isNegative:hu,multiply:Ut,pi:Qb,pow:Ba,sin:ey,smallerEq:cf,subtract:Rn,typed:Z}),K_=Zte({abs:ti,add:Ct,conj:Ml,ctranspose:O_,eigs:w5,equalScalar:wt,larger:Kr,matrix:Ie,multiply:Ut,pow:Ba,smaller:Gr,sqrt:Oa,typed:Z}),N5=$Q({BigNumber:Re,DenseMatrix:gt,SparseMatrix:Xn,addScalar:Yn,config:Ee,cos:M_,matrix:Ie,multiplyScalar:Tn,norm:K_,sin:ey,typed:Z,unaryMinus:lo}),Ave=qfe({BigNumber:Re,Unit:rt,config:Ee}),S5=jue({identity:pu,matrix:Ie,multiply:Ut,norm:K_,qr:z_,subtract:Rn,typed:Z}),Tve=LQ({multiply:Ut,rotationMatrix:N5,typed:Z}),D5=Bue({abs:ti,add:Ct,concat:Ft,identity:pu,index:u5,lusolve:_5,matrix:Ie,matrixFromColumns:j_,multiply:Ut,range:ff,schur:S5,subset:$i,subtract:Rn,transpose:dp,typed:Z}),Mve=zue({matrix:Ie,multiply:Ut,sylvester:D5,transpose:dp,typed:Z}),Of={},vp={},A5={},zr=une({mathWithTransform:vp}),Bf=Fne({Node:zr}),es=One({Node:zr}),Ol=Lne({Node:zr}),T5=Une({Node:zr}),Lf=dne({Node:zr}),M5=yne({Node:zr,ResultSet:qB}),I5=bne({Node:zr}),mu=Ane({Node:zr}),k5=$ne({Node:zr}),Ive=Mce({classes:A5}),Y_=Ure({math:Of,typed:Z}),R5=Mne({Node:zr,typed:Z}),kve=bue({Chain:Y_,typed:Z}),jf=cne({Node:zr,subset:$i}),F5=vne({matrix:Ie,Node:zr,subset:$i}),$f=kne({Node:zr,size:_r}),vu=qne({Unit:rt,Node:zr,math:Of}),gu=Gne({Node:zr,SymbolNode:vu,math:Of}),La=Yne({AccessorNode:jf,ArrayNode:Lf,AssignmentNode:F5,BlockNode:M5,ConditionalNode:I5,ConstantNode:mu,FunctionAssignmentNode:R5,FunctionNode:gu,IndexNode:$f,ObjectNode:Bf,OperatorNode:es,ParenthesisNode:Ol,RangeNode:k5,RelationalNode:T5,SymbolNode:vu,config:Ee,numeric:na,typed:Z}),P5=gce({ConstantNode:mu,FunctionNode:gu,OperatorNode:es,ParenthesisNode:Ol,parse:La,typed:Z}),X_=dce({bignumber:vi,fraction:hp,AccessorNode:jf,ArrayNode:Lf,ConstantNode:mu,FunctionNode:gu,IndexNode:$f,ObjectNode:Bf,OperatorNode:es,SymbolNode:vu,config:Ee,mathWithTransform:vp,matrix:Ie,typed:Z}),Rve=Qne({parse:La,typed:Z}),Q_=pce({AccessorNode:jf,ArrayNode:Lf,ConstantNode:mu,FunctionNode:gu,IndexNode:$f,ObjectNode:Bf,OperatorNode:es,ParenthesisNode:Ol,SymbolNode:vu,add:Ct,divide:yr,equal:la,isZero:uo,multiply:Ut,parse:La,pow:Ba,subtract:Rn,typed:Z}),iy=Jne({parse:La,typed:Z}),O5=jre({evaluate:iy}),B5=nre({evaluate:iy,parse:La}),ay=lce({AccessorNode:jf,ArrayNode:Lf,ConstantNode:mu,FunctionNode:gu,IndexNode:$f,ObjectNode:Bf,OperatorNode:es,ParenthesisNode:Ol,SymbolNode:vu,equal:la,parse:La,replacer:GB,resolve:P5,simplifyConstant:X_,simplifyCore:Q_,typed:Z}),Fve=xce({OperatorNode:es,parse:La,simplify:ay,typed:Z}),Pve=ice({parse:La,typed:Z}),Ove=ire({Parser:B5,typed:Z}),Bve=Ece({bignumber:vi,fraction:hp,AccessorNode:jf,ArrayNode:Lf,ConstantNode:mu,FunctionNode:gu,IndexNode:$f,ObjectNode:Bf,OperatorNode:es,ParenthesisNode:Ol,SymbolNode:vu,add:Ct,config:Ee,divide:yr,equal:la,isZero:uo,mathWithTransform:vp,matrix:Ie,multiply:Ut,parse:La,pow:Ba,simplify:ay,simplifyConstant:X_,simplifyCore:Q_,subtract:Rn,typed:Z}),Lve=wce({ConstantNode:mu,FunctionNode:gu,OperatorNode:es,ParenthesisNode:Ol,SymbolNode:vu,config:Ee,equal:la,isZero:uo,numeric:na,parse:La,simplify:ay,typed:Z}),jve=yue({Help:O5,mathWithTransform:vp,typed:Z});zn(Of,{e:_M,false:dhe,fineStructure:hhe,i:WB,Infinity:phe,LN10:mhe,LOG10E:vhe,NaN:ghe,null:yhe,phi:xhe,SQRT1_2:whe,sackurTetrode:_he,tau:HB,true:Ehe,E:_M,version:Che,efimovFactor:Nhe,LN2:She,pi:Qb,replacer:GB,reviver:Ive,SQRT2:Dhe,typed:Z,PI:Qb,weakMixingAngle:Ahe,abs:ti,acos:The,acot:Mhe,acsc:Ihe,addScalar:Yn,arg:khe,asech:Rhe,asinh:Fhe,atan:KB,atanh:Phe,bigint:Ohe,bitNot:Bhe,boolean:Lhe,clone:jhe,combinations:Z0,complex:J0,conj:Ml,cos:M_,cot:$he,csc:zhe,cube:Uhe,equalScalar:wt,erf:Vhe,exp:YB,expm1:Whe,filter:qhe,flatten:cp,forEach:Hhe,format:fp,getMatrixDataType:I_,hex:Ghe,im:k_,isInteger:mi,isNegative:hu,isPositive:Il,isZero:uo,LOG2E:Khe,lgamma:Yhe,log10:Xhe,log2:R_,map:kl,multiplyScalar:Tn,not:hg,number:Jo,oct:Qhe,pickRandom:Zhe,print:Jhe,random:epe,re:F_,sec:tpe,sign:XB,sin:ey,splitUnit:npe,square:rpe,string:ipe,subtractScalar:ua,tan:ape,typeOf:P_,acosh:ope,acsch:spe,asec:upe,bignumber:vi,chain:kve,combinationsWithRep:lpe,cosh:cpe,csch:fpe,isNaN:Fo,isPrime:dpe,mapSlices:Ah,matrix:Ie,matrixFromFunction:hpe,ones:ppe,randomInt:mpe,reshape:QB,sech:vpe,sinh:gpe,sparse:ype,sqrt:Oa,squeeze:xpe,tanh:bpe,transpose:dp,xgcd:ZB,zeros:vr,acoth:wpe,asin:_pe,bin:Epe,concat:Ft,coth:Cpe,ctranspose:O_,diag:JB,dotMultiply:Npe,equal:la,fraction:hp,identity:pu,isNumeric:Rl,kron:Spe,largerEq:ty,leftShift:Dpe,mode:Ape,nthRoot:Tpe,numeric:na,prod:e5,resize:Mpe,rightArithShift:Ipe,round:Pf,size:_r,smaller:Gr,to:kpe,unaryMinus:lo,unequal:Rpe,xor:Fpe,add:Ct,atan2:Ppe,bitAnd:Ope,bitOr:Bpe,bitXor:Lpe,cbrt:t5,compare:Fl,compareText:n5,count:jpe,deepEqual:B_,divideScalar:vn,dotDivide:pp,equalText:$pe,floor:r5,gcd:zpe,hasNumericValue:Upe,hypot:Vpe,larger:Kr,log:L_,lsolve:a5,matrixFromColumns:j_,max:$_,min:Wpe,mod:o5,nthRoots:qpe,or:Hpe,partitionSelect:ny,qr:z_,rightLogShift:Gpe,smallerEq:cf,subset:$i,subtract:Rn,trace:Kpe,usolve:U_,catalan:Ype,compareNatural:co,composition:Xpe,diff:Qpe,distance:Zpe,dot:ry,index:u5,invmod:Jpe,lcm:eme,log1p:tme,lsolveAll:nme,matrixFromRows:rme,multiply:Ut,range:ff,row:ime,setCartesian:ame,setDistinct:ome,setIsSubset:sme,setPowerset:ume,slu:l5,sort:lme,unaryPlus:V_,usolveAll:c5,zpk2tf:cme,and:fme,ceil:W_,column:f5,cross:dme,det:d5,fix:h5,inv:Pl,pinv:hme,pow:Ba,setDifference:p5,setMultiplicity:pme,setSymDifference:m5,sqrtm:mme,sum:q_,vacuumImpedance:vme,wienDisplacement:gme,atomicMass:yme,bohrMagneton:xme,boltzmann:bme,conductanceQuantum:wme,coulomb:_me,cumsum:Eme,deuteronMass:Cme,dotPow:Nme,electricConstant:Sme,elementaryCharge:Dme,expm:Ame,faraday:Tme,fft:g5,gamma:H_,gravitationConstant:Mme,hartreeEnergy:Ime,ifft:kme,inverseConductanceQuantum:Rme,klitzing:Fme,loschmidt:Pme,magneticConstant:Ome,molarMass:Bme,molarPlanckConstant:Lme,neutronMass:jme,nuclearMagneton:$me,planckCharge:zme,planckLength:Ume,planckTemperature:Vme,protonMass:Wme,quantumOfCirculation:qme,reducedPlanckConstant:Hme,rydberg:Gme,secondRadiation:Kme,setSize:Yme,speedOfLight:Xme,stefanBoltzmann:Qme,thomsonCrossSection:Zme,avogadro:Jme,bohrRadius:eve,createUnit:tve,divide:yr,electronMass:nve,factorial:mp,firstRadiation:rve,gravity:ive,intersect:ave,lup:y5,magneticFluxQuantum:ove,molarMassC12:sve,multinomial:uve,parse:La,permutations:lve,planckMass:cve,polynomialRoot:fve,resolve:P5,setIntersect:x5,simplifyConstant:X_,solveODE:dve,stirlingS2:b5,unit:hve,bellNumbers:pve,compile:Rve,eigs:w5,fermiCoupling:mve,gasConstant:vve,kldivergence:gve,lusolve:_5,mean:E5,molarVolume:yve,planckConstant:xve,quantileSeq:bve,setUnion:wve,simplifyCore:Q_,variance:G_,classicalElectronRadius:_ve,evaluate:iy,median:C5,simplify:ay,symbolicEqual:Fve,corr:Eve,freqz:Cve,leafCount:Pve,mad:Nve,parser:Ove,rationalize:Bve,std:Sve,zeta:Dve,derivative:Lve,norm:K_,rotationMatrix:N5,help:jve,planckTime:Ave,schur:S5,rotate:Tve,sylvester:D5,lyap:Mve,config:Ee});zn(vp,Of,{mapSlices:Qfe({isInteger:mi,typed:Z}),filter:ade({typed:Z}),forEach:ude({typed:Z}),map:pde({typed:Z}),or:ahe({DenseMatrix:gt,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z}),and:nhe({add:Ct,concat:Ft,equalScalar:wt,matrix:Ie,not:hg,typed:Z,zeros:vr}),concat:Bde({isInteger:mi,matrix:Ie,typed:Z}),index:fde({Index:Or,getMatrixDataType:I_}),print:Jde({add:Ct,matrix:Ie,typed:Z,zeros:vr}),sum:Wde({add:Ct,config:Ee,numeric:na,typed:Z}),bitAnd:uhe({add:Ct,concat:Ft,equalScalar:wt,matrix:Ie,not:hg,typed:Z,zeros:vr}),min:Nde({config:Ee,isNaN:Fo,numeric:na,smaller:Gr,typed:Z}),subset:Fde({add:Ct,matrix:Ie,typed:Z,zeros:vr}),bitOr:fhe({DenseMatrix:gt,concat:Ft,equalScalar:wt,matrix:Ie,typed:Z}),cumsum:Yde({add:Ct,typed:Z,unaryPlus:V_}),diff:jde({bignumber:vi,matrix:Ie,number:Jo,subtract:Rn,typed:Z}),max:xde({config:Ee,isNaN:Fo,larger:Kr,numeric:na,typed:Z}),range:Ade({bignumber:vi,matrix:Ie,add:Ct,config:Ee,isPositive:Il,larger:Kr,largerEq:ty,smaller:Gr,smallerEq:cf,typed:Z}),row:Ide({Index:Or,matrix:Ie,range:ff,typed:Z}),column:ede({Index:Or,matrix:Ie,range:ff,typed:Z}),mean:_de({add:Ct,divide:yr,typed:Z}),quantileSeq:Gde({add:Ct,bignumber:vi,compare:Fl,divide:yr,isInteger:mi,larger:Kr,mapSlices:Ah,multiply:Ut,partitionSelect:ny,smaller:Gr,smallerEq:cf,subtract:Rn,typed:Z}),variance:Qde({add:Ct,divide:yr,isNaN:Fo,mapSlices:Ah,multiply:Ut,subtract:Rn,typed:Z}),std:Ude({map:kl,sqrt:Oa,typed:Z,variance:G_})});zn(A5,{BigNumber:Re,Complex:Yt,Fraction:Tl,Matrix:Q0,Node:zr,ObjectNode:Bf,OperatorNode:es,ParenthesisNode:Ol,Range:bhe,RelationalNode:T5,ResultSet:qB,ArrayNode:Lf,BlockNode:M5,ConditionalNode:I5,ConstantNode:mu,DenseMatrix:gt,RangeNode:k5,Chain:Y_,FunctionAssignmentNode:R5,SparseMatrix:Xn,ImmutableDenseMatrix:i5,Index:Or,AccessorNode:jf,AssignmentNode:F5,FibonacciHeap:s5,IndexNode:$f,Spa:v5,Unit:rt,SymbolNode:vu,FunctionNode:gu,Help:O5,Parser:B5});Y_.createProxy(Of);const $ve=()=>{const[t,e]=W.useState(""),[n,r]=W.useState(""),[i,a]=W.useState("calculator"),o=()=>{try{const c=iy(t);r(c.toString())}catch{r("Error: Invalid expression")}},s=()=>S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[S.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Calculator"}),S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{htmlFor:"expression",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter a mathematical expression:"}),S.jsx("input",{type:"text",id:"expression",value:t,onChange:c=>e(c.target.value),placeholder:"e.g., 2 + 2 * 3",className:"w-full p-2 border border-gray-300 rounded-md"})]}),S.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Calculate"}),n&&S.jsx("div",{className:"mt-4",children:S.jsxs("p",{className:"text-lg font-medium",children:["Result: ",n]})}),S.jsxs("div",{className:"mt-6",children:[S.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Supported operations:"}),S.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[S.jsx("li",{children:"Addition: 2 + 2"}),S.jsx("li",{children:"Subtraction: 5 - 3"}),S.jsx("li",{children:"Multiplication: 4 * 3"}),S.jsx("li",{children:"Division: 10 / 2"}),S.jsx("li",{children:"Exponents: 2^3 or 2**3"}),S.jsx("li",{children:"Parentheses: 2 * (3 + 4)"}),S.jsx("li",{children:"Functions: sin(π/2), cos(0), sqrt(16)"})]})]})]}),u=()=>S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[S.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Basic Math Concepts"}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Addition and Subtraction"}),S.jsx("p",{className:"mb-2",children:"Addition (+) combines numbers to find their sum, while subtraction (-) finds the difference between numbers."}),S.jsx("div",{className:"bg-blue-50 p-3 rounded-md",children:S.jsxs("p",{children:[S.jsx("strong",{children:"Example:"})," 5 + 3 = 8, 10 - 4 = 6"]})})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Multiplication and Division"}),S.jsx("p",{className:"mb-2",children:"Multiplication (×) adds a number to itself multiple times, while division (÷) splits a number into equal parts."}),S.jsx("div",{className:"bg-blue-50 p-3 rounded-md",children:S.jsxs("p",{children:[S.jsx("strong",{children:"Example:"})," 4 × 3 = 12, 15 ÷ 3 = 5"]})})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Order of Operations (PEMDAS)"}),S.jsx("p",{className:"mb-2",children:"PEMDAS defines the order in which operations should be performed:"}),S.jsxs("ul",{className:"list-disc pl-5 mb-2",children:[S.jsx("li",{children:"Parentheses"}),S.jsx("li",{children:"Exponents"}),S.jsx("li",{children:"Multiplication and Division (from left to right)"}),S.jsx("li",{children:"Addition and Subtraction (from left to right)"})]}),S.jsx("div",{className:"bg-blue-50 p-3 rounded-md",children:S.jsxs("p",{children:[S.jsx("strong",{children:"Example:"})," 2 + 3 × 4 = 2 + 12 = 14"]})})]})]})]}),l=()=>S.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[S.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Geometry"}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Area Formulas"}),S.jsxs("ul",{className:"list-disc pl-5 mb-2",children:[S.jsx("li",{children:"Square: side² = s²"}),S.jsx("li",{children:"Rectangle: length × width = l × w"}),S.jsx("li",{children:"Circle: π × radius² = πr²"}),S.jsx("li",{children:"Triangle: ½ × base × height = ½bh"})]})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Perimeter Formulas"}),S.jsxs("ul",{className:"list-disc pl-5 mb-2",children:[S.jsx("li",{children:"Square: 4 × side = 4s"}),S.jsx("li",{children:"Rectangle: 2 × (length + width) = 2(l + w)"}),S.jsx("li",{children:"Circle (circumference): 2 × π × radius = 2πr"}),S.jsx("li",{children:"Triangle: side1 + side2 + side3 = a + b + c"})]})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Volume Formulas"}),S.jsxs("ul",{className:"list-disc pl-5 mb-2",children:[S.jsx("li",{children:"Cube: side³ = s³"}),S.jsx("li",{children:"Rectangular Prism: length × width × height = l × w × h"}),S.jsx("li",{children:"Sphere: (4/3) × π × radius³ = (4/3)πr³"}),S.jsx("li",{children:"Cylinder: π × radius² × height = πr²h"})]})]})]})]});return S.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[S.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Math Learning Center"}),S.jsx("div",{className:"mb-6",children:S.jsxs("div",{className:"flex space-x-4 overflow-x-auto pb-2",children:[S.jsx("button",{onClick:()=>a("calculator"),className:`px-4 py-2 rounded-md ${i==="calculator"?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Calculator"}),S.jsx("button",{onClick:()=>a("basic"),className:`px-4 py-2 rounded-md ${i==="basic"?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Basic Math"}),S.jsx("button",{onClick:()=>a("geometry"),className:`px-4 py-2 rounded-md ${i==="geometry"?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"Geometry"})]})}),i==="calculator"&&s(),i==="basic"&&u(),i==="geometry"&&l()]})};function zve({questions:t,category:e,onComplete:n,isExam:r=!1}){const[i,a]=W.useState(0),[o,s]=W.useState(0),[u,l]=W.useState(!1),[c,f]=W.useState(r?30*60:0),[d,h]=W.useState(null),[p,m]=W.useState(null),[y,v]=W.useState(!1),[x,g]=W.useState(Array(t.length).fill(null)),[b,w]=W.useState(!1);W.useEffect(()=>{r&&!y&&(h(new Date),v(!0))},[r,y]),W.useEffect(()=>{if(r&&c>0&&!u){const R=setInterval(()=>f(F=>F-1),1e3);return()=>clearInterval(R)}else r&&c===0&&!u&&N()},[r,c,u]);const _=R=>{const F=Math.floor(R/60),O=R%60;return`${F}:${O.toString().padStart(2,"0")}`},E=R=>{const F=[...x],O=x[i],I=t[i].correctAnswer;O===I?R!==I&&s(M=>M-1):R===I&&s(M=>M+1),F[i]=R,g(F)},C=()=>{i===t.length-1?w(!0):a(R=>R+1)},N=()=>{const R=new Date,F=d?Math.floor((R.getTime()-d.getTime())/1e3):0;m(R),l(!0),n==null||n(o,F)},D=()=>{a(0),s(0),l(!1),f(r?30*60:0),h(null),m(null),v(!1),g(Array(t.length).fill(null)),w(!1)},A=()=>{i>0&&a(R=>R-1)},T=x[i];return r&&!y?S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-8 text-center",children:[S.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Starting Exam..."}),S.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})]}):S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-8",children:[S.jsxs("h3",{className:"text-2xl font-semibold mb-4",children:[r?"Exam Mode":"Test Your"," ",e," Knowledge"]}),r&&!u&&S.jsx("div",{className:"mb-4 text-right",children:S.jsxs("span",{className:"text-lg font-semibold",children:["Time Remaining: ",_(c)]})}),u?S.jsxs("div",{className:"text-center",children:[S.jsxs("p",{className:"text-xl mb-4",children:["You scored ",o," out of ",t.length,"!"]}),r&&S.jsxs("div",{className:"mb-4",children:[S.jsxs("p",{className:"text-lg",children:["Time Taken:"," ",_(p&&d?Math.floor((p.getTime()-d.getTime())/1e3):0)]}),S.jsxs("p",{className:"text-lg",children:["Percentage: ",(o/t.length*100).toFixed(1),"%"]})]}),S.jsx("button",{onClick:D,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Try Again"})]}):S.jsxs("div",{children:[S.jsxs("p",{className:"text-lg mb-4",children:["Question ",i+1," of ",t.length,e==="All Categories"&&S.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(Category: ",t[i].category,")"]})]}),S.jsx("p",{className:"text-xl mb-6",children:t[i].question}),t[i].image&&S.jsx("div",{className:"mb-6 flex justify-center",children:S.jsx("img",{src:t[i].image,alt:"Question Visual",className:"w-48 h-auto rounded-lg shadow-md"})}),S.jsx("div",{className:"space-y-3",children:t[i].options.map((R,F)=>S.jsx("button",{onClick:()=>E(R),className:`w-full text-left p-3 rounded-lg transition-colors border ${T===R?R===t[i].correctAnswer?"bg-green-100 border-green-500":"bg-red-100 border-red-500":"bg-gray-100 hover:bg-gray-200"}`,children:R},F))}),S.jsxs("div",{className:"flex justify-between mt-6",children:[S.jsx("button",{onClick:A,disabled:i===0,className:`px-4 py-2 rounded-lg ${i===0?"bg-gray-300 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Previous"}),i===t.length-1?b?S.jsx("button",{onClick:N,className:"px-4 py-2 rounded-lg bg-green-500 text-white hover:bg-green-600",children:"Submit"}):S.jsx("button",{onClick:C,disabled:!T,className:`px-4 py-2 rounded-lg ${T?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 cursor-not-allowed"}`,children:"Next"}):S.jsx("button",{onClick:C,disabled:!T,className:`px-4 py-2 rounded-lg ${T?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 cursor-not-allowed"}`,children:"Next"})]})]})]})}const C1=[{id:1,category:"Animals",question:"What is the largest land animal?",options:["African Elephant","White Rhinoceros","Hippopotamus","Giraffe"],correctAnswer:"African Elephant",image:"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQJLwERoOcxUaWy77zWGKffIAou6u4qprvF94FizspAWTDcWnXa-LlA7D-KuadBbR1Xr6etcGjdpYIa2o5npl8ZH5sTZO3iZe89TCCV0A"},{id:2,category:"Animals",question:"Which big cat is known as the 'King of the Jungle'?",options:["Tiger","Lion","Leopard","Jaguar"],correctAnswer:"Lion",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ5mY_cvo6-XP-Fivsf9qUh_gIIDBZunOhq2Q&s"},{id:3,category:"Animals",question:"What animal is known for having a long neck and eating leaves from tall trees?",options:["Elephant","Kangaroo","Giraffe","Zebra"],correctAnswer:"Giraffe",image:"https://images.unsplash.com/photo-1534567110243-8875d64ca8ff?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8R2lyYWZmZXxlbnwwfHwwfHx8MA%3D%3D"},{id:4,category:"Animals",question:"Which of these animals is known for its black and white stripes?",options:["Zebra","Tiger","Giraffe","Leopard"],correctAnswer:"Zebra",image:"https://images.unsplash.com/photo-1526095179574-86e545346ae6?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8WmVicmF8ZW58MHx8MHx8fDA%3D"},{id:5,category:"Animals",question:"What animal is known for storing food in its cheeks?",options:["Squirrel","Rabbit","Hamster","Chipmunk"],correctAnswer:"Hamster",image:"https://images.unsplash.com/photo-1577099608295-f11bbd6fed32?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fEhhbXN0ZXJ8ZW58MHx8MHx8fDA%3Ds"},{id:6,category:"Aquatic",question:"Which of the following is the fastest fish in the ocean",options:["Shark","Swordfish","Tuna","Dolphin"],correctAnswer:"Swordfish",image:"https://plus.unsplash.com/premium_photo-1708433273440-da1b1601212f?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8U3dvcmRmaXNofGVufDB8fDB8fHww"},{id:7,category:"Aquatic",question:"What is the largest species of jellyfish?",options:["Lion's Mane Jellyfish","Moon Jellyfish","Box Jellyfish","Sea Nettle"],correctAnswer:"Lion's Mane Jellyfish",image:"https://plus.unsplash.com/premium_photo-1693723595968-b7d410643cbf?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8TGlvbidzJTIwTWFuZSUyMEplbGx5ZmlzaHxlbnwwfHwwfHx8MA%3D%3D"},{id:8,category:"Aquatic",question:"Which animal is known to be able to regenerate its limbs?",options:[" Octopus","Sea Star","Whale","Shark"],correctAnswer:"Sea Star",image:"https://images.unsplash.com/photo-1534829942-6f3792b99514?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{id:9,category:"Aquatic",question:"What is the primary food source for most adult sea turtles?",options:["Seaweed","Fish","Jellyfish","Shrimp"],correctAnswer:"Jellyfish",image:"https://plus.unsplash.com/premium_photo-1693723595870-2b8bad09b4c2?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8SmVsbHlmaXNofGVufDB8fDB8fHww"},{id:10,category:"Aquatic",question:"Which of these is a mammal that lives underwater?",options:["Shark","Dolphin","Seahorse","Squid"],correctAnswer:"Dolphin",image:"https://plus.unsplash.com/premium_photo-1661876281967-bb7301964945?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8RG9scGhpbnxlbnwwfHwwfHx8MA%3D%3D"},{id:11,category:"Birds",question:"Which bird is known for its colorful feathers and ability to mimic sounds?",options:["Peacock","Parrot","Sparrow","Eagle"],correctAnswer:"Parrot",image:"https://images.unsplash.com/photo-1544923408-75c5cef46f14?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8UGFycm90fGVufDB8fDB8fHww"},{id:12,category:"Birds",question:"Which bird is  the fastest in the world?",options:["Eagle","Peregrine Falcon","Ostrich","Hawk"],correctAnswer:"Peregrine Falcon",image:"https://plus.unsplash.com/premium_photo-1664297692493-95729e262e92?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8UGVyZWdyaW5lJTIwRmFsY29ufGVufDB8fDB8fHww"},{id:13,category:"Birds",question:"What bird is known for its long migration from the northern to southern hemispheres?",options:["Swallow","Penguin","Swan","Duck"],correctAnswer:"Swallow",image:"https://images.unsplash.com/photo-1613492697585-e9c360e39b1f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8U3dhbGxvd3xlbnwwfHwwfHx8MA%3D%3D"},{id:14,category:"Birds",question:"Which bird is known for laying the largest eggs?",options:["Ostrich","Chicken","Eagle","Penguin"],correctAnswer:"Ostrich",image:"https://images.unsplash.com/photo-1569979227661-459bbb0ebe84?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8T3N0cmljaHxlbnwwfHwwfHx8MA%3D%3D"},{id:15,category:"Birds",question:"Which bird is known to fly at the highest altitude?",options:["Albatross","Vulture","Eagle","Condor"],correctAnswer:"Albatross",image:"https://images.unsplash.com/photo-1552243048-431d0c4e1bad?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8QWxiYXRyb3NzfGVufDB8fDB8fHww"},{id:16,category:"Vegetables",question:"Which vegetable is known for its orange color and is rich in vitamin A?",options:["Carrot","Broccoli","Spinach","Cucumber"],correctAnswer:"Carrot",image:"https://images.unsplash.com/photo-1598170845058-32b9d6a5da37?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Q2Fycm90fGVufDB8fDB8fHww"},{id:17,category:"Vegetables",question:"Which vegetable is a key ingredient in making guacamole?",options:["Tomato","Cucumber","Avocado","Onion"],correctAnswer:"Avocado",image:"https://images.unsplash.com/photo-1601039641847-7857b994d704?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8QXZvY2Fkb3xlbnwwfHwwfHx8MA%3D%3D"},{id:18,category:"Vegetables",question:"Which vegetable is known for its green color and is often used in salads?",options:["Lettuce","Potato","Carrot","Pea"],correctAnswer:"Lettuce",image:"https://images.unsplash.com/photo-1640958904159-51ae08bd3412?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8TGV0dHVjZXxlbnwwfHwwfHx8MA%3D%3D"},{id:19,category:"Vegetables",question:"Which vegetable is known for being a rich source of potassium and is often used in fries?",options:["Tomato","Cucumber","Potato","Onion"],correctAnswer:"Potato",image:"https://images.unsplash.com/photo-1518977676601-b53f82aba655?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8UG90YXRvfGVufDB8fDB8fHwwo"},{id:20,category:"Vegetables",question:"Which vegetable is often used in soups and has a strong aroma when cooked?",options:["Garlic","Broccoli","Cabbage","Onion"],correctAnswer:"Onion",image:"https://images.unsplash.com/photo-1618512496248-a07fe83aa8cb?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8T25pb258ZW58MHx8MHx8fDA%3D"},{id:21,category:"Flowers",question:"Which flower is known for its strong fragrance and is often white?",options:["Jasmine","Rose","Tulip","Daffodil"],correctAnswer:"Jasmine",image:"https://images.unsplash.com/photo-1612380635121-411eda9ecbb9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8SmFzbWluZXxlbnwwfHwwfHx8MA%3D%3D"},{id:22,category:"Flowers",question:"Which flower blooms from a bulb and comes in many colors, often seen in spring?",options:["Tulip","Lily","Marigold","Orchid"],correctAnswer:"Tulip",image:"https://images.unsplash.com/photo-1586968295564-92fd7572718b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8VHVsaXB8ZW58MHx8MHx8fDA%3D"},{id:23,category:"Flowers",question:"Which flower is associated with peace and is commonly white?",options:["Lily","Rose","Sunflower","Hibiscus"],correctAnswer:"Lily",image:"https://images.unsplash.com/photo-1561897519-6e4fbd1fbc41?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8TGlseXxlbnwwfHwwfHx8MA%3D%3D"},{id:24,category:"Flowers",question:"Which flower is bright yellow and faces the sun?",options:["Sunflower","Marigold","Lotus","Daisy"],correctAnswer:"Sunflower",image:"https://images.unsplash.com/photo-1533598313300-ac574e6dd10d?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1yZWxhdGVkfDJ8fHxlbnwwfHx8fHw%3D"},{id:25,category:"Flowers",question:"Which flower is sacred in many cultures and grows in water?",options:["Lotus","Rose","Tulip","Lavender"],correctAnswer:"Lotus",image:"https://plus.unsplash.com/premium_photo-1664303754150-7a776a1f28bd?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8TG90dXN8ZW58MHx8MHx8fDA%3D"},{id:26,category:"Vehicles",question:"Which vehicle has two wheels and is powered by pedaling?",options:["Bicycle","Car","Bus","Scooter"],correctAnswer:"Bicycle",image:"https://plus.unsplash.com/premium_photo-1678718713393-2b88cde9605b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8QmljeWNsZXxlbnwwfHwwfHx8MA%3D%3D"},{id:27,category:"Vehicles",question:"Which vehicle is used for public transport and carries many passengers?",options:["Bus","Car","Bike","Rickshaw"],correctAnswer:"Bus",image:"https://images.unsplash.com/photo-1570125909232-eb263c188f7e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8QnVzfGVufDB8fDB8fHww"},{id:28,category:"Vehicles",question:"Which vehicle is commonly used by families and runs on four wheels?",options:["Car","Helicopter","Train","Bicycle"],correctAnswer:"Car",image:"https://images.unsplash.com/photo-1502877338535-766e1452684a?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8Q2FyfGVufDB8fDB8fHww"},{id:29,category:"Vehicles",question:"Which vehicle flies in the sky and transports people or goods over long distances?",options:["Airplane","Ship","Car","Bike"],correctAnswer:"Airplane",image:"https://images.unsplash.com/photo-1523833082115-1e8e294bd14e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8QWlycGxhbmV8ZW58MHx8MHx8fDA%3D"},{id:30,category:"Vehicles",question:"Which vehicle runs on tracks and is used for long-distance land travel?",options:["Train","Bus","Bicycle","Scooter"],correctAnswer:"Train",image:"https://images.unsplash.com/photo-1474487548417-781cb71495f3?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fFRyYWlufGVufDB8fDB8fHww"},{id:31,category:"Fruits",question:"Which fruit is yellow in color and high in potassium?",options:["Banana","Apple","Orange","Grapes"],correctAnswer:"Banana",image:"https://images.unsplash.com/photo-1603833665858-e61d17a86224?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8QmFuYW5hfGVufDB8fDB8fHww"},{id:32,category:"Fruits",question:"Which fruit is red and often associated with keeping the doctor away?",options:["Apple","Pear","Mango","Kiwi"],correctAnswer:"Apple",image:"https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fEFwcGxlfGVufDB8fDB8fHww"},{id:33,category:"Fruits",question:"Which fruit is known for its spiky outer skin and sweet yellow inside?",options:["Pineapple","Watermelon","Papaya","Coconut"],correctAnswer:"Pineapple",image:"https://images.unsplash.com/photo-1587883012610-e3df17d41270?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8cGluZUFwcGxlfGVufDB8fDB8fHww"},{id:34,category:"Fruits",question:"Which fruit is commonly used to make orange juice?",options:["Orange","Lemon","Grapefruit","Tangerine"],correctAnswer:"Orange",image:"https://plus.unsplash.com/premium_photo-1675667408018-3b64dbc55db1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8T3JhbmdlfGVufDB8fDB8fHww"},{id:35,category:"Fruits",question:"Which small purple or green fruit grows in bunches on vines?",options:["Grapes","Blueberries","Cherries","Dates"],correctAnswer:"Grapes",image:"https://plus.unsplash.com/premium_photo-1666270423730-9af384b9cb0f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8R3JhcGVzfGVufDB8fDB8fHww"},{id:41,category:"Math",question:"How many apples are present in he above image?",options:["10","20","6","7"],correctAnswer:"6",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSIOvt3dqd8Nx6rNGzRu8bFUMaZtanm-3rI-w&s"},{id:36,category:"Math",question:"How many grapes are present in he above image?",options:["9","12","13","14"],correctAnswer:"9",image:"https://content.lessonplanet.com/resources/thumbnails/177674/large/cgrmlwnvbnzlcnqymdezmdmzmc0ymzywos0xytz0mxlzlmpwzw.jpg?1414276004"},{id:37,category:"Math",question:"What is 9 × 3?",options:["27","18","21","24"],correctAnswer:"27"},{id:38,category:"Math",question:"What is the square root of 64?",options:["6","7","8","9"],correctAnswer:"8"},{id:39,category:"Math",question:"What is 15 - 6?",options:["9","8","7","6"],correctAnswer:"9"}],Uve=()=>{};var EM={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be=function(t,e){if(!t)throw zf(e)},zf=function(t){return new Error("Firebase Database ("+L5.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Vve=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],s=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Z_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,s=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=a>>2,f=(a&3)<<4|s>>4;let d=(s&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(j5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vve(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||s==null||l==null||f==null)throw new Wve;const d=a<<2|s>>4;if(r.push(d),l!==64){const h=s<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Wve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $5=function(t){const e=j5(t);return Z_.encodeByteArray(e,!0)},pg=function(t){return $5(t).replace(/\./g,"")},mg=function(t){try{return Z_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qve(t){return z5(void 0,t)}function z5(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Hve(n)||(t[n]=z5(t[n],e[n]));return t}function Hve(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kve=()=>Gve().__FIREBASE_DEFAULTS__,Yve=()=>{if(typeof process>"u"||typeof EM>"u")return;const t=EM.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Xve=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mg(t[1]);return e&&JSON.parse(e)},J_=()=>{try{return Uve()||Kve()||Yve()||Xve()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},U5=t=>{var e,n;return(n=(e=J_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Qve=t=>{const e=U5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},V5=()=>{var t;return(t=J_())===null||t===void 0?void 0:t.config},W5=t=>{var e;return(e=J_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zve(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pg(JSON.stringify(n)),pg(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xr())}function Jve(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ege(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function q5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tge(){const t=Xr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function H5(){return L5.NODE_ADMIN===!0}function nge(){try{return typeof indexedDB=="object"}catch{return!1}}function rge(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ige="FirebaseError";class yu extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ige,Object.setPrototypeOf(this,yu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gp.prototype.create)}}class gp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?age(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new yu(i,s,r)}}function age(t,e){return t.replace(oge,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const oge=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(t){return JSON.parse(t)}function ir(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=function(t){let e={},n={},r={},i="";try{const a=t.split(".");e=Th(mg(a[0])||""),n=Th(mg(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},sge=function(t){const e=G5(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},uge=function(t){const e=G5(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function df(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Zb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vg(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function fl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(CM(a)&&CM(o)){if(!fl(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function CM(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Dd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Ad(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lge{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const d=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],a=this.chain_[1],o=this.chain_[2],s=this.chain_[3],u=this.chain_[4],l,c;for(let f=0;f<80;f++){f<40?f<20?(l=s^a&(o^s),c=1518500249):(l=a^o^s,c=1859775393):f<60?(l=a&o|s&(a|o),c=2400959708):(l=a^o^s,c=3395469782);const d=(i<<5|i>>>27)+l+u+c+r[f]&4294967295;u=s,s=o,o=(a<<30|a>>>2)&4294967295,a=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+s&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const a=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(a[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(a),o=0;break}}else for(;i<n;)if(a[o]=e[i],++o,++i,o===this.blockSize){this.compress_(a),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}function cge(t,e){const n=new fge(t,e);return n.subscribe.bind(n)}class fge{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dge(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=N1),i.error===void 0&&(i.error=N1),i.complete===void 0&&(i.complete=N1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dge(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function N1(){}function tE(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hge=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const a=i-55296;r++,Be(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(a<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sy=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t){return t&&t._delegate?t._delegate:t}class dl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pge{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oy;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vge(e))try{this.getOrInitializeService({instanceIdentifier:ku})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=ku){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ku){return this.instances.has(e)}getOptions(e=ku){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mge(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ku){return this.component?this.component.multipleInstances?e:ku:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mge(t){return t===ku?void 0:t}function vge(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gge{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pge(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qt||(Qt={}));const yge={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},xge=Qt.INFO,bge={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},wge=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=bge[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nE{constructor(e){this.name=e,this._logLevel=xge,this._logHandler=wge,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yge[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...e),this._logHandler(this,Qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...e),this._logHandler(this,Qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...e),this._logHandler(this,Qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...e),this._logHandler(this,Qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...e),this._logHandler(this,Qt.ERROR,...e)}}const _ge=(t,e)=>e.some(n=>t instanceof n);let NM,SM;function Ege(){return NM||(NM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cge(){return SM||(SM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K5=new WeakMap,Jb=new WeakMap,Y5=new WeakMap,S1=new WeakMap,rE=new WeakMap;function Nge(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n($s(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&K5.set(n,t)}).catch(()=>{}),rE.set(e,t),e}function Sge(t){if(Jb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Jb.set(t,e)}let ew={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Y5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Dge(t){ew=t(ew)}function Age(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(D1(this),e,...n);return Y5.set(r,e.sort?e.sort():[e]),$s(r)}:Cge().includes(t)?function(...e){return t.apply(D1(this),e),$s(K5.get(this))}:function(...e){return $s(t.apply(D1(this),e))}}function Tge(t){return typeof t=="function"?Age(t):(t instanceof IDBTransaction&&Sge(t),_ge(t,Ege())?new Proxy(t,ew):t)}function $s(t){if(t instanceof IDBRequest)return Nge(t);if(S1.has(t))return S1.get(t);const e=Tge(t);return e!==t&&(S1.set(t,e),rE.set(e,t)),e}const D1=t=>rE.get(t);function Mge(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),s=$s(o);return r&&o.addEventListener("upgradeneeded",u=>{r($s(o.result),u.oldVersion,u.newVersion,$s(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),s.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}const Ige=["get","getKey","getAll","getAllKeys","count"],kge=["put","add","delete","clear"],A1=new Map;function DM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(A1.get(e))return A1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=kge.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ige.includes(n)))return;const a=async function(o,...s){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(s.shift())),(await Promise.all([l[n](...s),i&&u.done]))[0]};return A1.set(e,a),a}Dge(t=>({...t,get:(e,n,r)=>DM(e,n)||t.get(e,n,r),has:(e,n)=>!!DM(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rge{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fge(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Fge(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tw="@firebase/app",AM="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new nE("@firebase/app"),Pge="@firebase/app-compat",Oge="@firebase/analytics-compat",Bge="@firebase/analytics",Lge="@firebase/app-check-compat",jge="@firebase/app-check",$ge="@firebase/auth",zge="@firebase/auth-compat",Uge="@firebase/database",Vge="@firebase/data-connect",Wge="@firebase/database-compat",qge="@firebase/functions",Hge="@firebase/functions-compat",Gge="@firebase/installations",Kge="@firebase/installations-compat",Yge="@firebase/messaging",Xge="@firebase/messaging-compat",Qge="@firebase/performance",Zge="@firebase/performance-compat",Jge="@firebase/remote-config",e0e="@firebase/remote-config-compat",t0e="@firebase/storage",n0e="@firebase/storage-compat",r0e="@firebase/firestore",i0e="@firebase/vertexai",a0e="@firebase/firestore-compat",o0e="firebase",s0e="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="[DEFAULT]",u0e={[tw]:"fire-core",[Pge]:"fire-core-compat",[Bge]:"fire-analytics",[Oge]:"fire-analytics-compat",[jge]:"fire-app-check",[Lge]:"fire-app-check-compat",[$ge]:"fire-auth",[zge]:"fire-auth-compat",[Uge]:"fire-rtdb",[Vge]:"fire-data-connect",[Wge]:"fire-rtdb-compat",[qge]:"fire-fn",[Hge]:"fire-fn-compat",[Gge]:"fire-iid",[Kge]:"fire-iid-compat",[Yge]:"fire-fcm",[Xge]:"fire-fcm-compat",[Qge]:"fire-perf",[Zge]:"fire-perf-compat",[Jge]:"fire-rc",[e0e]:"fire-rc-compat",[t0e]:"fire-gcs",[n0e]:"fire-gcs-compat",[r0e]:"fire-fst",[a0e]:"fire-fst-compat",[i0e]:"fire-vertex","fire-js":"fire-js",[o0e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=new Map,l0e=new Map,rw=new Map;function TM(t,e){try{t.container.addComponent(e)}catch(n){Ho.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hf(t){const e=t.name;if(rw.has(e))return Ho.debug(`There were multiple attempts to register component ${e}.`),!1;rw.set(e,t);for(const n of gg.values())TM(n,t);for(const n of l0e.values())TM(n,t);return!0}function iE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Si(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new gp("app","Firebase",c0e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0e{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=s0e;function X5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:nw,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zs.create("bad-app-name",{appName:String(i)});if(n||(n=V5()),!n)throw zs.create("no-options");const a=gg.get(i);if(a){if(fl(n,a.options)&&fl(r,a.config))return a;throw zs.create("duplicate-app",{appName:i})}const o=new gge(i);for(const u of rw.values())o.addComponent(u);const s=new f0e(n,r,o);return gg.set(i,s),s}function Q5(t=nw){const e=gg.get(t);if(!e&&t===nw&&V5())return X5();if(!e)throw zs.create("no-app",{appName:t});return e}function Us(t,e,n){var r;let i=(r=u0e[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ho.warn(s.join(" "));return}hf(new dl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0e="firebase-heartbeat-database",h0e=1,Mh="firebase-heartbeat-store";let T1=null;function Z5(){return T1||(T1=Mge(d0e,h0e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mh)}catch(n){console.warn(n)}}}}).catch(t=>{throw zs.create("idb-open",{originalErrorMessage:t.message})})),T1}async function p0e(t){try{const n=(await Z5()).transaction(Mh),r=await n.objectStore(Mh).get(J5(t));return await n.done,r}catch(e){if(e instanceof yu)Ho.warn(e.message);else{const n=zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ho.warn(n.message)}}}async function MM(t,e){try{const r=(await Z5()).transaction(Mh,"readwrite");await r.objectStore(Mh).put(e,J5(t)),await r.done}catch(n){if(n instanceof yu)Ho.warn(n.message);else{const r=zs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ho.warn(r.message)}}}function J5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0e=1024,v0e=30;class g0e{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new x0e(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=IM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>v0e){const o=b0e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ho.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=IM(),{heartbeatsToSend:r,unsentEntries:i}=y0e(this._heartbeatsCache.heartbeats),a=pg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ho.warn(n),""}}}function IM(){return new Date().toISOString().substring(0,10)}function y0e(t,e=m0e){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),kM(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class x0e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nge()?rge().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await p0e(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return MM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return MM(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function kM(t){return pg(JSON.stringify({version:2,heartbeats:t})).length}function b0e(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0e(t){hf(new dl("platform-logger",e=>new Rge(e),"PRIVATE")),hf(new dl("heartbeat",e=>new g0e(e),"PRIVATE")),Us(tw,AM,t),Us(tw,AM,"esm2017"),Us("fire-js","")}w0e("");function aE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function e8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _0e=e8,t8=new gp("auth","Firebase",e8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=new nE("@firebase/auth");function E0e(t,...e){yg.logLevel<=Qt.WARN&&yg.warn(`Auth (${Vf}): ${t}`,...e)}function ov(t,...e){yg.logLevel<=Qt.ERROR&&yg.error(`Auth (${Vf}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t,...e){throw sE(t,...e)}function Aa(t,...e){return sE(t,...e)}function oE(t,e,n){const r=Object.assign(Object.assign({},_0e()),{[e]:n});return new gp("auth","Firebase",r).create(e,{appName:t.name})}function Po(t){return oE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function C0e(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&sa(t,"argument-error"),oE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return t8.create(t,...e)}function it(t,e,...n){if(!t)throw sE(e,...n)}function To(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ov(e),new Error(e)}function Go(t,e){t||To(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function N0e(){return RM()==="http:"||RM()==="https:"}function RM(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(N0e()||ege()||"connection"in navigator)?navigator.onLine:!0}function D0e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n){this.shortDelay=e,this.longDelay=n,Go(n>e,"Short delay should be less than long delay!"),this.isMobile=eE()||q5()}get(){return S0e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t,e){Go(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M0e=new yp(3e4,6e4);function xu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bu(t,e,n,r,i={}){return r8(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=Uf(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:u},a);return Jve()||(l.referrerPolicy="no-referrer"),n8.fetch()(await i8(t,t.config.apiHost,n,s),l)})}async function r8(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},A0e),e);try{const i=new k0e(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Sm(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[u,l]=s.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sm(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Sm(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Sm(t,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw oE(t,c,l);sa(t,c)}}catch(i){if(i instanceof yu)throw i;sa(t,"network-request-failed",{message:String(i)})}}async function xp(t,e,n,r,i={}){const a=await bu(t,e,n,r,i);return"mfaPendingCredential"in a&&sa(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function i8(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?uE(t.config,i):`${t.config.apiScheme}://${i}`;return T0e.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function I0e(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class k0e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Aa(this.auth,"network-request-failed")),M0e.get())})}}function Sm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Aa(t,e,r);return i.customData._tokenResponse=n,i}function FM(t){return t!==void 0&&t.enterprise!==void 0}class R0e{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return I0e(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F0e(t,e){return bu(t,"GET","/v2/recaptchaConfig",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P0e(t,e){return bu(t,"POST","/v1/accounts:delete",e)}async function xg(t,e){return bu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function O0e(t,e=!1){const n=ni(t),r=await n.getIdToken(e),i=lE(r);it(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Ud(M1(i.auth_time)),issuedAtTime:Ud(M1(i.iat)),expirationTime:Ud(M1(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function M1(t){return Number(t)*1e3}function lE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ov("JWT malformed, contained fewer than 3 sections"),null;try{const i=mg(n);return i?JSON.parse(i):(ov("Failed to decode base64 JWT payload"),null)}catch(i){return ov("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function PM(t){const e=lE(t);return it(e,"internal-error"),it(typeof e.exp<"u","internal-error"),it(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ih(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yu&&B0e(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function B0e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ud(this.lastLoginAt),this.creationTime=Ud(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bg(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ih(t,xg(n,{idToken:r}));it(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?a8(a.providerUserInfo):[],s=$0e(t.providerData,o),u=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(s!=null&&s.length),c=u?l:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new aw(a.createdAt,a.lastLoginAt),isAnonymous:c};Object.assign(t,f)}async function j0e(t){const e=ni(t);await bg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $0e(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function a8(t){return t.map(e=>{var{providerId:n}=e,r=aE(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z0e(t,e){const n=await r8(t,{},async()=>{const r=Uf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await i8(t,i,"/v1/token",`key=${a}`),s=await t._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",n8.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function U0e(t,e){return bu(t,"POST","/v2/accounts:revokeToken",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){it(e.idToken,"internal-error"),it(typeof e.idToken<"u","internal-error"),it(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){it(e.length!==0,"internal-error");const n=PM(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await z0e(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new Pc;return r&&(it(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(it(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(it(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pc,this.toJSON())}_performRefresh(){return To("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(t,e){it(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=aE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new L0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new aw(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Ih(this,this.stsTokenManager.getToken(this.auth,e));return it(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return O0e(this,e)}reload(){return j0e(this)}_assign(e){this!==e&&(it(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new wa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(Po(this.auth));const e=await this.getIdToken();return await Ih(this,P0e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,s,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(s=n.tenantId)!==null&&s!==void 0?s:void 0,y=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,x=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:g,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:E}=n;it(g&&E,e,"internal-error");const C=Pc.fromJSON(this.name,E);it(typeof g=="string",e,"internal-error"),ls(f,e.name),ls(d,e.name),it(typeof b=="boolean",e,"internal-error"),it(typeof w=="boolean",e,"internal-error"),ls(h,e.name),ls(p,e.name),ls(m,e.name),ls(y,e.name),ls(v,e.name),ls(x,e.name);const N=new wa({uid:g,auth:e,email:d,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:v,lastLoginAt:x});return _&&Array.isArray(_)&&(N.providerData=_.map(D=>Object.assign({},D))),y&&(N._redirectEventId=y),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new Pc;i.updateFromServerResponse(n);const a=new wa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bg(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];it(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?a8(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new Pc;s.updateFromIdToken(r);const u=new wa({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new aw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new Map;function Mo(t){Go(t instanceof Function,"Expected a class definition");let e=OM.get(t);return e?(Go(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OM.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o8.type="NONE";const BM=o8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e,n){return`firebase:${t}:${e}:${n}`}class Oc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=sv(this.userKey,i.apiKey,a),this.fullPersistenceKey=sv("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xg(this.auth,{idToken:e}).catch(()=>{});return n?wa._fromGetAccountInfoResponse(this.auth,n,e):null}return wa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Oc(Mo(BM),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let a=i[0]||Mo(BM);const o=sv(r,e.config.apiKey,e.name);let s=null;for(const l of n)try{const c=await l._get(o);if(c){let f;if(typeof c=="string"){const d=await xg(e,{idToken:c}).catch(()=>{});if(!d)break;f=await wa._fromGetAccountInfoResponse(e,d,c)}else f=wa._fromJSON(e,c);l!==a&&(s=f),a=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Oc(a,e,r):(a=u[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async l=>{if(l!==a)try{await l._remove(o)}catch{}})),new Oc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(s8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d8(e))return"Blackberry";if(h8(e))return"Webos";if(u8(e))return"Safari";if((e.includes("chrome/")||l8(e))&&!e.includes("edge/"))return"Chrome";if(f8(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function s8(t=Xr()){return/firefox\//i.test(t)}function u8(t=Xr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l8(t=Xr()){return/crios\//i.test(t)}function c8(t=Xr()){return/iemobile/i.test(t)}function f8(t=Xr()){return/android/i.test(t)}function d8(t=Xr()){return/blackberry/i.test(t)}function h8(t=Xr()){return/webos/i.test(t)}function cE(t=Xr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function V0e(t=Xr()){var e;return cE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function W0e(){return tge()&&document.documentMode===10}function p8(t=Xr()){return cE(t)||f8(t)||h8(t)||d8(t)||/windows phone/i.test(t)||c8(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t,e=[]){let n;switch(t){case"Browser":n=LM(Xr());break;case"Worker":n=`${LM(Xr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,s)=>{try{const u=e(a);o(u)}catch(u){s(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H0e(t,e={}){return bu(t,"GET","/v2/passwordPolicy",xu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0e=6;class K0e{constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:G0e,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,s;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0e{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jM(this),this.idTokenSubscription=new jM(this),this.beforeStateQueue=new q0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mo(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Oc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xg(this,{idToken:e}),r=await wa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Si(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===s)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=D0e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Si(this.app))return Promise.reject(Po(this));const n=e?ni(e):null;return n&&it(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&it(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(Po(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Si(this.app)?Promise.reject(Po(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await H0e(this),n=new K0e(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await U0e(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mo(e)||this._popupRedirectResolver;it(n,this,"argument-error"),this.redirectPersistenceManager=await Oc.create(this,[Mo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&E0e(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function wu(t){return ni(t)}class jM{constructor(e){this.auth=e,this.observer=null,this.addObserver=cge(n=>this.observer=n)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X0e(t){uy=t}function v8(t){return uy.loadJS(t)}function Q0e(){return uy.recaptchaEnterpriseScript}function Z0e(){return uy.gapiScript}function J0e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class eye{constructor(){this.enterprise=new tye}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tye{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nye="recaptcha-enterprise",g8="NO_RECAPTCHA";class rye{constructor(e){this.type=nye,this.auth=wu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{F0e(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const l=new R0e(u);return a.tenantId==null?a._agentRecaptchaConfig=l:a._tenantRecaptchaConfigs[a.tenantId]=l,o(l.siteKey)}}).catch(u=>{s(u)})})}function i(a,o,s){const u=window.grecaptcha;FM(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(l=>{o(l)}).catch(()=>{o(g8)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eye().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(s=>{if(!n&&FM(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Q0e();u.length!==0&&(u+=s),v8(u).then(()=>{i(s,a,o)}).catch(l=>{o(l)})}}).catch(s=>{o(s)})})}}async function $M(t,e,n,r=!1,i=!1){const a=new rye(t);let o;if(i)o=g8;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const s=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const u=s.phoneEnrollmentInfo.phoneNumber,l=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const u=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function ow(t,e,n,r,i){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await $M(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await $M(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iye(t,e){const n=iE(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(fl(a,e??{}))return i;sa(i,"already-initialized")}return n.initialize({options:e})}function aye(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oye(t,e,n){const r=wu(t);it(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=y8(e),{host:o,port:s}=sye(e),u=s===null?"":`:${s}`,l={url:`${a}//${o}${u}/`},c=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){it(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),it(fl(l,r.config.emulator)&&fl(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,uye()}function y8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sye(t){const e=y8(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:zM(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:zM(o)}}}function zM(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uye(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return To("not implemented")}_getIdTokenResponse(e){return To("not implemented")}_linkToIdToken(e,n){return To("not implemented")}_getReauthenticationResolver(e){return To("not implemented")}}async function lye(t,e){return bu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cye(t,e){return xp(t,"POST","/v1/accounts:signInWithPassword",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fye(t,e){return xp(t,"POST","/v1/accounts:signInWithEmailLink",xu(t,e))}async function dye(t,e){return xp(t,"POST","/v1/accounts:signInWithEmailLink",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends fE{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new kh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new kh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ow(e,n,"signInWithPassword",cye);case"emailLink":return fye(e,{email:this._email,oobCode:this._password});default:sa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ow(e,r,"signUpPassword",lye);case"emailLink":return dye(e,{idToken:n,email:this._email,oobCode:this._password});default:sa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(t,e){return xp(t,"POST","/v1/accounts:signInWithIdp",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hye="http://localhost";class hl extends fE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=aE(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new hl(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Bc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bc(e,n)}buildRequest(){const e={requestUri:hye,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pye(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mye(t){const e=Dd(Ad(t)).link,n=e?Dd(Ad(e)).deep_link_id:null,r=Dd(Ad(t)).deep_link_id;return(r?Dd(Ad(r)).link:null)||r||n||e||t}class dE{constructor(e){var n,r,i,a,o,s;const u=Dd(Ad(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,c=(r=u.oobCode)!==null&&r!==void 0?r:null,f=pye((i=u.mode)!==null&&i!==void 0?i:null);it(l&&c&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=c,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(s=u.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const n=mye(e);try{return new dE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this.providerId=Wf.PROVIDER_ID}static credential(e,n){return kh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=dE.parseLink(n);return it(r,"argument-error"),kh._fromEmailAndCode(e,r.code,r.tenantId)}}Wf.PROVIDER_ID="password";Wf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends hE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends bp{constructor(){super("facebook.com")}static credential(e){return hl._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends bp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hl._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Eo.credential(n,r)}catch{return null}}}Eo.GOOGLE_SIGN_IN_METHOD="google.com";Eo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends bp{constructor(){super("github.com")}static credential(e){return hl._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.GITHUB_SIGN_IN_METHOD="github.com";ws.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends bp{constructor(){super("twitter.com")}static credential(e,n){return hl._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _s.credential(n,r)}catch{return null}}}_s.TWITTER_SIGN_IN_METHOD="twitter.com";_s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vye(t,e){return xp(t,"POST","/v1/accounts:signUp",xu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await wa._fromIdTokenResponse(e,r,i),o=UM(r);return new pl({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=UM(r);return new pl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function UM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends yu{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wg.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new wg(e,n,r,i)}}function x8(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?wg._fromErrorAndOperation(t,a,e,r):a})}async function gye(t,e,n=!1){const r=await Ih(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yye(t,e,n=!1){const{auth:r}=t;if(Si(r.app))return Promise.reject(Po(r));const i="reauthenticate";try{const a=await Ih(t,x8(r,i,e,t),n);it(a.idToken,r,"internal-error");const o=lE(a.idToken);it(o,r,"internal-error");const{sub:s}=o;return it(t.uid===s,r,"user-mismatch"),pl._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&sa(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b8(t,e,n=!1){if(Si(t.app))return Promise.reject(Po(t));const r="signIn",i=await x8(t,r,e),a=await pl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function xye(t,e){return b8(wu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w8(t){const e=wu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bye(t,e,n){if(Si(t.app))return Promise.reject(Po(t));const r=wu(t),o=await ow(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vye).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&w8(t),u}),s=await pl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function wye(t,e,n){return Si(t.app)?Promise.reject(Po(t)):xye(ni(t),Wf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&w8(t),r})}function _ye(t,e,n,r){return ni(t).onIdTokenChanged(e,n,r)}function Eye(t,e,n){return ni(t).beforeAuthStateChanged(e,n)}function Cye(t,e,n,r){return ni(t).onAuthStateChanged(e,n,r)}function Nye(t){return ni(t).signOut()}const _g="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_g,"1"),this.storage.removeItem(_g),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sye=1e3,Dye=10;class E8 extends _8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,s,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);W0e()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Dye):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Sye)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}E8.type="LOCAL";const Aye=E8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8 extends _8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}C8.type="SESSION";const N8=C8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tye(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ly(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async l=>l(n.origin,a)),u=await Tye(s);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ly.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mye{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,u)=>{const l=pE("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(d.data.response);break;default:clearTimeout(c),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(){return window}function Iye(t){Ja().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(){return typeof Ja().WorkerGlobalScope<"u"&&typeof Ja().importScripts=="function"}async function kye(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Rye(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Fye(){return S8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8="firebaseLocalStorageDb",Pye=1,Eg="firebaseLocalStorage",A8="fbase_key";class wp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cy(t,e){return t.transaction([Eg],e?"readwrite":"readonly").objectStore(Eg)}function Oye(){const t=indexedDB.deleteDatabase(D8);return new wp(t).toPromise()}function sw(){const t=indexedDB.open(D8,Pye);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Eg,{keyPath:A8})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Eg)?e(r):(r.close(),await Oye(),e(await sw()))})})}async function VM(t,e,n){const r=cy(t,!0).put({[A8]:e,value:n});return new wp(r).toPromise()}async function Bye(t,e){const n=cy(t,!1).get(e),r=await new wp(n).toPromise();return r===void 0?null:r.value}function WM(t,e){const n=cy(t,!0).delete(e);return new wp(n).toPromise()}const Lye=800,jye=3;class T8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jye)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ly._getInstance(Fye()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kye(),!this.activeServiceWorker)return;this.sender=new Mye(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Rye()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sw();return await VM(e,_g,"1"),await WM(e,_g),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>VM(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Bye(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>WM(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=cy(i,!1).getAll();return new wp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lye)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}T8.type="LOCAL";const $ye=T8;new yp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(t,e){return e?Mo(e):(it(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends fE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zye(t){return b8(t.auth,new mE(t),t.bypassAuthState)}function Uye(t){const{auth:e,user:n}=t;return it(n,e,"internal-error"),yye(n,new mE(t),t.bypassAuthState)}async function Vye(t){const{auth:e,user:n}=t;return it(n,e,"internal-error"),gye(n,new mE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zye;case"linkViaPopup":case"linkViaRedirect":return Vye;case"reauthViaPopup":case"reauthViaRedirect":return Uye;default:sa(this.auth,"internal-error")}}resolve(e){Go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wye=new yp(2e3,1e4);async function qye(t,e,n){if(Si(t.app))return Promise.reject(Aa(t,"operation-not-supported-in-this-environment"));const r=wu(t);C0e(t,e,hE);const i=M8(r,n);return new qu(r,"signInViaPopup",e,i).executeNotNull()}class qu extends I8{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,qu.currentPopupAction&&qu.currentPopupAction.cancel(),qu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return it(e,this.auth,"internal-error"),e}async onExecution(){Go(this.filter.length===1,"Popup operations only handle one event");const e=pE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Aa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Aa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Aa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wye.get())};e()}}qu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hye="pendingRedirect",uv=new Map;class Gye extends I8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=uv.get(this.auth._key());if(!e){try{const r=await Kye(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uv.set(this.auth._key(),e)}return this.bypassAuthState||uv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kye(t,e){const n=Qye(e),r=Xye(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Yye(t,e){uv.set(t._key(),e)}function Xye(t){return Mo(t._redirectPersistence)}function Qye(t){return sv(Hye,t.config.apiKey,t.name)}async function Zye(t,e,n=!1){if(Si(t.app))return Promise.reject(Po(t));const r=wu(t),i=M8(r,e),o=await new Gye(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jye=10*60*1e3;class e1e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!t1e(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!k8(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Aa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Jye&&this.cachedEventUids.clear(),this.cachedEventUids.has(qM(e))}saveEventToCache(e){this.cachedEventUids.add(qM(e)),this.lastProcessedEventTime=Date.now()}}function qM(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function k8({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function t1e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k8(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1e(t,e={}){return bu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i1e=/^https?/;async function a1e(t){if(t.config.emulator)return;const{authorizedDomains:e}=await n1e(t);for(const n of e)try{if(o1e(n))return}catch{}sa(t,"unauthorized-domain")}function o1e(t){const e=iw(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!i1e.test(n))return!1;if(r1e.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1e=new yp(3e4,6e4);function HM(){const t=Ja().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function u1e(t){return new Promise((e,n)=>{var r,i,a;function o(){HM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HM(),n(Aa(t,"network-request-failed"))},timeout:s1e.get()})}if(!((i=(r=Ja().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Ja().gapi)===null||a===void 0)&&a.load)o();else{const s=J0e("iframefcb");return Ja()[s]=()=>{gapi.load?o():n(Aa(t,"network-request-failed"))},v8(`${Z0e()}?onload=${s}`).catch(u=>n(u))}}).catch(e=>{throw lv=null,e})}let lv=null;function l1e(t){return lv=lv||u1e(t),lv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1e=new yp(5e3,15e3),f1e="__/auth/iframe",d1e="emulator/auth/iframe",h1e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p1e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m1e(t){const e=t.config;it(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?uE(e,d1e):`https://${t.config.authDomain}/${f1e}`,r={apiKey:e.apiKey,appName:t.name,v:Vf},i=p1e.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Uf(r).slice(1)}`}async function v1e(t){const e=await l1e(t),n=Ja().gapi;return it(n,t,"internal-error"),e.open({where:document.body,url:m1e(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h1e,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Aa(t,"network-request-failed"),s=Ja().setTimeout(()=>{a(o)},c1e.get());function u(){Ja().clearTimeout(s),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y1e=500,x1e=600,b1e="_blank",w1e="http://localhost";class GM{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _1e(t,e,n,r=y1e,i=x1e){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const u=Object.assign(Object.assign({},g1e),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Xr().toLowerCase();n&&(s=l8(l)?b1e:n),s8(l)&&(e=e||w1e,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(V0e(l)&&s!=="_self")return E1e(e||"",s),new GM(null);const f=window.open(e||"",s,c);it(f,t,"popup-blocked");try{f.focus()}catch{}return new GM(f)}function E1e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1e="__/auth/handler",N1e="emulator/auth/handler",S1e=encodeURIComponent("fac");async function KM(t,e,n,r,i,a){it(t.config.authDomain,t,"auth-domain-config-required"),it(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vf,eventId:i};if(e instanceof hE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Zb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(e instanceof bp){const c=e.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const s=o;for(const c of Object.keys(s))s[c]===void 0&&delete s[c];const u=await t._getAppCheckToken(),l=u?`#${S1e}=${encodeURIComponent(u)}`:"";return`${D1e(t)}?${Uf(s).slice(1)}${l}`}function D1e({config:t}){return t.emulator?uE(t,N1e):`https://${t.authDomain}/${C1e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="webStorageSupport";class A1e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N8,this._completeRedirectFn=Zye,this._overrideRedirectResult=Yye}async _openPopup(e,n,r,i){var a;Go((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await KM(e,n,r,iw(),i);return _1e(e,o,pE())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await KM(e,n,r,iw(),i);return Iye(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Go(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await v1e(e),r=new e1e(e);return n.register("authEvent",i=>(it(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(I1,{type:I1},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[I1];o!==void 0&&n(!!o),sa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=a1e(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return p8()||u8()||cE()}}const T1e=A1e;var YM="@firebase/auth",XM="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function k1e(t){hf(new dl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;it(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m8(t)},l=new Y0e(r,i,a,u);return aye(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hf(new dl("auth-internal",e=>{const n=wu(e.getProvider("auth").getImmediate());return(r=>new M1e(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Us(YM,XM,I1e(t)),Us(YM,XM,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1e=5*60,F1e=W5("authIdTokenMaxAge")||R1e;let QM=null;const P1e=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>F1e)return;const i=n==null?void 0:n.token;QM!==i&&(QM=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function O1e(t=Q5()){const e=iE(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iye(t,{popupRedirectResolver:T1e,persistence:[$ye,Aye,N8]}),r=W5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=P1e(a.toString());Eye(n,o,()=>o(n.currentUser)),_ye(n,s=>o(s))}}const i=U5("auth");return i&&oye(n,`http://${i}`),n}function B1e(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}X0e({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Aa("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",B1e().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});k1e("Browser");var L1e="firebase",j1e="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us(L1e,j1e,"app");var ZM={};const JM="@firebase/database",eI="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R8="";function $1e(t){R8=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ir(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Th(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ts(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new z1e(e)}}catch{}return new U1e},Hu=F8("localStorage"),V1e=F8("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new nE("@firebase/database"),W1e=function(){let t=1;return function(){return t++}}(),P8=function(t){const e=hge(t),n=new lge;n.update(e);const r=n.digest();return Z_.encodeByteArray(r)},_p=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=_p.apply(null,r):typeof r=="object"?e+=ir(r):e+=r,e+=" "}return e};let Vd=null,tI=!0;const q1e=function(t,e){Be(!e,"Can't turn on custom loggers persistently."),Lc.logLevel=Qt.VERBOSE,Vd=Lc.log.bind(Lc)},Mr=function(...t){if(tI===!0&&(tI=!1,Vd===null&&V1e.get("logging_enabled")===!0&&q1e()),Vd){const e=_p.apply(null,t);Vd(e)}},Ep=function(t){return function(...e){Mr(t,...e)}},uw=function(...t){const e="FIREBASE INTERNAL ERROR: "+_p(...t);Lc.error(e)},Ko=function(...t){const e=`FIREBASE FATAL ERROR: ${_p(...t)}`;throw Lc.error(e),new Error(e)},gi=function(...t){const e="FIREBASE WARNING: "+_p(...t);Lc.warn(e)},H1e=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},O8=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},G1e=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},pf="[MIN_NAME]",ml="[MAX_NAME]",qf=function(t,e){if(t===e)return 0;if(t===pf||e===ml)return-1;if(e===pf||t===ml)return 1;{const n=nI(t),r=nI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},K1e=function(t,e){return t===e?0:t<e?-1:1},fd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ir(e))},vE=function(t){if(typeof t!="object"||t===null)return ir(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ir(e[r]),n+=":",n+=vE(t[e[r]]);return n+="}",n},B8=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function bi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const L8=function(t){Be(!O8(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,a,o,s,u;t===0?(a=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(s=Math.min(Math.floor(Math.log(t)/Math.LN2),r),a=s+r,o=Math.round(t*Math.pow(2,n-s)-Math.pow(2,n))):(a=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(u=n;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)l.push(a%2?1:0),a=Math.floor(a/2);l.push(i?1:0),l.reverse();const c=l.join("");let f="";for(u=0;u<64;u+=8){let d=parseInt(c.substr(u,8),2).toString(16);d.length===1&&(d="0"+d),f=f+d}return f.toLowerCase()},Y1e=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},X1e=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Q1e(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Z1e=new RegExp("^-?(0*)\\d{1,10}$"),J1e=-2147483648,exe=2147483647,nI=function(t){if(Z1e.test(t)){const e=Number(t);if(e>=J1e&&e<=exe)return e}return null},Hf=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw gi("Exception was thrown by user callback.",n),e},Math.floor(0))}},txe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nxe{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Si(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gi(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rxe{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Mr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gi(e)}}class cv{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}cv.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="5",j8="v",$8="s",z8="r",U8="f",V8=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W8="ls",q8="p",lw="ac",H8="websocket",G8="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n,r,i,a=!1,o="",s=!1,u=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hu.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function ixe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Y8(t,e,n){Be(typeof e=="string","typeof type must == string"),Be(typeof n=="object","typeof params must == object");let r;if(e===H8)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===G8)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ixe(t)&&(n.ns=t.namespace);const i=[];return bi(n,(a,o)=>{i.push(a+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class axe{constructor(){this.counters_={}}incrementCounter(e,n=1){ts(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return qve(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1={},R1={};function yE(t){const e=t.toString();return k1[e]||(k1[e]=new axe),k1[e]}function oxe(t,e){const n=t.toString();return R1[n]||(R1[n]=e()),R1[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sxe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Hf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="start",uxe="close",lxe="pLPCommand",cxe="pRTLPCB",X8="id",Q8="pw",Z8="ser",fxe="cb",dxe="seg",hxe="ts",pxe="d",mxe="dframe",J8=1870,e6=30,vxe=J8-e6,gxe=25e3,yxe=3e4;class bc{constructor(e,n,r,i,a,o,s){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ep(e),this.stats_=yE(n),this.urlFn=u=>(this.appCheckToken&&(u[lw]=this.appCheckToken),Y8(n,G8,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new sxe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(yxe)),G1e(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xE((...a)=>{const[o,s,u,l,c]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===rI)this.id=s,this.password=u;else if(o===uxe)s?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(s,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...a)=>{const[o,s]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(o,s)},()=>{this.onClosed_()},this.urlFn);const r={};r[rI]="t",r[Z8]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[fxe]=this.scriptTagHolder.uniqueCallbackIdentifier),r[j8]=gE,this.transportSessionId&&(r[$8]=this.transportSessionId),this.lastSessionId&&(r[W8]=this.lastSessionId),this.applicationId&&(r[q8]=this.applicationId),this.appCheckToken&&(r[lw]=this.appCheckToken),typeof location<"u"&&location.hostname&&V8.test(location.hostname)&&(r[z8]=U8);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bc.forceAllow_=!0}static forceDisallow(){bc.forceDisallow_=!0}static isAvailable(){return bc.forceAllow_?!0:!bc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Y1e()&&!X1e()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ir(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=$5(n),i=B8(r,vxe);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[mxe]="t",r[X8]=e,r[Q8]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ir(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class xE{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=W1e(),window[lxe+this.uniqueCallbackIdentifier]=e,window[cxe+this.uniqueCallbackIdentifier]=n,this.myIFrame=xE.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Mr("frame writing exception"),s.stack&&Mr(s.stack),Mr(s)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Mr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[X8]=this.myID,e[Q8]=this.myPW,e[Z8]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+e6+r.length<=J8;){const o=this.pendingSegs.shift();r=r+"&"+dxe+i+"="+o.seg+"&"+hxe+i+"="+o.ts+"&"+pxe+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(gxe)),a=()=>{clearTimeout(i),r()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Mr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xxe=16384,bxe=45e3;let Cg=null;typeof MozWebSocket<"u"?Cg=MozWebSocket:typeof WebSocket<"u"&&(Cg=WebSocket);class ba{constructor(e,n,r,i,a,o,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ep(this.connId),this.stats_=yE(n),this.connURL=ba.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,a){const o={};return o[j8]=gE,typeof location<"u"&&location.hostname&&V8.test(location.hostname)&&(o[z8]=U8),n&&(o[$8]=n),r&&(o[W8]=r),i&&(o[lw]=i),a&&(o[q8]=a),Y8(e,H8,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hu.set("previous_websocket_failure",!0);try{let r;H5(),this.mySock=new Cg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ba.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Cg!==null&&!ba.forceDisallow_}static previouslyFailed(){return Hu.isInMemoryStorage||Hu.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hu.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Th(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Be(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ir(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=B8(n,xxe);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(bxe))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ba.responsesRequiredToBeHealthy=2;ba.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{static get ALL_TRANSPORTS(){return[bc,ba]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ba&&ba.isAvailable();let r=n&&!ba.previouslyFailed();if(e.webSocketOnly&&(n||gi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ba];else{const i=this.transports_=[];for(const a of Rh.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a);Rh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Rh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wxe=6e4,_xe=5e3,Exe=10*1024,Cxe=100*1024,F1="t",iI="d",Nxe="s",aI="r",Sxe="e",oI="o",sI="a",uI="n",lI="p",Dxe="h";class Axe{constructor(e,n,r,i,a,o,s,u,l,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ep("c:"+this.id+":"),this.transportManager_=new Rh(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Cxe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Exe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(F1 in e){const n=e[F1];n===sI?this.upgradeIfSecondaryHealthy_():n===aI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===oI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=fd("t",e),r=fd("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:lI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:sI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:uI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=fd("t",e),r=fd("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=fd(F1,e);if(iI in e){const r=e[iI];if(n===Dxe){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===uI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Nxe?this.onConnectionShutdown_(r):n===aI?this.onReset_(r):n===Sxe?uw("Server Error: "+r):n===oI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uw("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),gE!==r&&gi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(wxe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(_xe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:lI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.allowedEvents_=e,this.listeners_={},Be(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===n&&(!r||r===i[a].context)){i.splice(a,1);return}}validateEventType_(e){Be(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends n6{static getInstance(){return new Ng}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!eE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Be(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=32,fI=768;class tn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function $t(){return new tn("")}function St(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Js(t){return t.pieces_.length-t.pieceNum_}function rn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new tn(t.pieces_,e)}function r6(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Txe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function i6(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function a6(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new tn(e,0)}function Un(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof tn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new tn(n,0)}function Mt(t){return t.pieceNum_>=t.pieces_.length}function li(t,e){const n=St(t),r=St(e);if(n===null)return e;if(n===r)return li(rn(t),rn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function bE(t,e){if(Js(t)!==Js(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function _a(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Js(t)>Js(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Mxe{constructor(e,n){this.errorPrefix_=n,this.parts_=i6(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=sy(this.parts_[r]);o6(this)}}function Ixe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=sy(e),o6(t)}function kxe(t){const e=t.parts_.pop();t.byteLength_-=sy(e),t.parts_.length>0&&(t.byteLength_-=1)}function o6(t){if(t.byteLength_>fI)throw new Error(t.errorPrefix_+"has a key path longer than "+fI+" bytes ("+t.byteLength_+").");if(t.parts_.length>cI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+cI+") or object contains a cycle "+Ru(t))}function Ru(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE extends n6{static getInstance(){return new wE}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Be(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=1e3,Rxe=60*5*1e3,dI=30*1e3,Fxe=1.3,Pxe=3e4,Oxe="server_kill",hI=3;class Oo extends t6{constructor(e,n,r,i,a,o,s,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=a,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=u,this.id=Oo.nextPersistentConnectionId_++,this.log_=Ep("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dd,this.maxReconnectDelay_=Rxe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!H5())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wE.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ng.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,a={r:i,a:e,b:n};this.log_(ir(a)),Be(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new oy,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const s=o.d;o.s==="ok"?n.resolve(s):n.reject(s)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,r,i){this.initConnection_();const a=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+a),this.listens.has(o)||this.listens.set(o,new Map),Be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Be(!this.listens.get(o).has(a),"listen() called twice for same path/queryId.");const s={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(a,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const a={p:r},o="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(o,a,s=>{const u=s.d,l=s.s;Oo.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",s),l!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(l,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ts(e,"w")){const r=df(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();gi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||uge(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=dI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=sge(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const a=i.s,o=i.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),Be(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const a={p:e},o="n";i&&(a.q=r,a.t=i),this.sendRequest(o,a)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const a={p:n,d:r};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,a){this.initConnection_();const o={p:n,d:r};a!==void 0&&(o.h=a),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ir(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):uw("Unrecognized action received from server: "+ir(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Be(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=dd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Pxe&&(this.reconnectDelay_=dd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Fxe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Oo.nextConnectionId_++,a=this.lastSessionId;let o=!1,s=null;const u=function(){s?s.close():(o=!0,r())},l=function(f){Be(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(f)};this.realtime_={close:u,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,d]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Mr("getToken() completed but was canceled"):(Mr("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=d&&d.token,s=new Axe(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,h=>{gi(h+" ("+this.repoInfo_.toString()+")"),this.interrupt(Oxe)},a))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&gi(f),u())}}}interrupt(e){Mr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Mr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Zb(this.interruptReasons_)&&(this.reconnectDelay_=dd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(a=>vE(a)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new tn(e).toString();let i;if(this.listens.has(r)){const a=this.listens.get(r);i=a.get(n),a.delete(n),a.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Mr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=hI&&(this.reconnectDelay_=dI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Mr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=hI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+R8.replace(/\./g,"-")]=1,eE()?e["framework.cordova"]=1:q5()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ng.getInstance().currentlyOnline();return Zb(this.interruptReasons_)&&e}}Oo.nextPersistentConnectionId_=0;Oo.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new At(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new At(pf,e),i=new At(pf,n);return this.compare(r,i)!==0}minPost(){return At.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dm;class s6 extends fy{static get __EMPTY_NODE(){return Dm}static set __EMPTY_NODE(e){Dm=e}compare(e,n){return qf(e.name,n.name)}isDefinedOn(e){throw zf("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return At.MIN}maxPost(){return new At(ml,Dm)}makePost(e,n){return Be(typeof e=="string","KeyIndex indexValue must always be a string."),new At(e,Dm)}toString(){return".key"}}const jc=new s6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??rr.RED,this.left=i??ci.EMPTY_NODE,this.right=a??ci.EMPTY_NODE}copy(e,n,r,i,a){return new rr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return a<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ci.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ci.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rr.RED=!0;rr.BLACK=!1;class Bxe{copy(e,n,r,i,a){return this}insert(e,n,r){return new rr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ci{constructor(e,n=ci.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ci(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,rr.BLACK,null,null))}remove(e){return new ci(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Am(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Am(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Am(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Am(this.root_,null,this.comparator_,!0,e)}}ci.EMPTY_NODE=new Bxe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lxe(t,e){return qf(t.name,e.name)}function _E(t,e){return qf(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cw;function jxe(t){cw=t}const u6=function(t){return typeof t=="number"?"number:"+L8(t):"string:"+t},l6=function(t){if(t.isLeafNode()){const e=t.val();Be(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ts(e,".sv"),"Priority must be a string or number.")}else Be(t===cw||t.isEmpty(),"priority of unexpected type.");Be(t===cw||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pI;class tr{static set __childrenNodeConstructor(e){pI=e}static get __childrenNodeConstructor(){return pI}constructor(e,n=tr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Be(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),l6(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new tr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:tr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Mt(e)?this:St(e)===".priority"?this.priorityNode_:tr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:tr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=St(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Be(r!==".priority"||Js(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,tr.__childrenNodeConstructor.EMPTY_NODE.updateChild(rn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+u6(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=L8(this.value_):e+=this.value_,this.lazyHash_=P8(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===tr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof tr.__childrenNodeConstructor?-1:(Be(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=tr.VALUE_TYPE_ORDER.indexOf(n),a=tr.VALUE_TYPE_ORDER.indexOf(r);return Be(i>=0,"Unknown leaf type: "+n),Be(a>=0,"Unknown leaf type: "+r),i===a?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}tr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c6,f6;function $xe(t){c6=t}function zxe(t){f6=t}class Uxe extends fy{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),a=r.compareTo(i);return a===0?qf(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return At.MIN}maxPost(){return new At(ml,new tr("[PRIORITY-POST]",f6))}makePost(e,n){const r=c6(e);return new At(n,new tr("[PRIORITY-POST]",r))}toString(){return".priority"}}const An=new Uxe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vxe=Math.log(2);class Wxe{constructor(e){const n=a=>parseInt(Math.log(a)/Vxe,10),r=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Sg=function(t,e,n,r){t.sort(e);const i=function(u,l){const c=l-u;let f,d;if(c===0)return null;if(c===1)return f=t[u],d=n?n(f):f,new rr(d,f.node,rr.BLACK,null,null);{const h=parseInt(c/2,10)+u,p=i(u,h),m=i(h+1,l);return f=t[h],d=n?n(f):f,new rr(d,f.node,rr.BLACK,p,m)}},a=function(u){let l=null,c=null,f=t.length;const d=function(p,m){const y=f-p,v=f;f-=p;const x=i(y+1,v),g=t[y],b=n?n(g):g;h(new rr(b,g.node,m,null,x))},h=function(p){l?(l.left=p,l=p):(c=p,l=p)};for(let p=0;p<u.count;++p){const m=u.nextBitIsOne(),y=Math.pow(2,u.count-(p+1));m?d(y,rr.BLACK):(d(y,rr.BLACK),d(y,rr.RED))}return c},o=new Wxe(t.length),s=a(o);return new ci(r||e,s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P1;const Ql={};class Io{static get Default(){return Be(Ql&&An,"ChildrenNode.ts has not been loaded"),P1=P1||new Io({".priority":Ql},{".priority":An}),P1}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=df(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ci?n:null}hasIndex(e){return ts(this.indexSet_,e.toString())}addIndex(e,n){Be(e!==jc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=n.getIterator(At.Wrap);let o=a.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=a.getNext();let s;i?s=Sg(r,e.getCompare()):s=Ql;const u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;const c=Object.assign({},this.indexes_);return c[u]=s,new Io(c,l)}addToIndexes(e,n){const r=vg(this.indexes_,(i,a)=>{const o=df(this.indexSet_,a);if(Be(o,"Missing index implementation for "+a),i===Ql)if(o.isDefinedOn(e.node)){const s=[],u=n.getIterator(At.Wrap);let l=u.getNext();for(;l;)l.name!==e.name&&s.push(l),l=u.getNext();return s.push(e),Sg(s,o.getCompare())}else return Ql;else{const s=n.get(e.name);let u=i;return s&&(u=u.remove(new At(e.name,s))),u.insert(e,e.node)}});return new Io(r,this.indexSet_)}removeFromIndexes(e,n){const r=vg(this.indexes_,i=>{if(i===Ql)return i;{const a=n.get(e.name);return a?i.remove(new At(e.name,a)):i}});return new Io(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd;class at{static get EMPTY_NODE(){return hd||(hd=new at(new ci(_E),null,Io.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&l6(this.priorityNode_),this.children_.isEmpty()&&Be(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hd}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?hd:n}}getChild(e){const n=St(e);return n===null?this:this.getImmediateChild(n).getChild(rn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Be(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new At(e,n);let i,a;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?hd:this.priorityNode_;return new at(i,o,a)}}updateChild(e,n){const r=St(e);if(r===null)return n;{Be(St(e)!==".priority"||Js(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(rn(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,a=!0;if(this.forEachChild(An,(o,s)=>{n[o]=s.val(e),r++,a&&at.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1}),!e&&a&&i<2*r){const o=[];for(const s in n)o[s]=n[s];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+u6(this.getPriority().val())+":"),this.forEachChild(An,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":P8(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const a=i.getPredecessorKey(new At(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new At(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new At(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,At.Wrap);let a=i.peek();for(;a!=null&&n.compare(a,e)<0;)i.getNext(),a=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,At.Wrap);let a=i.peek();for(;a!=null&&n.compare(a,e)>0;)i.getNext(),a=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Cp?-1:0}withIndex(e){if(e===jc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===jc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(An),i=n.getIterator(An);let a=r.getNext(),o=i.getNext();for(;a&&o;){if(a.name!==o.name||!a.node.equals(o.node))return!1;a=r.getNext(),o=i.getNext()}return a===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===jc?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class qxe extends at{constructor(){super(new ci(_E),at.EMPTY_NODE,Io.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const Cp=new qxe;Object.defineProperties(At,{MIN:{value:new At(pf,at.EMPTY_NODE)},MAX:{value:new At(ml,Cp)}});s6.__EMPTY_NODE=at.EMPTY_NODE;tr.__childrenNodeConstructor=at;jxe(Cp);zxe(Cp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hxe=!0;function pr(t,e=null){if(t===null)return at.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Be(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new tr(n,pr(e))}if(!(t instanceof Array)&&Hxe){const n=[];let r=!1;if(bi(t,(o,s)=>{if(o.substring(0,1)!=="."){const u=pr(s);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new At(o,u)))}}),n.length===0)return at.EMPTY_NODE;const a=Sg(n,Lxe,o=>o.name,_E);if(r){const o=Sg(n,An.getCompare());return new at(a,pr(e),new Io({".priority":o},{".priority":An}))}else return new at(a,pr(e),Io.Default)}else{let n=at.EMPTY_NODE;return bi(t,(r,i)=>{if(ts(t,r)&&r.substring(0,1)!=="."){const a=pr(i);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(r,a))}}),n.updatePriority(pr(e))}}$xe(pr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gxe extends fy{constructor(e){super(),this.indexPath_=e,Be(!Mt(e)&&St(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),a=r.compareTo(i);return a===0?qf(e.name,n.name):a}makePost(e,n){const r=pr(e),i=at.EMPTY_NODE.updateChild(this.indexPath_,r);return new At(n,i)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,Cp);return new At(ml,e)}toString(){return i6(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kxe extends fy{compare(e,n){const r=e.node.compareTo(n.node);return r===0?qf(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return At.MIN}maxPost(){return At.MAX}makePost(e,n){const r=pr(e);return new At(n,r)}toString(){return".value"}}const Yxe=new Kxe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(t){return{type:"value",snapshotNode:t}}function mf(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Fh(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ph(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Xxe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.index_=e}updateChild(e,n,r,i,a,o){Be(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(n);return s.getChild(i).equals(r.getChild(i))&&s.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Fh(n,s)):Be(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(mf(n,r)):o.trackChildChange(Ph(n,r,s))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(An,(i,a)=>{n.hasChild(i)||r.trackChildChange(Fh(i,a))}),n.isLeafNode()||n.forEachChild(An,(i,a)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(a)||r.trackChildChange(Ph(i,a,o))}else r.trackChildChange(mf(i,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?at.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.indexedFilter_=new EE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Oh.getStartPost_(e),this.endPost_=Oh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,a,o){return this.matches(new At(n,r))||(r=at.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,a,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=at.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(at.EMPTY_NODE);const a=this;return n.forEachChild(An,(o,s)=>{a.matches(new At(o,s))||(i=i.updateImmediateChild(o,at.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qxe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Oh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,a,o){return this.rangedFilter_.matches(new At(n,r))||(r=at.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,a,o):this.fullLimitUpdateChild_(e,n,r,a,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=at.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=at.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;a.hasNext()&&o<this.limit_;){const s=a.getNext();if(this.withinDirectionalStart(s))if(this.withinDirectionalEnd(s))i=i.updateImmediateChild(s.name,s.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(at.EMPTY_NODE);let a;this.reverse_?a=i.getReverseIterator(this.index_):a=i.getIterator(this.index_);let o=0;for(;a.hasNext();){const s=a.getNext();o<this.limit_&&this.withinDirectionalStart(s)&&this.withinDirectionalEnd(s)?o++:i=i.updateImmediateChild(s.name,at.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,a){let o;if(this.reverse_){const f=this.index_.getCompare();o=(d,h)=>f(h,d)}else o=this.index_.getCompare();const s=e;Be(s.numChildren()===this.limit_,"");const u=new At(n,r),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(n)){const f=s.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,l,this.reverse_);for(;d!=null&&(d.name===n||s.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const h=d==null?1:o(d,u);if(c&&!r.isEmpty()&&h>=0)return a!=null&&a.trackChildChange(Ph(n,r,f)),s.updateImmediateChild(n,r);{a!=null&&a.trackChildChange(Fh(n,f));const m=s.updateImmediateChild(n,at.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(a!=null&&a.trackChildChange(mf(d.name,d.node)),m.updateImmediateChild(d.name,d.node)):m}}else return r.isEmpty()?e:c&&o(l,u)>=0?(a!=null&&(a.trackChildChange(Fh(l.name,l.node)),a.trackChildChange(mf(n,r))),s.updateImmediateChild(n,r).updateImmediateChild(l.name,at.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=An}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Be(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Be(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pf}hasEnd(){return this.endSet_}getIndexEndValue(){return Be(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Be(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ml}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Be(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===An}copy(){const e=new CE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Zxe(t){return t.loadsAllData()?new EE(t.getIndex()):t.hasLimit()?new Qxe(t):new Oh(t)}function mI(t){const e={};if(t.isDefault())return e;let n;if(t.index_===An?n="$priority":t.index_===Yxe?n="$value":t.index_===jc?n="$key":(Be(t.index_ instanceof Gxe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ir(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ir(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ir(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ir(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ir(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function vI(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==An&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg extends t6{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Be(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ep("p:rest:"),this.listens_={}}listen(e,n,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const o=Dg.getListenId_(e,r),s={};this.listens_[o]=s;const u=mI(e._queryParams);this.restRequest_(a+".json",u,(l,c)=>{let f=c;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(a,f,!1,r),df(this.listens_,o)===s){let d;l?l===401?d="permission_denied":d="rest_error:"+l:d="ok",i(d,null)}})}unlisten(e,n){const r=Dg.getListenId_(e,n);delete this.listens_[r]}get(e){const n=mI(e._queryParams),r=e._path.toString(),i=new oy;return this.restRequest_(r+".json",n,(a,o)=>{let s=o;a===404&&(s=null,a=null),a===null?(this.onDataUpdate_(r,s,!1,null),i.resolve(s)):i.reject(new Error(s))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(n.auth=i.accessToken),a&&a.token&&(n.ac=a.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Uf(n);this.log_("Sending REST request for "+o);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(r&&s.readyState===4){this.log_("REST Response for "+o+" received. status:",s.status,"response:",s.responseText);let u=null;if(s.status>=200&&s.status<300){try{u=Th(s.responseText)}catch{gi("Failed to parse JSON response for "+o+": "+s.responseText)}r(null,u)}else s.status!==401&&s.status!==404&&gi("Got unsuccessful REST response for "+o+" Status: "+s.status),r(s.status);r=null}},s.open("GET",o,!0),s.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(){return{value:null,children:new Map}}function h6(t,e,n){if(Mt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=St(e);t.children.has(r)||t.children.set(r,Ag());const i=t.children.get(r);e=rn(e),h6(i,e,n)}}function fw(t,e,n){t.value!==null?n(e,t.value):ebe(t,(r,i)=>{const a=new tn(e.toString()+"/"+r);fw(i,a,n)})}function ebe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tbe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&bi(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=10*1e3,nbe=30*1e3,rbe=5*60*1e3;class ibe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new tbe(e);const r=gI+(nbe-gI)*Math.random();Wd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;bi(e,(i,a)=>{a>0&&ts(this.statsToReport_,i)&&(n[i]=a,r=!0)}),r&&this.server_.reportStats(n),Wd(this.reportStats_.bind(this),Math.floor(Math.random()*2*rbe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ea;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ea||(Ea={}));function p6(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function NE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function SE(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ea.ACK_USER_WRITE,this.source=p6()}operationForChild(e){if(Mt(this.path)){if(this.affectedTree.value!=null)return Be(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new tn(e));return new Tg($t(),n,this.revert)}}else return Be(St(this.path)===e,"operationForChild called for unrelated child."),new Tg(rn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.source=e,this.path=n,this.type=Ea.LISTEN_COMPLETE}operationForChild(e){return Mt(this.path)?new Bh(this.source,$t()):new Bh(this.source,rn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ea.OVERWRITE}operationForChild(e){return Mt(this.path)?new vl(this.source,$t(),this.snap.getImmediateChild(e)):new vl(this.source,rn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ea.MERGE}operationForChild(e){if(Mt(this.path)){const n=this.children.subtree(new tn(e));return n.isEmpty()?null:n.value?new vl(this.source,$t(),n.value):new Lh(this.source,$t(),n)}else return Be(St(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Lh(this.source,rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Mt(e))return this.isFullyInitialized()&&!this.filtered_;const n=St(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class abe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function obe(t,e,n,r){const i=[],a=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&a.push(Xxe(o.childName,o.snapshotNode))}),pd(t,i,"child_removed",e,r,n),pd(t,i,"child_added",e,r,n),pd(t,i,"child_moved",a,r,n),pd(t,i,"child_changed",e,r,n),pd(t,i,"value",e,r,n),i}function pd(t,e,n,r,i,a){const o=r.filter(s=>s.type===n);o.sort((s,u)=>ube(t,s,u)),o.forEach(s=>{const u=sbe(t,s,a);i.forEach(l=>{l.respondsTo(s.type)&&e.push(l.createEvent(u,t.query_))})})}function sbe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ube(t,e,n){if(e.childName==null||n.childName==null)throw zf("Should only compare child_ events.");const r=new At(e.childName,e.snapshotNode),i=new At(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t,e){return{eventCache:t,serverCache:e}}function qd(t,e,n,r){return dy(new gl(e,n,r),t.serverCache)}function m6(t,e,n,r){return dy(t.eventCache,new gl(e,n,r))}function dw(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function yl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O1;const lbe=()=>(O1||(O1=new ci(K1e)),O1);class cn{static fromObject(e){let n=new cn(null);return bi(e,(r,i)=>{n=n.set(new tn(r),i)}),n}constructor(e,n=lbe()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:$t(),value:this.value};if(Mt(e))return null;{const r=St(e),i=this.children.get(r);if(i!==null){const a=i.findRootMostMatchingPathAndValue(rn(e),n);return a!=null?{path:Un(new tn(r),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Mt(e))return this;{const n=St(e),r=this.children.get(n);return r!==null?r.subtree(rn(e)):new cn(null)}}set(e,n){if(Mt(e))return new cn(n,this.children);{const r=St(e),a=(this.children.get(r)||new cn(null)).set(rn(e),n),o=this.children.insert(r,a);return new cn(this.value,o)}}remove(e){if(Mt(e))return this.children.isEmpty()?new cn(null):new cn(null,this.children);{const n=St(e),r=this.children.get(n);if(r){const i=r.remove(rn(e));let a;return i.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,i),this.value===null&&a.isEmpty()?new cn(null):new cn(this.value,a)}else return this}}get(e){if(Mt(e))return this.value;{const n=St(e),r=this.children.get(n);return r?r.get(rn(e)):null}}setTree(e,n){if(Mt(e))return n;{const r=St(e),a=(this.children.get(r)||new cn(null)).setTree(rn(e),n);let o;return a.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,a),new cn(this.value,o)}}fold(e){return this.fold_($t(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Un(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,$t(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Mt(e))return null;{const a=St(e),o=this.children.get(a);return o?o.findOnPath_(rn(e),Un(n,a),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,$t(),n)}foreachOnPath_(e,n,r){if(Mt(e))return this;{this.value&&r(n,this.value);const i=St(e),a=this.children.get(i);return a?a.foreachOnPath_(rn(e),Un(n,i),r):new cn(null)}}foreach(e){this.foreach_($t(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Un(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.writeTree_=e}static empty(){return new Ta(new cn(null))}}function Hd(t,e,n){if(Mt(e))return new Ta(new cn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let a=r.value;const o=li(i,e);return a=a.updateChild(o,n),new Ta(t.writeTree_.set(i,a))}else{const i=new cn(n),a=t.writeTree_.setTree(e,i);return new Ta(a)}}}function yI(t,e,n){let r=t;return bi(n,(i,a)=>{r=Hd(r,Un(e,i),a)}),r}function xI(t,e){if(Mt(e))return Ta.empty();{const n=t.writeTree_.setTree(e,new cn(null));return new Ta(n)}}function hw(t,e){return Bl(t,e)!=null}function Bl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(li(n.path,e)):null}function bI(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(An,(r,i)=>{e.push(new At(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new At(r,i.value))}),e}function Vs(t,e){if(Mt(e))return t;{const n=Bl(t,e);return n!=null?new Ta(new cn(n)):new Ta(t.writeTree_.subtree(e))}}function pw(t){return t.writeTree_.isEmpty()}function vf(t,e){return v6($t(),t.writeTree_,e)}function v6(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{i===".priority"?(Be(a.value!==null,"Priority writes must always be leaf nodes"),r=a.value):n=v6(Un(t,i),a,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Un(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t,e){return b6(e,t)}function cbe(t,e,n,r,i){Be(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Hd(t.visibleWrites,e,n)),t.lastWriteId=r}function fbe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function dbe(t,e){const n=t.allWrites.findIndex(s=>s.writeId===e);Be(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,a=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const s=t.allWrites[o];s.visible&&(o>=n&&hbe(s,r.path)?i=!1:_a(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return pbe(t),!0;if(r.snap)t.visibleWrites=xI(t.visibleWrites,r.path);else{const s=r.children;bi(s,u=>{t.visibleWrites=xI(t.visibleWrites,Un(r.path,u))})}return!0}else return!1}function hbe(t,e){if(t.snap)return _a(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&_a(Un(t.path,n),e))return!0;return!1}function pbe(t){t.visibleWrites=g6(t.allWrites,mbe,$t()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function mbe(t){return t.visible}function g6(t,e,n){let r=Ta.empty();for(let i=0;i<t.length;++i){const a=t[i];if(e(a)){const o=a.path;let s;if(a.snap)_a(n,o)?(s=li(n,o),r=Hd(r,s,a.snap)):_a(o,n)&&(s=li(o,n),r=Hd(r,$t(),a.snap.getChild(s)));else if(a.children){if(_a(n,o))s=li(n,o),r=yI(r,s,a.children);else if(_a(o,n))if(s=li(o,n),Mt(s))r=yI(r,$t(),a.children);else{const u=df(a.children,St(s));if(u){const l=u.getChild(rn(s));r=Hd(r,$t(),l)}}}else throw zf("WriteRecord should have .snap or .children")}}return r}function y6(t,e,n,r,i){if(!r&&!i){const a=Bl(t.visibleWrites,e);if(a!=null)return a;{const o=Vs(t.visibleWrites,e);if(pw(o))return n;if(n==null&&!hw(o,$t()))return null;{const s=n||at.EMPTY_NODE;return vf(o,s)}}}else{const a=Vs(t.visibleWrites,e);if(!i&&pw(a))return n;if(!i&&n==null&&!hw(a,$t()))return null;{const o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(_a(l.path,e)||_a(e,l.path))},s=g6(t.allWrites,o,e),u=n||at.EMPTY_NODE;return vf(s,u)}}}function vbe(t,e,n){let r=at.EMPTY_NODE;const i=Bl(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(An,(a,o)=>{r=r.updateImmediateChild(a,o)}),r;if(n){const a=Vs(t.visibleWrites,e);return n.forEachChild(An,(o,s)=>{const u=vf(Vs(a,new tn(o)),s);r=r.updateImmediateChild(o,u)}),bI(a).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const a=Vs(t.visibleWrites,e);return bI(a).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function gbe(t,e,n,r,i){Be(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Un(e,n);if(hw(t.visibleWrites,a))return null;{const o=Vs(t.visibleWrites,a);return pw(o)?i.getChild(n):vf(o,i.getChild(n))}}function ybe(t,e,n,r){const i=Un(e,n),a=Bl(t.visibleWrites,i);if(a!=null)return a;if(r.isCompleteForChild(n)){const o=Vs(t.visibleWrites,i);return vf(o,r.getNode().getImmediateChild(n))}else return null}function xbe(t,e){return Bl(t.visibleWrites,e)}function bbe(t,e,n,r,i,a,o){let s;const u=Vs(t.visibleWrites,e),l=Bl(u,$t());if(l!=null)s=l;else if(n!=null)s=vf(u,n);else return[];if(s=s.withIndex(o),!s.isEmpty()&&!s.isLeafNode()){const c=[],f=o.getCompare(),d=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o);let h=d.getNext();for(;h&&c.length<i;)f(h,r)!==0&&c.push(h),h=d.getNext();return c}else return[]}function wbe(){return{visibleWrites:Ta.empty(),allWrites:[],lastWriteId:-1}}function Mg(t,e,n,r){return y6(t.writeTree,t.treePath,e,n,r)}function AE(t,e){return vbe(t.writeTree,t.treePath,e)}function wI(t,e,n,r){return gbe(t.writeTree,t.treePath,e,n,r)}function Ig(t,e){return xbe(t.writeTree,Un(t.treePath,e))}function _be(t,e,n,r,i,a){return bbe(t.writeTree,t.treePath,e,n,r,i,a)}function TE(t,e,n){return ybe(t.writeTree,t.treePath,e,n)}function x6(t,e){return b6(Un(t.treePath,e),t.writeTree)}function b6(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ebe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Be(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Be(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(r,Ph(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(r,Fh(r,i.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(r,mf(r,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(r,Ph(r,e.snapshotNode,i.oldSnap));else throw zf("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cbe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const w6=new Cbe;class ME{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new gl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TE(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:yl(this.viewCache_),a=_be(this.writes_,i,n,1,r,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nbe(t){return{filter:t}}function Sbe(t,e){Be(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Be(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Dbe(t,e,n,r,i){const a=new Ebe;let o,s;if(n.type===Ea.OVERWRITE){const l=n;l.source.fromUser?o=mw(t,e,l.path,l.snap,r,i,a):(Be(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered()&&!Mt(l.path),o=kg(t,e,l.path,l.snap,r,i,s,a))}else if(n.type===Ea.MERGE){const l=n;l.source.fromUser?o=Tbe(t,e,l.path,l.children,r,i,a):(Be(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),o=vw(t,e,l.path,l.children,r,i,s,a))}else if(n.type===Ea.ACK_USER_WRITE){const l=n;l.revert?o=kbe(t,e,l.path,r,i,a):o=Mbe(t,e,l.path,l.affectedTree,r,i,a)}else if(n.type===Ea.LISTEN_COMPLETE)o=Ibe(t,e,n.path,r,a);else throw zf("Unknown operation type: "+n.type);const u=a.getChanges();return Abe(e,o,u),{viewCache:o,changes:u}}function Abe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=dw(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(d6(dw(e)))}}function _6(t,e,n,r,i,a){const o=e.eventCache;if(Ig(r,n)!=null)return e;{let s,u;if(Mt(n))if(Be(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=yl(e),c=l instanceof at?l:at.EMPTY_NODE,f=AE(r,c);s=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{const l=Mg(r,yl(e));s=t.filter.updateFullNode(e.eventCache.getNode(),l,a)}else{const l=St(n);if(l===".priority"){Be(Js(n)===1,"Can't have a priority with additional path components");const c=o.getNode();u=e.serverCache.getNode();const f=wI(r,n,c,u);f!=null?s=t.filter.updatePriority(c,f):s=o.getNode()}else{const c=rn(n);let f;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();const d=wI(r,n,o.getNode(),u);d!=null?f=o.getNode().getImmediateChild(l).updateChild(c,d):f=o.getNode().getImmediateChild(l)}else f=TE(r,l,e.serverCache);f!=null?s=t.filter.updateChild(o.getNode(),l,f,c,i,a):s=o.getNode()}}return qd(e,s,o.isFullyInitialized()||Mt(n),t.filter.filtersNodes())}}function kg(t,e,n,r,i,a,o,s){const u=e.serverCache;let l;const c=o?t.filter:t.filter.getIndexedFilter();if(Mt(n))l=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered()){const h=u.getNode().updateChild(n,r);l=c.updateFullNode(u.getNode(),h,null)}else{const h=St(n);if(!u.isCompleteForPath(n)&&Js(n)>1)return e;const p=rn(n),y=u.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=c.updatePriority(u.getNode(),y):l=c.updateChild(u.getNode(),h,y,p,w6,null)}const f=m6(e,l,u.isFullyInitialized()||Mt(n),c.filtersNodes()),d=new ME(i,f,a);return _6(t,f,n,i,d,s)}function mw(t,e,n,r,i,a,o){const s=e.eventCache;let u,l;const c=new ME(i,e,a);if(Mt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=qd(e,l,!0,t.filter.filtersNodes());else{const f=St(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),u=qd(e,l,s.isFullyInitialized(),s.isFiltered());else{const d=rn(n),h=s.getNode().getImmediateChild(f);let p;if(Mt(d))p=r;else{const m=c.getCompleteChild(f);m!=null?r6(d)===".priority"&&m.getChild(a6(d)).isEmpty()?p=m:p=m.updateChild(d,r):p=at.EMPTY_NODE}if(h.equals(p))u=e;else{const m=t.filter.updateChild(s.getNode(),f,p,d,c,o);u=qd(e,m,s.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function _I(t,e){return t.eventCache.isCompleteForChild(e)}function Tbe(t,e,n,r,i,a,o){let s=e;return r.foreach((u,l)=>{const c=Un(n,u);_I(e,St(c))&&(s=mw(t,s,c,l,i,a,o))}),r.foreach((u,l)=>{const c=Un(n,u);_I(e,St(c))||(s=mw(t,s,c,l,i,a,o))}),s}function EI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function vw(t,e,n,r,i,a,o,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,l;Mt(n)?l=r:l=new cn(null).setTree(n,r);const c=e.serverCache.getNode();return l.children.inorderTraversal((f,d)=>{if(c.hasChild(f)){const h=e.serverCache.getNode().getImmediateChild(f),p=EI(t,h,d);u=kg(t,u,new tn(f),p,i,a,o,s)}}),l.children.inorderTraversal((f,d)=>{const h=!e.serverCache.isCompleteForChild(f)&&d.value===null;if(!c.hasChild(f)&&!h){const p=e.serverCache.getNode().getImmediateChild(f),m=EI(t,p,d);u=kg(t,u,new tn(f),m,i,a,o,s)}}),u}function Mbe(t,e,n,r,i,a,o){if(Ig(i,n)!=null)return e;const s=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(Mt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return kg(t,e,n,u.getNode().getChild(n),i,a,s,o);if(Mt(n)){let l=new cn(null);return u.getNode().forEachChild(jc,(c,f)=>{l=l.set(new tn(c),f)}),vw(t,e,n,l,i,a,s,o)}else return e}else{let l=new cn(null);return r.foreach((c,f)=>{const d=Un(n,c);u.isCompleteForPath(d)&&(l=l.set(c,u.getNode().getChild(d)))}),vw(t,e,n,l,i,a,s,o)}}function Ibe(t,e,n,r,i){const a=e.serverCache,o=m6(e,a.getNode(),a.isFullyInitialized()||Mt(n),a.isFiltered());return _6(t,o,n,r,w6,i)}function kbe(t,e,n,r,i,a){let o;if(Ig(r,n)!=null)return e;{const s=new ME(r,e,i),u=e.eventCache.getNode();let l;if(Mt(n)||St(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=Mg(r,yl(e));else{const f=e.serverCache.getNode();Be(f instanceof at,"serverChildren would be complete if leaf node"),c=AE(r,f)}c=c,l=t.filter.updateFullNode(u,c,a)}else{const c=St(n);let f=TE(r,c,e.serverCache);f==null&&e.serverCache.isCompleteForChild(c)&&(f=u.getImmediateChild(c)),f!=null?l=t.filter.updateChild(u,c,f,rn(n),s,a):e.eventCache.getNode().hasChild(c)?l=t.filter.updateChild(u,c,at.EMPTY_NODE,rn(n),s,a):l=u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Mg(r,yl(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,a)))}return o=e.serverCache.isFullyInitialized()||Ig(r,$t())!=null,qd(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rbe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new EE(r.getIndex()),a=Zxe(r);this.processor_=Nbe(a);const o=n.serverCache,s=n.eventCache,u=i.updateFullNode(at.EMPTY_NODE,o.getNode(),null),l=a.updateFullNode(at.EMPTY_NODE,s.getNode(),null),c=new gl(u,o.isFullyInitialized(),i.filtersNodes()),f=new gl(l,s.isFullyInitialized(),a.filtersNodes());this.viewCache_=dy(f,c),this.eventGenerator_=new abe(this.query_)}get query(){return this.query_}}function Fbe(t){return t.viewCache_.serverCache.getNode()}function Pbe(t,e){const n=yl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Mt(e)&&!n.getImmediateChild(St(e)).isEmpty())?n.getChild(e):null}function CI(t){return t.eventRegistrations_.length===0}function Obe(t,e){t.eventRegistrations_.push(e)}function NI(t,e,n){const r=[];if(n){Be(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(a=>{const o=a.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let a=0;a<t.eventRegistrations_.length;++a){const o=t.eventRegistrations_[a];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function SI(t,e,n,r){e.type===Ea.MERGE&&e.source.queryId!==null&&(Be(yl(t.viewCache_),"We should always have a full cache before handling merges"),Be(dw(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,a=Dbe(t.processor_,i,e,n,r);return Sbe(t.processor_,a.viewCache),Be(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,E6(t,a.changes,a.viewCache.eventCache.getNode(),null)}function Bbe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(An,(a,o)=>{r.push(mf(a,o))}),n.isFullyInitialized()&&r.push(d6(n.getNode())),E6(t,r,n.getNode(),e)}function E6(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return obe(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rg;class Lbe{constructor(){this.views=new Map}}function jbe(t){Be(!Rg,"__referenceConstructor has already been defined"),Rg=t}function $be(){return Be(Rg,"Reference.ts has not been loaded"),Rg}function zbe(t){return t.views.size===0}function IE(t,e,n,r){const i=e.source.queryId;if(i!==null){const a=t.views.get(i);return Be(a!=null,"SyncTree gave us an op for an invalid query."),SI(a,e,n,r)}else{let a=[];for(const o of t.views.values())a=a.concat(SI(o,e,n,r));return a}}function Ube(t,e,n,r,i){const a=e._queryIdentifier,o=t.views.get(a);if(!o){let s=Mg(n,i?r:null),u=!1;s?u=!0:r instanceof at?(s=AE(n,r),u=!1):(s=at.EMPTY_NODE,u=!1);const l=dy(new gl(s,u,!1),new gl(r,i,!1));return new Rbe(e,l)}return o}function Vbe(t,e,n,r,i,a){const o=Ube(t,e,r,i,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Obe(o,n),Bbe(o,n)}function Wbe(t,e,n,r){const i=e._queryIdentifier,a=[];let o=[];const s=eu(t);if(i==="default")for(const[u,l]of t.views.entries())o=o.concat(NI(l,n,r)),CI(l)&&(t.views.delete(u),l.query._queryParams.loadsAllData()||a.push(l.query));else{const u=t.views.get(i);u&&(o=o.concat(NI(u,n,r)),CI(u)&&(t.views.delete(i),u.query._queryParams.loadsAllData()||a.push(u.query)))}return s&&!eu(t)&&a.push(new($be())(e._repo,e._path)),{removed:a,events:o}}function C6(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function $c(t,e){let n=null;for(const r of t.views.values())n=n||Pbe(r,e);return n}function N6(t,e){if(e._queryParams.loadsAllData())return hy(t);{const r=e._queryIdentifier;return t.views.get(r)}}function S6(t,e){return N6(t,e)!=null}function eu(t){return hy(t)!=null}function hy(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg;function qbe(t){Be(!Fg,"__referenceConstructor has already been defined"),Fg=t}function Hbe(){return Be(Fg,"Reference.ts has not been loaded"),Fg}let Gbe=1;class DI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cn(null),this.pendingWriteTree_=wbe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function D6(t,e,n,r,i){return cbe(t.pendingWriteTree_,e,n,r,i),i?Np(t,new vl(p6(),e,n)):[]}function Gu(t,e,n=!1){const r=fbe(t.pendingWriteTree_,e);if(dbe(t.pendingWriteTree_,e)){let a=new cn(null);return r.snap!=null?a=a.set($t(),!0):bi(r.children,o=>{a=a.set(new tn(o),!0)}),Np(t,new Tg(r.path,a,n))}else return[]}function py(t,e,n){return Np(t,new vl(NE(),e,n))}function Kbe(t,e,n){const r=cn.fromObject(n);return Np(t,new Lh(NE(),e,r))}function Ybe(t,e){return Np(t,new Bh(NE(),e))}function Xbe(t,e,n){const r=RE(t,n);if(r){const i=FE(r),a=i.path,o=i.queryId,s=li(a,e),u=new Bh(SE(o),s);return PE(t,a,u)}else return[]}function gw(t,e,n,r,i=!1){const a=e._path,o=t.syncPointTree_.get(a);let s=[];if(o&&(e._queryIdentifier==="default"||S6(o,e))){const u=Wbe(o,e,n,r);zbe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const l=u.removed;if(s=u.events,!i){const c=l.findIndex(d=>d._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(a,(d,h)=>eu(h));if(c&&!f){const d=t.syncPointTree_.subtree(a);if(!d.isEmpty()){const h=Jbe(d);for(let p=0;p<h.length;++p){const m=h[p],y=m.query,v=M6(t,m);t.listenProvider_.startListening(Gd(y),Pg(t,y),v.hashFn,v.onComplete)}}}!f&&l.length>0&&!r&&(c?t.listenProvider_.stopListening(Gd(e),null):l.forEach(d=>{const h=t.queryToTagMap.get(my(d));t.listenProvider_.stopListening(Gd(d),h)}))}ewe(t,l)}return s}function Qbe(t,e,n,r){const i=RE(t,r);if(i!=null){const a=FE(i),o=a.path,s=a.queryId,u=li(o,e),l=new vl(SE(s),u,n);return PE(t,o,l)}else return[]}function Zbe(t,e,n,r){const i=RE(t,r);if(i){const a=FE(i),o=a.path,s=a.queryId,u=li(o,e),l=cn.fromObject(n),c=new Lh(SE(s),u,l);return PE(t,o,c)}else return[]}function AI(t,e,n,r=!1){const i=e._path;let a=null,o=!1;t.syncPointTree_.foreachOnPath(i,(d,h)=>{const p=li(d,i);a=a||$c(h,p),o=o||eu(h)});let s=t.syncPointTree_.get(i);s?(o=o||eu(s),a=a||$c(s,$t())):(s=new Lbe,t.syncPointTree_=t.syncPointTree_.set(i,s));let u;a!=null?u=!0:(u=!1,a=at.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{const m=$c(p,$t());m&&(a=a.updateImmediateChild(h,m))}));const l=S6(s,e);if(!l&&!e._queryParams.loadsAllData()){const d=my(e);Be(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const h=twe();t.queryToTagMap.set(d,h),t.tagToQueryMap.set(h,d)}const c=DE(t.pendingWriteTree_,i);let f=Vbe(s,e,n,c,a,u);if(!l&&!o&&!r){const d=N6(s,e);f=f.concat(nwe(t,e,d))}return f}function kE(t,e,n){const i=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(o,s)=>{const u=li(o,e),l=$c(s,u);if(l)return l});return y6(i,e,a,n,!0)}function Np(t,e){return A6(e,t.syncPointTree_,null,DE(t.pendingWriteTree_,$t()))}function A6(t,e,n,r){if(Mt(t.path))return T6(t,e,n,r);{const i=e.get($t());n==null&&i!=null&&(n=$c(i,$t()));let a=[];const o=St(t.path),s=t.operationForChild(o),u=e.children.get(o);if(u&&s){const l=n?n.getImmediateChild(o):null,c=x6(r,o);a=a.concat(A6(s,u,l,c))}return i&&(a=a.concat(IE(i,t,r,n))),a}}function T6(t,e,n,r){const i=e.get($t());n==null&&i!=null&&(n=$c(i,$t()));let a=[];return e.children.inorderTraversal((o,s)=>{const u=n?n.getImmediateChild(o):null,l=x6(r,o),c=t.operationForChild(o);c&&(a=a.concat(T6(c,s,u,l)))}),i&&(a=a.concat(IE(i,t,r,n))),a}function M6(t,e){const n=e.query,r=Pg(t,n);return{hashFn:()=>(Fbe(e)||at.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Xbe(t,n._path,r):Ybe(t,n._path);{const a=Q1e(i,n);return gw(t,n,null,a)}}}}function Pg(t,e){const n=my(e);return t.queryToTagMap.get(n)}function my(t){return t._path.toString()+"$"+t._queryIdentifier}function RE(t,e){return t.tagToQueryMap.get(e)}function FE(t){const e=t.indexOf("$");return Be(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new tn(t.substr(0,e))}}function PE(t,e,n){const r=t.syncPointTree_.get(e);Be(r,"Missing sync point for query tag that we're tracking");const i=DE(t.pendingWriteTree_,e);return IE(r,n,i,null)}function Jbe(t){return t.fold((e,n,r)=>{if(n&&eu(n))return[hy(n)];{let i=[];return n&&(i=C6(n)),bi(r,(a,o)=>{i=i.concat(o)}),i}})}function Gd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Hbe())(t._repo,t._path):t}function ewe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=my(r),a=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(a)}}}function twe(){return Gbe++}function nwe(t,e,n){const r=e._path,i=Pg(t,e),a=M6(t,n),o=t.listenProvider_.startListening(Gd(e),i,a.hashFn,a.onComplete),s=t.syncPointTree_.subtree(r);if(i)Be(!eu(s.value),"If we're adding a query, it shouldn't be shadowed");else{const u=s.fold((l,c,f)=>{if(!Mt(l)&&c&&eu(c))return[hy(c).query];{let d=[];return c&&(d=d.concat(C6(c).map(h=>h.query))),bi(f,(h,p)=>{d=d.concat(p)}),d}});for(let l=0;l<u.length;++l){const c=u[l];t.listenProvider_.stopListening(Gd(c),Pg(t,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new OE(n)}node(){return this.node_}}class BE{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Un(this.path_,e);return new BE(this.syncTree_,n)}node(){return kE(this.syncTree_,this.path_)}}const rwe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},TI=function(t,e,n){if(!t||typeof t!="object")return t;if(Be(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return iwe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return awe(t[".sv"],e);Be(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},iwe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Be(!1,"Unexpected server value: "+t)}},awe=function(t,e,n){t.hasOwnProperty("increment")||Be(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Be(!1,"Unexpected increment value: "+r);const i=e.node();if(Be(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},owe=function(t,e,n,r){return LE(e,new BE(n,t),r)},I6=function(t,e,n){return LE(t,new OE(e),n)};function LE(t,e,n){const r=t.getPriority().val(),i=TI(r,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const o=t,s=TI(o.getValue(),e,n);return s!==o.getValue()||i!==o.getPriority().val()?new tr(s,pr(i)):t}else{const o=t;return a=o,i!==o.getPriority().val()&&(a=a.updatePriority(new tr(i))),o.forEachChild(An,(s,u)=>{const l=LE(u,e.getImmediateChild(s),n);l!==u&&(a=a.updateImmediateChild(s,l))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function $E(t,e){let n=e instanceof tn?e:new tn(e),r=t,i=St(n);for(;i!==null;){const a=df(r.node.children,i)||{children:{},childCount:0};r=new jE(i,r,a),n=rn(n),i=St(n)}return r}function Gf(t){return t.node.value}function k6(t,e){t.node.value=e,yw(t)}function R6(t){return t.node.childCount>0}function swe(t){return Gf(t)===void 0&&!R6(t)}function vy(t,e){bi(t.node.children,(n,r)=>{e(new jE(n,t,r))})}function F6(t,e,n,r){n&&!r&&e(t),vy(t,i=>{F6(i,e,!0,r)}),n&&r&&e(t)}function uwe(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Sp(t){return new tn(t.parent===null?t.name:Sp(t.parent)+"/"+t.name)}function yw(t){t.parent!==null&&lwe(t.parent,t.name,t)}function lwe(t,e,n){const r=swe(n),i=ts(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,yw(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,yw(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cwe=/[\[\].#$\/\u0000-\u001F\u007F]/,fwe=/[\[\].#$\u0000-\u001F\u007F]/,B1=10*1024*1024,P6=function(t){return typeof t=="string"&&t.length!==0&&!cwe.test(t)},O6=function(t){return typeof t=="string"&&t.length!==0&&!fwe.test(t)},dwe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),O6(t)},B6=function(t,e,n,r){r&&e===void 0||zE(tE(t,"value"),e,n)},zE=function(t,e,n){const r=n instanceof tn?new Mxe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ru(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ru(r)+" with contents = "+e.toString());if(O8(e))throw new Error(t+"contains "+e.toString()+" "+Ru(r));if(typeof e=="string"&&e.length>B1/3&&sy(e)>B1)throw new Error(t+"contains a string greater than "+B1+" utf8 bytes "+Ru(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,a=!1;if(bi(e,(o,s)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(a=!0,!P6(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ru(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Ixe(r,o),zE(t,s,r),kxe(r)}),i&&a)throw new Error(t+' contains ".value" child '+Ru(r)+" in addition to actual children.")}},L6=function(t,e,n,r){if(!O6(n))throw new Error(tE(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},hwe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),L6(t,e,n)},j6=function(t,e){if(St(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},pwe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!P6(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!dwe(n))throw new Error(tE(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mwe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function UE(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();n!==null&&!bE(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(i)}n&&t.eventLists_.push(n)}function $6(t,e,n){UE(t,n),z6(t,r=>bE(r,e))}function Yo(t,e,n){UE(t,n),z6(t,r=>_a(r,e)||_a(e,r))}function z6(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const a=i.path;e(a)?(vwe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function vwe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Vd&&Mr("event: "+n.toString()),Hf(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gwe="repo_interrupt",ywe=25;class xwe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mwe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ag(),this.transactionQueueTree_=new jE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bwe(t,e,n){if(t.stats_=yE(t.repoInfo_),t.forceRestClient_||txe())t.server_=new Dg(t.repoInfo_,(r,i,a,o)=>{MI(t,r,i,a,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>II(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ir(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Oo(t.repoInfo_,e,(r,i,a,o)=>{MI(t,r,i,a,o)},r=>{II(t,r)},r=>{wwe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=oxe(t.repoInfo_,()=>new ibe(t.stats_,t.server_)),t.infoData_=new Jxe,t.infoSyncTree_=new DI({startListening:(r,i,a,o)=>{let s=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(s=py(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),s},stopListening:()=>{}}),WE(t,"connected",!1),t.serverSyncTree_=new DI({startListening:(r,i,a,o)=>(t.server_.listen(r,a,i,(s,u)=>{const l=o(s,u);Yo(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function U6(t){const n=t.infoData_.getNode(new tn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function VE(t){return rwe({timestamp:U6(t)})}function MI(t,e,n,r,i){t.dataUpdateCount++;const a=new tn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=vg(n,l=>pr(l));o=Zbe(t.serverSyncTree_,a,u,i)}else{const u=pr(n);o=Qbe(t.serverSyncTree_,a,u,i)}else if(r){const u=vg(n,l=>pr(l));o=Kbe(t.serverSyncTree_,a,u)}else{const u=pr(n);o=py(t.serverSyncTree_,a,u)}let s=a;o.length>0&&(s=gy(t,a)),Yo(t.eventQueue_,s,o)}function II(t,e){WE(t,"connected",e),e===!1&&Ewe(t)}function wwe(t,e){bi(e,(n,r)=>{WE(t,n,r)})}function WE(t,e,n){const r=new tn("/.info/"+e),i=pr(n);t.infoData_.updateSnapshot(r,i);const a=py(t.infoSyncTree_,r,i);Yo(t.eventQueue_,r,a)}function V6(t){return t.nextWriteId_++}function _we(t,e,n,r,i){qE(t,"set",{path:e.toString(),value:n,priority:r});const a=VE(t),o=pr(n,r),s=kE(t.serverSyncTree_,e),u=I6(o,s,a),l=V6(t),c=D6(t.serverSyncTree_,e,u,l,!0);UE(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(d,h)=>{const p=d==="ok";p||gi("set at "+e+" failed: "+d);const m=Gu(t.serverSyncTree_,l,!p);Yo(t.eventQueue_,e,m),Dwe(t,i,d,h)});const f=K6(t,e);gy(t,f),Yo(t.eventQueue_,f,[])}function Ewe(t){qE(t,"onDisconnectEvents");const e=VE(t),n=Ag();fw(t.onDisconnect_,$t(),(i,a)=>{const o=owe(i,a,t.serverSyncTree_,e);h6(n,i,o)});let r=[];fw(n,$t(),(i,a)=>{r=r.concat(py(t.serverSyncTree_,i,a));const o=K6(t,i);gy(t,o)}),t.onDisconnect_=Ag(),Yo(t.eventQueue_,$t(),r)}function Cwe(t,e,n){let r;St(e._path)===".info"?r=AI(t.infoSyncTree_,e,n):r=AI(t.serverSyncTree_,e,n),$6(t.eventQueue_,e._path,r)}function Nwe(t,e,n){let r;St(e._path)===".info"?r=gw(t.infoSyncTree_,e,n):r=gw(t.serverSyncTree_,e,n),$6(t.eventQueue_,e._path,r)}function Swe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(gwe)}function qE(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Mr(n,...e)}function Dwe(t,e,n,r){e&&Hf(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let a=i;r&&(a+=": "+r);const o=new Error(a);o.code=i,e(o)}})}function W6(t,e,n){return kE(t.serverSyncTree_,e,n)||at.EMPTY_NODE}function HE(t,e=t.transactionQueueTree_){if(e||yy(t,e),Gf(e)){const n=H6(t,e);Be(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Awe(t,Sp(e),n)}else R6(e)&&vy(e,n=>{HE(t,n)})}function Awe(t,e,n){const r=n.map(l=>l.currentWriteId),i=W6(t,e,r);let a=i;const o=i.hash();for(let l=0;l<n.length;l++){const c=n[l];Be(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const f=li(e,c.path);a=a.updateChild(f,c.currentOutputSnapshotRaw)}const s=a.val(!0),u=e;t.server_.put(u.toString(),s,l=>{qE(t,"transaction put response",{path:u.toString(),status:l});let c=[];if(l==="ok"){const f=[];for(let d=0;d<n.length;d++)n[d].status=2,c=c.concat(Gu(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&f.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();yy(t,$E(t.transactionQueueTree_,e)),HE(t,t.transactionQueueTree_),Yo(t.eventQueue_,e,c);for(let d=0;d<f.length;d++)Hf(f[d])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{gi("transaction at "+u.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}gy(t,e)}},o)}function gy(t,e){const n=q6(t,e),r=Sp(n),i=H6(t,n);return Twe(t,i,r),r}function Twe(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(s=>s.status===0).map(s=>s.currentWriteId);for(let s=0;s<e.length;s++){const u=e[s],l=li(n,u.path);let c=!1,f;if(Be(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)c=!0,f=u.abortReason,i=i.concat(Gu(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=ywe)c=!0,f="maxretry",i=i.concat(Gu(t.serverSyncTree_,u.currentWriteId,!0));else{const d=W6(t,u.path,o);u.currentInputSnapshot=d;const h=e[s].update(d.val());if(h!==void 0){zE("transaction failed: Data returned ",h,u.path);let p=pr(h);typeof h=="object"&&h!=null&&ts(h,".priority")||(p=p.updatePriority(d.getPriority()));const y=u.currentWriteId,v=VE(t),x=I6(p,d,v);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=x,u.currentWriteId=V6(t),o.splice(o.indexOf(y),1),i=i.concat(D6(t.serverSyncTree_,u.path,x,u.currentWriteId,u.applyLocally)),i=i.concat(Gu(t.serverSyncTree_,y,!0))}else c=!0,f="nodata",i=i.concat(Gu(t.serverSyncTree_,u.currentWriteId,!0))}Yo(t.eventQueue_,n,i),i=[],c&&(e[s].status=2,function(d){setTimeout(d,Math.floor(0))}(e[s].unwatcher),e[s].onComplete&&(f==="nodata"?r.push(()=>e[s].onComplete(null,!1,e[s].currentInputSnapshot)):r.push(()=>e[s].onComplete(new Error(f),!1,null))))}yy(t,t.transactionQueueTree_);for(let s=0;s<r.length;s++)Hf(r[s]);HE(t,t.transactionQueueTree_)}function q6(t,e){let n,r=t.transactionQueueTree_;for(n=St(e);n!==null&&Gf(r)===void 0;)r=$E(r,n),e=rn(e),n=St(e);return r}function H6(t,e){const n=[];return G6(t,e,n),n.sort((r,i)=>r.order-i.order),n}function G6(t,e,n){const r=Gf(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);vy(e,i=>{G6(t,i,n)})}function yy(t,e){const n=Gf(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,k6(e,n.length>0?n:void 0)}vy(e,r=>{yy(t,r)})}function K6(t,e){const n=Sp(q6(t,e)),r=$E(t.transactionQueueTree_,e);return uwe(r,i=>{L1(t,i)}),L1(t,r),F6(r,i=>{L1(t,i)}),n}function L1(t,e){const n=Gf(e);if(n){const r=[];let i=[],a=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Be(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Be(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Gu(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));a===-1?k6(e,void 0):n.length=a+1,Yo(t.eventQueue_,Sp(e),i);for(let o=0;o<r.length;o++)Hf(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mwe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Iwe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gi(`Invalid query segment '${n}' in query '${t}'`)}return e}const kI=function(t,e){const n=kwe(t),r=n.namespace;n.domain==="firebase.com"&&Ko(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ko("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||H1e();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new K8(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new tn(n.pathString)}},kwe=function(t){let e="",n="",r="",i="",a="",o=!0,s="https",u=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(s=t.substring(0,l-1),t=t.substring(l+2));let c=t.indexOf("/");c===-1&&(c=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(c,f)),c<f&&(i=Mwe(t.substring(c,f)));const d=Iwe(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=s==="https"||s==="wss",u=parseInt(e.substring(l+1),10)):l=e.length;const h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),a=r}"ns"in d&&(a=d.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Rwe=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const a=new Array(8);for(i=7;i>=0;i--)a[i]=RI.charAt(n%64),n=Math.floor(n/64);Be(n===0,"Cannot push at time == 0");let o=a.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=RI.charAt(e[i]);return Be(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fwe{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ir(this.snapshot.exportVal())}}class Pwe{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Owe{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Be(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Mt(this._path)?null:r6(this._path)}get ref(){return new _u(this._repo,this._path)}get _queryIdentifier(){const e=vI(this._queryParams),n=vE(e);return n==="{}"?"default":n}get _queryObject(){return vI(this._queryParams)}isEqual(e){if(e=ni(e),!(e instanceof GE))return!1;const n=this._repo===e._repo,r=bE(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Txe(this._path)}}class _u extends GE{constructor(e,n){super(e,n,new CE,!1)}get parent(){const e=a6(this._path);return e===null?null:new _u(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Og{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new tn(e),r=jh(this.ref,e);return new Og(this._node.getChild(n),r,An)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Og(i,jh(this.ref,r),An)))}hasChild(e){const n=new tn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Y6(t,e){return t=ni(t),t._checkNotDeleted("ref"),e!==void 0?jh(t._root,e):t._root}function jh(t,e){return t=ni(t),St(t._path)===null?hwe("child","path",e):L6("child","path",e),new _u(t._repo,Un(t._path,e))}function Bwe(t,e){t=ni(t),j6("push",t._path),B6("push",e,t._path,!0);const n=U6(t._repo),r=Rwe(n),i=jh(t,r),a=jh(t,r);let o;return e!=null?o=Lwe(a,e).then(()=>a):o=Promise.resolve(a),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Lwe(t,e){t=ni(t),j6("set",t._path),B6("set",e,t._path,!1);const n=new oy;return _we(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class KE{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Fwe("value",this,new Og(e.snapshotNode,new _u(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Pwe(this,e,n):null}matches(e){return e instanceof KE?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function jwe(t,e,n,r,i){const a=new Owe(n,void 0),o=new KE(a);return Cwe(t._repo,t,o),()=>Nwe(t._repo,t,o)}function $we(t,e,n,r){return jwe(t,"value",e)}jbe(_u);qbe(_u);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zwe="FIREBASE_DATABASE_EMULATOR_HOST",xw={};let Uwe=!1;function Vwe(t,e,n,r){t.repoInfo_=new K8(e,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function Wwe(t,e,n,r,i){let a=r||t.options.databaseURL;a===void 0&&(t.options.projectId||Ko("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mr("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=kI(a,i),s=o.repoInfo,u;typeof process<"u"&&ZM&&(u=ZM[zwe]),u?(a=`http://${u}?ns=${s.namespace}`,o=kI(a,i),s=o.repoInfo):o.repoInfo.secure;const l=new rxe(t.name,t.options,e);pwe("Invalid Firebase Database URL",o),Mt(o.path)||Ko("Database URL must point to the root of a Firebase Database (not including a child path).");const c=Hwe(s,t,l,new nxe(t,n));return new Gwe(c,t)}function qwe(t,e){const n=xw[e];(!n||n[t.key]!==t)&&Ko(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Swe(t),delete n[t.key]}function Hwe(t,e,n,r){let i=xw[e.name];i||(i={},xw[e.name]=i);let a=i[t.toURLString()];return a&&Ko("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new xwe(t,Uwe,n,r),i[t.toURLString()]=a,a}class Gwe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(bwe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _u(this._repo,$t())),this._rootInternal}_delete(){return this._rootInternal!==null&&(qwe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ko("Cannot call "+e+" on a deleted database.")}}function Kwe(t=Q5(),e){const n=iE(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Qve("database");r&&Ywe(n,...r)}return n}function Ywe(t,e,n,r={}){t=ni(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,a=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&fl(r,a.repoInfo_.emulatorOptions))return;Ko("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&Ko('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new cv(cv.OWNER);else if(r.mockUserToken){const s=typeof r.mockUserToken=="string"?r.mockUserToken:Zve(r.mockUserToken,t.app.options.projectId);o=new cv(s)}Vwe(a,i,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xwe(t){$1e(Vf),hf(new dl("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return Wwe(r,i,a,n)},"PUBLIC").setMultipleInstances(!0)),Us(JM,eI,t),Us(JM,eI,"esm2017")}Oo.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Oo.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Xwe();const Qwe={apiKey:"AIzaSyB5bMKw1y39IEQ_5SbI8nZu10OuHzb8aCc",authDomain:"excel-a3fc8.firebaseapp.com",databaseURL:"https://excel-a3fc8-default-rtdb.firebaseio.com",projectId:"excel-a3fc8",storageBucket:"excel-a3fc8.firebasestorage.app",messagingSenderId:"940123719094",appId:"1:940123719094:web:b971300ddbf21673c22d17",measurementId:"G-M6MR18GFLG"},X6=X5(Qwe),md=O1e(X6),Q6=Kwe(X6),Z6=W.createContext(null);function Kf(){const t=W.useContext(Z6);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function Zwe({children:t}){const[e,n]=W.useState(null),[r,i]=W.useState(!0),a=new Eo;W.useEffect(()=>Cye(md,d=>{n(d),i(!1)}),[]);async function o(f,d){await bye(md,f,d)}async function s(f,d){await wye(md,f,d)}async function u(){await qye(md,a)}async function l(){await Nye(md)}const c={currentUser:e,signup:o,login:s,loginWithGoogle:u,logout:l,loading:r};return S.jsx(Z6.Provider,{value:c,children:!r&&t})}function Jwe(){const{currentUser:t}=Kf(),[e,n]=W.useState(""),[r,i]=W.useState([]),[a,o]=W.useState(!0),s=W.useMemo(()=>["All Categories",...Array.from(new Set(C1.map(c=>c.category)))],[]);W.useEffect(()=>{(async()=>{if(!t){o(!1);return}try{}catch(f){console.error("Error fetching results:",f)}finally{o(!1)}})()},[t]),W.useEffect(()=>{if(!e)return;i(e==="All Categories"?[...C1].sort(()=>.5-Math.random()).slice(0,10):C1.filter(f=>f.category===e))},[e]);const u=async(c,f)=>{if(!t){alert("Please log in to save your results");return}try{const d=Y6(Q6,`quiz-results/${t.uid}`);await Bwe(d,{category:e,score:c,timeTaken:f,timestamp:Date.now(),totalQuestions:r.length})}catch(d){console.error("Error saving quiz results:",d),alert("Failed to save your results. Please try again.")}},l=()=>{n("")};return a?S.jsx("div",{className:"flex justify-center items-center min-h-screen",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),S.jsx("p",{className:"text-gray-600",children:"Loading your quiz data..."})]})}):t?S.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[S.jsxs("div",{className:"flex justify-between items-center mb-10",children:[S.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Test Your Knowledge"}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(Ai,{to:"/results",className:"text-blue-600 hover:text-blue-800 font-medium",children:"View My Results"}),S.jsxs("p",{className:"text-sm text-gray-500",children:["Logged in as: ",S.jsx("span",{className:"font-semibold",children:t.email})]})]})]}),e?S.jsxs("div",{children:[S.jsxs("button",{onClick:l,className:"mb-4 inline-flex items-center text-blue-600 hover:text-blue-800 font-medium",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Categories"]}),S.jsx(zve,{questions:r,category:e,onComplete:u,isExam:!0})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mb-6",children:S.jsx("p",{className:"text-lg text-blue-700 font-medium",children:"All quizzes include a 30-minute timer"})}),S.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map(c=>S.jsxs("button",{onClick:()=>n(c),className:"bg-white border border-blue-100 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all",children:[S.jsx("h3",{className:"text-xl font-semibold text-blue-700 mb-1",children:c}),S.jsx("p",{className:"text-gray-600 text-sm",children:c==="All Categories"?"Comprehensive timed exam":`Focused exam on ${c}`})]},c))})]})]}):S.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:[S.jsx("h1",{className:"text-5xl font-bold mb-6 text-blue-700",children:"Test Your Knowledge"}),S.jsx("p",{className:"text-lg mb-6 text-gray-600",children:"Log in to take quizzes and track your progress!"}),S.jsxs("div",{className:"flex justify-center gap-4",children:[S.jsx(Ai,{to:"/login",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Login"}),S.jsx(Ai,{to:"/signup",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Sign Up"})]})]})}function e2e(){const[t,e]=W.useState(""),[n,r]=W.useState(""),[i,a]=W.useState(""),[o,s]=W.useState(!1),{login:u,loginWithGoogle:l}=Kf(),c=Nl();async function f(h){h.preventDefault();try{a(""),s(!0),await u(t,n),c("/testing")}catch{a("Failed to log in. Please check your credentials.")}finally{s(!1)}}async function d(){try{a(""),s(!0),await l(),c("/testing")}catch{a("Failed to sign in with Google. Please try again.")}finally{s(!1)}}return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"max-w-md w-full space-y-8",children:[S.jsx("div",{children:S.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})}),S.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[i&&S.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:S.jsx("span",{className:"block sm:inline",children:i})}),S.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),S.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:t,onChange:h=>e(h.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),S.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:h=>r(h.target.value)})]})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o?"Signing in...":"Sign in"}),S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-300"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"Or continue with"})})]}),S.jsxs("button",{type:"button",onClick:d,disabled:o,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[S.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[S.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),S.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),S.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),S.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]})]})]}),S.jsx("div",{className:"text-center",children:S.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",S.jsx(Ai,{to:"/signup",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up"})]})})]})})}function t2e(){const[t,e]=W.useState(""),[n,r]=W.useState(""),[i,a]=W.useState(""),[o,s]=W.useState(""),[u,l]=W.useState(!1),{signup:c}=Kf(),f=Nl();async function d(h){if(h.preventDefault(),n!==i)return s("Passwords do not match");try{s(""),l(!0),await c(t,n),f("/testing")}catch{s("Failed to create an account. Please try again.")}finally{l(!1)}}return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"max-w-md w-full space-y-8",children:[S.jsx("div",{children:S.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"})}),S.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[o&&S.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:S.jsx("span",{className:"block sm:inline",children:o})}),S.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),S.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:t,onChange:h=>e(h.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),S.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:h=>r(h.target.value)})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),S.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",value:i,onChange:h=>a(h.target.value)})]})]}),S.jsx("div",{children:S.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:u?"Creating account...":"Sign up"})})]}),S.jsx("div",{className:"text-center",children:S.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",S.jsx(Ai,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})]})})]})})}function n2e(){const{currentUser:t}=Kf(),[e,n]=W.useState([]),[r,i]=W.useState(!0),[a,o]=W.useState("all");W.useEffect(()=>{if(!t){i(!1);return}const f=Y6(Q6,`quiz-results/${t.uid}`),d=$we(f,h=>{if(h.exists()){const p=h.val(),m=Object.keys(p).map(y=>({id:y,...p[y]}));m.sort((y,v)=>v.timestamp-y.timestamp),n(m)}else n([]);i(!1)});return()=>{d()}},[t]);const s=a==="all"?e:e.filter(f=>f.category===a),u=["all",...new Set(e.map(f=>f.category))],l=f=>new Date(f).toLocaleString(),c=f=>{const d=Math.floor(f/60),h=f%60;return`${d}:${h<10?"0":""}${h}`};return r?S.jsx("div",{className:"flex justify-center items-center min-h-screen",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),S.jsx("p",{className:"text-gray-600",children:"Loading your results..."})]})}):t?S.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"My Quiz Results"}),S.jsx(Ai,{to:"/testing",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:"Take Another Quiz"})]}),e.length===0?S.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-lg",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),S.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"No Quiz Results Yet"}),S.jsx("p",{className:"text-gray-600 mb-6",children:"Take your first quiz to start tracking your progress!"}),S.jsx(Ai,{to:"/testing",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Start a Quiz"})]}):S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[S.jsx("label",{htmlFor:"filter",className:"font-medium text-gray-700",children:"Filter by Category:"}),S.jsx("select",{id:"filter",value:a,onChange:f=>o(f.target.value),className:"border border-gray-300 rounded-md px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-blue-500",children:u.map(f=>S.jsx("option",{value:f,children:f==="all"?"All Categories":f},f))})]}),S.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Taken"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(f=>S.jsxs("tr",{children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(f.timestamp)}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:f.category})}),S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[f.score," / ",f.totalQuestions]}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:S.jsx("div",{className:`h-2.5 rounded-full ${f.score/f.totalQuestions>=.7?"bg-green-600":f.score/f.totalQuestions>=.4?"bg-yellow-500":"bg-red-600"}`,style:{width:`${f.score/f.totalQuestions*100}%`}})}),S.jsxs("span",{className:"ml-3 text-sm font-medium",children:[Math.round(f.score/f.totalQuestions*100),"%"]})]})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c(f.timeTaken)})]},f.id))})]})})})]})]}):S.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:[S.jsx("h1",{className:"text-5xl font-bold mb-6 text-blue-700",children:"Quiz Results"}),S.jsx("p",{className:"text-lg mb-6 text-gray-600",children:"Please log in to view your quiz results."}),S.jsxs("div",{className:"flex justify-center gap-4",children:[S.jsx(Ai,{to:"/login",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Login"}),S.jsx(Ai,{to:"/signup",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold transition-all",children:"Sign Up"})]})]})}const r2e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20256%20256'%20id='boy'%3e%3cpath%20fill='%23da865c'%20d='M181.38%20254.46c0-22.62-21.43-46.47-49.58-51.23v-25.48h-20.26v25.48C83.39%20208%2062%20231.84%2062%20254.46c1.23-1.27%20120.65-1.27%20119.38%200Z'%3e%3c/path%3e%3cpath%20fill='%23c97c55'%20d='M111.54%20177.75h20.26V194h-20.26z'%3e%3c/path%3e%3cpath%20fill='%2339240f'%20d='M209%2075.3a19.6%2019.6%200%200%200-14.15-18.82%2019.61%2019.61%200%200%200-21.78-27.14%2019.6%2019.6%200%200%200-30.31-13.07%2021.35%2021.35%200%200%200-38.65%200%2019.6%2019.6%200%200%200-30.29%2013.07A19.38%2019.38%200%200%200%2070%2029a19.58%2019.58%200%200%200-17.95%2027.48%2019.59%2019.59%200%200%200-9.56%2031.44%2033%2033%200%201%200%2034.36-15.63%2019.21%2019.21%200%200%200-1.42-4.9%2019.62%2019.62%200%200%200%2013.88-15.64%2019.59%2019.59%200%200%200%2020.9-9.58%2021.33%2021.33%200%200%200%2026.49%200%2019.61%2019.61%200%200%200%2020.91%209.58%2019.59%2019.59%200%200%200%2013.87%2015.64%2019.63%2019.63%200%200%200-1.42%204.9%2033%2033%200%201%200%2034.36%2015.63A19.53%2019.53%200%200%200%20209%2075.3Z'%3e%3c/path%3e%3cpath%20fill='%23d7805d'%20d='M54%20123.9c3.29%204.2%202.66%2015.92%201.14%2017.12s-13-1-16.34-5.19A9.66%209.66%200%200%201%2054%20123.9zm138.4%200c-3.29%204.2-2.66%2015.92-1.14%2017.12s13.05-1%2016.34-5.19a9.66%209.66%200%200%200-15.2-11.93z'%3e%3c/path%3e%3cpath%20fill='%23da865c'%20d='M194.55%20126.45c5.16%2043.81-27.26%2062.05-71%2062.05s-78.15-18.24-72.95-62c5.35-43.81%2037.3-75.21%2072-75.21s66.6%2031.35%2071.95%2075.16Z'%3e%3c/path%3e%3cpath%20fill='none'%20stroke='%238b3607'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M129%20132.89a6.44%206.44%200%200%200-12.87%200'%3e%3c/path%3e%3cpath%20fill='none'%20stroke='%233d2513'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='5'%20d='M79.07%2094.68a8.94%208.94%200%200%201%206.4-3.32%209.09%209.09%200%200%201%203.51.49m76.19%202.83a8.94%208.94%200%200%200-6.4-3.32%209.09%209.09%200%200%200-3.51.49'%3e%3c/path%3e%3cellipse%20cx='74'%20cy='141.31'%20fill='%23d67656'%20rx='12.94'%20ry='8.91'%20transform='rotate(-2.04%2073.896%20141.214)'%3e%3c/ellipse%3e%3ccircle%20cx='67.3'%20cy='138.59'%20r='3.57'%20fill='%23d67656'%3e%3c/circle%3e%3cellipse%20cx='170.26'%20cy='141.31'%20fill='%23d67656'%20rx='8.91'%20ry='12.94'%20transform='rotate(-87.96%20170.26%20141.308)'%3e%3c/ellipse%3e%3ccircle%20cx='176.96'%20cy='138.59'%20r='3.57'%20fill='%23fff'%20opacity='.2'%3e%3c/circle%3e%3ccircle%20cx='67.3'%20cy='138.59'%20r='3.57'%20fill='%23fff'%20opacity='.2'%3e%3c/circle%3e%3cpath%20fill='%233d2513'%20d='M182.58%2067.34a15.41%2015.41%200%200%200-5.2.92%2019.88%2019.88%200%200%200-29.95-21.08%2025.88%2025.88%200%200%200-51.51%200%2019.89%2019.89%200%200%200-30%2020.82%2015.25%2015.25%200%200%200-4.56-.69%2015.45%2015.45%200%201%200%2015.45%2015.48v-.81a19.85%2019.85%200%200%200%2027.83-12.78%2025.86%2025.86%200%200%200%2034.06%200%2019.87%2019.87%200%200%200%2028.49%2012.48c0%20.37-.06.74-.06%201.11a15.45%2015.45%200%201%200%2015.45-15.45Z'%3e%3c/path%3e%3cpath%20fill='%23c0322c'%20d='M156.43%20242h22.86c-5.24-15.87-19.88-30.48-38.7-36.59a45.71%2045.71%200%200%201-37-.28c-19.22%205.92-34.22%2020.74-39.54%2036.87h22.86v11.69c20.41-.22%2049.12-.22%2069.52%200Z'%3e%3c/path%3e%3cpath%20fill='%23c7342e'%20d='M86.91%20249.88h69.52v-4H86.91Zm89.34-15H67.06c-.68%201.32-1.3%202.65-1.86%204h112.93c-.55-1.35-1.19-2.68-1.88-4Zm-7.57-11H74.63q-1.71%202-3.21%204h100.49c-1-1.37-2.09-2.7-3.23-4Zm-12.62-11H87.24a63.91%2063.91%200%200%200-5.4%204h79.62a65.56%2065.56%200%200%200-5.4-4Z'%3e%3c/path%3e%3cpath%20fill='%23ffe9e8'%20d='M119.64%20209.08c-.75%200-1.5-.11-2.23-.18h-.39c-.76-.09-1.51-.19-2.25-.31h-.08c-.76-.13-1.5-.27-2.23-.43h-.17c-.74-.17-1.45-.35-2.16-.54l-.23-.07c-.72-.2-1.42-.41-2.11-.65h-.05a36.83%2036.83%200%200%201-4-1.65h-.09c-1.45.45-2.88%201-4.29%201.51%205.8%204%2014%206.54%2023.09%206.54%208.8%200%2016.77-2.35%2022.53-6.16-1.42-.58-2.86-1.13-4.34-1.61-.63.29-1.28.57-2%20.83h-.07a40.87%2040.87%200%200%201-4.22%201.38q-1%20.27-2.13.51l-.26.05c-.72.15-1.44.28-2.18.4h-.06c-.7.11-1.42.2-2.15.28h-.32c-.71.08-1.43.13-2.16.17h-.43c-.75%200-1.5.06-2.26.06s-1.59%200-2.37-.06Z'%3e%3c/path%3e%3cpath%20fill='none'%20stroke='%233d2513'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M79.87%20119.21a6.65%206.65%200%200%201%2012.38-.37m63.38.37a6.64%206.64%200%200%201%2012.37-.37'%3e%3c/path%3e%3cpath%20fill='%238b3607'%20d='M122.5%20164c6.36%200%2011.76-3.46%2013.72-8.27a2.94%202.94%200%200%200-2.78-4h-21.88a2.94%202.94%200%200%200-2.78%204c1.96%204.81%207.36%208.27%2013.72%208.27Z'%3e%3c/path%3e%3c/svg%3e",J6=W.createContext({});function i2e(t){const e=W.useRef(null);return e.current===null&&(e.current=t()),e.current}const YE=W.createContext(null),eL=W.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function a2e(t=!0){const e=W.useContext(YE);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=W.useId();W.useEffect(()=>{t&&i(a)},[t]);const o=W.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const XE=typeof window<"u",o2e=XE?W.useLayoutEffect:W.useEffect,Ri=t=>t;let bw=Ri;function QE(t){let e;return()=>(e===void 0&&(e=t()),e)}const gf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Bo=t=>t*1e3,Lo=t=>t/1e3,s2e={skipAnimations:!1,useManualTiming:!1};function u2e(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function s(l){a.has(l)&&(u.schedule(l),t()),l(o)}const u={schedule:(l,c=!1,f=!1)=>{const h=f&&r?e:n;return c&&a.add(l),h.has(l)||h.add(l),l},cancel:l=>{n.delete(l),a.delete(l)},process:l=>{if(o=l,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(s),e.clear(),r=!1,i&&(i=!1,u.process(l))}};return u}const Tm=["read","resolveKeyframes","update","preRender","render","postRender"],l2e=40;function tL(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=Tm.reduce((v,x)=>(v[x]=u2e(a),v),{}),{read:s,resolveKeyframes:u,update:l,preRender:c,render:f,postRender:d}=o,h=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,l2e),1),i.timestamp=v,i.isProcessing=!0,s.process(i),u.process(i),l.process(i),c.process(i),f.process(i),d.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(h))},p=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:Tm.reduce((v,x)=>{const g=o[x];return v[x]=(b,w=!1,_=!1)=>(n||p(),g.schedule(b,w,_)),v},{}),cancel:v=>{for(let x=0;x<Tm.length;x++)o[Tm[x]].cancel(v)},state:i,steps:o}}const{schedule:dn,cancel:tu,state:cr,steps:j1}=tL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ri,!0),nL=W.createContext({strict:!1}),FI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yf={};for(const t in FI)yf[t]={isEnabled:e=>FI[t].some(n=>!!e[n])};function c2e(t){for(const e in t)yf[e]={...yf[e],...t[e]}}const f2e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||f2e.has(t)}let rL=t=>!Bg(t);function d2e(t){t&&(rL=e=>e.startsWith("on")?!Bg(e):t(e))}try{d2e(require("@emotion/is-prop-valid").default)}catch{}function h2e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(rL(i)||n===!0&&Bg(i)||!e&&!Bg(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function p2e(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const xy=W.createContext({});function $h(t){return typeof t=="string"||Array.isArray(t)}function by(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ZE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],JE=["initial",...ZE];function wy(t){return by(t.animate)||JE.some(e=>$h(t[e]))}function iL(t){return!!(wy(t)||t.variants)}function m2e(t,e){if(wy(t)){const{initial:n,animate:r}=t;return{initial:n===!1||$h(n)?n:void 0,animate:$h(r)?r:void 0}}return t.inherit!==!1?e:{}}function v2e(t){const{initial:e,animate:n}=m2e(t,W.useContext(xy));return W.useMemo(()=>({initial:e,animate:n}),[PI(e),PI(n)])}function PI(t){return Array.isArray(t)?t.join(" "):t}const g2e=Symbol.for("motionComponentSymbol");function wc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function y2e(t,e,n){return W.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):wc(n)&&(n.current=r))},[e])}const eC=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),x2e="framerAppearId",aL="data-"+eC(x2e),{schedule:tC,cancel:Tke}=tL(queueMicrotask,!1),oL=W.createContext({});function b2e(t,e,n,r,i){var a,o;const{visualElement:s}=W.useContext(xy),u=W.useContext(nL),l=W.useContext(YE),c=W.useContext(eL).reducedMotion,f=W.useRef(null);r=r||u.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=f.current,h=W.useContext(oL);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&w2e(f.current,n,i,h);const p=W.useRef(!1);W.useInsertionEffect(()=>{d&&p.current&&d.update(n,l)});const m=n[aL],y=W.useRef(!!m&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,m))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,m)));return o2e(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),tC.render(d.render),y.current&&d.animationState&&d.animationState.animateChanges())}),W.useEffect(()=>{d&&(!y.current&&d.animationState&&d.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,m)}),y.current=!1))}),d}function w2e(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:s,layoutScroll:u,layoutRoot:l}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:sL(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||s&&wc(s),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:l})}function sL(t){if(t)return t.options.allowProjection!==!1?t.projection:sL(t.parent)}function _2e({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var a,o;t&&c2e(t);function s(l,c){let f;const d={...W.useContext(eL),...l,layoutId:E2e(l)},{isStatic:h}=d,p=v2e(l),m=r(l,h);if(!h&&XE){C2e();const y=N2e(d);f=y.MeasureLayout,p.visualElement=b2e(i,m,d,e,y.ProjectionNode)}return S.jsxs(xy.Provider,{value:p,children:[f&&p.visualElement?S.jsx(f,{visualElement:p.visualElement,...d}):null,n(i,l,y2e(m,p.visualElement,c),m,h,p.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${(o=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&o!==void 0?o:""})`}`;const u=W.forwardRef(s);return u[g2e]=i,u}function E2e({layoutId:t}){const e=W.useContext(J6).id;return e&&t!==void 0?e+"-"+t:t}function C2e(t,e){W.useContext(nL).strict}function N2e(t){const{drag:e,layout:n}=yf;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const S2e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nC(t){return typeof t!="string"||t.includes("-")?!1:!!(S2e.indexOf(t)>-1||/[A-Z]/u.test(t))}function OI(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function rC(t,e,n,r){if(typeof e=="function"){const[i,a]=OI(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=OI(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const ww=t=>Array.isArray(t),D2e=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),A2e=t=>ww(t)?t[t.length-1]||0:t,Fr=t=>!!(t&&t.getVelocity);function fv(t){const e=Fr(t)?t.get():t;return D2e(e)?e.toValue():e}function T2e({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const o={latestValues:M2e(r,i,a,t),renderState:e()};return n&&(o.onMount=s=>n({props:r,current:s,...o}),o.onUpdate=s=>n(s)),o}const uL=t=>(e,n)=>{const r=W.useContext(xy),i=W.useContext(YE),a=()=>T2e(t,e,r,i);return n?a():i2e(a)};function M2e(t,e,n,r){const i={},a=r(t,{});for(const d in a)i[d]=fv(a[d]);let{initial:o,animate:s}=t;const u=wy(t),l=iL(t);e&&l&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),s===void 0&&(s=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?s:o;if(f&&typeof f!="boolean"&&!by(f)){const d=Array.isArray(f)?f:[f];for(let h=0;h<d.length;h++){const p=rC(t,d[h]);if(p){const{transitionEnd:m,transition:y,...v}=p;for(const x in v){let g=v[x];if(Array.isArray(g)){const b=c?g.length-1:0;g=g[b]}g!==null&&(i[x]=g)}for(const x in m)i[x]=m[x]}}}return i}const Yf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ll=new Set(Yf),lL=t=>e=>typeof e=="string"&&e.startsWith(t),cL=lL("--"),I2e=lL("var(--"),iC=t=>I2e(t)?k2e.test(t.split("/*")[0].trim()):!1,k2e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Xo=(t,e,n)=>n>e?e:n<t?t:n,Xf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},zh={...Xf,transform:t=>Xo(0,1,t)},Mm={...Xf,default:1},Dp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),hs=Dp("deg"),eo=Dp("%"),nt=Dp("px"),R2e=Dp("vh"),F2e=Dp("vw"),BI={...eo,parse:t=>eo.parse(t)/100,transform:t=>eo.transform(t*100)},P2e={borderWidth:nt,borderTopWidth:nt,borderRightWidth:nt,borderBottomWidth:nt,borderLeftWidth:nt,borderRadius:nt,radius:nt,borderTopLeftRadius:nt,borderTopRightRadius:nt,borderBottomRightRadius:nt,borderBottomLeftRadius:nt,width:nt,maxWidth:nt,height:nt,maxHeight:nt,top:nt,right:nt,bottom:nt,left:nt,padding:nt,paddingTop:nt,paddingRight:nt,paddingBottom:nt,paddingLeft:nt,margin:nt,marginTop:nt,marginRight:nt,marginBottom:nt,marginLeft:nt,backgroundPositionX:nt,backgroundPositionY:nt},O2e={rotate:hs,rotateX:hs,rotateY:hs,rotateZ:hs,scale:Mm,scaleX:Mm,scaleY:Mm,scaleZ:Mm,skew:hs,skewX:hs,skewY:hs,distance:nt,translateX:nt,translateY:nt,translateZ:nt,x:nt,y:nt,z:nt,perspective:nt,transformPerspective:nt,opacity:zh,originX:BI,originY:BI,originZ:nt},LI={...Xf,transform:Math.round},aC={...P2e,...O2e,zIndex:LI,size:nt,fillOpacity:zh,strokeOpacity:zh,numOctaves:LI},B2e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},L2e=Yf.length;function j2e(t,e,n){let r="",i=!0;for(let a=0;a<L2e;a++){const o=Yf[a],s=t[o];if(s===void 0)continue;let u=!0;if(typeof s=="number"?u=s===(o.startsWith("scale")?1:0):u=parseFloat(s)===0,!u||n){const l=fL(s,aC[o]);if(!u){i=!1;const c=B2e[o]||o;r+=`${c}(${l}) `}n&&(e[o]=l)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function oC(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,s=!1;for(const u in e){const l=e[u];if(Ll.has(u)){o=!0;continue}else if(cL(u)){i[u]=l;continue}else{const c=fL(l,aC[u]);u.startsWith("origin")?(s=!0,a[u]=c):r[u]=c}}if(e.transform||(o||n?r.transform=j2e(e,t.transform,n):r.transform&&(r.transform="none")),s){const{originX:u="50%",originY:l="50%",originZ:c=0}=a;r.transformOrigin=`${u} ${l} ${c}`}}const $2e={offset:"stroke-dashoffset",array:"stroke-dasharray"},z2e={offset:"strokeDashoffset",array:"strokeDasharray"};function U2e(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?$2e:z2e;t[a.offset]=nt.transform(-r);const o=nt.transform(e),s=nt.transform(n);t[a.array]=`${o} ${s}`}function jI(t,e,n){return typeof t=="string"?t:nt.transform(e+n*t)}function V2e(t,e,n){const r=jI(e,t.x,t.width),i=jI(n,t.y,t.height);return`${r} ${i}`}function sC(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:o,pathSpacing:s=1,pathOffset:u=0,...l},c,f){if(oC(t,l,f),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h,dimensions:p}=t;d.transform&&(p&&(h.transform=d.transform),delete d.transform),p&&(i!==void 0||a!==void 0||h.transform)&&(h.transformOrigin=V2e(p,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),o!==void 0&&U2e(d,o,s,u,!1)}const uC=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),dL=()=>({...uC(),attrs:{}}),lC=t=>typeof t=="string"&&t.toLowerCase()==="svg";function hL(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const pL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mL(t,e,n,r){hL(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(pL.has(i)?i:eC(i),e.attrs[i])}const Lg={};function W2e(t){Object.assign(Lg,t)}function vL(t,{layout:e,layoutId:n}){return Ll.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Lg[t]||t==="opacity")}function cC(t,e,n){var r;const{style:i}=t,a={};for(const o in i)(Fr(i[o])||e.style&&Fr(e.style[o])||vL(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function gL(t,e,n){const r=cC(t,e,n);for(const i in t)if(Fr(t[i])||Fr(e[i])){const a=Yf.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function q2e(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const $I=["x","y","width","height","cx","cy","r"],H2e={useVisualState:uL({scrapeMotionValuesFromProps:gL,createRenderState:dL,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const s in i)if(Ll.has(s)){a=!0;break}}if(!a)return;let o=!e;if(e)for(let s=0;s<$I.length;s++){const u=$I[s];t[u]!==e[u]&&(o=!0)}o&&dn.read(()=>{q2e(n,r),dn.render(()=>{sC(r,i,lC(n.tagName),t.transformTemplate),mL(n,r)})})}})},G2e={useVisualState:uL({scrapeMotionValuesFromProps:cC,createRenderState:uC})};function yL(t,e,n){for(const r in e)!Fr(e[r])&&!vL(r,n)&&(t[r]=e[r])}function K2e({transformTemplate:t},e){return W.useMemo(()=>{const n=uC();return oC(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Y2e(t,e){const n=t.style||{},r={};return yL(r,n,t),Object.assign(r,K2e(t,e)),r}function X2e(t,e){const n={},r=Y2e(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function Q2e(t,e,n,r){const i=W.useMemo(()=>{const a=dL();return sC(a,e,lC(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};yL(a,t.style,t),i.style={...a,...i.style}}return i}function Z2e(t=!1){return(n,r,i,{latestValues:a},o)=>{const u=(nC(n)?Q2e:X2e)(r,a,o,n),l=h2e(r,typeof n=="string",t),c=n!==W.Fragment?{...l,...u,ref:i}:{},{children:f}=r,d=W.useMemo(()=>Fr(f)?f.get():f,[f]);return W.createElement(n,{...c,children:d})}}function J2e(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...nC(r)?H2e:G2e,preloadedFeatures:t,useRender:Z2e(i),createVisualElement:e,Component:r};return _2e(o)}}function xL(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function _y(t,e,n){const r=t.getProps();return rC(r,e,n!==void 0?n:r.custom,t)}const e_e=QE(()=>window.ScrollTimeline!==void 0);class t_e{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(e_e()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class n_e extends t_e{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function fC(t,e){return t?t[e]||t.default||t:void 0}const _w=2e4;function bL(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<_w;)e+=n,r=t.next(e);return e>=_w?1/0:e}function dC(t){return typeof t=="function"}function zI(t,e){t.timeline=e,t.onfinish=null}const hC=t=>Array.isArray(t)&&typeof t[0]=="number",r_e={linearEasing:void 0};function i_e(t,e){const n=QE(t);return()=>{var r;return(r=r_e[e])!==null&&r!==void 0?r:n()}}const jg=i_e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wL=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(gf(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function _L(t){return!!(typeof t=="function"&&jg()||!t||typeof t=="string"&&(t in Ew||jg())||hC(t)||Array.isArray(t)&&t.every(_L))}const Td=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Ew={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Td([0,.65,.55,1]),circOut:Td([.55,0,1,.45]),backIn:Td([.31,.01,.66,-.59]),backOut:Td([.33,1.53,.69,.99])};function EL(t,e){if(t)return typeof t=="function"&&jg()?wL(t,e):hC(t)?Td(t):Array.isArray(t)?t.map(n=>EL(n,e)||Ew.easeOut):Ew[t]}const pa={x:!1,y:!1};function CL(){return pa.x||pa.y}function a_e(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function NL(t,e){const n=a_e(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function UI(t){return e=>{e.pointerType==="touch"||CL()||t(e)}}function o_e(t,e,n={}){const[r,i,a]=NL(t,n),o=UI(s=>{const{target:u}=s,l=e(s);if(typeof l!="function"||!u)return;const c=UI(f=>{l(f),u.removeEventListener("pointerleave",c)});u.addEventListener("pointerleave",c,i)});return r.forEach(s=>{s.addEventListener("pointerenter",o,i)}),a}const SL=(t,e)=>e?t===e?!0:SL(t,e.parentElement):!1,pC=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,s_e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function u_e(t){return s_e.has(t.tagName)||t.tabIndex!==-1}const Md=new WeakSet;function VI(t){return e=>{e.key==="Enter"&&t(e)}}function $1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const l_e=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=VI(()=>{if(Md.has(n))return;$1(n,"down");const i=VI(()=>{$1(n,"up")}),a=()=>$1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function WI(t){return pC(t)&&!CL()}function c_e(t,e,n={}){const[r,i,a]=NL(t,n),o=s=>{const u=s.currentTarget;if(!WI(s)||Md.has(u))return;Md.add(u);const l=e(s),c=(h,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",d),!(!WI(h)||!Md.has(u))&&(Md.delete(u),typeof l=="function"&&l(h,{success:p}))},f=h=>{c(h,n.useGlobalTarget||SL(u,h.target))},d=h=>{c(h,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",d,i)};return r.forEach(s=>{!u_e(s)&&s.getAttribute("tabindex")===null&&(s.tabIndex=0),(n.useGlobalTarget?window:s).addEventListener("pointerdown",o,i),s.addEventListener("focus",l=>l_e(l,i),i)}),a}function f_e(t){return t==="x"||t==="y"?pa[t]?null:(pa[t]=!0,()=>{pa[t]=!1}):pa.x||pa.y?null:(pa.x=pa.y=!0,()=>{pa.x=pa.y=!1})}const DL=new Set(["width","height","top","left","right","bottom",...Yf]);let dv;function d_e(){dv=void 0}const to={now:()=>(dv===void 0&&to.set(cr.isProcessing||s2e.useManualTiming?cr.timestamp:performance.now()),dv),set:t=>{dv=t,queueMicrotask(d_e)}};function mC(t,e){t.indexOf(e)===-1&&t.push(e)}function vC(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class gC{constructor(){this.subscriptions=[]}add(e){return mC(this.subscriptions,e),()=>vC(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function AL(t,e){return e?t*(1e3/e):0}const qI=30,h_e=t=>!isNaN(parseFloat(t));class p_e{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=to.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=to.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=h_e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new gC);const r=this.events[e].add(n);return e==="change"?()=>{r(),dn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=to.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>qI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,qI);return AL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Uh(t,e){return new p_e(t,e)}function m_e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Uh(n))}function v_e(t,e){const n=_y(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const s=A2e(a[o]);m_e(t,o,s)}}function g_e(t){return!!(Fr(t)&&t.add)}function Cw(t,e){const n=t.getValue("willChange");if(g_e(n))return n.add(e)}function TL(t){return t.props[aL]}const ML=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,y_e=1e-7,x_e=12;function b_e(t,e,n,r,i){let a,o,s=0;do o=e+(n-e)/2,a=ML(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>y_e&&++s<x_e);return o}function Ap(t,e,n,r){if(t===e&&n===r)return Ri;const i=a=>b_e(a,0,1,t,n);return a=>a===0||a===1?a:ML(i(a),e,r)}const IL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,kL=t=>e=>1-t(1-e),RL=Ap(.33,1.53,.69,.99),yC=kL(RL),FL=IL(yC),PL=t=>(t*=2)<1?.5*yC(t):.5*(2-Math.pow(2,-10*(t-1))),xC=t=>1-Math.sin(Math.acos(t)),OL=kL(xC),BL=IL(xC),LL=t=>/^0[^.\s]+$/u.test(t);function w_e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LL(t):!0}const Kd=t=>Math.round(t*1e5)/1e5,bC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function __e(t){return t==null}const E_e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wC=(t,e)=>n=>!!(typeof n=="string"&&E_e.test(n)&&n.startsWith(t)||e&&!__e(n)&&Object.prototype.hasOwnProperty.call(n,e)),jL=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,s]=r.match(bC);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:s!==void 0?parseFloat(s):1}},C_e=t=>Xo(0,255,t),z1={...Xf,transform:t=>Math.round(C_e(t))},Ku={test:wC("rgb","red"),parse:jL("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+z1.transform(t)+", "+z1.transform(e)+", "+z1.transform(n)+", "+Kd(zh.transform(r))+")"};function N_e(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Nw={test:wC("#"),parse:N_e,transform:Ku.transform},_c={test:wC("hsl","hue"),parse:jL("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+eo.transform(Kd(e))+", "+eo.transform(Kd(n))+", "+Kd(zh.transform(r))+")"},Sr={test:t=>Ku.test(t)||Nw.test(t)||_c.test(t),parse:t=>Ku.test(t)?Ku.parse(t):_c.test(t)?_c.parse(t):Nw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ku.transform(t):_c.transform(t)},S_e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function D_e(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(bC))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(S_e))===null||n===void 0?void 0:n.length)||0)>0}const $L="number",zL="color",A_e="var",T_e="var(",HI="${}",M_e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const s=e.replace(M_e,u=>(Sr.test(u)?(r.color.push(a),i.push(zL),n.push(Sr.parse(u))):u.startsWith(T_e)?(r.var.push(a),i.push(A_e),n.push(u)):(r.number.push(a),i.push($L),n.push(parseFloat(u))),++a,HI)).split(HI);return{values:n,split:s,indexes:r,types:i}}function UL(t){return Vh(t).values}function VL(t){const{split:e,types:n}=Vh(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const s=n[o];s===$L?a+=Kd(i[o]):s===zL?a+=Sr.transform(i[o]):a+=i[o]}return a}}const I_e=t=>typeof t=="number"?0:t;function k_e(t){const e=UL(t);return VL(t)(e.map(I_e))}const nu={test:D_e,parse:UL,createTransformer:VL,getAnimatableNone:k_e},R_e=new Set(["brightness","contrast","saturate","opacity"]);function F_e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(bC)||[];if(!r)return t;const i=n.replace(r,"");let a=R_e.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const P_e=/\b([a-z-]*)\(.*?\)/gu,Sw={...nu,getAnimatableNone:t=>{const e=t.match(P_e);return e?e.map(F_e).join(" "):t}},O_e={...aC,color:Sr,backgroundColor:Sr,outlineColor:Sr,fill:Sr,stroke:Sr,borderColor:Sr,borderTopColor:Sr,borderRightColor:Sr,borderBottomColor:Sr,borderLeftColor:Sr,filter:Sw,WebkitFilter:Sw},_C=t=>O_e[t];function WL(t,e){let n=_C(t);return n!==Sw&&(n=nu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const B_e=new Set(["auto","none","0"]);function L_e(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!B_e.has(a)&&Vh(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=WL(n,i)}const GI=t=>t===Xf||t===nt,KI=(t,e)=>parseFloat(t.split(", ")[e]),YI=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return KI(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?KI(a[1],t):0}},j_e=new Set(["x","y","z"]),$_e=Yf.filter(t=>!j_e.has(t));function z_e(t){const e=[];return $_e.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const xf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:YI(4,13),y:YI(5,14)};xf.translateX=xf.x;xf.translateY=xf.y;const tl=new Set;let Dw=!1,Aw=!1;function qL(){if(Aw){const t=Array.from(tl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=z_e(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{var s;(s=r.getValue(a))===null||s===void 0||s.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Aw=!1,Dw=!1,tl.forEach(t=>t.complete()),tl.clear()}function HL(){tl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Aw=!0)})}function U_e(){HL(),qL()}class EC{constructor(e,n,r,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(tl.add(this),Dw||(Dw=!0,dn.read(HL),dn.resolveKeyframes(qL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const o=i==null?void 0:i.get(),s=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,s);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=s),i&&o===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),tl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,tl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const GL=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),V_e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function W_e(t){const e=V_e.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function KL(t,e,n=1){const[r,i]=W_e(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return GL(o)?parseFloat(o):o}return iC(i)?KL(i,e,n+1):i}const YL=t=>e=>e.test(t),q_e={test:t=>t==="auto",parse:t=>t},XL=[Xf,nt,eo,hs,F2e,R2e,q_e],XI=t=>XL.find(YL(t));class QL extends EC{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let l=e[u];if(typeof l=="string"&&(l=l.trim(),iC(l))){const c=KL(l,n.current);c!==void 0&&(e[u]=c),u===e.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!DL.has(r)||e.length!==2)return;const[i,a]=e,o=XI(i),s=XI(a);if(o!==s)if(GI(o)&&GI(s))for(let u=0;u<e.length;u++){const l=e[u];typeof l=="string"&&(e[u]=parseFloat(l))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)w_e(e[i])&&r.push(i);r.length&&L_e(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,s=i[o];i[o]=xf[r](n.measureViewportBox(),window.getComputedStyle(n.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,l])=>{n.getValue(u).set(l)}),this.resolveNoneKeyframes()}}const QI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(nu.test(t)||t==="0")&&!t.startsWith("url("));function H_e(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function G_e(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=QI(i,e),s=QI(a,e);return!o||!s?!1:H_e(t)||(n==="spring"||dC(n))&&r}const K_e=t=>t!==null;function Ey(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(K_e),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const Y_e=40;class ZL{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=to.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Y_e?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&U_e(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=to.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:o,onComplete:s,onUpdate:u,isGenerator:l}=this.options;if(!l&&!G_e(e,r,i,a))if(o)this.options.duration=0;else{u&&u(Ey(e,this.options,n)),s&&s(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const xn=(t,e,n)=>t+(e-t)*n;function U1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function X_e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;i=U1(u,s,t+1/3),a=U1(u,s,t),o=U1(u,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function $g(t,e){return n=>n>0?e:t}const V1=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Q_e=[Nw,Ku,_c],Z_e=t=>Q_e.find(e=>e.test(t));function ZI(t){const e=Z_e(t);if(!e)return!1;let n=e.parse(t);return e===_c&&(n=X_e(n)),n}const JI=(t,e)=>{const n=ZI(t),r=ZI(e);if(!n||!r)return $g(t,e);const i={...n};return a=>(i.red=V1(n.red,r.red,a),i.green=V1(n.green,r.green,a),i.blue=V1(n.blue,r.blue,a),i.alpha=xn(n.alpha,r.alpha,a),Ku.transform(i))},J_e=(t,e)=>n=>e(t(n)),Tp=(...t)=>t.reduce(J_e),Tw=new Set(["none","hidden"]);function eEe(t,e){return Tw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function tEe(t,e){return n=>xn(t,e,n)}function CC(t){return typeof t=="number"?tEe:typeof t=="string"?iC(t)?$g:Sr.test(t)?JI:iEe:Array.isArray(t)?JL:typeof t=="object"?Sr.test(t)?JI:nEe:$g}function JL(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>CC(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function nEe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=CC(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function rEe(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],s=t.indexes[o][i[o]],u=(n=t.values[s])!==null&&n!==void 0?n:0;r[a]=u,i[o]++}return r}const iEe=(t,e)=>{const n=nu.createTransformer(e),r=Vh(t),i=Vh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Tw.has(t)&&!i.values.length||Tw.has(e)&&!r.values.length?eEe(t,e):Tp(JL(rEe(r,i),i.values),n):$g(t,e)};function e7(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?xn(t,e,n):CC(t)(t,e)}const aEe=5;function t7(t,e,n){const r=Math.max(e-aEe,0);return AL(n-t(r),e-r)}const Sn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},W1=.001;function oEe({duration:t=Sn.duration,bounce:e=Sn.bounce,velocity:n=Sn.velocity,mass:r=Sn.mass}){let i,a,o=1-e;o=Xo(Sn.minDamping,Sn.maxDamping,o),t=Xo(Sn.minDuration,Sn.maxDuration,Lo(t)),o<1?(i=l=>{const c=l*o,f=c*t,d=c-n,h=Mw(l,o),p=Math.exp(-f);return W1-d/h*p},a=l=>{const f=l*o*t,d=f*n+n,h=Math.pow(o,2)*Math.pow(l,2)*t,p=Math.exp(-f),m=Mw(Math.pow(l,2),o);return(-i(l)+W1>0?-1:1)*((d-h)*p)/m}):(i=l=>{const c=Math.exp(-l*t),f=(l-n)*t+1;return-W1+c*f},a=l=>{const c=Math.exp(-l*t),f=(n-l)*(t*t);return c*f});const s=5/t,u=uEe(i,a,s);if(t=Bo(t),isNaN(u))return{stiffness:Sn.stiffness,damping:Sn.damping,duration:t};{const l=Math.pow(u,2)*r;return{stiffness:l,damping:o*2*Math.sqrt(r*l),duration:t}}}const sEe=12;function uEe(t,e,n){let r=n;for(let i=1;i<sEe;i++)r=r-t(r)/e(r);return r}function Mw(t,e){return t*Math.sqrt(1-e*e)}const lEe=["duration","bounce"],cEe=["stiffness","damping","mass"];function e4(t,e){return e.some(n=>t[n]!==void 0)}function fEe(t){let e={velocity:Sn.velocity,stiffness:Sn.stiffness,damping:Sn.damping,mass:Sn.mass,isResolvedFromDuration:!1,...t};if(!e4(t,cEe)&&e4(t,lEe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Xo(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Sn.mass,stiffness:i,damping:a}}else{const n=oEe(t);e={...e,...n,mass:Sn.mass},e.isResolvedFromDuration=!0}return e}function n7(t=Sn.visualDuration,e=Sn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],s={done:!1,value:a},{stiffness:u,damping:l,mass:c,duration:f,velocity:d,isResolvedFromDuration:h}=fEe({...n,velocity:-Lo(n.velocity||0)}),p=d||0,m=l/(2*Math.sqrt(u*c)),y=o-a,v=Lo(Math.sqrt(u/c)),x=Math.abs(y)<5;r||(r=x?Sn.restSpeed.granular:Sn.restSpeed.default),i||(i=x?Sn.restDelta.granular:Sn.restDelta.default);let g;if(m<1){const w=Mw(v,m);g=_=>{const E=Math.exp(-m*v*_);return o-E*((p+m*v*y)/w*Math.sin(w*_)+y*Math.cos(w*_))}}else if(m===1)g=w=>o-Math.exp(-v*w)*(y+(p+v*y)*w);else{const w=v*Math.sqrt(m*m-1);g=_=>{const E=Math.exp(-m*v*_),C=Math.min(w*_,300);return o-E*((p+m*v*y)*Math.sinh(C)+w*y*Math.cosh(C))/w}}const b={calculatedDuration:h&&f||null,next:w=>{const _=g(w);if(h)s.done=w>=f;else{let E=0;m<1&&(E=w===0?Bo(p):t7(g,w,_));const C=Math.abs(E)<=r,N=Math.abs(o-_)<=i;s.done=C&&N}return s.value=s.done?o:_,s},toString:()=>{const w=Math.min(bL(b),_w),_=wL(E=>b.next(w*E).value,w,30);return w+"ms "+_}};return b}function t4({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:s,max:u,restDelta:l=.5,restSpeed:c}){const f=t[0],d={done:!1,value:f},h=C=>s!==void 0&&C<s||u!==void 0&&C>u,p=C=>s===void 0?u:u===void 0||Math.abs(s-C)<Math.abs(u-C)?s:u;let m=n*e;const y=f+m,v=o===void 0?y:o(y);v!==y&&(m=v-f);const x=C=>-m*Math.exp(-C/r),g=C=>v+x(C),b=C=>{const N=x(C),D=g(C);d.done=Math.abs(N)<=l,d.value=d.done?v:D};let w,_;const E=C=>{h(d.value)&&(w=C,_=n7({keyframes:[d.value,p(d.value)],velocity:t7(g,C,d.value),damping:i,stiffness:a,restDelta:l,restSpeed:c}))};return E(0),{calculatedDuration:null,next:C=>{let N=!1;return!_&&w===void 0&&(N=!0,b(C),E(C)),w!==void 0&&C>=w?_.next(C-w):(!N&&b(C),d)}}}const dEe=Ap(.42,0,1,1),hEe=Ap(0,0,.58,1),r7=Ap(.42,0,.58,1),pEe=t=>Array.isArray(t)&&typeof t[0]!="number",n4={linear:Ri,easeIn:dEe,easeInOut:r7,easeOut:hEe,circIn:xC,circInOut:BL,circOut:OL,backIn:yC,backInOut:FL,backOut:RL,anticipate:PL},r4=t=>{if(hC(t)){bw(t.length===4);const[e,n,r,i]=t;return Ap(e,n,r,i)}else if(typeof t=="string")return bw(n4[t]!==void 0),n4[t];return t};function mEe(t,e,n){const r=[],i=n||e7,a=t.length-1;for(let o=0;o<a;o++){let s=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Ri:e;s=Tp(u,s)}r.push(s)}return r}function vEe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(bw(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=mEe(e,r,i),u=s.length,l=c=>{if(o&&c<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const d=gf(t[f],t[f+1],c);return s[f](d)};return n?c=>l(Xo(t[0],t[a-1],c)):l}function gEe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=gf(0,e,r);t.push(xn(n,1,i))}}function yEe(t){const e=[0];return gEe(e,t.length-1),e}function xEe(t,e){return t.map(n=>n*e)}function bEe(t,e){return t.map(()=>e||r7).splice(0,t.length-1)}function zg({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=pEe(r)?r.map(r4):r4(r),a={done:!1,value:e[0]},o=xEe(n&&n.length===e.length?n:yEe(e),t),s=vEe(o,e,{ease:Array.isArray(i)?i:bEe(e,i)});return{calculatedDuration:t,next:u=>(a.value=s(u),a.done=u>=t,a)}}const wEe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>dn.update(e,!0),stop:()=>tu(e),now:()=>cr.isProcessing?cr.timestamp:to.now()}},_Ee={decay:t4,inertia:t4,tween:zg,keyframes:zg,spring:n7},EEe=t=>t/100;class NC extends ZL{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||EC,s=(u,l)=>this.onKeyframesResolved(u,l);this.resolver=new o(a,s,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,s=dC(n)?n:_Ee[n]||zg;let u,l;s!==zg&&typeof e[0]!="number"&&(u=Tp(EEe,e7(e[0],e[1])),e=[0,100]);const c=s({...this.options,keyframes:e});a==="mirror"&&(l=s({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=bL(c));const{calculatedDuration:f}=c,d=f+i,h=d*(r+1)-i;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:u,calculatedDuration:f,resolvedDuration:d,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:s,keyframes:u,calculatedDuration:l,totalDuration:c,resolvedDuration:f}=r;if(this.startTime===null)return a.next(0);const{delay:d,repeat:h,repeatType:p,repeatDelay:m,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-d*(this.speed>=0?1:-1),x=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let g=this.currentTime,b=a;if(h){const C=Math.min(this.currentTime,c)/f;let N=Math.floor(C),D=C%1;!D&&C>=1&&(D=1),D===1&&N--,N=Math.min(N,h+1),!!(N%2)&&(p==="reverse"?(D=1-D,m&&(D-=m/f)):p==="mirror"&&(b=o)),g=Xo(0,1,D)*f}const w=x?{done:!1,value:u[0]}:b.next(g);s&&(w.value=s(w.value));let{done:_}=w;!x&&l!==null&&(_=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return E&&i!==void 0&&(w.value=Ey(u,this.options,i)),y&&y(w.value),E&&this.finish(),w}get duration(){const{resolved:e}=this;return e?Lo(e.calculatedDuration):0}get time(){return Lo(this.currentTime)}set time(e){e=Bo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Lo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=wEe,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const CEe=new Set(["opacity","clipPath","filter","transform"]);function NEe(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:s="easeInOut",times:u}={}){const l={[e]:n};u&&(l.offset=u);const c=EL(s,i);return Array.isArray(c)&&(l.easing=c),t.animate(l,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}const SEe=QE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ug=10,DEe=2e4;function AEe(t){return dC(t.type)||t.type==="spring"||!_L(t.ease)}function TEe(t,e){const n=new NC({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<DEe;)r=n.sample(a),i.push(r.value),a+=Ug;return{times:void 0,keyframes:i,duration:a-Ug,ease:"linear"}}const i7={anticipate:PL,backInOut:FL,circInOut:BL};function MEe(t){return t in i7}class i4 extends ZL{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new QL(a,(o,s)=>this.onKeyframesResolved(o,s),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:o,motionValue:s,name:u,startTime:l}=this.options;if(!s.owner||!s.owner.current)return!1;if(typeof a=="string"&&jg()&&MEe(a)&&(a=i7[a]),AEe(this.options)){const{onComplete:f,onUpdate:d,motionValue:h,element:p,...m}=this.options,y=TEe(e,m);e=y.keyframes,e.length===1&&(e[1]=e[0]),r=y.duration,i=y.times,a=y.ease,o="keyframes"}const c=NEe(s.owner.current,u,e,{...this.options,duration:r,times:i,ease:a});return c.startTime=l??this.calcStartTime(),this.pendingTimeline?(zI(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:f}=this.options;s.set(Ey(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Lo(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Lo(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Bo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ri;const{animation:r}=n;zI(r,e)}return Ri}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:o,times:s}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:l,onUpdate:c,onComplete:f,element:d,...h}=this.options,p=new NC({...h,keyframes:r,duration:i,type:a,ease:o,times:s,isGenerator:!0}),m=Bo(this.time);l.setWithVelocity(p.sample(m-Ug).value,p.sample(m).value,Ug)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:o,type:s}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:l}=n.owner.getProps();return SEe()&&r&&CEe.has(r)&&!u&&!l&&!i&&a!=="mirror"&&o!==0&&s!=="inertia"}}const IEe={type:"spring",stiffness:500,damping:25,restSpeed:10},kEe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),REe={type:"keyframes",duration:.8},FEe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PEe=(t,{keyframes:e})=>e.length>2?REe:Ll.has(t)?t.startsWith("scale")?kEe(e[1]):IEe:FEe;function OEe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:s,from:u,elapsed:l,...c}){return!!Object.keys(c).length}const SC=(t,e,n,r={},i,a)=>o=>{const s=fC(r,t)||{},u=s.delay||r.delay||0;let{elapsed:l=0}=r;l=l-Bo(u);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-l,onUpdate:d=>{e.set(d),s.onUpdate&&s.onUpdate(d)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:a?void 0:i};OEe(s)||(c={...c,...PEe(t,c)}),c.duration&&(c.duration=Bo(c.duration)),c.repeatDelay&&(c.repeatDelay=Bo(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(f=!0)),f&&!a&&e.get()!==void 0){const d=Ey(c.keyframes,s);if(d!==void 0)return dn.update(()=>{c.onUpdate(d),c.onComplete()}),new n_e([])}return!a&&i4.supports(c)?new i4(c):new NC(c)};function BEe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function a7(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:o=t.getDefaultTransition(),transitionEnd:s,...u}=e;r&&(o=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const f in u){const d=t.getValue(f,(a=t.latestValues[f])!==null&&a!==void 0?a:null),h=u[f];if(h===void 0||c&&BEe(c,f))continue;const p={delay:n,...fC(o||{},f)};let m=!1;if(window.MotionHandoffAnimation){const v=TL(t);if(v){const x=window.MotionHandoffAnimation(v,f,dn);x!==null&&(p.startTime=x,m=!0)}}Cw(t,f),d.start(SC(f,d,h,t.shouldReduceMotion&&DL.has(f)?{type:!1}:p,t,m));const y=d.animation;y&&l.push(y)}return s&&Promise.all(l).then(()=>{dn.update(()=>{s&&v_e(t,s)})}),l}function Iw(t,e,n={}){var r;const i=_y(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(a7(t,i,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:d}=a;return LEe(t,e,c+l,f,d,n)}:()=>Promise.resolve(),{when:u}=a;if(u){const[l,c]=u==="beforeChildren"?[o,s]:[s,o];return l().then(()=>c())}else return Promise.all([o(),s(n.delay)])}function LEe(t,e,n=0,r=0,i=1,a){const o=[],s=(t.variantChildren.size-1)*r,u=i===1?(l=0)=>l*r:(l=0)=>s-l*r;return Array.from(t.variantChildren).sort(jEe).forEach((l,c)=>{l.notify("AnimationStart",e),o.push(Iw(l,e,{...a,delay:n+u(c)}).then(()=>l.notify("AnimationComplete",e)))}),Promise.all(o)}function jEe(t,e){return t.sortNodePosition(e)}function $Ee(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Iw(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Iw(t,e,n);else{const i=typeof e=="function"?_y(t,e,n.custom):e;r=Promise.all(a7(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const zEe=JE.length;function o7(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?o7(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<zEe;n++){const r=JE[n],i=t.props[r];($h(i)||i===!1)&&(e[r]=i)}return e}const UEe=[...ZE].reverse(),VEe=ZE.length;function WEe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>$Ee(t,n,r)))}function qEe(t){let e=WEe(t),n=a4(),r=!0;const i=u=>(l,c)=>{var f;const d=_y(t,c,u==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(d){const{transition:h,transitionEnd:p,...m}=d;l={...l,...m,...p}}return l};function a(u){e=u(t)}function o(u){const{props:l}=t,c=o7(t.parent)||{},f=[],d=new Set;let h={},p=1/0;for(let y=0;y<VEe;y++){const v=UEe[y],x=n[v],g=l[v]!==void 0?l[v]:c[v],b=$h(g),w=v===u?x.isActive:null;w===!1&&(p=y);let _=g===c[v]&&g!==l[v]&&b;if(_&&r&&t.manuallyAnimateOnMount&&(_=!1),x.protectedKeys={...h},!x.isActive&&w===null||!g&&!x.prevProp||by(g)||typeof g=="boolean")continue;const E=HEe(x.prevProp,g);let C=E||v===u&&x.isActive&&!_&&b||y>p&&b,N=!1;const D=Array.isArray(g)?g:[g];let A=D.reduce(i(v),{});w===!1&&(A={});const{prevResolvedValues:T={}}=x,R={...T,...A},F=M=>{C=!0,d.has(M)&&(N=!0,d.delete(M)),x.needsAnimating[M]=!0;const B=t.getValue(M);B&&(B.liveStyle=!1)};for(const M in R){const B=A[M],k=T[M];if(h.hasOwnProperty(M))continue;let j=!1;ww(B)&&ww(k)?j=!xL(B,k):j=B!==k,j?B!=null?F(M):d.add(M):B!==void 0&&d.has(M)?F(M):x.protectedKeys[M]=!0}x.prevProp=g,x.prevResolvedValues=A,x.isActive&&(h={...h,...A}),r&&t.blockInitialAnimation&&(C=!1),C&&(!(_&&E)||N)&&f.push(...D.map(M=>({animation:M,options:{type:v}})))}if(d.size){const y={};d.forEach(v=>{const x=t.getBaseTarget(v),g=t.getValue(v);g&&(g.liveStyle=!0),y[v]=x??null}),f.push({animation:y})}let m=!!f.length;return r&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function s(u,l){var c;if(n[u].isActive===l)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(d=>{var h;return(h=d.animationState)===null||h===void 0?void 0:h.setActive(u,l)}),n[u].isActive=l;const f=o(u);for(const d in n)n[d].protectedKeys={};return f}return{animateChanges:o,setActive:s,setAnimateFunction:a,getState:()=>n,reset:()=>{n=a4(),r=!0}}}function HEe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xL(e,t):!1}function Du(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function a4(){return{animate:Du(!0),whileInView:Du(),whileHover:Du(),whileTap:Du(),whileDrag:Du(),whileFocus:Du(),exit:Du()}}class Eu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class GEe extends Eu{constructor(e){super(e),e.animationState||(e.animationState=qEe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();by(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let KEe=0;class YEe extends Eu{constructor(){super(...arguments),this.id=KEe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const XEe={animation:{Feature:GEe},exit:{Feature:YEe}};function Wh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Mp(t){return{point:{x:t.pageX,y:t.pageY}}}const QEe=t=>e=>pC(e)&&t(e,Mp(e));function Yd(t,e,n,r){return Wh(t,e,QEe(n),r)}const o4=(t,e)=>Math.abs(t-e);function ZEe(t,e){const n=o4(t.x,e.x),r=o4(t.y,e.y);return Math.sqrt(n**2+r**2)}class s7{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=H1(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=ZEe(f.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:p}=f,{timestamp:m}=cr;this.history.push({...p,timestamp:m});const{onStart:y,onMove:v}=this.handlers;d||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=q1(d,this.transformPagePoint),dn.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=H1(f.type==="pointercancel"?this.lastMoveEventInfo:q1(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,y),p&&p(f,y)},!pC(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Mp(e),s=q1(o,this.transformPagePoint),{point:u}=s,{timestamp:l}=cr;this.history=[{...u,timestamp:l}];const{onSessionStart:c}=n;c&&c(e,H1(s,this.history)),this.removeListeners=Tp(Yd(this.contextWindow,"pointermove",this.handlePointerMove),Yd(this.contextWindow,"pointerup",this.handlePointerUp),Yd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),tu(this.updatePoint)}}function q1(t,e){return e?{point:e(t.point)}:t}function s4(t,e){return{x:t.x-e.x,y:t.y-e.y}}function H1({point:t},e){return{point:t,delta:s4(t,u7(e)),offset:s4(t,JEe(e)),velocity:eCe(e,.1)}}function JEe(t){return t[0]}function u7(t){return t[t.length-1]}function eCe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=u7(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Bo(e)));)n--;if(!r)return{x:0,y:0};const a=Lo(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const l7=1e-4,tCe=1-l7,nCe=1+l7,c7=.01,rCe=0-c7,iCe=0+c7;function Oi(t){return t.max-t.min}function aCe(t,e,n){return Math.abs(t-e)<=n}function u4(t,e,n,r=.5){t.origin=r,t.originPoint=xn(e.min,e.max,t.origin),t.scale=Oi(n)/Oi(e),t.translate=xn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=tCe&&t.scale<=nCe||isNaN(t.scale))&&(t.scale=1),(t.translate>=rCe&&t.translate<=iCe||isNaN(t.translate))&&(t.translate=0)}function Xd(t,e,n,r){u4(t.x,e.x,n.x,r?r.originX:void 0),u4(t.y,e.y,n.y,r?r.originY:void 0)}function l4(t,e,n){t.min=n.min+e.min,t.max=t.min+Oi(e)}function oCe(t,e,n){l4(t.x,e.x,n.x),l4(t.y,e.y,n.y)}function c4(t,e,n){t.min=e.min-n.min,t.max=t.min+Oi(e)}function Qd(t,e,n){c4(t.x,e.x,n.x),c4(t.y,e.y,n.y)}function sCe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?xn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?xn(n,t,r.max):Math.min(t,n)),t}function f4(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function uCe(t,{top:e,left:n,bottom:r,right:i}){return{x:f4(t.x,n,i),y:f4(t.y,e,r)}}function d4(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function lCe(t,e){return{x:d4(t.x,e.x),y:d4(t.y,e.y)}}function cCe(t,e){let n=.5;const r=Oi(t),i=Oi(e);return i>r?n=gf(e.min,e.max-r,t.min):r>i&&(n=gf(t.min,t.max-i,e.min)),Xo(0,1,n)}function fCe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const kw=.35;function dCe(t=kw){return t===!1?t=0:t===!0&&(t=kw),{x:h4(t,"left","right"),y:h4(t,"top","bottom")}}function h4(t,e,n){return{min:p4(t,e),max:p4(t,n)}}function p4(t,e){return typeof t=="number"?t:t[e]||0}const m4=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ec=()=>({x:m4(),y:m4()}),v4=()=>({min:0,max:0}),Mn=()=>({x:v4(),y:v4()});function Wi(t){return[t("x"),t("y")]}function f7({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function hCe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function pCe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function G1(t){return t===void 0||t===1}function Rw({scale:t,scaleX:e,scaleY:n}){return!G1(t)||!G1(e)||!G1(n)}function Fu(t){return Rw(t)||d7(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function d7(t){return g4(t.x)||g4(t.y)}function g4(t){return t&&t!=="0%"}function Vg(t,e,n){const r=t-n,i=e*r;return n+i}function y4(t,e,n,r,i){return i!==void 0&&(t=Vg(t,i,r)),Vg(t,n,r)+e}function Fw(t,e=0,n=1,r,i){t.min=y4(t.min,e,n,r,i),t.max=y4(t.max,e,n,r,i)}function h7(t,{x:e,y:n}){Fw(t.x,e.translate,e.scale,e.originPoint),Fw(t.y,n.translate,n.scale,n.originPoint)}const x4=.999999999999,b4=1.0000000000001;function mCe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let s=0;s<i;s++){a=n[s],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Nc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,h7(t,o)),r&&Fu(a.latestValues)&&Nc(t,a.latestValues))}e.x<b4&&e.x>x4&&(e.x=1),e.y<b4&&e.y>x4&&(e.y=1)}function Cc(t,e){t.min=t.min+e,t.max=t.max+e}function w4(t,e,n,r,i=.5){const a=xn(t.min,t.max,i);Fw(t,e,n,a,r)}function Nc(t,e){w4(t.x,e.x,e.scaleX,e.scale,e.originX),w4(t.y,e.y,e.scaleY,e.scale,e.originY)}function p7(t,e){return f7(pCe(t.getBoundingClientRect(),e))}function vCe(t,e,n){const r=p7(t,n),{scroll:i}=e;return i&&(Cc(r.x,i.offset.x),Cc(r.y,i.offset.y)),r}const m7=({current:t})=>t?t.ownerDocument.defaultView:null,gCe=new WeakMap;class yCe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Mp(c).point)},a=(c,f)=>{const{drag:d,dragPropagation:h,onDragStart:p}=this.getProps();if(d&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=f_e(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wi(y=>{let v=this.getAxisMotionValue(y).get()||0;if(eo.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const g=x.layout.layoutBox[y];g&&(v=Oi(g)*(parseFloat(v)/100))}}this.originPoint[y]=v}),p&&dn.postRender(()=>p(c,f)),Cw(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(c,f)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:p,onDrag:m}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:y}=f;if(h&&this.currentDirection===null){this.currentDirection=xCe(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),m&&m(c,f)},s=(c,f)=>this.stop(c,f),u=()=>Wi(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new s7(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:s,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:m7(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&dn.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Im(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=sCe(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&wc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=uCe(i.layoutBox,n):this.constraints=!1,this.elastic=dCe(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Wi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=fCe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!wc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=vCe(r,i.root,this.visualElement.getTransformPagePoint());let o=lCe(i.layout.layoutBox,a);if(n){const s=n(hCe(o));this.hasMutatedConstraints=!!s,s&&(o=f7(s))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),u=this.constraints||{},l=Wi(c=>{if(!Im(c,n,this.currentDirection))return;let f=u&&u[c]||{};o&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?e[c]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(l).then(s)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Cw(this.visualElement,e),r.start(SC(e,r,0,n,this.visualElement,!1))}stopAnimation(){Wi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Wi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Wi(n=>{const{drag:r}=this.getProps();if(!Im(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:s}=i.layout.layoutBox[n];a.set(e[n]-xn(o,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!wc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Wi(o=>{const s=this.getAxisMotionValue(o);if(s&&this.constraints!==!1){const u=s.get();i[o]=cCe({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Wi(o=>{if(!Im(o,e,null))return;const s=this.getAxisMotionValue(o),{min:u,max:l}=this.constraints[o];s.set(xn(u,l,i[o]))})}addListeners(){if(!this.visualElement.current)return;gCe.set(this.visualElement,this);const e=this.visualElement.current,n=Yd(e,"pointerdown",u=>{const{drag:l,dragListener:c=!0}=this.getProps();l&&c&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();wc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),dn.read(r);const o=Wh(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(Wi(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=u[c].translate,f.set(f.get()+u[c].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=kw,dragMomentum:s=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:s}}}function Im(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function xCe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class bCe extends Eu{constructor(e){super(e),this.removeGroupControls=Ri,this.removeListeners=Ri,this.controls=new yCe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ri}unmount(){this.removeGroupControls(),this.removeListeners()}}const _4=t=>(e,n)=>{t&&dn.postRender(()=>t(e,n))};class wCe extends Eu{constructor(){super(...arguments),this.removePointerDownListener=Ri}onPointerDown(e){this.session=new s7(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:m7(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:_4(e),onStart:_4(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&dn.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Yd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function E4(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const vd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(nt.test(t))t=parseFloat(t);else return t;const n=E4(t,e.target.x),r=E4(t,e.target.y);return`${n}% ${r}%`}},_Ce={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=nu.parse(t);if(i.length>5)return r;const a=nu.createTransformer(t),o=typeof i[0]!="number"?1:0,s=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=s,i[1+o]/=u;const l=xn(s,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=l),typeof i[3+o]=="number"&&(i[3+o]/=l),a(i)}};class ECe extends W.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;W2e(CCe),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),hv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,o=r.projection;return o&&(o.isPresent=a,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||dn.postRender(()=>{const s=o.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tC.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function v7(t){const[e,n]=a2e(),r=W.useContext(J6);return S.jsx(ECe,{...t,layoutGroup:r,switchLayoutGroup:W.useContext(oL),isPresent:e,safeToRemove:n})}const CCe={borderRadius:{...vd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vd,borderTopRightRadius:vd,borderBottomLeftRadius:vd,borderBottomRightRadius:vd,boxShadow:_Ce};function NCe(t,e,n){const r=Fr(t)?t:Uh(t);return r.start(SC("",r,e,n)),r.animation}function SCe(t){return t instanceof SVGElement&&t.tagName!=="svg"}const DCe=(t,e)=>t.depth-e.depth;class ACe{constructor(){this.children=[],this.isDirty=!1}add(e){mC(this.children,e),this.isDirty=!0}remove(e){vC(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(DCe),this.isDirty=!1,this.children.forEach(e)}}function TCe(t,e){const n=to.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(tu(r),t(a-e))};return dn.read(r,!0),()=>tu(r)}const g7=["TopLeft","TopRight","BottomLeft","BottomRight"],MCe=g7.length,C4=t=>typeof t=="string"?parseFloat(t):t,N4=t=>typeof t=="number"||nt.test(t);function ICe(t,e,n,r,i,a){i?(t.opacity=xn(0,n.opacity!==void 0?n.opacity:1,kCe(r)),t.opacityExit=xn(e.opacity!==void 0?e.opacity:1,0,RCe(r))):a&&(t.opacity=xn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<MCe;o++){const s=`border${g7[o]}Radius`;let u=S4(e,s),l=S4(n,s);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||N4(u)===N4(l)?(t[s]=Math.max(xn(C4(u),C4(l),r),0),(eo.test(l)||eo.test(u))&&(t[s]+="%")):t[s]=l}(e.rotate||n.rotate)&&(t.rotate=xn(e.rotate||0,n.rotate||0,r))}function S4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const kCe=y7(0,.5,OL),RCe=y7(.5,.95,Ri);function y7(t,e,n){return r=>r<t?0:r>e?1:n(gf(t,e,r))}function D4(t,e){t.min=e.min,t.max=e.max}function Vi(t,e){D4(t.x,e.x),D4(t.y,e.y)}function A4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function T4(t,e,n,r,i){return t-=e,t=Vg(t,1/n,r),i!==void 0&&(t=Vg(t,1/i,r)),t}function FCe(t,e=0,n=1,r=.5,i,a=t,o=t){if(eo.test(e)&&(e=parseFloat(e),e=xn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let s=xn(a.min,a.max,r);t===a&&(s-=e),t.min=T4(t.min,e,n,s,i),t.max=T4(t.max,e,n,s,i)}function M4(t,e,[n,r,i],a,o){FCe(t,e[n],e[r],e[i],e.scale,a,o)}const PCe=["x","scaleX","originX"],OCe=["y","scaleY","originY"];function I4(t,e,n,r){M4(t.x,e,PCe,n?n.x:void 0,r?r.x:void 0),M4(t.y,e,OCe,n?n.y:void 0,r?r.y:void 0)}function k4(t){return t.translate===0&&t.scale===1}function x7(t){return k4(t.x)&&k4(t.y)}function R4(t,e){return t.min===e.min&&t.max===e.max}function BCe(t,e){return R4(t.x,e.x)&&R4(t.y,e.y)}function F4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function b7(t,e){return F4(t.x,e.x)&&F4(t.y,e.y)}function P4(t){return Oi(t.x)/Oi(t.y)}function O4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class LCe{constructor(){this.members=[]}add(e){mC(this.members,e),e.scheduleRender()}remove(e){if(vC(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jCe(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:l,rotate:c,rotateX:f,rotateY:d,skewX:h,skewY:p}=n;l&&(r=`perspective(${l}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),d&&(r+=`rotateY(${d}deg) `),h&&(r+=`skewX(${h}deg) `),p&&(r+=`skewY(${p}deg) `)}const s=t.x.scale*e.x,u=t.y.scale*e.y;return(s!==1||u!==1)&&(r+=`scale(${s}, ${u})`),r||"none"}const Pu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Id=typeof window<"u"&&window.MotionDebug!==void 0,K1=["","X","Y","Z"],$Ce={visibility:"hidden"},B4=1e3;let zCe=0;function Y1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function w7(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=TL(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",dn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&w7(r)}function _7({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},s=e==null?void 0:e()){this.id=zCe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Id&&(Pu.totalNodes=Pu.resolvedTargetDeltas=Pu.recalculatedProjection=0),this.nodes.forEach(WCe),this.nodes.forEach(YCe),this.nodes.forEach(XCe),this.nodes.forEach(qCe),Id&&window.MotionDebug.record(Pu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new ACe)}addEventListener(o,s){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new gC),this.eventHandlers.get(o).add(s)}notifyListeners(o,...s){const u=this.eventHandlers.get(o);u&&u.notify(...s)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=SCe(o),this.instance=o;const{layoutId:u,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(l||u)&&(this.isLayoutDirty=!0),t){let f;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=TCe(d,250),hv.hasAnimatedSinceResize&&(hv.hasAnimatedSinceResize=!1,this.nodes.forEach(j4))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&c&&(u||l)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||tNe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=c.getProps(),x=!this.targetLayout||!b7(this.targetLayout,p)||h,g=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||g||d&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,g);const b={...fC(m,"layout"),onPlay:y,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else d||j4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,tu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(QCe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&w7(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:s,layout:u}=this.options;if(s===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(L4);return}this.isUpdating||this.nodes.forEach(GCe),this.isUpdating=!1,this.nodes.forEach(KCe),this.nodes.forEach(UCe),this.nodes.forEach(VCe),this.clearAllSnapshots();const s=to.now();cr.delta=Xo(0,1e3/60,s-cr.timestamp),cr.timestamp=s,cr.isProcessing=!0,j1.update.process(cr),j1.preRender.process(cr),j1.render.process(cr),cr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HCe),this.sharedNodes.forEach(ZCe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,dn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){dn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(s=!1),s){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!x7(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;o&&(s||Fu(this.latestValues)||c)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const s=this.measurePageBox();let u=this.removeElementScroll(s);return o&&(u=this.removeTransform(u)),nNe(u),{animationId:this.root.animationId,measuredBox:s,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:s}=this.options;if(!s)return Mn();const u=s.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(rNe))){const{scroll:c}=this.root;c&&(Cc(u.x,c.offset.x),Cc(u.y,c.offset.y))}return u}removeElementScroll(o){var s;const u=Mn();if(Vi(u,o),!((s=this.scroll)===null||s===void 0)&&s.wasRoot)return u;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:f,options:d}=c;c!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&Vi(u,o),Cc(u.x,f.offset.x),Cc(u.y,f.offset.y))}return u}applyTransform(o,s=!1){const u=Mn();Vi(u,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];!s&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Nc(u,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Fu(c.latestValues)&&Nc(u,c.latestValues)}return Fu(this.latestValues)&&Nc(u,this.latestValues),u}removeTransform(o){const s=Mn();Vi(s,o);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!Fu(l.latestValues))continue;Rw(l.latestValues)&&l.updateSnapshot();const c=Mn(),f=l.measurePageBox();Vi(c,f),I4(s,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return Fu(this.latestValues)&&I4(s,this.latestValues),s}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var s;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==u;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=cr.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mn(),this.relativeTargetOrigin=Mn(),Qd(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Mn(),this.targetWithTransforms=Mn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oCe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vi(this.target,this.layout.layoutBox),h7(this.target,this.targetDelta)):Vi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mn(),this.relativeTargetOrigin=Mn(),Qd(this.relativeTargetOrigin,this.target,h.target),Vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Id&&Pu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Rw(this.parent.latestValues)||d7(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const s=this.getLead(),u=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(l=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===cr.timestamp&&(l=!1),l)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;Vi(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;mCe(this.layoutCorrected,this.treeScale,this.path,u),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Mn());const{target:p}=s;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(A4(this.prevProjectionDelta.x,this.projectionDelta.x),A4(this.prevProjectionDelta.y,this.projectionDelta.y)),Xd(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!O4(this.projectionDelta.x,this.prevProjectionDelta.x)||!O4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Id&&Pu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var s;if((s=this.options.visualElement)===null||s===void 0||s.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ec(),this.projectionDelta=Ec(),this.projectionDeltaWithTransform=Ec()}setAnimationOrigin(o,s=!1){const u=this.snapshot,l=u?u.latestValues:{},c={...this.latestValues},f=Ec();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const d=Mn(),h=u?u.source:void 0,p=this.layout?this.layout.source:void 0,m=h!==p,y=this.getStack(),v=!y||y.members.length<=1,x=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(eNe));this.animationProgress=0;let g;this.mixTargetDelta=b=>{const w=b/1e3;$4(f.x,o.x,w),$4(f.y,o.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qd(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),JCe(this.relativeTarget,this.relativeTargetOrigin,d,w),g&&BCe(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=Mn()),Vi(g,this.relativeTarget)),m&&(this.animationValues=c,ICe(c,l,this.latestValues,w,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(tu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=dn.update(()=>{hv.hasAnimatedSinceResize=!0,this.currentAnimation=NCe(0,B4,{...o,onUpdate:s=>{this.mixTargetDelta(s),o.onUpdate&&o.onUpdate(s)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(B4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:s,target:u,layout:l,latestValues:c}=o;if(!(!s||!u||!l)){if(this!==o&&this.layout&&l&&E7(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||Mn();const f=Oi(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const d=Oi(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+d}Vi(s,u),Nc(s,c),Xd(this.projectionDeltaWithTransform,this.layoutCorrected,s,c)}}registerSharedNode(o,s){this.sharedNodes.has(o)||this.sharedNodes.set(o,new LCe),this.sharedNodes.get(o).add(s);const l=s.options.initialPromotionConfig;s.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(s):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:s,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let s=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(s=!0),!s)return;const l={};u.z&&Y1("z",o,l,this.animationValues);for(let c=0;c<K1.length;c++)Y1(`rotate${K1[c]}`,o,l,this.animationValues),Y1(`skew${K1[c]}`,o,l,this.animationValues);o.render();for(const c in l)o.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);o.scheduleRender()}getProjectionStyles(o){var s,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $Ce;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=fv(o==null?void 0:o.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=fv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Fu(this.latestValues)&&(m.transform=c?c({},""):"none",this.hasProjected=!1),m}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),l.transform=jCe(this.projectionDeltaWithTransform,this.treeScale,d),c&&(l.transform=c(d,l.transform));const{x:h,y:p}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,f.animationValues?l.opacity=f===this?(u=(s=d.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Lg){if(d[m]===void 0)continue;const{correct:y,applyTo:v}=Lg[m],x=l.transform==="none"?d[m]:y(d[m],f);if(v){const g=v.length;for(let b=0;b<g;b++)l[v[b]]=x}else l[m]=x}return this.options.layoutId&&(l.pointerEvents=f===this?fv(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var s;return(s=o.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(L4),this.root.sharedNodes.clear()}}}function UCe(t){t.updateLayout()}function VCe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,o=n.source!==t.layout.source;a==="size"?Wi(f=>{const d=o?n.measuredBox[f]:n.layoutBox[f],h=Oi(d);d.min=r[f].min,d.max=d.min+h}):E7(a,n.layoutBox,r)&&Wi(f=>{const d=o?n.measuredBox[f]:n.layoutBox[f],h=Oi(r[f]);d.max=d.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+h)});const s=Ec();Xd(s,r,n.layoutBox);const u=Ec();o?Xd(u,t.applyTransform(i,!0),n.measuredBox):Xd(u,r,n.layoutBox);const l=!x7(s);let c=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=Mn();Qd(p,n.layoutBox,d.layoutBox);const m=Mn();Qd(m,r,h.layoutBox),b7(p,m)||(c=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function WCe(t){Id&&Pu.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function qCe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HCe(t){t.clearSnapshot()}function L4(t){t.clearMeasurements()}function GCe(t){t.isLayoutDirty=!1}function KCe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function j4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function YCe(t){t.resolveTargetDelta()}function XCe(t){t.calcProjection()}function QCe(t){t.resetSkewAndRotation()}function ZCe(t){t.removeLeadSnapshot()}function $4(t,e,n){t.translate=xn(e.translate,0,n),t.scale=xn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function z4(t,e,n,r){t.min=xn(e.min,n.min,r),t.max=xn(e.max,n.max,r)}function JCe(t,e,n,r){z4(t.x,e.x,n.x,r),z4(t.y,e.y,n.y,r)}function eNe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const tNe={duration:.45,ease:[.4,0,.1,1]},U4=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),V4=U4("applewebkit/")&&!U4("chrome/")?Math.round:Ri;function W4(t){t.min=V4(t.min),t.max=V4(t.max)}function nNe(t){W4(t.x),W4(t.y)}function E7(t,e,n){return t==="position"||t==="preserve-aspect"&&!aCe(P4(e),P4(n),.2)}function rNe(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const iNe=_7({attachResizeListener:(t,e)=>Wh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),X1={current:void 0},C7=_7({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!X1.current){const t=new iNe({});t.mount(window),t.setOptions({layoutScroll:!0}),X1.current=t}return X1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),aNe={pan:{Feature:wCe},drag:{Feature:bCe,ProjectionNode:C7,MeasureLayout:v7}};function q4(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&dn.postRender(()=>a(e,Mp(e)))}class oNe extends Eu{mount(){const{current:e}=this.node;e&&(this.unmount=o_e(e,n=>(q4(this.node,n,"Start"),r=>q4(this.node,r,"End"))))}unmount(){}}class sNe extends Eu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tp(Wh(this.node.current,"focus",()=>this.onFocus()),Wh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function H4(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&dn.postRender(()=>a(e,Mp(e)))}class uNe extends Eu{mount(){const{current:e}=this.node;e&&(this.unmount=c_e(e,n=>(H4(this.node,n,"Start"),(r,{success:i})=>H4(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Pw=new WeakMap,Q1=new WeakMap,lNe=t=>{const e=Pw.get(t.target);e&&e(t)},cNe=t=>{t.forEach(lNe)};function fNe({root:t,...e}){const n=t||document;Q1.has(n)||Q1.set(n,{});const r=Q1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(cNe,{root:t,...e})),r[i]}function dNe(t,e,n){const r=fNe(e);return Pw.set(t,n),r.observe(t),()=>{Pw.delete(t),r.unobserve(t)}}const hNe={some:0,all:1};class pNe extends Eu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:hNe[i]},s=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,a&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=l?c:f;d&&d(u)};return dNe(this.node.current,o,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(mNe(e,n))&&this.startObserver()}unmount(){}}function mNe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const vNe={inView:{Feature:pNe},tap:{Feature:uNe},focus:{Feature:sNe},hover:{Feature:oNe}},gNe={layout:{ProjectionNode:C7,MeasureLayout:v7}},Ow={current:null},N7={current:!1};function yNe(){if(N7.current=!0,!!XE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ow.current=t.matches;t.addListener(e),e()}else Ow.current=!1}const xNe=[...XL,Sr,nu],bNe=t=>xNe.find(YL(t)),G4=new WeakMap;function wNe(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Fr(i))t.addValue(r,i);else if(Fr(a))t.addValue(r,Uh(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Uh(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const K4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _Ne{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=EC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=to.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,dn.render(this.render,!1,!0))};const{latestValues:u,renderState:l,onUpdate:c}=o;this.onUpdate=c,this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!a,this.isControllingVariants=wy(n),this.isVariantNode=iL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const p=d[h];u[h]!==void 0&&Fr(p)&&p.set(u[h],!1)}}mount(e){this.current=e,G4.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),N7.current||yNe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ow.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){G4.delete(this.current),this.projection&&this.projection.unmount(),tu(this.notifyUpdate),tu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ll.has(e),i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&dn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yf){const n=yf[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<K4.length;r++){const i=K4[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=wNe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Uh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(GL(i)||LL(i))?i=parseFloat(i):!bNe(i)&&nu.test(n)&&(i=WL(e,n)),this.setBaseTarget(e,Fr(i)?i.get():i)),Fr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=rC(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Fr(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new gC),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class S7 extends _Ne{constructor(){super(...arguments),this.KeyframeResolver=QL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function ENe(t){return window.getComputedStyle(t)}class CNe extends S7{constructor(){super(...arguments),this.type="html",this.renderInstance=hL}readValueFromInstance(e,n){if(Ll.has(n)){const r=_C(n);return r&&r.default||0}else{const r=ENe(e),i=(cL(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return p7(e,n)}build(e,n,r){oC(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return cC(e,n,r)}}class NNe extends S7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ll.has(n)){const r=_C(n);return r&&r.default||0}return n=pL.has(n)?n:eC(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return gL(e,n,r)}build(e,n,r){sC(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){mL(e,n,r,i)}mount(e){this.isSVGTag=lC(e.tagName),super.mount(e)}}const SNe=(t,e)=>nC(t)?new NNe(e):new CNe(e,{allowProjection:t!==W.Fragment}),DNe=J2e({...XEe,...vNe,...aNe,...gNe},SNe),hn=p2e(DNe),ANe=({title:t,path:e,icon:n,color:r,description:i})=>S.jsx(hn.div,{whileHover:{y:-5},whileTap:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:S.jsx(Ai,{to:e,className:"block",children:S.jsxs("div",{className:`game-card ${r} h-full`,children:[S.jsx("div",{className:`p-3 rounded-full bg-${r} bg-opacity-20 mb-2`,children:S.jsx(n,{size:36,className:`text-${r}`})}),S.jsx("h3",{className:"text-xl font-bold text-center",children:t}),S.jsx("p",{className:"text-sm text-gray-600 text-center mt-2",children:i})]})})}),TNe=()=>{const t=[{title:"Memory Match",path:"/memory-game",icon:rW,color:"text-primary-500",description:"Find matching pairs of cards"},{title:"Whack-A-Mole",path:"/whack-a-mole",icon:lW,color:"text-accent-500",description:"Tap the moles as they appear"},{title:"Coloring Book",path:"/coloring-book",icon:gW,color:"text-secondary-500",description:"Color fun pictures"},{title:"Simple Puzzle",path:"/simple-puzzle",icon:xW,color:"text-success-500",description:"Solve picture puzzles"},{title:"Balloon Pop",path:"/balloon-pop",icon:mW,color:"text-error-500",description:"Pop colorful balloons"},{title:"Word Search",path:"/word-search",icon:bW,color:"text-primary-700",description:"Find hidden words"},{title:"Counting Game",path:"/counting-game",icon:n_,color:"text-warning-500",description:"Count objects and learn numbers"},{title:"Shape Sorter",path:"/shape-sorter",icon:Vv,color:"text-secondary-700",description:"Match shapes to their spots"},{title:"Catch Stars",path:"/catch-stars",icon:wh,color:"text-accent-700",description:"Catch falling stars"},{title:"Animal Sounds",path:"/animal-sounds",icon:vW,color:"text-success-700",description:"Match animals to their sounds"}];return S.jsxs("div",{className:"py-6",children:[S.jsxs(hn.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-10",children:[S.jsx("h1",{className:"text-4xl font-bold text-primary-700 mb-3",children:"Welcome to Kids Game Zone!"}),S.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Pick a fun game to play. Each game is designed to be simple, fun, and help you learn while playing!"})]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6",children:t.map((e,n)=>S.jsx(ANe,{title:e.title,path:e.path,icon:e.icon,color:e.color,description:e.description},n))})]})},fo=({title:t,children:e,instructions:n})=>S.jsxs(hn.div,{className:"game-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[S.jsx("h2",{className:"game-title",children:t}),n&&S.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg mb-6 border border-primary-200",children:[S.jsx("h3",{className:"font-bold text-primary-700 mb-2",children:"How to Play:"}),S.jsx("p",{className:"text-primary-800",children:n})]}),S.jsx("div",{className:"mb-8",children:e}),S.jsx("div",{className:"text-center mt-6",children:S.jsxs(Ai,{to:"/",className:"inline-flex items-center gap-2 btn btn-primary",children:[S.jsx(IP,{size:18}),"Back to Games"]})})]}),Y4=["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼"],MNe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState([]),[i,a]=W.useState(0),[o,s]=W.useState(!1);W.useEffect(()=>{u()},[]),W.useEffect(()=>{if(n.length===2){const[f,d]=n;t[f].emoji===t[d].emoji&&e(p=>p.map((m,y)=>y===f||y===d?{...m,isMatched:!0}:m));const h=setTimeout(()=>{r([])},1e3);return()=>clearTimeout(h)}},[n,t]),W.useEffect(()=>{t.length>0&&t.every(f=>f.isMatched)&&s(!0)},[t]);const u=()=>{const d=[...Y4,...Y4].map((h,p)=>({id:p,emoji:h,isFlipped:!1,isMatched:!1})).sort(()=>Math.random()-.5);e(d),r([]),a(0),s(!1)},l=f=>{n.length===2||t[f].isMatched||n.includes(f)||(e(d=>d.map((h,p)=>p===f?{...h,isFlipped:!0}:h)),r(d=>[...d,f]),n.length===1&&a(d=>d+1))},c=()=>{u()};return S.jsxs(fo,{title:"Memory Match",instructions:"Flip cards to find matching pairs. Remember where each card is located to make matches with fewer moves.",children:[S.jsx("div",{className:"text-center mb-4",children:S.jsxs("p",{className:"text-lg font-bold text-primary-600",children:["Moves: ",i]})}),S.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-md mx-auto",children:t.map((f,d)=>S.jsx(hn.div,{whileHover:{scale:f.isMatched?1:1.05},whileTap:{scale:f.isMatched?1:.95},className:"aspect-square",children:S.jsx("div",{onClick:()=>l(d),className:`w-full h-full rounded-lg cursor-pointer transition-all duration-300 flex items-center justify-center text-4xl ${f.isFlipped||f.isMatched?"bg-white border-2 border-primary-300 shadow-md":"bg-primary-500 shadow-lg"}`,children:(f.isFlipped||f.isMatched)&&f.emoji})},f.id))}),o&&S.jsxs(hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsxs("h3",{className:"text-2xl font-bold text-success-600 mb-4",children:["Congratulations! You completed the game in ",i," moves!"]}),S.jsx("button",{onClick:c,className:"btn btn-primary",children:"Play Again"})]})]})},INe=()=>{const[t,e]=W.useState(0),[n,r]=W.useState(30),[i,a]=W.useState(null),[o,s]=W.useState(!1),[u,l]=W.useState(!1),c=W.useRef(null),f=W.useRef(null),d=()=>{e(0),r(30),s(!0),l(!1),h()};W.useEffect(()=>(o&&(c.current=setInterval(()=>{r(m=>m<=1?(clearInterval(c.current),s(!1),l(!0),clearInterval(f.current),a(null),0):m-1)},1e3)),()=>{c.current&&clearInterval(c.current),f.current&&clearInterval(f.current)}),[o]);const h=()=>{f.current&&clearTimeout(f.current),a(null),setTimeout(()=>{if(!o)return;const m=Math.floor(Math.random()*9);a(m),f.current=setTimeout(()=>{a(null),h()},Math.random()*1e3+800)},300)},p=m=>{m===i&&(e(y=>y+1),a(null),h())};return S.jsxs(fo,{title:"Whack-A-Mole",instructions:"Click on the moles as they appear to score points. Be quick before they hide again!",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[S.jsxs("div",{className:"text-lg font-bold bg-primary-100 px-4 py-2 rounded-md",children:["Score: ",S.jsx("span",{className:"text-primary-700",children:t})]}),S.jsxs("div",{className:"text-lg font-bold bg-accent-100 px-4 py-2 rounded-md",children:["Time: ",S.jsxs("span",{className:"text-accent-700",children:[n,"s"]})]})]}),!o&&!u&&S.jsx("button",{onClick:d,className:"btn btn-primary",children:"Start Game"})]}),S.jsx("div",{className:"grid grid-cols-3 gap-4 max-w-sm mx-auto",children:Array.from({length:9}).map((m,y)=>S.jsxs(hn.div,{className:"relative bg-accent-200 h-24 rounded-full overflow-hidden",whileTap:{scale:.95},children:[S.jsx("div",{className:"absolute inset-0 bg-accent-800 bottom-1/2 rounded-t-full"}),i===y&&S.jsx(hn.div,{className:"absolute bottom-0 left-0 right-0 h-16 flex justify-center",initial:{y:60},animate:{y:0},transition:{duration:.2},onClick:()=>p(y),children:S.jsx("div",{className:"w-16 h-16 bg-accent-500 rounded-full flex items-center justify-center cursor-pointer",children:S.jsx("div",{className:"text-3xl",children:"🐹"})})})]},y))}),u&&S.jsxs(hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsxs("h3",{className:"text-2xl font-bold text-primary-600 mb-4",children:["Game Over! Your score: ",t]}),S.jsx("button",{onClick:d,className:"btn btn-primary",children:"Play Again"})]})]})},X4=["#ff0000","#ff9900","#ffff00","#00ff00","#0099ff","#6633ff","#ff66cc","#663300","#000000","#ffffff"],kNe=()=>{const t=W.useRef(null),[e,n]=W.useState(X4[0]),[r,i]=W.useState(!1),[a,o]=W.useState(!1),[s,u]=W.useState(10);W.useEffect(()=>{if(t.current){const m=t.current,y=m.getContext("2d");m.width=m.offsetWidth,m.height=m.offsetHeight,y&&(y.fillStyle="#ffffff",y.fillRect(0,0,m.width,m.height),l(y,m.width,m.height),o(!0))}},[]);const l=(m,y,v)=>{m.strokeStyle="#000",m.lineWidth=2,m.beginPath(),m.arc(y*.8,v*.2,40,0,Math.PI*2),m.stroke();for(let x=0;x<8;x++){const g=x*Math.PI/4,b=y*.8+Math.cos(g)*40,w=v*.2+Math.sin(g)*40,_=y*.8+Math.cos(g)*60,E=v*.2+Math.sin(g)*60;m.beginPath(),m.moveTo(b,w),m.lineTo(_,E),m.stroke()}m.beginPath(),m.rect(y*.3,v*.5,y*.4,v*.3),m.stroke(),m.beginPath(),m.moveTo(y*.3,v*.5),m.lineTo(y*.5,v*.3),m.lineTo(y*.7,v*.5),m.stroke(),m.beginPath(),m.rect(y*.45,v*.65,y*.1,v*.15),m.stroke(),m.beginPath(),m.rect(y*.55,v*.55,y*.1,v*.1),m.stroke(),m.beginPath(),m.moveTo(0,v*.85),m.lineTo(y,v*.85),m.stroke()},c=m=>{if(!t.current)return;i(!0);const y=t.current,v=y.getContext("2d");if(v){v.strokeStyle=e,v.lineWidth=s,v.lineCap="round";let x,g;"touches"in m?(x=m.touches[0].clientX,g=m.touches[0].clientY):(x=m.clientX,g=m.clientY);const b=y.getBoundingClientRect(),w=x-b.left,_=g-b.top;v.beginPath(),v.moveTo(w,_)}},f=m=>{if(!r||!t.current)return;const y=t.current,v=y.getContext("2d");if(v){let x,g;"touches"in m?(x=m.touches[0].clientX,g=m.touches[0].clientY,m.preventDefault()):(x=m.clientX,g=m.clientY);const b=y.getBoundingClientRect(),w=x-b.left,_=g-b.top;v.lineTo(w,_),v.stroke()}},d=()=>{i(!1)},h=()=>{if(!t.current)return;const m=t.current,y=m.getContext("2d");y&&(y.fillStyle="#ffffff",y.fillRect(0,0,m.width,m.height),l(y,m.width,m.height))},p=m=>{u(Number(m.target.value))};return S.jsxs(fo,{title:"Coloring Book",instructions:"Select a color and brush size, then color the picture. You can clear the canvas to start over.",children:[S.jsxs("div",{className:"mb-6",children:[S.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:X4.map(m=>S.jsx(hn.div,{whileTap:{scale:.9},className:`w-10 h-10 rounded-full cursor-pointer ${m===e?"ring-4 ring-primary-500":""}`,style:{backgroundColor:m,border:"1px solid #ccc"},onClick:()=>n(m)},m))}),S.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[S.jsx("span",{className:"text-sm",children:"Brush Size:"}),S.jsx("input",{type:"range",min:"1",max:"30",value:s,onChange:p,className:"w-48"}),S.jsxs("span",{className:"text-sm",children:[s,"px"]})]}),S.jsx("div",{className:"text-center",children:S.jsx("button",{onClick:h,className:"btn btn-secondary text-sm",children:"Clear Canvas"})})]}),S.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden bg-white",children:S.jsx("canvas",{ref:t,width:600,height:400,className:"w-full touch-none",style:{height:"400px"},onMouseDown:c,onMouseMove:f,onMouseUp:d,onMouseLeave:d,onTouchStart:c,onTouchMove:f,onTouchEnd:d})})]})},RNe="https://images.pexels.com/photos/1564506/pexels-photo-1564506.jpeg?auto=compress&cs=tinysrgb&w=600",FNe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(!1),[i,a]=W.useState("easy"),[o,s]=W.useState(null),[u,l]=W.useState(0);W.useEffect(()=>{c()},[i]),W.useEffect(()=>{t.length>0&&t.every(h=>h.currentPosition===h.correctPosition)&&r(!0)},[t]);const c=()=>{const h=i==="easy"?3:4,p=h*h,y=[...Array.from({length:p},(v,x)=>({id:x,correctPosition:x,currentPosition:x}))];for(let v=y.length-1;v>0;v--){const x=Math.floor(Math.random()*(v+1));[y[v].currentPosition,y[x].currentPosition]=[y[x].currentPosition,y[v].currentPosition]}e(y),s(null),r(!1),l(0)},f=h=>{n||(o===null?s(h):(e(p=>{const m=[...p],y=m.find(g=>g.id===o),v=m.find(g=>g.id===h),x=y.currentPosition;return y.currentPosition=v.currentPosition,v.currentPosition=x,m}),s(null),l(p=>p+1)))},d=(h,p)=>{const m=100/p,y=Math.floor(h.correctPosition/p),v=h.correctPosition%p;return{width:`${m}%`,height:`${m}%`,backgroundImage:`url(${RNe})`,backgroundSize:`${p*100}%`,backgroundPosition:`${v*100/(p-1)}% ${y*100/(p-1)}%`}};return S.jsxs(fo,{title:"Simple Puzzle",instructions:"Click on two pieces to swap their positions. Try to arrange the picture correctly with the fewest moves.",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[S.jsx("button",{onClick:()=>a("easy"),className:`btn ${i==="easy"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Easy (3×3)"}),S.jsx("button",{onClick:()=>a("medium"),className:`btn ${i==="medium"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Medium (4×4)"})]}),S.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[S.jsxs("div",{className:"text-lg font-bold",children:["Moves: ",S.jsx("span",{className:"text-primary-700",children:u})]}),S.jsx("button",{onClick:c,className:"btn btn-secondary",children:"Shuffle"})]})]}),S.jsx("div",{className:"max-w-md mx-auto aspect-square border-4 border-primary-600 rounded-lg overflow-hidden",children:S.jsx("div",{className:"relative w-full h-full",children:t.sort((h,p)=>h.currentPosition-p.currentPosition).map(h=>{const p=i==="easy"?3:4,m=100/p,y=Math.floor(h.currentPosition/p),v=h.currentPosition%p;return S.jsx(hn.div,{className:`absolute cursor-pointer ${o===h.id?"ring-4 ring-primary-500 z-10":""}`,style:{...d(h,p),top:`${y*m}%`,left:`${v*m}%`},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>f(h.id)},h.id)})})}),n&&S.jsxs(hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsxs("h3",{className:"text-2xl font-bold text-success-600 mb-4",children:["Puzzle Solved in ",u," moves!"]}),S.jsx("button",{onClick:c,className:"btn btn-primary",children:"Play Again"})]})]})},Q4=["#ff0000","#ff9900","#ffff00","#00ff00","#0099ff","#6633ff","#ff66cc"],PNe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(0),[i,a]=W.useState(30),[o,s]=W.useState(!1),[u,l]=W.useState(!1),c=W.useRef(null),f=W.useRef(0),d=W.useRef(null),h=W.useRef(0),p=()=>{r(0),a(30),e([]),s(!0),l(!1),h.current=Date.now()};W.useEffect(()=>(o&&(d.current=setInterval(()=>{a(v=>v<=1?(clearInterval(d.current),s(!1),l(!0),cancelAnimationFrame(f.current),0):v-1)},1e3)),()=>{d.current&&clearInterval(d.current),f.current&&cancelAnimationFrame(f.current)}),[o]),W.useEffect(()=>{if(!o)return;const v=()=>{const x=Date.now();x-h.current>600&&(m(),h.current=x),e(g=>g.map(b=>({...b,y:b.y-b.speed})).filter(b=>b.y+b.size>0)),f.current=requestAnimationFrame(v)};return f.current=requestAnimationFrame(v),()=>{cancelAnimationFrame(f.current)}},[o]);const m=()=>{if(!c.current)return;const v=c.current,x=v.clientWidth,g={id:Date.now(),x:Math.random()*(x-60),y:v.clientHeight,size:Math.random()*40+40,color:Q4[Math.floor(Math.random()*Q4.length)],speed:Math.random()*2+1};e(b=>[...b,g])},y=v=>{e(x=>x.filter(g=>g.id!==v)),r(x=>x+1)};return S.jsxs(fo,{title:"Balloon Pop",instructions:"Pop as many balloons as you can before time runs out! Click on the balloons to pop them.",children:[S.jsxs("div",{className:"text-center mb-4",children:[S.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[S.jsxs("div",{className:"text-lg font-bold bg-primary-100 px-4 py-2 rounded-md",children:["Score: ",S.jsx("span",{className:"text-primary-700",children:n})]}),S.jsxs("div",{className:"text-lg font-bold bg-accent-100 px-4 py-2 rounded-md",children:["Time: ",S.jsxs("span",{className:"text-accent-700",children:[i,"s"]})]})]}),!o&&!u&&S.jsx("button",{onClick:p,className:"btn btn-primary",children:"Start Game"})]}),S.jsxs("div",{ref:c,className:"relative bg-gradient-to-b from-sky-200 to-sky-400 h-96 rounded-lg overflow-hidden border-2 border-primary-300",children:[t.map(v=>S.jsxs(hn.div,{className:"absolute cursor-pointer",style:{left:v.x,top:v.y,width:v.size,height:v.size*1.2},initial:{scale:.8},animate:{scale:1},whileTap:{scale:1.2,opacity:0},onClick:()=>y(v.id),children:[S.jsx("div",{className:"absolute w-full h-[83%] rounded-full",style:{backgroundColor:v.color}}),S.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-[20%] h-[20%] rounded-full",style:{backgroundColor:v.color}}),S.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-[2px] h-[15%] bg-gray-300"})]},v.id)),!o&&!u&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-10",children:S.jsx("div",{className:"text-3xl font-bold text-white shadow-lg",children:"Click Start to Play"})})]}),u&&S.jsxs(hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsxs("h3",{className:"text-2xl font-bold text-primary-600 mb-4",children:["Game Over! You popped ",n," balloons!"]}),S.jsx("button",{onClick:p,className:"btn btn-primary",children:"Play Again"})]})]})},Z4=[["CAT","DOG","PIG","COW","BIRD"],["RED","BLUE","GREEN","PINK","YELLOW"],["SUN","MOON","STAR","SKY","CLOUD"],["BALL","DOLL","KITE","BIKE","BOOK"]],ONe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState([]),[i,a]=W.useState([]),[o,s]=W.useState([]),[u,l]=W.useState(!1),[c,f]=W.useState("easy"),[d,h]=W.useState(!1);W.useEffect(()=>{p()},[c]),W.useEffect(()=>{n.length>0&&i.length===n.length&&l(!0)},[i,n]);const p=()=>{const g=c==="easy"?8:10,b=Z4[Math.floor(Math.random()*Z4.length)],w=Array(g).fill(null).map((E,C)=>Array(g).fill(null).map((N,D)=>({row:C,col:D,letter:"",isSelected:!1,isRevealed:!1}))),_=[];for(const E of b){const C=m(w,E);if(C){_.push(E);for(const N of C.cells)w[N.row][N.col].letter=N.letter}if(_.length>=5)break}for(let E=0;E<g;E++)for(let C=0;C<g;C++)w[E][C].letter||(w[E][C].letter=String.fromCharCode(65+Math.floor(Math.random()*26)));e(w),r(_),a([]),s([]),l(!1),h(!1)},m=(g,b)=>{const w=g.length,_=[[0,1],[1,0],[1,1],[-1,1],[1,-1]];for(let E=0;E<20;E++){const C=_[Math.floor(Math.random()*_.length)],[N,D]=C,A=Math.floor(Math.random()*w),T=Math.floor(Math.random()*w);let R=!0;const F=[];for(let O=0;O<b.length;O++){const I=A+O*N,M=T+O*D;if(I<0||I>=w||M<0||M>=w){R=!1;break}if(g[I][M].letter&&g[I][M].letter!==b[O]){R=!1;break}F.push({row:I,col:M,letter:b[O],isSelected:!1,isRevealed:!1})}if(R)return{word:b,cells:F}}return null},y=(g,b)=>{if(u)return;const w=t[g][b];if(o.length===0){s([w]),e(A=>{const T=[...A];return T[g][b]={...w,isSelected:!0},T});return}if(o.some(A=>A.row===g&&A.col===b)){if(o[o.length-1].row===g&&o[o.length-1].col===b){const A=o.slice(0,-1);s(A),e(T=>{const R=[...T];return R[g][b]={...w,isSelected:!1},R})}return}const _=o[o.length-1],E=Math.abs(_.row-g),C=Math.abs(_.col-b);if(E>1||C>1)return;if(o.length>1){const A=o[o.length-2],T=_.row-A.row,R=_.col-A.col,F=g-_.row,O=b-_.col;if(T!==F||R!==O)return}const N=[...o,w];s(N),e(A=>{const T=[...A];return T[g][b]={...w,isSelected:!0},T});const D=N.map(A=>A.letter).join("");n.includes(D)&&!i.includes(D)&&(a(A=>[...A,D]),e(A=>{const T=[...A.map(R=>[...R])];for(const R of N)T[R.row][R.col]={...T[R.row][R.col],isSelected:!1,isRevealed:!0};return T}),s([]))},v=()=>{s([]),e(g=>{const b=[...g.map(w=>[...w])];for(let w=0;w<b.length;w++)for(let _=0;_<b[w].length;_++)b[w][_].isSelected&&!b[w][_].isRevealed&&(b[w][_]={...b[w][_],isSelected:!1});return b})},x=()=>{if(u||d||i.length>=n.length)return;const g=n.filter(w=>!i.includes(w));if(g.length===0)return;const b=g[0];e(w=>{const _=[...w.map(E=>[...E])];for(let E=0;E<_.length;E++)for(let C=0;C<_[E].length;C++)if(_[E][C].letter===b[0])for(const[N,D]of[[0,1],[1,0],[1,1],[-1,1],[1,-1]]){let A=!0;for(let T=1;T<b.length;T++){const R=E+T*N,F=C+T*D;if(R<0||R>=_.length||F<0||F>=_[E].length||_[R][F].letter!==b[T]){A=!1;break}}if(A){_[E][C]={..._[E][C],isSelected:!0};const T=E+N,R=C+D;return T>=0&&T<_.length&&R>=0&&R<_[E].length&&(_[T][R]={..._[T][R],isSelected:!0}),s([_[E][C],_[T][R]]),h(!0),_}}return _})};return S.jsxs(fo,{title:"Word Search",instructions:"Find the hidden words in the grid. Click and drag to select letters in a straight line.",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[S.jsx("button",{onClick:()=>f("easy"),className:`btn ${c==="easy"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Easy (8×8)"}),S.jsx("button",{onClick:()=>f("medium"),className:`btn ${c==="medium"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Medium (10×10)"})]}),S.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[S.jsx("button",{onClick:v,className:"btn btn-secondary text-sm",disabled:o.length===0,children:"Clear Selection"}),S.jsx("button",{onClick:x,className:"btn btn-accent text-sm",disabled:d||u,children:"Hint"}),S.jsx("button",{onClick:p,className:"btn bg-gray-200 hover:bg-gray-300 text-sm",children:"New Game"})]})]}),S.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[S.jsx("div",{className:"w-full md:w-1/3",children:S.jsxs("div",{className:"bg-primary-50 p-4 rounded-lg border border-primary-200",children:[S.jsx("h3",{className:"font-bold text-primary-700 mb-2",children:"Words to Find:"}),S.jsx("ul",{className:"space-y-2",children:n.map(g=>S.jsx("li",{className:`text-lg font-medium p-2 rounded ${i.includes(g)?"bg-success-100 text-success-700 line-through":"text-primary-800"}`,children:g},g))})]})}),S.jsx("div",{className:"w-full md:w-2/3",children:S.jsx("div",{className:"grid gap-1 mx-auto",style:{gridTemplateColumns:`repeat(${t.length}, 1fr)`},children:t.flat().map((g,b)=>S.jsx(hn.div,{className:`aspect-square flex items-center justify-center cursor-pointer text-lg font-bold rounded ${g.isRevealed?"bg-success-200 text-success-800":g.isSelected?"bg-primary-300 text-primary-800":"bg-white text-gray-800 hover:bg-gray-100 border border-gray-200"}`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>y(g.row,g.col),children:g.letter},b))})})]}),u&&S.jsxs(hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsx("h3",{className:"text-2xl font-bold text-success-600 mb-4",children:"Congratulations! You found all the words!"}),S.jsx("button",{onClick:p,className:"btn btn-primary",children:"Play Again"})]})]})},BNe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(0),[i,a]=W.useState(0),[o,s]=W.useState(!1),[u,l]=W.useState(null),[c,f]=W.useState(null);W.useEffect(()=>{d()},[]);const d=()=>{const m=[v=>S.jsx(wh,{size:24,className:"text-yellow-500"},v),v=>S.jsx(wb,{size:24,className:"text-red-500"},v),v=>S.jsx(bb,{size:24,className:"text-blue-500"},v),v=>S.jsx(Eb,{size:24,className:"text-green-500"},v),v=>S.jsx(Vv,{size:24,className:"text-purple-500"},v)],y=[];for(let v=0;v<10;v++){const x=m[Math.floor(Math.random()*m.length)],g=Math.floor(Math.random()*7)+1;let b=[g];for(;b.length<3;){const w=Math.floor(Math.random()*10)+1;b.includes(w)||b.push(w)}b=b.sort(()=>Math.random()-.5),y.push({shape:Array.from({length:g}).map((w,_)=>x(`shape-${v}-${_}`)),count:g,options:b})}e(y),r(0),a(0),s(!1),l(null),f(null)},h=m=>{if(u!==null)return;const y=t[n].count,v=m===y;l(m),f(v),v&&a(x=>x+1),setTimeout(()=>{n>=t.length-1?s(!0):(r(x=>x+1),l(null),f(null))},1500)},p=t[n];return S.jsxs(fo,{title:"Counting Game",instructions:"Count the shapes and click on the correct number.",children:[t.length>0&&!o&&S.jsxs("div",{className:"text-center",children:[S.jsxs("div",{className:"flex justify-center gap-8 mb-6",children:[S.jsxs("div",{className:"text-lg font-bold bg-primary-100 px-4 py-2 rounded-md",children:["Question: ",S.jsxs("span",{className:"text-primary-700",children:[n+1,"/",t.length]})]}),S.jsxs("div",{className:"text-lg font-bold bg-success-100 px-4 py-2 rounded-md",children:["Score: ",S.jsx("span",{className:"text-success-700",children:i})]})]}),S.jsxs(hn.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-8",children:[S.jsx("h3",{className:"text-xl font-bold mb-6 text-primary-700",children:"How many shapes do you see?"}),S.jsx("div",{className:"flex flex-wrap gap-4 justify-center mb-8 p-6 bg-gray-50 rounded-lg border-2 border-gray-200 max-w-md mx-auto",children:p.shape}),S.jsx("div",{className:"flex justify-center gap-4",children:p.options.map(m=>S.jsx(hn.button,{className:`w-16 h-16 rounded-full text-2xl font-bold flex items-center justify-center ${u===null?"bg-primary-500 text-white hover:bg-primary-600":u===m?c?"bg-success-500 text-white":"bg-error-500 text-white":m===p.count&&u!==null?"bg-success-500 text-white":"bg-gray-200 text-gray-800"}`,whileHover:{scale:u===null?1.1:1},whileTap:{scale:u===null?.95:1},onClick:()=>h(m),disabled:u!==null,children:m},m))})]},n)]}),o&&S.jsxs(hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[S.jsx("h3",{className:"text-2xl font-bold text-primary-600 mb-4",children:"Game Complete!"}),S.jsxs("p",{className:"text-lg mb-6",children:["You scored ",S.jsx("span",{className:"font-bold text-success-600",children:i})," out of ",S.jsx("span",{className:"font-bold",children:t.length}),"!"]}),S.jsx("button",{onClick:d,className:"btn btn-primary",children:"Play Again"})]})]})},LNe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(null),[i,a]=W.useState(0),[o,s]=W.useState(!1),[u,l]=W.useState("easy");W.useEffect(()=>{c()},[u]);const c=()=>{const m=["circle","square","triangle","star","heart"],y=["#ef4444","#f59e0b","#22c55e","#3b82f6","#d946ef"],v=u==="easy"?5:10,x=[];for(let b=0;b<v;b++){const w=b%m.length,_=b%y.length;x.push({id:`shape-${b}`,type:m[w],color:y[_],placed:!1})}const g=[...x].sort(()=>Math.random()-.5);e(g),r(null),a(0),s(!1)};W.useEffect(()=>{t.length>0&&i===t.length&&s(!0)},[i,t.length]);const f=m=>{r(m)},d=()=>{r(null)},h=m=>{if(!n)return;const y=t.find(v=>v.id===n);!y||y.placed||y.type===m&&(e(v=>v.map(x=>x.id===n?{...x,placed:!0}:x)),a(v=>v+1))},p=(m,y,v=40)=>{switch(m){case"circle":return S.jsx(bb,{size:v,color:y});case"square":return S.jsx(Eb,{size:v,color:y});case"triangle":return S.jsx(Vv,{size:v,color:y});case"star":return S.jsx(wh,{size:v,color:y});case"heart":return S.jsx(wb,{size:v,color:y});default:return null}};return S.jsxs(fo,{title:"Shape Sorter",instructions:"Drag each shape to its matching outline. Match all shapes to complete the game.",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[S.jsx("button",{onClick:()=>l("easy"),className:`btn ${u==="easy"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Easy (5 Shapes)"}),S.jsx("button",{onClick:()=>l("medium"),className:`btn ${u==="medium"?"btn-primary":"bg-gray-200 hover:bg-gray-300"}`,children:"Medium (10 Shapes)"})]}),S.jsxs("div",{className:"text-lg font-bold",children:["Placed: ",S.jsxs("span",{className:"text-primary-700",children:[i,"/",t.length]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[S.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border-2 border-gray-200",children:[S.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-primary-700",children:"Drop Shapes Here"}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[S.jsx("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center aspect-square",onDragOver:m=>m.preventDefault(),onDrop:()=>h("circle"),children:S.jsx(bb,{size:60,className:"text-gray-300"})}),S.jsx("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center aspect-square",onDragOver:m=>m.preventDefault(),onDrop:()=>h("square"),children:S.jsx(Eb,{size:60,className:"text-gray-300"})}),S.jsx("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center aspect-square",onDragOver:m=>m.preventDefault(),onDrop:()=>h("triangle"),children:S.jsx(Vv,{size:60,className:"text-gray-300"})}),S.jsx("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center aspect-square",onDragOver:m=>m.preventDefault(),onDrop:()=>h("star"),children:S.jsx(wh,{size:60,className:"text-gray-300"})}),S.jsx("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center aspect-square",onDragOver:m=>m.preventDefault(),onDrop:()=>h("heart"),children:S.jsx(wb,{size:60,className:"text-gray-300"})})]})]}),S.jsxs("div",{className:"bg-white p-6 rounded-lg border-2 border-gray-200",children:[S.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-primary-700",children:"Drag Shapes"}),S.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:t.map(m=>!m.placed&&S.jsx(hn.div,{className:"cursor-grab active:cursor-grabbing",whileHover:{scale:1.1},whileDrag:{scale:1.1},drag:!0,dragConstraints:{left:0,right:0,top:0,bottom:0},dragElastic:.1,onDragStart:()=>f(m.id),onDragEnd:d,draggable:"true",onDragOver:y=>y.preventDefault(),children:p(m.type,m.color,50)},m.id))})]})]}),o&&S.jsxs(hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsx("h3",{className:"text-2xl font-bold text-success-600 mb-4",children:"Great job! You sorted all the shapes!"}),S.jsx("button",{onClick:c,className:"btn btn-primary",children:"Play Again"})]})]})},jNe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState(50),[i,a]=W.useState(0),[o,s]=W.useState(3),[u,l]=W.useState(!1),[c,f]=W.useState(!1),d=W.useRef(null),h=W.useRef(),p=W.useRef(0),m=W.useRef(1),y=["#f59e0b","#d946ef","#3b82f6","#ef4444","#22c55e"],v=()=>{e([]),a(0),s(3),l(!0),f(!1),m.current=1,p.current=0};W.useEffect(()=>{if(!u)return;const w=_=>{_-p.current>800&&(x(),p.current=_),e(E=>{var R;const C=((R=d.current)==null?void 0:R.clientHeight)||400,N=E.map(F=>({...F,y:F.y+F.speed*m.current})),D=N.filter(F=>F.y>C),A=D.filter(F=>{const I=F.x+F.size/2,M=n*d.current.clientWidth/100-80/2,B=M+80;return I>=M&&I<=B});a(F=>F+A.length);const T=D.length-A.length;return T>0&&s(F=>{const O=F-T;return O<=0?(l(!1),f(!0),0):O}),m.current+=2e-4,N.filter(F=>F.y<=C)}),h.current=requestAnimationFrame(w)};return h.current=requestAnimationFrame(w),()=>{h.current&&cancelAnimationFrame(h.current)}},[u,n]);const x=()=>{if(!d.current)return;const w=d.current.clientWidth,_=Math.random()*20+30,E={id:Date.now(),x:Math.random()*(w-_),y:-_,speed:Math.random()*2+2,rotation:Math.random()*360,size:_,color:y[Math.floor(Math.random()*y.length)]};e(C=>[...C,E])},g=w=>{if(!d.current||!u)return;const _=d.current.clientWidth,E=d.current.getBoundingClientRect(),N=(w.clientX-E.left)/_*100;r(Math.max(10,Math.min(90,N)))},b=w=>{if(!d.current||!u)return;const _=d.current.clientWidth,E=d.current.getBoundingClientRect(),N=(w.touches[0].clientX-E.left)/_*100;r(Math.max(10,Math.min(90,N)))};return S.jsxs(fo,{title:"Catch the Stars",instructions:"Move the basket left and right to catch falling stars. Don't let them hit the ground!",children:[S.jsxs("div",{className:"text-center mb-4",children:[S.jsxs("div",{className:"flex justify-center gap-8 mb-4",children:[S.jsxs("div",{className:"text-lg font-bold bg-primary-100 px-4 py-2 rounded-md",children:["Score: ",S.jsx("span",{className:"text-primary-700",children:i})]}),S.jsxs("div",{className:"text-lg font-bold bg-accent-100 px-4 py-2 rounded-md",children:["Lives: ",S.jsx("span",{className:"text-accent-700",children:o})]})]}),!u&&!c&&S.jsx("button",{onClick:v,className:"btn btn-primary",children:"Start Game"})]}),S.jsxs("div",{ref:d,className:"relative bg-gradient-to-b from-blue-900 to-purple-900 h-96 rounded-lg overflow-hidden border-2 border-primary-300",onMouseMove:g,onTouchMove:b,children:[t.map(w=>S.jsx(hn.div,{className:"absolute",style:{left:w.x,top:w.y,width:w.size,height:w.size,transform:`rotate(${w.rotation}deg)`,color:w.color},animate:{rotate:w.rotation+360},transition:{duration:3,repeat:1/0,ease:"linear"},children:S.jsx(wh,{size:w.size,fill:w.color})},w.id)),S.jsx("div",{className:"absolute bottom-0",style:{left:`calc(${n}% - 40px)`,transition:"left 0.1s ease-out"},children:S.jsx("div",{className:"w-80 h-16 flex justify-center",children:S.jsx("div",{className:"w-60 h-12 bg-accent-500 rounded-t-3xl border-t-2 border-l-2 border-r-2 border-accent-300"})})}),!u&&!c&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30",children:S.jsx("div",{className:"text-3xl font-bold text-white shadow-lg",children:"Click Start to Play"})})]}),c&&S.jsxs(hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsxs("h3",{className:"text-2xl font-bold text-primary-600 mb-4",children:["Game Over! Your score: ",i]}),S.jsx("button",{onClick:v,className:"btn btn-primary",children:"Play Again"})]})]})},$Ne=[{name:"Dog",image:"https://images.pexels.com/photos/1805164/pexels-photo-1805164.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Woof woof!"},{name:"Cat",image:"https://images.pexels.com/photos/1170986/pexels-photo-1170986.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Meow meow!"},{name:"Cow",image:"https://images.pexels.com/photos/735968/pexels-photo-735968.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Moo moo!"},{name:"Duck",image:"https://images.pexels.com/photos/162140/duckling-birds-yellow-fluffy-162140.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Quack quack!"},{name:"Horse",image:"https://images.pexels.com/photos/635499/pexels-photo-635499.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Neigh neigh!"},{name:"Pig",image:"https://images.pexels.com/photos/51311/pig-piglet-small-pig-cute-51311.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Oink oink!"},{name:"Sheep",image:"https://images.pexels.com/photos/288621/pexels-photo-288621.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Baa baa!"},{name:"Chicken",image:"https://images.pexels.com/photos/1405930/pexels-photo-1405930.jpeg?auto=compress&cs=tinysrgb&w=300",sound:"Cluck cluck!"}],zNe=()=>{const[t,e]=W.useState([]),[n,r]=W.useState([]),[i,a]=W.useState(null),[o,s]=W.useState(null),[u,l]=W.useState(0),[c,f]=W.useState(!1),[d,h]=W.useState(null);W.useEffect(()=>{p()},[]);const p=()=>{const x=[...$Ne].sort(()=>Math.random()-.5).slice(0,4),g=x.map((E,C)=>({id:C,name:E.name,image:E.image,sound:E.sound,matched:!1})),b=x.map((E,C)=>({id:C+4,name:E.name,image:E.image,sound:E.sound,matched:!1})),w=[...g].sort(()=>Math.random()-.5),_=[...b].sort(()=>Math.random()-.5);e(w),r(_),a(null),s(null),l(0),f(!1),h(null)};W.useEffect(()=>{t.length>0&&u===t.length&&f(!0)},[u,t.length]);const m=x=>{x.matched||(i==null?void 0:i.id)===x.id||d||(a(x),o&&v(x,o))},y=x=>{x.matched||(o==null?void 0:o.id)===x.id||d||(s(x),i&&v(i,x))},v=(x,g)=>{x.name===g.name?(h("correct"),setTimeout(()=>{e(b=>b.map(w=>w.id===x.id?{...w,matched:!0}:w)),r(b=>b.map(w=>w.id===g.id?{...w,matched:!0}:w)),l(b=>b+1),a(null),s(null),h(null)},1e3)):(h("incorrect"),setTimeout(()=>{a(null),s(null),h(null)},1e3))};return S.jsxs(fo,{title:"Animal Sounds",instructions:"Match each animal to the sound it makes. Select an animal, then select the correct sound to make a match.",children:[S.jsxs("div",{className:"text-center mb-6",children:[S.jsxs("div",{className:"text-lg font-bold",children:["Matches: ",S.jsxs("span",{className:"text-primary-700",children:[u,"/",t.length]})]}),d&&S.jsx("div",{className:`mt-2 text-lg font-bold ${d==="correct"?"text-success-600":"text-error-600"}`,children:d==="correct"?"Correct match!":"Try again!"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-primary-700",children:"Animals"}),S.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(x=>S.jsxs(hn.div,{className:`bg-white rounded-lg overflow-hidden cursor-pointer border-2 ${x.matched?"border-success-500":(i==null?void 0:i.id)===x.id?"border-primary-500":"border-gray-200 hover:border-primary-300"}`,whileHover:{scale:x.matched?1:1.03},whileTap:{scale:x.matched?1:.98},onClick:()=>m(x),children:[S.jsx("div",{className:"aspect-square overflow-hidden",children:S.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover"})}),S.jsx("div",{className:"p-2 text-center font-bold",children:x.name})]},x.id))})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-4 text-center text-primary-700",children:"Sounds"}),S.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.map(x=>S.jsx(hn.div,{className:`bg-white rounded-lg p-4 cursor-pointer border-2 ${x.matched?"border-success-500":(o==null?void 0:o.id)===x.id?"border-primary-500":"border-gray-200 hover:border-primary-300"}`,whileHover:{scale:x.matched?1:1.02},whileTap:{scale:x.matched?1:.98},onClick:()=>y(x),children:S.jsx("div",{className:"text-center text-xl font-bold",children:x.sound})},x.id))})]})]}),c&&S.jsxs(hn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:[S.jsx("h3",{className:"text-2xl font-bold text-success-600 mb-4",children:"Great job! You matched all the animals with their sounds!"}),S.jsx("button",{onClick:p,className:"btn btn-primary",children:"Play Again"})]})]})},UNe=({onWebcamReady:t})=>{const e=W.useRef(null),[n,r]=W.useState(null),[i,a]=W.useState(null);return W.useEffect(()=>{let o=null;return(async()=>{try{o=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"},audio:!1}),e.current&&(e.current.srcObject=o,r(!0),a(null),e.current.onloadedmetadata=()=>{e.current&&(e.current.play(),t(e.current))})}catch(u){console.error("Error accessing camera:",u),r(!1),u.name==="NotAllowedError"?a("Camera access denied. Please enable camera permissions."):u.name==="NotFoundError"?a("No camera detected on your device."):a("Error accessing camera. Please try again.")}})(),()=>{o&&o.getTracks().forEach(u=>u.stop())}},[t]),n===!1?S.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-md",children:S.jsx("div",{className:"flex",children:S.jsxs("div",{className:"ml-3",children:[S.jsx("p",{className:"text-sm text-red-700",children:i}),S.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors",children:"Retry"})]})})}):S.jsx("video",{ref:e,autoPlay:!0,playsInline:!0,muted:!0,style:{position:"fixed",top:"-9999px"}})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var D7=function(t,e){return(D7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(t,e)};function ja(t,e){function n(){this.constructor=t}D7(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Ve(t,e,n,r){return new(n||(n=Promise))(function(i,a){function o(l){try{u(r.next(l))}catch(c){a(c)}}function s(l){try{u(r.throw(l))}catch(c){a(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,s)}u((r=r.apply(t,[])).next())})}function We(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(f){c=[6,f],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var VNe=function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(e,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=e,this.platform=n},t.prototype.registerFlag=function(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){var i=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+i+"."),this.set(e,i)}},t.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,i=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(a){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return WNe(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(a){var o=a.split(":"),s=o[0],u=o[1];e.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},t}();function WNe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function _e(){return A7}var A7=null,Wg=new Map,Bw=new Map;function T7(t,e){var n=I7(t,e);return Wg.get(n)}function qNe(t){return Bw.get(t)}function J4(t){for(var e=Wg.entries(),n=[];;){var r=e.next(),i=r.done,a=r.value;if(i)break;var o=a[0],s=a[1];o.split("_")[0]===t&&n.push(s)}return n}function M7(t){var e=t.kernelName,n=t.backendName,r=I7(e,n);if(Wg.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");Wg.set(r,t)}function HNe(t){var e=t.kernelName;Bw.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),Bw.set(e,t)}function I7(t,e){return e+"_"+t}function Lw(t,e,n){return Math.max(t,Math.min(e,n))}function k7(t){return t%2==0?t:t+1}function GNe(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function X(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Wt(t,e,n){n===void 0&&(n=""),X(sr(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function Qf(t){X(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function bf(t,e,n){if(e===void 0&&(e=[]),n===void 0&&(n=!1),e==null&&(e=[]),Array.isArray(t)||no(t)&&!n)for(var r=0;r<t.length;++r)bf(t[r],e,n);else e.push(t);return e}function He(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function sr(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Fn(t){return t%1==0}function KNe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function jw(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function zc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function ek(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,i){var a=0,o=function(){if(t())r();else{a++;var s=e(a);n!=null&&a>=n?i():setTimeout(o,s)}};o()})}function YNe(t,e){for(var n=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function Qn(t,e){var n=e.length;return X((t=t==null?e.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),X(t.every(function(r){return Fn(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?n+r:r})}function ju(t,e){for(var n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:Qn(e,t).sort(),o=0,s=0;s<t.length;++s){if(a!=null){if(a[o]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(a[o]==null||a[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),a[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function qh(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function qg(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function XNe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function QNe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function ZNe(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function no(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function R7(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function JNe(t){if(t==null)return 0;var e=0;return t.forEach(function(n){return e+=n.length}),e}function DC(t){return typeof t=="string"||t instanceof String}function eSe(t){return typeof t=="boolean"}function tSe(t){return typeof t=="number"}function Ip(t){return Array.isArray(t)?Ip(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":tSe(t)?"float32":DC(t)?"string":eSe(t)?"bool":"float32"}function $w(t){return!!(t&&t.constructor&&t.call&&t.apply)}function zw(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function ro(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function F7(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=bf(t)),n&&XNe(t,e),function(a,o){return a instanceof Float32Array&&o==="float32"||a instanceof Int32Array&&o==="int32"||a instanceof Uint8Array&&o==="bool"}(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)Math.round(t[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function tk(t,e){if(t.length===0)return e[0];var n=t.reduce(function(r,i){return r*i});if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function r(i,a,o){var s=new Array;if(a.length===1)for(var u=a[0],l=0;l<u;l++)s[l]=o[i+l];else{u=a[0];var c=a.slice(1),f=c.reduce(function(d,h){return d*h});for(l=0;l<u;l++)s[l]=r(i+l*f,c,o)}return s}(0,t,e)}function P7(t,e){for(var n=kp(t,e),r=0;r<n.length;r++)n[r]=1;return n}function kp(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function qa(){return _e().platform.now()}function O7(t){t.forEach(function(e){X(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function nSe(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",_e().platform.encode(t,e)}function Hg(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",_e().platform.decode(t,e)}function nk(t,e,n){if(e===0)return 0;if(e===1)return t[0];for(var r=t[t.length-1],i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function rSe(t,e,n){if(e===0)return[];if(e===1)return[t];for(var r=new Array(e),i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}var iSe=function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new aSe)}return t.prototype.profileKernel=function(e,n,r){var i,a=this,o=this.backendTimer.time(function(){i=r()});return i.forEach(function(s){s.data().then(function(u){(function(l,c,f){if(c!=="float32")return!1;for(var d=0;d<l.length;d++){var h=l[d];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+f+"'"),!0}})(u,s.dtype,e),o.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),a.logger.logKernelProfile(e,s,u,l.kernelMs,n,c)})})}),i},t}(),aSe=function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,i,a,o){var s=typeof i=="number"?zc(i+"ms",9):i.error,u=zc(e,25),l=n.rank,c=n.size,f=zc(n.shape.toString(),14),d="";for(var h in a){var p=a[h].shape||n.shape,m=p.length;d+=h+": "+m+"D "+(m>0?p:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+f+"	%c"+c+"	%c"+d+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),rk=20,gd=3,Z1=7;function oSe(t,e,n,r){var i=ro(e),a=function(l,c,f,d){var h=He(c),p=d[d.length-1],m=new Array(p).fill(0),y=c.length,v=f==="complex64"?xd(l):l;if(y>1)for(var x=0;x<h/p;x++)for(var g=x*p,b=0;b<p;b++)m[b]=Math.max(m[b],yd(v[g+b],0,f).length);return m}(t,e,n,i),o=e.length,s=function l(c,f,d,h,p,m){m===void 0&&(m=!0);var y=d==="complex64"?2:1,v=f[0],x=f.length;if(x===0)return d==="complex64"?[yd(xd(c)[0],0,d)]:d==="bool"?[B7(c[0])]:[c[0].toString()];if(x===1){if(v>rk){var g=gd*y,b=Array.from(c.slice(0,g)),w=Array.from(c.slice((v-gd)*y,v*y));return d==="complex64"&&(b=xd(b),w=xd(w)),["["+b.map(function(O,I){return yd(O,p[I],d)}).join(", ")+", ..., "+w.map(function(O,I){return yd(O,p[v-gd+I],d)}).join(", ")+"]"]}return["["+(d==="complex64"?xd(c):Array.from(c)).map(function(O,I){return yd(O,p[I],d)}).join(", ")+"]"]}var _=f.slice(1),E=h.slice(1),C=h[0]*y,N=[];if(v>rk){for(var D=0;D<gd;D++){var A=(T=D*C)+C;N.push.apply(N,l(c.slice(T,A),_,d,E,p,!1))}for(N.push("..."),D=v-gd;D<v;D++)A=(T=D*C)+C,N.push.apply(N,l(c.slice(T,A),_,d,E,p,D===v-1))}else for(D=0;D<v;D++){var T;A=(T=D*C)+C,N.push.apply(N,l(c.slice(T,A),_,d,E,p,D===v-1))}var R=x===2?",":"";for(N[0]="["+N[0]+R,D=1;D<N.length-1;D++)N[D]=" "+N[D]+R;var F=`,
`;for(D=2;D<x;D++)F+=`
`;return N[N.length-1]=" "+N[N.length-1]+"]"+(m?"":F),N}(t,e,n,i,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+o),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function yd(t,e,n){return zc(Array.isArray(t)?parseFloat(t[0].toFixed(Z1))+" + "+parseFloat(t[1].toFixed(Z1))+"j":DC(t)?"'"+t+"'":n==="bool"?B7(t):parseFloat(t.toFixed(Z1)).toString(),e)}function B7(t){return t===0?"false":"true"}function xd(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var Hh=function(){function t(e,n,r){var i=this;if(this.dtype=n,this.shape=e.slice(),this.size=He(e),r!=null){var a=r.length;X(a===this.size,function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+i.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||qg(n,this.size),this.strides=ro(e)}return t.prototype.set=function(e){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),X(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var a=this.locToIndex(r);this.values[a]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,i=0,a=e;i<a.length;i++){var o=a[i];if(o<0||o>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Ga().makeTensor(this.values,this.shape,this.dtype)},t}(),Ga=null,ye=null,L7=null,yn=function(){function t(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=He(e),this.strides=ro(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),X(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,i){return this.throwIfDisposed(),this.reshape([e,n,r,i])},t.prototype.as5D=function(e,n,r,i,a){return this.throwIfDisposed(),this.reshape([e,n,r,i,a])},t.prototype.asType=function(e){return this.throwIfDisposed(),ye.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Ve(this,void 0,void 0,function(){var e;return We(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,ye.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return ye.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Ve(this,void 0,void 0,function(){var e;return We(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,tk(this.shape,e)]}})})},t.prototype.arraySync=function(){return tk(this.shape,this.dataSync())},t.prototype.data=function(){return Ve(this,void 0,void 0,function(){var e,n;return We(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Ga().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:n=r.sent();try{return[2,n.map(function(i){return Hg(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var e=Ga().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(n){return Hg(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return Ve(this,void 0,void 0,function(){var e;return We(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Ga().read(this.dataId)];case 1:return e=n.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(Ga().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),ye.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),ye.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),ye.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),ye.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),ye.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),ye.clone(this)},t.prototype.oneHot=function(e,n,r){return this.throwIfDisposed(),ye.oneHot(this,e,n,r)},t.prototype.toString=function(e){return e===void 0&&(e=!1),oSe(this.dataSync(),this.shape,this.dtype,e)},t.prototype.tile=function(e){return this.throwIfDisposed(),ye.tile(this,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),ye.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),ye.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),ye.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),ye.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),ye.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),ye.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),ye.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),ye.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),ye.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),ye.unstack(this,e)},t.prototype.pad=function(e,n){return n===void 0&&(n=0),ye.pad(this,e,n)},t.prototype.batchNormalization=function(e,n,r,i,a){return r===void 0&&(r=.001),L7("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,a,i,r)},t.prototype.batchNorm=function(e,n,r,i,a){return a===void 0&&(a=.001),this.throwIfDisposed(),ye.batchNorm(this,e,n,r,i,a)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ye.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),ye.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),ye.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),ye.cast(this,e)},t.prototype.add=function(e){return this.throwIfDisposed(),ye.add(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),ye.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),ye.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),ye.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),ye.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),ye.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),ye.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),ye.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),ye.mulStrict(this,e)},t.prototype.div=function(e){return this.throwIfDisposed(),ye.div(this,e)},t.prototype.divNoNan=function(e){return this.throwIfDisposed(),ye.divNoNan(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),ye.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),ye.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),ye.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),ye.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),ye.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),ye.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),ye.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),ye.modStrict(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),ye.squaredDifferenceStrict(this,e)},t.prototype.transpose=function(e){return this.throwIfDisposed(),ye.transpose(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),ye.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),ye.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),ye.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),ye.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),ye.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),ye.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),ye.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),ye.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),ye.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),ye.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),ye.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),ye.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),ye.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),ye.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),ye.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),ye.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),ye.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),ye.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),ye.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),ye.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),ye.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),ye.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),ye.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),ye.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),ye.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),ye.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),ye.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),ye.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),ye.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),ye.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),ye.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),ye.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),ye.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),ye.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),ye.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),ye.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),ye.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),ye.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),ye.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),ye.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),ye.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),ye.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),ye.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),ye.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),ye.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),ye.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),ye.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),ye.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),ye.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),ye.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),ye.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),ye.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),ye.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),ye.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),ye.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),ye.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),ye.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),ye.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),ye.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),ye.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),ye.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),ye.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),ye.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),ye.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,i,a,o){return i===void 0&&(i="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),ye.conv1d(this,e,n,r,i,a,o)},t.prototype.conv2d=function(e,n,r,i,a,o){return i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),ye.conv2d(this,e,n,r,i,a,o)},t.prototype.conv2dTranspose=function(e,n,r,i,a){return this.throwIfDisposed(),ye.conv2dTranspose(this,e,n,r,i,a)},t.prototype.depthwiseConv2D=function(e,n,r,i,a,o){return i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),ye.depthwiseConv2d(this,e,n,r,i,a,o)},t.prototype.separableConv2d=function(e,n,r,i,a,o){return a===void 0&&(a=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),ye.separableConv2d(this,e,n,r,i,a,o)},t.prototype.avgPool=function(e,n,r,i){return this.throwIfDisposed(),ye.avgPool(this,e,n,r,i)},t.prototype.maxPool=function(e,n,r,i){return this.throwIfDisposed(),ye.maxPool(this,e,n,r,i)},t.prototype.localResponseNormalization=function(e,n,r,i){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5),ye.localResponseNormalization(this,e,n,r,i)},t.prototype.pool=function(e,n,r,i,a){return this.throwIfDisposed(),ye.pool(this,e,n,r,i,a)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Ga().makeVariable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),ye.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),ye.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),ye.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),ye.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,i,a,o,s,u){return i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),ye.stridedSlice(this,e,n,r,i,a,o,s,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),ye.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),ye.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),ye.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),ye.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),ye.spectral.irfft(this)},t}();Object.defineProperty(yn,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var ik,Uw,Vw,Ww,qw,wf=function(t){function e(n,r,i,a){var o=t.call(this,n.shape,n.dtype,n.dataId,a)||this;return o.trainable=r,o.name=i,o}return ja(e,t),e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!sr(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Ga().disposeTensor(this),this.dataId=n.dataId,Ga().incRef(this,null)},e.prototype.dispose=function(){Ga().disposeVariable(this),this.isDisposedInternal=!0},e}(yn);Object.defineProperty(wf,Symbol.hasInstance,{value:function(t){return t instanceof yn&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(ik||(ik={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(Uw||(Uw={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(Vw||(Vw={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(Ww||(Ww={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(qw||(qw={}));var sSe={float32:Ww,int32:Uw,bool:Vw,complex64:qw};function dr(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return sSe[t][e]}function J1(t){return dr(t,"int32")}function Cn(t,e){if(t.dtype===e.dtype)return[t,e];var n=dr(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function uSe(t,e){X(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function j7(t){var e=[];return function n(r,i,a){if(r!=null){if(r instanceof yn)return void i.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,s=r;for(var u in s){var l=s[u];a.has(l)||(a.add(l),n(l,i,a))}}}}(t,e,new Set),e}var ex,ak=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t}(),lSe=function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ak}return t.prototype.ready=function(){return Ve(this,void 0,void 0,function(){var e,n,r;return We(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),n=0,i.label=1;case 1:return n<e.length?(r=e[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),n=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,n,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:r},!0)},t.prototype.setBackend=function(e){return Ve(this,void 0,void 0,function(){var n,r,i;return We(this,function(a){switch(a.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return i=a.sent(),[3,3];case 2:i=r,a.label=3;case 3:if(!i)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new iSe(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var e=this;J4(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)})},t.prototype.disposeRegisteredKernels=function(e){var n=this;J4(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[e])})},t.prototype.initializeBackend=function(e){var n=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var a=++this.pendingBackendInitId,o=i.then(function(s){return!(a<n.pendingBackendInitId)&&(n.registry[e]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(a<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return e.registryFactory[r].priority-e.registryFactory[n].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),n=0;n<e.length;n++){var r=e[n],i=this.initializeBackend(r),a=i.success,o=i.asyncInit;if(o||a)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,n){var r=this.state.tensorInfo.get(n),i=r.backend,a=this.readSync(n);i.disposeData(n),r.backend=e,e.move(n,a,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,n){var r,i=this,a=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun(function(){return i.startScope(a)},function(){return i.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(e,n,r){e();try{var i=r();return n(),i}catch(a){throw n(),a}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[n],function(i){return{x:function(){return i.toFloat()}}},[]),n},t.prototype.runKernel=function(e,n,r,i,a){return this.runKernelFunc(null,n,null,e,r,i,a)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,n,r){var i=this.backend.numDataIds(),a=0;r.forEach(function(u){a+=u.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-n-a-o;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+e+"'")},t.prototype.runKernelFunc=function(e,n,r,i,a,o,s){var u,l=this;o===void 0&&(o=[]),s===void 0&&(s=[]);var c=[],f=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var d,h=function(x){f&&(c=x.map(function(g){return l.keep(l.clone(g))}))},p=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var y,v=T7(i,this.backendName);return d=v!=null?function(){var x=l.backend.numDataIds();y=v.kernelFunc({inputs:n,attrs:a,backend:l.backend});var g=Array.isArray(y)?y:[y];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,x,g);var b=g.map(function(_){var E=_.dataId,C=_.shape,N=_.dtype;return l.makeTensorFromDataId(E,C,N)}),w=b.filter(function(_,E){return s[E]});return h((o||[]).slice().concat(w)),b}:function(){var x=l.backend.numDataIds();y=l.tidy(function(){return e(l.backend,h)});var g=Array.isArray(y)?y:[y];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,x,g),g},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(i,n,function(){return d()}):d()}),f&&this.addTapeNode(i,n,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(x){return n[x].shape}),outputShapes:u.map(function(x){return x.shape})}),Array.isArray(y)?u:u[0]},t.prototype.makeTensor=function(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var a=e;r==="string"&&DC(e[0])&&(a=e.map(function(c){return nSe(c)}));var o=i.write(a,n,r),s=new yn(n,r,o,this.nextTensorId());if(this.incRef(s,i),r==="string"){var u=this.state.tensorInfo.get(o),l=JNe(a);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},t.prototype.makeTensorFromDataId=function(e,n,r,i){var a=new yn(n,r=r||"float32",e,this.nextTensorId());return this.incRef(a,i),a},t.prototype.makeVariable=function(e,n,r,i){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.asType(i));var a=new wf(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},t.prototype.incRef=function(e,n){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(i=e.size*R7(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof wf||this.track(e)},t.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var n=this.state.registeredVariables[e];this.disposeVariable(n)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return Ve(this,void 0,void 0,function(){var n,r;return We(this,function(i){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(a){return a.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r,i,a){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},u=qNe(e);u!=null&&(i=u.gradFunc),i!=null&&(s.gradient=function(l){return l=l.map(function(c,f){if(c==null){var d=r[f],h=kp(d.size,d.dtype);return o.makeTensor(h,d.shape,d.dtype)}return c}),i(l.length>1?l:l[0],a)}),this.state.activeTape.push(s)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=j7(e),i=new Set(r.map(function(u){return u.id})),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||i.has(o.id)||o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},t.prototype.gradients=function(e,n,r,i){var a=this;if(i===void 0&&(i=!1),X(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy("forward",e)});X(o instanceof yn,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var f={},d={},h=0;h<l.length;h++)f[l[h].id]=!0;for(h=0;h<u.length;h++){var p=(_=u[h]).inputs;for(var m in p){for(var y=p[m],v=!1,x=0;x<l.length;x++)if(f[y.id]){_.outputs.forEach(function(D){return f[D.id]=!0}),v=!0,d[_.id]=!0;break}if(v)break}}var g={};g[c.id]=!0;var b={};for(h=u.length-1;h>=0;h--)for(p=(_=u[h]).inputs,x=0;x<_.outputs.length;x++)if(g[_.outputs[x].id]){for(var m in p)g[p[m].id]=!0,b[_.id]=!0;break}var w=[];for(h=0;h<u.length;h++){var _;if(d[(_=u[h]).id]&&b[_.id]){var E={};for(var m in _.inputs){var C=_.inputs[m];f[C.id]&&(E[m]=C)}var N=Object.assign({},_);N.inputs=E,N.outputs=_.outputs,w.push(N)}}return w}(this.state.activeTape,n,o);if(!i&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[o.id]=r??(u=o.shape,l=P7(He(u),"float32"),se.makeTensor(l,u,"float32")),function(d,h,p){for(var m=function(v){var x=h[v],g=[];if(x.outputs.forEach(function(E){var C=d[E.id];C!=null?g.push(C):g.push(null)}),x.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+x.kernelName+".");var b=x.gradient(g),w=function(E){if(!(E in b))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(b)+".");var C=p(function(){return b[E]()});if(C.dtype!=="float32")throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+C.dtype+"'");var N=x.inputs[E];if(!sr(C.shape,N.shape))throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input '"+E+"' has shape '"+C.shape+"', which does not match the shape of the input '"+N.shape+"'");if(d[N.id]==null)d[N.id]=C;else{var D=d[N.id];d[N.id]=D.add(C),D.dispose()}};for(var _ in x.inputs)w(_)},y=h.length-1;y>=0;y--)m(y)}(c,s,function(d){return a.tidy(d)});var f=n.map(function(d){return c[d.id]});return a.state.gradientDepth===0&&(a.state.activeTape.forEach(function(d){for(var h=0,p=d.saved;h<p.length;h++)p[h].dispose()}),a.state.activeTape=null),{value:o,grads:f}})},t.prototype.customGrad=function(e){var n=this;return X($w(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];X(i.every(function(s){return s instanceof yn}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return i.forEach(function(s,u){o[u]=s}),n.runKernelFunc(function(s,u){return X((r=e.apply(void 0,i.concat([u]))).value instanceof yn,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),X($w(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];X(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),X(c.every(function(d){return d instanceof yn}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return c.forEach(function(d,h){f[h]=function(){return d}}),f})}},t.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.prototype.time=function(e){return Ve(this,void 0,void 0,function(){var n,r;return We(this,function(i){switch(i.label){case 0:return n=qa(),[4,this.backend.time(e)];case 1:return(r=i.sent()).wallMs=qa()-n,[2,r]}})})},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ak,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),se=function(){var t=function(){if(ex==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}ex=n}return ex}();if(t._tfengine==null){var e=new VNe(t);t._tfengine=new lSe(e)}return function(n){A7=n}(t._tfengine.ENV),Ga=function(){return t._tfengine},t._tfengine}();function $7(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var xo=_e();xo.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),xo.registerFlag("IS_BROWSER",function(){return $7()}),xo.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),xo.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),xo.registerFlag("PROD",function(){return!1}),xo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return xo.getBool("DEBUG")}),xo.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),xo.registerFlag("IS_TEST",function(){return!1});var Gh,Ti,Ni,Ou={},tx={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function cSe(t,e){Ou[t]=e}function ho(t){t in Ou||(Ou[t]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete Ou[n]},!1),n===1?r.getContext("webgl",tx)||r.getContext("experimental-webgl",tx):r.getContext("webgl2",tx)}(t));var e=Ou[t];return e.isContextLost()?(delete Ou[t],ho(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Ou[t])}function Cy(t,e){return[e,t]}function Zd(t){var e=He(t);return jw(Math.ceil(e/4))}function Rp(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function AC(t,e){var n,r,i,a,o,s,u,l,c,f=t;return _e().getNumber("WEBGL_VERSION")===2?(n=f.R32F,r=f.R16F,i=f.RGBA16F,a=f.RGBA32F,o=f.RED,s=4,u=1,l=f.HALF_FLOAT,c=f.FLOAT):(n=t.RGBA,r=t.RGBA,i=t.RGBA,a=f.RGBA,o=t.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function Ge(t,e,n){var r=n();return e&&function(i){var a=i.getError();if(a!==i.NO_ERROR)throw new Error("WebGL Error: "+pSe(i,a))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Gh||(Gh={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(Ti||(Ti={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Ni||(Ni={}));var fSe=596e-10,dSe=65504;function hSe(t){return!!(_e().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||fSe<Math.abs(t)&&Math.abs(t)<dSe)}function pSe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function km(t,e,n){return ns(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function mSe(t,e,n){var r=ns(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Ge(t,e,function(){return t.shaderSource(r,n)}),Ge(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function vSe(t,e,n){var r=ns(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Ge(t,e,function(){return t.shaderSource(r,n)}),Ge(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(i,a){var o=gSe.exec(a);if(o==null)return console.log("Couldn't parse line number in error: "+a),void console.log(i);for(var s=+o[1],u=i.split(`
`),l=u.length.toString().length+2,c=u.map(function(y,v){return zc((v+1).toString(),l)+y}),f=0,d=0;d<c.length;d++)f=Math.max(c[d].length,f);var h=c.slice(0,s-1),p=c.slice(s-1,s),m=c.slice(s);console.log(h.join(`
`)),console.log(a.split(`
`)[0]),console.log("%c "+zc(p[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var nx,rx,gSe=/ERROR: [0-9]+:([0-9]+):/g;function ySe(t,e){return ns(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function xSe(t,e,n){if(Ge(t,e,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function ix(t,e,n){if(Ge(t,e,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function bSe(t,e,n){var r=ns(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Ge(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Ge(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function wSe(t,e,n){var r=ns(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Ge(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Ge(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function _Se(t,e){return ns(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function ESe(t,e){var n=_e().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function CSe(t,e){return ns(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function ok(t,e,n,r,i,a,o,s){var u=t.getAttribLocation(n,r);return u!==-1&&(Ge(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),Ge(t,e,function(){return t.vertexAttribPointer(u,a,t.FLOAT,!1,o,s)}),Ge(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function NSe(t,e,n,r){MSe(t,r),Ge(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function SSe(t,e,n,r){return ns(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function DSe(t,e,n){return t.getUniformLocation(e,n)}function ASe(t,e,n,r,i,a){Ge(t,e,function(){return NSe(t,e,r,a)}),Ge(t,e,function(){return t.uniform1i(i,a)})}function ax(t,e,n,r){Ge(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Ge(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function sk(t,e,n){Ge(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),Ge(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function Rm(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+TSe(t,e))}function TSe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function ns(t,e,n,r){var i=Ge(t,e,function(){return n()});if(i==null)throw new Error(r);return i}function MSe(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function Gg(t,e){return e===void 0&&(e=2),He(t.slice(0,t.length-e))}function Kg(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function ox(t){var e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Gg(t)].concat(Kg(t))),e}function ISe(t,e){var n;e===void 0&&(e=!1);var r=_e().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map(function(l,c){return c>=t.length-2?k7(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var i=ju(t);t=i.newShape}var a=He(t);if(t.length<=1&&a<=r)return[1,a];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var o=Gg(t),s=2,u=2;return t.length&&(s=(n=Kg(t))[0],u=n[1]),jw(a=o*(s/2)*(u/2)).map(function(l){return 2*l})}return jw(a)}function Fm(t){return t%2==0}function Pm(t,e){if(sr(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||Fm(n)&&Fm(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Fm(t[0])&&Fm(e[0])}function kSe(t){if(nx==null){var e=ho(t);nx=e.getParameter(e.MAX_TEXTURE_SIZE)}return nx}function RSe(t){if(rx==null){var e=ho(t);rx=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,rx)}function FSe(t){if(t===0)return 0;var e=ho(t);return ea(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:ea(e,"EXT_disjoint_timer_query")?1:0}function ea(t,e){return t.getExtension(e)!=null}function uk(t){try{if(ho(t)!=null)return!0}catch{return!1}return!1}function PSe(t){if(t===0)return!1;var e=ho(t);if(t===1){if(!ea(e,"OES_texture_float"))return!1}else if(!ea(e,"EXT_color_buffer_float"))return!1;return Hw(e)}function OSe(t){if(t===0)return!1;var e=ho(t);if(t!==1){if(ea(e,"EXT_color_buffer_float"))return Hw(e);if(ea(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(r,i){var a=AC(r,i),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,a.internalFormatHalfFloat,1,1,0,a.textureFormatFloat,a.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(s),u}(e,n)}return!1}return!!ea(e,"OES_texture_float")&&!!ea(e,"WEBGL_color_buffer_float")&&Hw(e)}function Hw(t){var e=AC(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function BSe(t){return t===2&&ho(t).fenceSync!=null}var st=_e();function z7(t){_e().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function $e(t,e){return se.tidy(t,e)}function yi(t){j7(t).forEach(function(e){return e.dispose()})}function LSe(t){return se.keep(t)}function Yg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];_e().getBool("IS_TEST")||console.warn.apply(console,t)}function Cu(t,e){var n=t;if(no(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||no(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&_e().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(a,o,s){if(s=s||[],!Array.isArray(a)&&!no(a))return void X(o.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});X(o.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+a.length+" elements"}),X(a.length===o[0],function(){return"Element arr["+s.join("][")+"] should have "+o[0]+" elements, but has "+a.length+" elements"});for(var u=o.slice(1),l=0;l<a.length;++l)i(a[l],u,s.concat(l))}(t,r,[]),r}function lk(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function V(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof yn)return lk(r,t.dtype,e,n),t;var i=Ip(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),lk(r,i,e,n),t==null||!no(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var a=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var o=Cu(t,i);no(t)||Array.isArray(t)||(t=[t]);var s=i!=="string"?F7(t,i,_e().getBool("DEBUG")):bf(t,[],!0);return se.makeTensor(s,o,i)}function Xg(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,a){return V(i,e+"["+a+"]",n)},r)}function U7(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function jSe(t,e,n){for(var r=t.length+e.length,i=[],a=0,o=0,s=0;s<r;s++)n.indexOf(s)===-1?i.push(t[a++]):i.push(e[o++]);return i}function Dr(t,e){for(var n=[],r=t.length,i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);return[n,e.map(function(a){return t[a]})]}function wi(t,e){return jSe(t,e.map(function(n){return 1}),e)}function Ci(t,e,n){X(U7(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function po(t,e){if(U7(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(function(i){return n.push(i)}),n}function TC(t){return t.map(function(e,n){return[n,e]}).sort(function(e,n){return e[1]-n[1]}).map(function(e){return e[0]})}function mo(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function $Se(t,e){var n=t[0].length;t.forEach(function(i,a){X(i.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+n+")"})}),X(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(i,a){for(var o=0;o<n;o++)X(o===e||i[o]===r[o],function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."})})}function _f(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function ae(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];se.startScope(n);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),se.endScope(s),s}catch(u){throw se.endScope(null),u}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}st.registerFlag("HAS_WEBGL",function(){return st.getNumber("WEBGL_VERSION")>0}),st.registerFlag("WEBGL_VERSION",function(){return uk(2)?2:uk(1)?1:0}),st.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return st.get("WEBGL_VERSION")===2}),st.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),st.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),st.registerFlag("WEBGL_PACK",function(){return st.getBool("HAS_WEBGL")}),st.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_CLIP",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),st.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_PACK_REDUCE",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_LAZILY_UNPACK",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_CONV_IM2COL",function(){return st.getBool("WEBGL_PACK")}),st.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return kSe(st.getNumber("WEBGL_VERSION"))}),st.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return RSe(st.getNumber("WEBGL_VERSION"))}),st.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=st.getNumber("WEBGL_VERSION");return t===0?0:FSe(t)}),st.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return st.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),st.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return PSe(st.getNumber("WEBGL_VERSION"))}),st.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!st.getBool("WEBGL_FORCE_F16_TEXTURES")&&st.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),st.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return OSe(st.getNumber("WEBGL_VERSION"))}),st.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return BSe(st.getNumber("WEBGL_VERSION"))}),st.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return st.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),L7=z7;var fr=ae({complex_:function(t,e){var n=V(t,"real","complex"),r=V(e,"imag","complex");return Wt(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),se.runKernelFunc(function(i){return i.complex(n,r)},{$real:n,$imag:r})}}),Zi=ae({real_:function(t){var e=V(t,"input","real");return se.runKernelFunc(function(n){return n.real(e)},{$input:e})}}),Ka=ae({imag_:function(t){var e=V(t,"input","imag");return se.runKernelFunc(function(n){return n.imag(e)},{$input:e})}});function hr(t,e,n){return Nu(t,e,Cu(t,n),n)}function Nu(t,e,n,r){if(r==null&&(r=Ip(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!no(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){O7(e);var i=He(e),a=He(n);X(i===a,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+a});for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==He(e.slice(o));X(n[o]===e[o]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return no(t)||Array.isArray(t)||(t=[t]),e=e||n,t=r!=="string"?F7(t,r,_e().getBool("DEBUG")):bf(t,[],!0),se.makeTensor(t,e,r)}function je(t,e){if((no(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&no(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Nu(t,[],[],e)}function On(t,e){Qf(t);var n=Cu(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Nu(t,null,n,e)}function Ws(t,e,n){if(Qf(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Cu(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Nu(t,e,r,n)}function MC(t,e,n){if(Qf(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Cu(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Nu(t,e,r,n)}function oi(t,e,n){if(Qf(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Cu(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Nu(t,e,r,n)}function zSe(t,e,n){if(Qf(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Cu(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Nu(t,e,r,n)}function USe(t,e,n){if(Qf(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Cu(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Nu(t,e=e||r,r,n)}function VSe(t,e,n,r){return e===void 0&&(e=!0),se.makeVariable(t,e,n,r)}function Zf(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=Zf(t,"float32"),r=ln(t,"float32");return fr(n,r)}var i=P7(He(t),e);return se.makeTensor(i,t,e)}function ln(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=ln(t,"float32"),r=ln(t,"float32");return fr(n,r)}var i=kp(He(t),e);return se.makeTensor(i,t,e)}function io(t,e,n){return se.runKernelFunc(function(r){return r.fill(t,e,n)},{})}function WSe(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return se.runKernelFunc(function(r){return r.linspace(t,e,n)},{})}function Qg(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return ln([0],r);var i=kp(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+n;return On(i,r)}var V7=ae({onesLike_:function(t){var e=V(t,"x","onesLike");if(e.dtype==="complex64"){var n=V7(Zi(e)),r=Bt(Ka(e));return fr(n,r)}return se.runKernelFunc(function(i){return i.onesLike(e)},{$x:e},function(i,a){return{$x:function(){return Bt(i)}}})}}),Bt=ae({zerosLike_:function(t){var e=V(t,"x","zerosLike");return se.runKernelFunc(function(n){return n.zerosLike(e)},{$x:e},function(n,r){return{$x:function(){return Bt(n)}}})}}),Wn=ae({concat_:function(t,e){e===void 0&&(e=0),X(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=Xg(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),e=Qn(e,n[0].shape)[0];var r=_f(n.map(function(s){return s.shape}),e);if(He(r)===0)return hr([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var i=n.map(function(s){return s.shape});$Se(i,e);var a=n,o={axis:e};return se.runKernelFunc(function(s){return s.concat(n,e)},a,function(s){var u=i.map(function(l){return l[e]});return IC(s,u,e).map(function(l){return function(){return l}})},"Concat",o)}}),qSe=ae({concat1d_:function(t){return Wn(t,0)}}),HSe=ae({concat2d_:function(t,e){return Wn(t,e)}}),GSe=ae({concat3d_:function(t,e){return Wn(t,e)}}),KSe=ae({concat4d_:function(t,e){return Wn(t,e)}}),IC=ae({split_:function(t,e,n){n===void 0&&(n=0);var r,i=V(t,"x","split");return n=Qn(n,i.shape)[0],typeof e=="number"?(X(i.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(i.shape[n]/e)):(X(i.shape[n]===e.reduce(function(a,o){return a+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),se.runKernelFunc(function(a){return a.split(i,r,n)},{$x:i},function(a){return{$x:function(){return Wn(a,n)}}})}});function jl(t,e){return t(e={exports:{}},e.exports),e.exports}var YSe=jl(function(t){(function(e,n,r){function i(s){var u,l=this,c=(u=4022871197,function(f){f=f.toString();for(var d=0;d<f.length;d++){var h=.02519603282416938*(u+=f.charCodeAt(d));h-=u=h>>>0,u=(h*=u)>>>0,u+=4294967296*(h-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var f=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=0|f)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function a(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function o(s,u){var l=new i(s),c=u&&u.state,f=l.next;return f.int32=function(){return 4294967296*l.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.alea=o})(0,t)}),XSe=jl(function(t){(function(e,n,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(0,t)}),QSe=jl(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(0,t)}),ZSe=jl(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var l,c,f=u.x,d=u.i;return l=f[d],c=(l^=l>>>7)^l<<24,c^=(l=f[d+1&7])^l>>>10,c^=(l=f[d+3&7])^l>>>3,c^=(l=f[d+4&7])^l<<7,l=f[d+7&7],c^=(l^=l<<13)^l<<9,f[d]=c,u.i=d+1&7,c},function(l,c){var f,d=[];if(c===(0|c))d[0]=c;else for(c=""+c,f=0;f<c.length;++f)d[7&f]=d[7&f]<<15^c.charCodeAt(f)+d[f+1&7]<<13;for(;d.length<8;)d.push(0);for(f=0;f<8&&d[f]===0;++f);for(f==8?d[7]=-1:d[f],l.x=d,l.i=0,f=256;f>0;--f)l.next()}(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(0,t)}),JSe=jl(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var l,c,f=u.w,d=u.X,h=u.i;return u.w=f=f+1640531527|0,c=d[h+34&127],l=d[h=h+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=d[h]=c^l,u.i=h,c+(f^f>>>16)|0},function(l,c){var f,d,h,p,m,y=[],v=128;for(c===(0|c)?(d=c,c=null):(c+="\0",d=0,v=Math.max(v,c.length)),h=0,p=-32;p<v;++p)c&&(d^=c.charCodeAt((p+32)%c.length)),p===0&&(m=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,p>=0&&(m=m+1640531527|0,h=(f=y[127&p]^=d+m)==0?h+1:0);for(h>=128&&(y[127&(c&&c.length||0)]=-1),h=127,p=512;p>0;--p)d=y[h+34&127],f=y[h=h+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,y[h]=d^f;l.w=m,l.X=y,l.i=h}(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(0,t)}),eDe=jl(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,p=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(0,t)}),Bu=jl(function(t){(function(e,n){var r,i=this,a=256,o=6,s="random",u=n.pow(a,o),l=n.pow(2,52),c=2*l,f=a-1;function d(v,x,g){var b=[],w=m(function C(N,D){var A,T=[],R=typeof N;if(D&&R=="object")for(A in N)try{T.push(C(N[A],D-1))}catch{}return T.length?T:R=="string"?N:N+"\0"}((x=x==1?{entropy:!0}:x||{}).entropy?[v,y(e)]:v??function(){try{var C;return r&&(C=r.randomBytes)?C=C(a):(C=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(C)),y(C)}catch{var N=i.navigator,D=N&&N.plugins;return[+new Date,i,D,i.screen,y(e)]}}(),3),b),_=new h(b),E=function(){for(var C=_.g(o),N=u,D=0;C<l;)C=(C+D)*a,N*=a,D=_.g(1);for(;C>=c;)C/=2,N/=2,D>>>=1;return(C+D)/N};return E.int32=function(){return 0|_.g(4)},E.quick=function(){return _.g(4)/4294967296},E.double=E,m(y(_.S),e),(x.pass||g||function(C,N,D,A){return A&&(A.S&&p(A,_),C.state=function(){return p(_,{})}),D?(n[s]=C,N):C})(E,w,"global"in x?x.global:this==n,x.state)}function h(v){var x,g=v.length,b=this,w=0,_=b.i=b.j=0,E=b.S=[];for(g||(v=[g++]);w<a;)E[w]=w++;for(w=0;w<a;w++)E[w]=E[_=f&_+v[w%g]+(x=E[w])],E[_]=x;(b.g=function(C){for(var N,D=0,A=b.i,T=b.j,R=b.S;C--;)N=R[A=f&A+1],D=D*a+R[f&(R[A]=R[T=f&T+N])+(R[T]=N)];return b.i=A,b.j=T,D})(a)}function p(v,x){return x.i=v.i,x.j=v.j,x.S=v.S.slice(),x}function m(v,x){for(var g,b=v+"",w=0;w<b.length;)x[f&w]=f&(g^=19*x[f&w])+b.charCodeAt(w++);return y(x)}function y(v){return String.fromCharCode.apply(0,v)}if(n["seed"+s]=d,m(n.random(),e),t.exports){t.exports=d;try{r=require("crypto")}catch{}}})([],Math)});Bu.alea=YSe,Bu.xor128=XSe,Bu.xorwow=QSe,Bu.xorshift7=ZSe,Bu.xor4096=JSe,Bu.tychei=eDe;var Ny=Bu.alea,kC=function(){function t(e,n,r,i,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=a||Math.random();this.random=Ny(o.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,i=!1;!i;){var a=void 0,o=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*o*u,this.truncated&&!this.isValidTruncated(n)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t}(),tDe=function(){function t(e,n,r,i){this.alpha=e,this.beta=1/n,this.dtype=r;var a=i||Math.random();this.randu=Ny(a.toString()),this.randn=new kC(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,n,r,i,a,o;;){do i=this.randn.nextValue(),o=1+this.c*i;while(o<=0);if(o*=o*o,n=1-.331*(e=i*i)*e,r=.5*e+this.d*(1-o+Math.log(o)),(a=this.randu())<n||Math.log(a)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t}(),nDe=function(){function t(e,n,r,i){var a=this;if(e===void 0&&(e=0),n===void 0&&(n=1),this.canReturnFloat=function(){return a.dtype==null||a.dtype==="float32"},this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+n+" <= 1 and dtype is not float");this.random=Ny(i)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function vt(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",O7(t),new Hh(t,e,n)}function rDe(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var W7=ae({batchToSpaceND_:function(t,e,n){var r=V(t,"x","batchToSpaceND"),i=e.reduce(function(a,o){return a*o});return X(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),X(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),X(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i}),se.runKernelFunc(function(a){return a.batchToSpaceND(r,e,n)},{$x:r},function(a){return{$x:function(){return a.spaceToBatchND(e,n)}}})}}),iDe=ae({broadcastTo_:function(t,e){var n=V(t,"broadcastTo","x"),r=n.shape;if(e.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var i=n.shape.slice();i.length<e.length;)i.unshift(1);n=n.reshape(i)}for(var a=Array.from(e),o=e.length-1;o>=0;o--)if(n.shape[o]===e[o])a[o]=1;else if(n.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var s=a.map(function(u,l){return u>1?l:-1}).filter(function(u){return u>=0});return s.length===0?n.clone():se.runKernelFunc(function(u){return u.tile(n,a)},{input:n},function(u){return{input:function(){return u.sum(s,!0)}}})}}),aDe=ae({cast_:function(t,e){var n=V(t,"x","cast");if(!QNe(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return se.runKernelFunc(function(i){return i.cast(n,e)},{x:n},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),oDe=ae({clone_:function(t){var e=V(t,"x","clone",null);return se.runKernelFunc(function(){return se.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(n){return{$x:function(){return n.toFloat()}}})}}),sDe=ae({cumsum_:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var i=V(t,"x","cumsum"),a=po([e|=0],i.rank),o=i;a!=null&&(o=i.transpose(a));var s=mo(1,i.rank)[0],u=se.runKernelFunc(function(l){return l.cumsum(o,s,n,r)},{permutedX:o},function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}});return a!=null&&(u=u.transpose(a)),u}}),uDe=ae({depthToSpace_:function(t,e,n){n===void 0&&(n="NHWC");var r=V(t,"x","depthToSpace"),i=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];return X(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),X(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+` for depthToSpace with input shape
          `+r.shape}),X(o%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+r.shape}),se.runKernelFunc(function(s){return s.depthToSpace(r,e,n)},{$x:r})}}),Xi=ae({expandDims_:function(t,e){e===void 0&&(e=0);var n=V(t,"x","expandDims",null);X(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(X(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),Ca(n,r)}}),q7=ae({eye_:function(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var i=vt([t,e],r),a=t<=e?t:e,o=0;o<a;++o)i.set(1,o,o);var s=i.toTensor().as2D(t,e);if(n==null)return s;if(n.length===1)return Uc(Xi(s,0),[n[0],1,1]);if(n.length===2)return Uc(Xi(Xi(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Uc(Xi(Xi(Xi(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),lDe=ae({multinomial_:function(t,e,n,r){r===void 0&&(r=!1);var i=V(t,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=o===1?i.as2D(1,-1):i,u=se.runKernelFunc(function(l){return l.multinomial(s,r,e,n)},{logits2D:s});return o===1?u.as1D():u}}),Gw=ae({oneHot_:function(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=V(t,"indices","oneHot","int32"),a=i.shape.concat([e]);return i=i.flatten(),se.runKernelFunc(function(o){return o.oneHot(i,e,n,r)},{$indices:i},function(o){return{$indices:function(){return ln(i.shape,"float32")}}}).reshape(a)}}),$l=ae({pad_:function(t,e,n){n===void 0&&(n=0);var r=V(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:e,constantValue:n};return se.runKernelFunc(function(a){return a.pad(r,e,n)},{x:r},function(a){var o=e.map(function(s){return s[0]});return{x:function(){return a.slice(o,r.shape)}}},"PadV2",i)}}),cDe=ae({pad1d_:function(t,e,n){return n===void 0&&(n=0),X(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),$l(t,[e],n)}}),fDe=ae({pad2d_:function(t,e,n){return n===void 0&&(n=0),X(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),$l(t,e,n)}}),dDe=ae({pad3d_:function(t,e,n){return n===void 0&&(n=0),X(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),$l(t,e,n)}}),hDe=ae({pad4d_:function(t,e,n){return n===void 0&&(n=0),X(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),$l(t,e,n)}}),pDe=ae({rand_:function(t,e,n){var r=He(t),i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var a=0;a<r;a++)i[a]=e();return se.makeTensor(i,t,n)}}),mDe=ae({randomNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new kC(e,n,r,!1,i),o=vt(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),vDe=ae({randomGamma_:function(t,e,n,r,i){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var a=new tDe(e,n,r,i),o=vt(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),H7=ae({randomUniform_:function(t,e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var a=vt(t,r),o=new nDe(e,n,null,i),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),Ca=ae({reshape_:function(t,e){var n=V(t,"x","reshape",null);e=YNe(e,n.size),X(n.size===He(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return se.runKernelFunc(function(i){return i.reshape(n,e)},{x:n},function(i){return{x:function(){return i.reshape(n.shape)}}},"Reshape",r)}}),G7=ae({spaceToBatchND_:function(t,e,n){var r=V(t,"x","spaceToBatchND");return X(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),X(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),X(r.shape.reduce(function(i,a,o){return o>0&&o<=e.length?i&&(a+n[o-1][0]+n[o-1][1])%e[o-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),se.runKernelFunc(function(i){return i.spaceToBatchND(r,e,n)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(e,n)}}})}}),K7=ae({squeeze_:function(t,e){var n=V(t,"x","squeeze");return Ca(n,ju(n.shape,e).newShape)}}),Fi=ae({stack_:function(t,e){e===void 0&&(e=0);var n=Xg(t,"tensors","stack");if(X(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(e);var r=n[0].rank,i=n[0].shape,a=n[0].dtype;X(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){Wt(i,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){X(a===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=n.map(function(s){return s.expandDims(e)});return Wn(o,e)}}),Uc=ae({tile_:function(t,e){var n=V(t,"x","tile",null);X(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."});var r=[n],i={reps:e};return se.runKernelFunc(function(a,o){var s=a.tile(n,e);return o([n]),s},{x:n},function(a,o){var s=o[0];return{x:function(){var u=Bt(s);if(s.rank===1)for(var l=0;l<e[0];++l)u=u.add(a.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<e[0];++l)for(var c=0;c<e[1];++c)u=u.add(a.slice([l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(var f=0;f<e[2];++f)u=u.add(a.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(f=0;f<e[2];++f)for(var d=0;d<e[3];++d)u=u.add(a.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2],d*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",i,r)}}),gDe=ae({truncatedNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new kC(e,n,r,!0,i),o=vt(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),qn=ae({unstack_:function(t,e){e===void 0&&(e=0),e=e||0;var n=V(t,"x","unstack");X(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length);var r={axis:e};return se.runKernelFunc(function(i){return i.unstack(n,e)},{x:n},function(i){return{x:function(){return Fi(i,e)}}},"Unpack",r)}}),yDe=function(t,e){return Ve(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f;return We(this,function(d){switch(d.label){case 0:return n=V(t,"x","setdiff1d"),r=V(e,"y","setdiff1d"),X(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),X(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),X(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return i=d.sent(),[4,r.data()];case 2:for(a=d.sent(),o=new Set(a),s=0,c=0;c<i.length;c++)o.has(i[c])||s++;for(u=new Hh([s],n.dtype),l=new Hh([s],"int32"),c=0,f=0;c<i.length;c++)o.has(i[c])||(u.values[f]=i[c],l.values[f]=c,f++);return[2,[u.toTensor(),l.toTensor()]]}})})};function Zg(t,e,n,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var a=e.length,o=0;o<a;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(a+1))}return i}function Jg(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var a=[],o=[];for(i=1;i<t;++i)i>=2*e+1||i%2==1?o.push(i):a.push(i);r.push.apply(r,a),r.push(0),r.push.apply(r,o)}return r}function e0(t,e,n,r){r===void 0&&(r=!0);var i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(var a=1;a<t.length;++a)a<=e.length?r?i.push(e[a-1]*t[a]):i.push(t[a]/e[a-1]):i.push(t[a]);return i}function Y7(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function X7(t,e,n){for(var r=t.slice(0,1),i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}function Q7(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],i=1,a=0;a<n.length-1;++a)i*=n[a];var o=t.shape,s=n.slice();s.pop();var u=1;for(a=r;a<t.rank;++a)u*=o[a],s.push(o[a]);var l=ro(t.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,i,u,l]}var Z7=30;function sx(t){return t<=Z7?t:zw(t,Math.floor(Math.sqrt(t)))}function xDe(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(a+" update.rank < "+i+". ");if(t.length<r+(n.rank-i))throw new Error(a+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(a+" update.rank != "+(i+t.length-r));for(var o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(a+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+").");for(o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(a+" updates.shape["+(o+i)+"] ("+n.shape[o+i]+") != shape["+(o+i)+"] ("+t[o+i]+")")}function bDe(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}xDe(n,e,t)}function t0(t,e,n){for(var r=e.shape.length,i=r>1?e.shape[r-1]:1,a=n.length,o=1,s=i;s<a;++s)o*=n[s];var u=i<1?1:i;return{sliceRank:i,numUpdates:He(e.shape)/u,sliceSize:o,strides:ro(n.slice(0,i)).concat([1]),outputSize:He(n)}}function wDe(t,e,n){X(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),X(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(a){X(e[a]+n[a]<=t.shape[a],function(){return"Error in slice"+t.rank+"D: begin["+a+"] + size["+a+"] ("+(e[a]+n[a])+") would overflow input.shape["+a+"] ("+t.shape[a]+")"})},i=0;i<t.rank;++i)r(i)}function ck(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function RC(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function _De(t,e,n,r,i){var a=e[i],o=n[i]||1;(t&1<<i||a==null)&&(a=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),a=Lw(0,a,s-1)}function EDe(t,e,n,r,i){var a=e[i],o=n[i]||1;(t&1<<i||a==null)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),a=o>0?Lw(0,a,s):Lw(-1,a,s-1)}function J7(t,e,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function e9(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function CDe(t,e){X($w(t),function(){return"The f passed in variableGrads(f) must be a function"}),X(e==null||Array.isArray(e)&&e.every(function(c){return c instanceof wf}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=e!=null;if(!n)for(var r in e=[],se.registeredVariables)e.push(se.registeredVariables[r]);var i=n?e.filter(function(c){return!c.trainable}):null,a=e.length;X((e=e.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var o=se.gradients(t,e,null,!0),s=o.value,u=o.grads;X(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),X(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return e.forEach(function(c,f){u[f]!=null&&(l[c.name]=u[f])}),i!=null&&i.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function Sy(t){return se.customGrad(t)}var rs=ae({softmax_:function(t,e){e===void 0&&(e=-1);var n=V(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return se.runKernelFunc(function(r,i){var a=r.softmax(n,e);return i([a]),a},{logits:n},function(r,i){var a=i[0],o=r.mul(a);return{logits:function(){return o.sub(o.sum([e],!0).mul(a))}}},"Softmax",{dim:e},[],[!0])}}),NDe=ae({logSoftmax_:function(t,e){e===void 0&&(e=-1);var n=V(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return Sy(function(r,i){var a=r.max(e,!0),o=r.sub(a),s=o.toFloat().sub(o.exp().sum(e,!0).log());return i([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(e,!0).mul(c))}}})(n)}}),t9=function(){function t(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,n){this.dataIdsCount++,this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),n9=function(){function t(){}return t.prototype.time=function(e){return ve("time")},t.prototype.read=function(e){return ve("read")},t.prototype.readSync=function(e){return ve("readSync")},t.prototype.numDataIds=function(){return ve("numDataIds")},t.prototype.disposeData=function(e){return ve("disposeData")},t.prototype.write=function(e,n,r){return ve("write")},t.prototype.move=function(e,n,r,i){return ve("move")},t.prototype.memory=function(){return ve("memory")},t.prototype.floatPrecision=function(){return ve("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(e,n,r,i){return ve("batchMatMul")},t.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,ve("fusedBatchMatMul")},t.prototype.slice=function(e,n,r){return ve("slice")},t.prototype.stridedSlice=function(e,n,r,i){return ve("stridedSlice")},t.prototype.unstack=function(e,n){return ve("unstack")},t.prototype.reverse=function(e,n){return ve("reverse")},t.prototype.concat=function(e,n){return ve("concat")},t.prototype.neg=function(e){return ve("neg")},t.prototype.add=function(e,n){return ve("add")},t.prototype.addN=function(e){return ve("addN")},t.prototype.subtract=function(e,n){return ve("subtract")},t.prototype.multiply=function(e,n){return ve("multiply")},t.prototype.realDivide=function(e,n){return ve("realDivide")},t.prototype.floorDiv=function(e,n){return ve("floorDiv")},t.prototype.sum=function(e,n){return ve("sum")},t.prototype.prod=function(e,n){return ve("prod")},t.prototype.unsortedSegmentSum=function(e,n,r){return ve("unsortedSegmentSum")},t.prototype.argMin=function(e,n){return ve("argMin")},t.prototype.argMax=function(e,n){return ve("argMax")},t.prototype.equal=function(e,n){return ve("equal")},t.prototype.notEqual=function(e,n){return ve("notEqual")},t.prototype.less=function(e,n){return ve("less")},t.prototype.lessEqual=function(e,n){return ve("lessEqual")},t.prototype.greater=function(e,n){return ve("greater")},t.prototype.greaterEqual=function(e,n){return ve("greaterEqual")},t.prototype.logicalNot=function(e){return ve("logicalNot")},t.prototype.logicalAnd=function(e,n){return ve("logicalAnd")},t.prototype.logicalOr=function(e,n){return ve("logicalOr")},t.prototype.where=function(e){return ve("where")},t.prototype.select=function(e,n,r){return ve("select")},t.prototype.topk=function(e,n,r){return ve("topk")},t.prototype.min=function(e,n){return ve("min")},t.prototype.minimum=function(e,n){return ve("minimum")},t.prototype.mod=function(e,n){return ve("mod")},t.prototype.max=function(e,n){return ve("max")},t.prototype.maximum=function(e,n){return ve("maximum")},t.prototype.all=function(e,n){return ve("all")},t.prototype.any=function(e,n){return ve("any")},t.prototype.squaredDifference=function(e,n){return ve("squaredDifference")},t.prototype.ceil=function(e){return ve("ceil")},t.prototype.floor=function(e){return ve("floor")},t.prototype.round=function(e){return ve("round")},t.prototype.sign=function(e){return ve("sign")},t.prototype.isNaN=function(e){return ve("isNaN")},t.prototype.isInf=function(e){return ve("isInf")},t.prototype.isFinite=function(e){return ve("isFinite")},t.prototype.pow=function(e,n){return ve("pow")},t.prototype.exp=function(e){return ve("exp")},t.prototype.expm1=function(e){return ve("expm1")},t.prototype.softmax=function(e,n){return ve("softmax")},t.prototype.log=function(e){return ve("log")},t.prototype.log1p=function(e){return ve("log1p")},t.prototype.sqrt=function(e){return ve("sqrt")},t.prototype.rsqrt=function(e){return ve("rsqrt")},t.prototype.square=function(e){return ve("square")},t.prototype.reciprocal=function(e){return ve("reciprocal")},t.prototype.relu=function(e){return ve("relu")},t.prototype.relu6=function(e){return ve("relu6")},t.prototype.prelu=function(e,n){return ve("prelu")},t.prototype.elu=function(e){return ve("elu")},t.prototype.eluDer=function(e,n){return ve("eluDer")},t.prototype.selu=function(e){return ve("selu")},t.prototype.int=function(e){return ve("int")},t.prototype.clip=function(e,n,r){return ve("clip")},t.prototype.abs=function(e){return ve("abs")},t.prototype.complexAbs=function(e){return ve("complexAbs")},t.prototype.sigmoid=function(e){return ve("sigmoid")},t.prototype.softplus=function(e){return ve("softplus")},t.prototype.sin=function(e){return ve("sin")},t.prototype.cos=function(e){return ve("cos")},t.prototype.tan=function(e){return ve("tan")},t.prototype.asin=function(e){return ve("asin")},t.prototype.acos=function(e){return ve("acos")},t.prototype.atan=function(e){return ve("atan")},t.prototype.atan2=function(e,n){return ve("atan2")},t.prototype.sinh=function(e){return ve("sinh")},t.prototype.cosh=function(e){return ve("cosh")},t.prototype.tanh=function(e){return ve("tanh")},t.prototype.asinh=function(e){return ve("asinh")},t.prototype.acosh=function(e){return ve("acosh")},t.prototype.atanh=function(e){return ve("atanh")},t.prototype.erf=function(e){return ve("erf")},t.prototype.step=function(e,n){return ve("step")},t.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ve("fusedConv2d")},t.prototype.conv2d=function(e,n,r){return ve("conv2d")},t.prototype.conv2dDerInput=function(e,n,r){return ve("conv2dDerInput")},t.prototype.conv2dDerFilter=function(e,n,r){return ve("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ve("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(e,n,r){return ve("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(e,n,r){return ve("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){return ve("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(e,n,r){return ve("conv3d")},t.prototype.conv3dDerInput=function(e,n,r){return ve("conv3dDerInput")},t.prototype.conv3dDerFilter=function(e,n,r){return ve("conv3dDerFilter")},t.prototype.maxPool=function(e,n){return ve("maxPool")},t.prototype.maxPoolBackprop=function(e,n,r,i){return ve("maxPoolBackprop")},t.prototype.avgPool=function(e,n){return ve("avgPool")},t.prototype.avgPoolBackprop=function(e,n,r){return ve("avgPoolBackprop")},t.prototype.avgPool3d=function(e,n){return ve("avgPool3d")},t.prototype.avgPool3dBackprop=function(e,n,r){return ve("avgPool3dBackprop")},t.prototype.maxPool3d=function(e,n){return ve("maxPool3d")},t.prototype.maxPool3dBackprop=function(e,n,r,i){return ve("maxPool3dBackprop")},t.prototype.reshape=function(e,n){return ve("reshape")},t.prototype.cast=function(e,n){return ve("cast")},t.prototype.tile=function(e,n){return ve("tile")},t.prototype.pad=function(e,n,r){return ve("pad")},t.prototype.transpose=function(e,n){return ve("transpose")},t.prototype.gather=function(e,n,r){return ve("gather")},t.prototype.gatherND=function(e,n){return ve("gatherND")},t.prototype.scatterND=function(e,n,r){return ve("scatterND")},t.prototype.batchToSpaceND=function(e,n,r){return ve("batchToSpaceND")},t.prototype.spaceToBatchND=function(e,n,r){return ve("spaceToBatchND")},t.prototype.resizeBilinear=function(e,n,r,i){return ve("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(e,n,r){return ve("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(e,n,r,i){return ve("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){return ve("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(e,n,r,i,a,o){return ve("batchNormalization")},t.prototype.localResponseNormalization4D=function(e,n,r,i,a){return ve("localResponseNormalization4D")},t.prototype.LRNGrad=function(e,n,r,i,a,o,s){return ve("LRNGrad")},t.prototype.multinomial=function(e,n,r,i){return ve("multinomial")},t.prototype.oneHot=function(e,n,r,i){return ve("oneHot")},t.prototype.cumsum=function(e,n,r,i){return ve("cumsum")},t.prototype.nonMaxSuppression=function(e,n,r,i,a){return ve("nonMaxSuppression")},t.prototype.fft=function(e){return ve("fft")},t.prototype.ifft=function(e){return ve("ifft")},t.prototype.complex=function(e,n){return ve("complex")},t.prototype.real=function(e){return ve("real")},t.prototype.imag=function(e){return ve("imag")},t.prototype.cropAndResize=function(e,n,r,i,a,o){return ve("cropAndResize")},t.prototype.depthToSpace=function(e,n,r){return ve("depthToSpace")},t.prototype.split=function(e,n,r){return ve("split")},t.prototype.sparseToDense=function(e,n,r,i){return ve("sparseToDense")},t.prototype.diag=function(e){return ve("diag")},t.prototype.fill=function(e,n,r){return ve("fill")},t.prototype.onesLike=function(e){return ve("onesLike")},t.prototype.zerosLike=function(e){return ve("zerosLike")},t.prototype.linspace=function(e,n,r){return ve("linspace")},t.prototype.dispose=function(){return ve("dispose")},t}();function ve(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function As(t,e){for(var n=t.length,r=[],i=0;i<n;i++){var a=n-1-i,o=t[a]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function Hn(t,e){for(var n=[],r=0;r<e.length;r++){var i=t[t.length-r-1],a=e.length-r-1,o=e[a];(i==null||i===1&&o>1)&&n.unshift(a)}return n}function It(t,e){for(var n=[],r=Math.max(t.length,e.length),i=0;i<r;i++){var a=t[t.length-i-1];a==null&&(a=1);var o=e[e.length-i-1];if(o==null&&(o=1),a===1)n.unshift(o);else if(o===1)n.unshift(a);else{if(a!==o)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}function Kh(t,e,n,r,i,a,o){o===void 0&&(o="channelsLast");var s,u=i0(e),l=u[0],c=u[1];if(o==="channelsLast")s=[l,c,t[3],t[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);s=[l,c,t[1],t[1]]}return zl(t,s,n,r,i,a,!1,o)}function n0(t,e,n,r,i,a,o){o===void 0&&(o="NDHWC");var s,u,l=Kw(e),c=l[0],f=l[1],d=l[2];if(o==="NDHWC")u="channelsLast",s=[c,f,d,t[4],t[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);u="channelsFirst",s=[c,f,d,t[1],t[1]]}return r0(t,s,n,r,i,!1,u,a)}function zl(t,e,n,r,i,a,o,s){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],d=u[3];if(s==="channelsLast")l=t[0],c=t[1],f=t[2],d=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],d=t[1],c=t[2],f=t[3]}var h,p=e[0],m=e[1],y=e[3],v=i0(n),x=v[0],g=v[1],b=i0(r),w=b[0],_=b[1],E=Vc(p,w),C=Vc(m,_),N=function(F,O,I,M,B,k,j,Y){var q,L,ne;if(typeof F=="number"){q={top:F,bottom:F,left:F,right:F,type:F===0?"VALID":"NUMBER"};var fe=function(re,ie,de,he,$){he==null&&(he=r9(re,ie,de));var K=re[0],ue=re[1],ce=Jd((K-ie+2*he)/de+1,$);X(Fn(ce),function(){return"The output # of rows ("+ce+") must be an integer. Change the stride and/or zero pad parameters"});var ge=Jd((ue-ie+2*he)/de+1,$);return X(Fn(ge),function(){return"The output # of columns ("+ge+") must be an integer. Change the stride and/or zero pad parameters"}),[ce,ge]}([O,I],k,M,F,Y);L=fe[0],ne=fe[1]}else if(F==="same"){L=Math.ceil(O/M),ne=Math.ceil(I/B);var te=Math.max(0,(L-1)*M+k-O),oe=Math.max(0,(ne-1)*B+j-I),G=Math.floor(te/2),U=te-G,Q=Math.floor(oe/2);q={top:G,bottom:U,left:Q,right:oe-Q,type:"SAME"}}else{if(F!=="valid")throw Error("Unknown padding parameter: "+F);q={top:0,bottom:0,left:0,right:0,type:"VALID"},L=Math.ceil((O-k+1)/M),ne=Math.ceil((I-j+1)/B)}return{padInfo:q,outHeight:L,outWidth:ne}}(i,c,f,x,g,E,C,a),D=N.padInfo,A=N.outHeight,T=N.outWidth,R=o?y*d:y;return s==="channelsFirst"?h=[l,R,A,T]:s==="channelsLast"&&(h=[l,A,T,R]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:f,inChannels:d,outHeight:A,outWidth:T,outChannels:R,padInfo:D,strideHeight:x,strideWidth:g,filterHeight:p,filterWidth:m,effectiveFilterHeight:E,effectiveFilterWidth:C,dilationHeight:w,dilationWidth:_,inShape:t,outShape:h,filterShape:e}}function r0(t,e,n,r,i,a,o,s){a===void 0&&(a=!1),o===void 0&&(o="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],d=u[3],h=u[4];if(o==="channelsLast")l=t[0],c=t[1],f=t[2],d=t[3],h=t[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);l=t[0],h=t[1],c=t[2],f=t[3],d=t[4]}var p,m=e[0],y=e[1],v=e[2],x=e[4],g=Kw(n),b=g[0],w=g[1],_=g[2],E=Kw(r),C=E[0],N=E[1],D=E[2],A=Vc(m,C),T=Vc(y,N),R=Vc(v,D),F=function(j,Y,q,L,ne,fe,te,oe,G,U,Q){var re,ie,de,he;if(typeof j=="number"){re={top:j,bottom:j,left:j,right:j,front:j,back:j,type:j===0?"VALID":"NUMBER"};var $=function(ee,le,pe,be,xe,Fe){xe==null&&(xe=r9(ee,le,be));var Te=ee[0],Oe=ee[1],Me=ee[2],Et=Jd((Te-le+2*xe)/be+1,Fe);X(Fn(Et),function(){return"The output # of depths ("+Et+") must be an integer. Change the stride and/or zero pad parameters"});var Xe=Jd((Oe-le+2*xe)/be+1,Fe);X(Fn(Xe),function(){return"The output # of rows ("+Xe+") must be an integer. Change the stride and/or zero pad parameters"});var jt=Jd((Me-le+2*xe)/be+1,Fe);return X(Fn(jt),function(){return"The output # of columns ("+jt+") must be an integer. Change the stride and/or zero pad parameters"}),[Et,Xe,jt,pe]}([Y,q,L,1],oe,1,ne,j,Q);ie=$[0],de=$[1],he=$[2]}else if(j==="same"){ie=Math.ceil(Y/ne),de=Math.ceil(q/fe),he=Math.ceil(L/te);var K=(ie-1)*ne+oe-Y,ue=(de-1)*fe+G-q,ce=(he-1)*te+U-L,ge=Math.floor(K/2),Ce=K-ge,Ae=Math.floor(ue/2),Pe=ue-Ae,H=Math.floor(ce/2);re={top:Ae,bottom:Pe,left:H,right:ce-H,front:ge,back:Ce,type:"SAME"}}else{if(j!=="valid")throw Error("Unknown padding parameter: "+j);re={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},ie=Math.ceil((Y-oe+1)/ne),de=Math.ceil((q-G+1)/fe),he=Math.ceil((L-U+1)/te)}return{padInfo:re,outDepth:ie,outHeight:de,outWidth:he}}(i,c,f,d,b,w,_,A,T,R,s),O=F.padInfo,I=F.outDepth,M=F.outHeight,B=F.outWidth,k=a?x*h:x;return o==="channelsFirst"?p=[l,k,I,M,B]:o==="channelsLast"&&(p=[l,I,M,B,k]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:f,inWidth:d,inChannels:h,outDepth:I,outHeight:M,outWidth:B,outChannels:k,padInfo:O,strideDepth:b,strideHeight:w,strideWidth:_,filterDepth:m,filterHeight:y,filterWidth:v,effectiveFilterDepth:A,effectiveFilterHeight:T,effectiveFilterWidth:R,dilationDepth:C,dilationHeight:N,dilationWidth:D,inShape:t,outShape:p,filterShape:e}}function r9(t,e,n,r){r===void 0&&(r=1);var i=Vc(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function i0(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Kw(t){return typeof t=="number"?[t,t,t]:t}function Vc(t,e){return e<=1?t:t+(t-1)*(e-1)}function Jd(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function Ef(t){var e=i0(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function _i(t,e){return Ef(t)||Ef(e)}function FC(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function i9(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=ln(t.shape),i=t.toFloat(),a=n.complex(i,r);return r.dispose(),i.dispose(),a}if(!ZNe(t.dtype,e))return se.makeTensorFromDataId(t.dataId,t.shape,e);if(t.dtype==="complex64"){var o=n.real(t);return a=o.cast(e),o.dispose(),a}if(e==="int32")return n.int(t);if(e==="bool"){var s=je(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function Yw(t,e){return se.makeTensorFromDataId(t.dataId,e,t.dtype)}function a9(t,e,n){var r=(e-t)/(n-1),i=kp(n,"float32");i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return On(i,"float32")}function Xw(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function fk(t,e){return{real:t[2*e],imag:t[2*e+1]}}function SDe(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function DDe(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function ADe(t,e,n){var r=function(a,o,s){return function(u,l,c){for(var f=0,d=u.length,h=0,p=!1;f<d;){var m=c(l,u[h=f+(d-f>>>1)]);m>0?f=h+1:(d=h,p=!m)}return p?f:-f-1}(a,o,s||TDe)}(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function TDe(t,e){return t>e?1:t<e?-1:0}function PC(t,e,n,r,i){return o9(t,e,n,r,i,0).selectedIndices}function OC(t,e,n,r,i,a){var o=o9(t,e,n,r,i,a);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function o9(t,e,n,r,i,a,o,s){s===void 0&&(s=!1);for(var u=Array.from(e).map(function(b,w){return{score:b,boxIndex:w,suppressBeginIndex:0}}).filter(function(b){return b.score>i}).sort(dk),l=a>0?-.5/a:0,c=[],f=[];c.length<n&&u.length>0;){var d=u.pop(),h=d.score,p=d.boxIndex,m=d.suppressBeginIndex;if(h<i)break;for(var y=!1,v=c.length-1;v>=m;--v){var x=MDe(t,p,c[v]);if(x>=r){y=!0;break}if(d.score=d.score*IDe(r,l,x),d.score<=i)break}d.suppressBeginIndex=c.length,y||(d.score===h?(c.push(p),f.push(d.score)):d.score>i&&ADe(u,d,dk))}var g=c.length;return s&&(c.fill(0,g),f.fill(0,g)),{selectedIndices:On(c,"int32"),selectedScores:On(f,"float32"),numValidOutputs:je(g,"int32")}}function MDe(t,e,n){var r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),h=(s-a)*(u-o),p=(f-l)*(d-c);if(h<=0||p<=0)return 0;var m=Math.max(a,l),y=Math.max(o,c),v=Math.min(s,f),x=Math.min(u,d),g=Math.max(v-m,0)*Math.max(x-y,0);return g/(h+p-g)}function IDe(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function dk(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function s9(t,e,n){var r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(function(a){i[n]=a;var o=t.slice(r,i);return r[n]+=a,o})}function u9(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var i=vt(n,t.dtype);for(r=0;r<i.values.length;++r){for(var a=i.indexToLoc(r),o=new Array(t.rank),s=0;s<o.length;s++)o[s]=a[s]%t.shape[s];var u=t.locToIndex(o);i.values[r]=t.values[u]}return i.toTensor()}function l9(t,e,n,r,i){for(var a=e[e.length-1],o=[t.length/a,a],s=o[0],u=o[1],l=qh(n,s*r),c=qh("int32",s*r),f=0;f<s;f++){for(var d=f*u,h=t.subarray(d,d+u),p=[],m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort(function(b,w){return w.value-b.value});var y=f*r,v=l.subarray(y,y+r),x=c.subarray(y,y+r);for(m=0;m<r;m++)v[m]=p[m].value,x[m]=p[m].index}var g=e.slice();return g[g.length-1]=r,[hr(l,g,n),hr(c,g,"int32")]}function BC(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var i=vt(t,"int32"),a=vt([n.length,t.length],"int32");for(r=0;r<n.length;r++){var o=i.indexToLoc(n[r]),s=r*t.length;a.values.set(o,s)}return a.toTensor()}var kDe=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(i,a){return"T"+a});var n=[];this.variableNames.forEach(function(i){n.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},RDe=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(function(i,a){return"T"+a});var n=[];this.variableNames.forEach(function(i){n.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},FDe=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,a=t.inSize,o=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function c9(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(n){return t+"."+n})}function si(t,e){return e===1?[t]:c9(t,e)}function kr(){var t,e,n,r,i,a,o,s,u,l;return _e().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Yu(t,e,n){n===void 0&&(n="index");var r=ro(e);return r.map(function(i,a){return"int "+t[a]+" = "+n+" / "+i+"; "+(a===r.length-1?"int "+t[a+1]+" = "+n+" - "+t[a]+" * "+i:"index -= "+t[a]+" * "+i)+";"}).join("")}function LC(t){var e=ro(t).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var f9=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function PDe(t,e,n,r){var i=[];t.forEach(function(h){var p=He(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?i.push("uniform float "+h.name+(p>1?"["+p+"]":"")+";"):(i.push("uniform sampler2D "+h.name+";"),i.push("uniform int offset"+h.name+";"))});var a,o,s=i.join(`
`),u=t.map(function(h){return function(p,m,y){y===void 0&&(y=!1);var v="";v+=y?d9(p):nc(p);var x=p.shapeInfo.logicalShape,g=m.logicalShape;return x.length<=g.length&&(v+=y?function(b,w){var _,E=b.name,C=E.charAt(0).toUpperCase()+E.slice(1),N="get"+C+"AtOutCoords",D=b.shapeInfo.logicalShape.length,A=w.logicalShape.length,T=As(b.shapeInfo.logicalShape,w.logicalShape),R=sn(A),F=A-D,O=["x","y","z","w","u","v"];_=D===0?"":A<2&&T.length>=1?"coords = 0;":T.map(function(q){return"coords."+O[q+F]+" = 0;"}).join(`
`);var I="";I=A<2&&D>0?"coords":b.shapeInfo.logicalShape.map(function(q,L){return"coords."+O[L+F]}).join(", ");var M="return outputValue;",B=He(b.shapeInfo.logicalShape)===1,k=He(w.logicalShape)===1;if(D!==1||B||k){if(B&&!k)M=A===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(T.length){var j=D-2,Y=D-1;T.indexOf(j)>-1&&T.indexOf(Y)>-1?M="return vec4(outputValue.x);":T.indexOf(j)>-1?M="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":T.indexOf(Y)>-1&&(M="return vec4(outputValue.xx, outputValue.zz);")}}else M=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+N+`() {
      `+R+` coords = getOutputCoords();
      `+_+`
      vec4 outputValue = get`+C+"("+I+`);
      `+M+`
    }
  `}(p,m):function(b,w){var _=b.name,E=_.charAt(0).toUpperCase()+_.slice(1),C="get"+E+"AtOutCoords",N=w.texShape,D=b.shapeInfo.texShape,A=b.shapeInfo.logicalShape.length,T=w.logicalShape.length;if(!b.shapeInfo.isUniform&&A===T&&b.shapeInfo.flatOffset==null&&sr(D,N))return`
      float `+C+`() {
        return sampleTexture(`+_+`, resultUV);
      }
    `;var R,F=sn(T),O=As(b.shapeInfo.logicalShape,w.logicalShape),I=T-A,M=["x","y","z","w","u","v"];R=A===0?"":T<2&&O.length>=1?"coords = 0;":O.map(function(k){return"coords."+M[k+I]+" = 0;"}).join(`
`);var B="";return B=T<2&&A>0?"coords":b.shapeInfo.logicalShape.map(function(k,j){return"coords."+M[j+I]}).join(", "),`
    float `+C+`() {
      `+F+` coords = getOutputCoords();
      `+R+`
      return get`+E+"("+B+`);
    }
  `}(p,m)),v}(h,e,r)}).join(`
`),l=e.texShape,c=kr(),f=function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `}(c),d=function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+ODe+`
    `+BDe+`
    `+LDe+`
  `}(c);return e.isPacked?(a=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(b,w){var _=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];return _[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+_[1]+`.0);
      }
    `:_[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+_[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      return 2 * (resTexRC.x * `+_[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(b,w){var _=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];if(sr(b,w))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+_[0]+", "+_[1]+`));
      }
    `;var E=Math.ceil(b[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));

      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(h,p);case 3:return m=h,y=p,v=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)],x=Math.ceil(m[2]/2),g=x*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      int b = index / `+g+`;
      index -= b * `+g+`;

      int r = 2 * (index / `+x+`);
      int c = imod(index, `+x+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(b,w){for(var _=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],E=Math.ceil(b[b.length-1]/2),C=E*Math.ceil(b[b.length-2]/2),N=C,D="",A="b, r, c",T=2;T<b.length-1;T++)N*=b[b.length-T-1],D=`
      int b`+T+" = index / "+N+`;
      index -= b`+T+" * "+N+`;
    `+D,A="b"+T+", "+A;return`
    ivec`+b.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+D+`

      int b = index / `+C+`;
      index -= b * `+C+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+b.length+"("+A+`);
    }
  `}(h,p)}var m,y,v,x,g}(e.logicalShape,l),o=function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `}(c)):(a=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(v,x){return x[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+x[1]+`.0);
      }
    `:x[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+x[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      return resTexRC.x * `+x[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(v,x){return sr(v,x)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+x[0]+", "+x[1]+`));
      }
    `:v[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:v[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      int r = index / `+v[1]+`;
      int c = index - r * `+v[1]+`;
      return ivec2(r, c);
    }
  `}(h,p);case 3:return m=p,y=Yu(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+y+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(v,x){var g=Yu(["r","c","d","d2"],v);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+g+`
      return ivec4(r, c, d, d2);
    }
  `}(h,p);case 5:return function(v,x){var g=Yu(["r","c","d","d2","d3"],v);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+x[0]+`,
                             `+x[1]+`));

      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+g+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(h,p);case 6:return function(v,x){var g=Yu(["r","c","d","d2","d3","d4"],v);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+g+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(h,p);default:throw new Error(h.length+"-D output sampling is not yet supported")}var m,y}(e.logicalShape,l),o=function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(d+=jDe),[d,f,o,s,a,u,n].join(`
`)}function nc(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var a=n.shapeInfo.texShape,o=a[0],s=a[1];if(o===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],c=u[1],f=Au(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+Zl(n)+`
      }
    `;var a=n.shapeInfo.texShape,o=a[0],s=a[1];if(s===1&&o===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=Au(r);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=n.shapeInfo.texShape;if(o!=null&&sr(r,o)){var s=o[0],u=o[1];return`
    float `+a+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=ju(r),c=l.newShape,f=l.keptDims,d=c;if(d.length<r.length){var h=rc(n,d);return`
      `+nc(h)+`
      float `+a+`(int row, int col) {
        return `+a+"("+ic(["row","col"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Zl(n)+`
      }
    `;var p=o[0],m=o[1],y=Au(i);return m===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:p===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+a+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+y+`;
    vec2 uv = uvFromFlat(`+p+", "+m+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(t);case 3:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[1]*r[2],s=r[2],u=ju(r),l=u.newShape,c=u.keptDims,f=l;if(f.length<r.length){var d=rc(n,f);return`
        `+nc(d)+`
        float `+a+`(int row, int col, int depth) {
          return `+a+"("+ic(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+s+`, 1)));
        `+Zl(n)+`
      }
    `;var h=n.shapeInfo.texShape,p=h[0],m=h[1],y=n.shapeInfo.flatOffset;if(m===o&&y==null)return`
        float `+a+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+p+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(m===s&&y==null)return`
    float `+a+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var v=Au(i);return`
      float `+a+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+s+" + depth + "+v+`;
        vec2 uv = uvFromFlat(`+p+", "+m+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(t);case 4:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[3],s=r[2]*o,u=r[1]*s,l=ju(r),c=l.newShape,f=l.keptDims;if(c.length<r.length){var d=rc(n,c);return`
      `+nc(d)+`
      float `+a+`(int row, int col, int depth, int depth2) {
        return `+a+"("+ic(["row","col","depth","depth2"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+o+`, 1)));
        `+Zl(n)+`
      }
    `;var h=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,m=p[0],y=p[1];if(y===u&&h==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(y===o&&h==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var v=Au(i);return`
    float `+a+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+y+", index + "+v+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 5:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[4],s=r[3]*o,u=r[2]*s,l=r[1]*u,c=ju(r),f=c.newShape,d=c.keptDims;if(f.length<r.length){var h=rc(n,f);return`
      `+nc(h)+`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        return `+a+"("+ic(["row","col","depth","depth2","depth3"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+o+`)) +
          depth3;
        `+Zl(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,y=m[0],v=m[1];if(v===l&&p==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+y+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(v===o&&p==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+y+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var x=Au(i);return`
    float `+a+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+o+" + depth3 + "+x+`;
      vec2 uv = uvFromFlat(`+y+", "+v+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 6:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=ju(r),s=o.newShape,u=o.keptDims;if(s.length<r.length){var l=rc(n,s);return`
      `+nc(l)+`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+a+"("+ic(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],f=r[4]*c,d=r[3]*f,h=r[2]*d,p=r[1]*h;if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+h+", "+d+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+Zl(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,v=y[0],x=y[1];if(x===p&&m==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+d+", "+f+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+x+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(x===c&&m==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+x+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var g=Au(i);return`
    float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+h+" + depth * "+d+` +
          depth2 * `+f+" + depth3 * "+c+" + depth4 + "+g+`;
      vec2 uv = uvFromFlat(`+v+", "+x+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function d9(t){var e,n,r;switch(t.shapeInfo.logicalShape.length){case 0:return e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=kr(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(i){var a=i.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=i.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=kr();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+a+`, uv);
    }
  `}(t);case 2:return function(i){var a=i.shapeInfo.logicalShape,o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),u=i.shapeInfo.texShape,l=u[0],c=u[1],f=kr();if(u!=null&&sr(a,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+f.texture2D+"("+o+`, uv);
      }
    `;var d=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],h=Math.ceil(a[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+d[0]+", "+d[1]+`, row, col);
      return `+f.texture2D+"("+o+`, uv);
    }
  `}(t);case 3:return function(i){var a=i.shapeInfo.logicalShape,o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),u=i.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(a[0]===1){var c=a.slice(1),f=rc(i,c);return`
        `+d9(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+ic(["b","row","col"],[1,2])+`);
        }
      `}var d=l[0],h=l[1],p=Math.ceil(a[2]/2),m=p*Math.ceil(a[1]/2),y=kr();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+d+", "+h+", "+m+", "+p+`, b, row, col);
      return `+y.texture2D+"("+o+`, uv);
    }
  `}(t);default:return function(i){for(var a=i.shapeInfo.logicalShape,o=a.length,s=i.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],f=c[0],d=c[1],h=Math.ceil(a[o-1]/2),p=h*Math.ceil(a[o-2]/2),m="int b, int row, int col",y="b * "+p+" + (row / 2) * "+h+" + (col / 2)",v=2;v<o-1;v++)m="int b"+v+", "+m,p*=a[o-v-1],y="b"+v+" * "+p+" + "+y;var x=kr();return`
    vec4 `+u+"("+m+`) {
      int index = `+y+`;
      int texR = index / `+d+`;
      int texC = index - texR * `+d+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+d+", "+f+`);
      return `+x.texture2D+"("+s+`, uv);
    }
  `}(t)}}var ODe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,BDe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,LDe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,jDe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Au(t){return"offset"+t}function Zl(t){var e=t.name,n=He(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function sn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function rc(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function ic(t,e){return e.map(function(n){return t[n]}).join(", ")}var $De=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,X(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],a=Math.ceil(i/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var o,s,u=this.outputShape,l=u.length,c=sn(l),f=si("coords",l);if(a===1){var d=sn(s=l+1);o=`
        `+d+" sourceLocR = "+d+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+d+" sourceLocG = "+d+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+d+" sourceLocA = "+d+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+d+" sourceLocB = "+d+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,o=`
        `+c+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+f[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),p="."+h[s-1],m=h.map(function(C){return"int "+C}),y=si("sourceLocR",s-1).concat("inIdx.r"),v=si("sourceLocG",s-1).concat("inIdx.g"),x=si("sourceLocB",s-1).concat("inIdx.b"),g=si("sourceLocA",s-1).concat("inIdx.a"),b=n==="max"?"greaterThan":"lessThan",w=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+x.join()+`),
                             getBestIndicesAChannel(`+g.join()+")));",_=`vec4(
            getAChannel(`+y.join()+`),
            hasNextCol ? getAChannel(`+v.join()+`) : 0.,
            hasNextRow ? getAChannel(`+x.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+g.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+_+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+w+`
          vec4 candidate = `+_+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+b+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},zDe=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,c=u-1-t.padInfo.left,f=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},UDe=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=c-1-t.padInfo.front,p=f-1-t.padInfo.top,m=d-1-t.padInfo.left,y=1/(e*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);
      const float avgMultiplier = float(`+y+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},VDe=function(t,e,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],It(t,e),It(t,n);var o="0.0";r!=null&&(It(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";i!=null&&(It(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},WDe=function(t,e,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],It(t,e),It(t,n);var o="vec4(0.0)";r!=null&&(It(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(It(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `},qDe="return areal * breal - aimag * bimag;",HDe="return areal * bimag + aimag * breal;",hk=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=It(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},ux="return a + b;",lx="return a - b;",pk="return a * b;",h9="return (a < 0.) ? b * a : a;",Nn=function(t,e,n){this.variableNames=["A","B"],this.outputShape=It(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},p9=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,bo=function(t,e,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=It(e,n);var i=this.outputShape.length,a="";if(r)if(i===0||He(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          `+sn(i)+` coords = getOutputCoords();
        `,i===1)a+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=si("coords",i);a+=`
            bool nextRowOutOfBounds =
              (`+o[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+o[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+a+`

        setOutput(result);
      }
    `},GDe=function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,a){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(a,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),KDe=function(){function t(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,a){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(a,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),YDe=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},XDe=function(t){this.outputShape=[],this.outputShape=_f(t,1),this.variableNames=t.map(function(s,u){return"T"+u});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var i=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var a=e.length,o=e[e.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},QDe=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=_f(t,e);var n=this.outputShape,r=n.length,i=sn(r),a=si("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(y,v){return"T"+v});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var l=o[e],c=o.slice(-2),f=o.join(),d="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var h=s[u-1];d+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+Om(o,l,h)+`),
            vec2(`+Om(c,l,h)+`));
        }`}var p=s.length,m=s[s.length-1];d+=`
        return getChannel(
          getT`+p+"("+Om(o,l,m)+`),
          vec2(`+Om(c,l,m)+"));",this.userCode=`
      float getValue(`+o.map(function(y){return"int "+y})+`) {
        `+d+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);

        `+a[r-1]+" = "+a[r-1]+` + 1;
        if (`+a[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+a+`);
        }

        `+a[r-2]+" = "+a[r-2]+` + 1;
        if (`+a[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+a+`);
        }

        `+a[r-1]+" = "+a[r-1]+` - 1;
        if (`+a[r-2]+" < "+n[r-2]+` &&
            `+a[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `};function Om(t,e,n){var r=t.indexOf(e);return t.map(function(i,a){return a===r?i+" - "+n:i}).join()}var ZDe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+a+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},JDe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=t.dataFormat==="channelsLast",o=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=a?1:2,l=a?2:3,c=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+a+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},eAe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,a=t.padInfo.top,o=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+i+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+a+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},tAe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},nAe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},rAe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=e-1-t.padInfo.top,o=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},mk=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,a=t.padInfo.left,o=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,d=4*Math.floor(t.inChannels/4),h=t.inChannels%4,p=t.dataFormat==="channelsLast",m=p?1:2,y=p?2:3,v=p?3:1,x="",g="";n&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,g="result = activation(result);");var b=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+o+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+v+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+y+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+d+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+d+`) *
                    getW(wR, wC, `+d+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+d+`, xR, xC) *
                    getW(wR, wC, `+d+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+d+`, d2),
                getW(wR, wC, `+d+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+d+`),
                  getX(batch, xR, xC, `+d+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+d+`, xR, xC),
                  getX(batch, `+d+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+d+`, d2),
                getW(wR, wC, `+d+` + 1, d2),
                getW(wR, wC, `+d+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+d+`),
                  getX(batch, xR, xC, `+d+` + 1),
                  getX(batch, xR, xC, `+d+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+d+`, xR, xC),
                  getX(batch, `+d+` + 1, xR, xC),
                  getX(batch, `+d+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+b+`
        `+g+`
        setOutput(result);
      }
    `},iAe=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterDepth,f=t.filterHeight,d=t.filterWidth,h=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+a+", "+o+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},vk=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,a=t.inWidth,o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,p=t.outChannels/t.inChannels,m="",y="";n&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,y="result = activation(result);");var v=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+a+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+v+`
        `+y+`
        setOutput(result);
      }
    `},gk=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,a=t.inWidth,o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,p=h,m="int xR; int xC; int xCOffset;",y=0;y<d;y++)for(var v=0;v<h;v++)m+=`
          vec4 xTexelR`+y+"C"+2*v+` = vec4(0.);
          vec4 wR`+y+"C"+v+` = vec4(0.);
          vec4 xR`+y+"C"+v+" = vec4(0.);";for(y=0;y<d;y++)for(var x=0;x<p;x++){if(m+=`
          xR = xRCorner + `+y*c+`;
          xC = xCCorner + `+(v=2*x)*f+`;
        `,l===1){if(v<h&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  xTexelR`+y+"C"+v+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    xTexelR`+y+"C"+v+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+y+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+y+"C"+v+" = vec4(previous.zw, xTexelR"+y+"C"+v+`.xy);
                } else {
                  xR`+y+"C"+v+" = vec4(0, 0, xTexelR"+y+"C"+v+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+a+`) {
                  xTexelR`+y+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+v+` = vec4(0.);
                }

                xR`+y+"C"+v+" = xTexelR"+y+"C"+v+`;
              `,v+1<h)){var g=s%2==0?k7(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+g+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+y+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+a+`) {
                      xTexelR`+y+"C"+v+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+y+"C"+v+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+y+"C"+(v+1)+` = vec4(
                    xTexelR`+y+"C"+v+".zw, xTexelR"+y+"C"+(v+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+g+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+y+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+y+"C"+(v+1)+" = xTexelR"+y+"C"+(v+2)+`;
                `}}else v<h&&(m+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+y+"C"+v+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+v+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+a+`) {
                  xTexelR`+y+"C"+(v+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+y+"C"+(v+2)+` = vec4(0.);
                }

                xR`+y+"C"+v+` = vec4(
                  xTexelR`+y+"C"+v+".zw, xTexelR"+y+"C"+(v+2)+`.zw);
              `,v+1<h&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+a+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+y+"C"+(v+1)+" = vec4(xTexelR"+y+"C"+(v+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+a+`) {
                  xTexelR`+y+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+y+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+(v+2)+` = vec4(0.);
                }

                xR`+y+"C"+v+` = vec4(
                  xTexelR`+y+"C"+v+".xy, xTexelR"+y+"C"+(v+2)+`.xy);
              `,v+1<h&&(m+=`
                  xR`+y+"C"+(v+1)+` = vec4(
                    xTexelR`+y+"C"+v+".zw, xTexelR"+y+"C"+(v+2)+`.zw);
                `)),m+="}");v<h&&(m+=`
            vec4 wTexelR`+y+"C"+v+" = getW("+y+", "+v+`, d1, q);
            wR`+y+"C"+v+" = vec4(wTexelR"+y+"C"+v+".xz, wTexelR"+y+"C"+v+`.xz);
          `,v+1<h&&(m+=`
              vec4 wTexelR`+y+"C"+(v+1)+" = getW("+y+", "+(v+1)+`, d1, q);
              wR`+y+"C"+(v+1)+` =
                vec4(wTexelR`+y+"C"+(v+1)+".xz, wTexelR"+y+"C"+(v+1)+".xz);"))}for(y=0;y<d;y++)for(v=0;v<h;v++)m+="dotProd += xR"+y+"C"+v+" * wR"+y+"C"+v+";";var b="",w="";n&&(b=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,w="result = activation(result);");var _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+_+`
        `+w+`
        setOutput(result);
      }
    `},aAe=function(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],o=t[1],s=t[2],u=t[3],l=e[0],c=n[0],f=n[1];this.outputShape=[l,c,f,u];var d=r==="bilinear"?1:0,h=[o-1+".0",s-1+".0"],p=h[0],m=h[1],y=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],v=y[0],x=y[1],g=y[2],b=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=b[0],_=b[1],E=b[2];this.userCode=`
      const float height_ratio = float(`+v+`);
      const float width_ratio = float(`+w+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+x+`;
        float width_scale = `+_+`;

        float in_y = `+g+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+d+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},oAe=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],a=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+sn(r)+` coords = getOutputCoords();
        int end = `+yk(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+yk(r,"coords")+` = idx;
          val += getX(`+function(o,s){if(o===1)return""+s;if(o===2)return s+".x, "+s+".y";if(o===3)return s+".x, "+s+".y, "+s+".z";if(o===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function yk(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var sAe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Gh.DENSE;var e=Zd(t),n=kr();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Yu(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},uAe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Gh.DENSE;var e=Zd(t),n=kr();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Yu(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},lAe=function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),cAe=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},fAe=function(t){this.variableNames=["A"],this.outTexUsage=Ti.DOWNLOAD;var e=kr();this.outputShape=t,this.userCode=`
      `+f9+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},dAe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ti.DOWNLOAD;var e=kr();this.outputShape=t,this.userCode=`
      `+f9+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},hAe=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=kr(),i=e[0],a=e[1];this.outputShape=t;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+LC(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+a+`;
        int c = imod(flatIndex, `+a+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},pAe=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=kr(),i=e[0],a=e[1];this.outputShape=t;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;o+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+a+`;
              c = imod(flatIndex, `+a+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+LC(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+s+`;
      }
    `},mAe="return real * expR - imag * expI;",vAe="return real * expI + imag * expR;",xk=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},gAe=function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(n.valueLoc,e)}},t}(),yAe=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var i=sn(this.rank),a=function(o,s){var u=o.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],f=0;f<o.length;f++)f===s?c.push("int(getIndices("+l[f]+"))"):c.push(""+l[f]);return c.join()}(t,n);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},xAe=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=sn(e.length),i=sn(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function bAe(t,e){var n=kr();return mSe(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function wAe(t,e){return bSe(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function _Ae(t,e){return wSe(t,e,new Uint16Array([0,1,2,2,1,3]))}function Fp(t,e,n,r,i,a,o){ESe(n,r);var s=_Se(t,e),u=t.TEXTURE_2D;return Ge(t,e,function(){return t.bindTexture(u,s)}),Ge(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Ge(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Ge(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Ge(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Ge(t,e,function(){return t.texImage2D(u,0,i,n,r,0,a,o,null)}),Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function EAe(t,e,n,r,i){var a=Cy(n,r);return Fp(t,e,a[0],a[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function CAe(t,e,n,r,i){var a=Cy(n,r);return Fp(t,e,a[0],a[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function NAe(t,e,n,r,i){var a=Cy(n,r);return Fp(t,e,a[0],a[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function SAe(t,e,n,r,i){var a=Rp(n,r);return Fp(t,e,a[0],a[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function DAe(t,e,n,r,i){var a=Rp(n,r);return Fp(t,e,a[0],a[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function AAe(t,e,n,r){return Ge(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),ok(t,e,n,"clipSpacePos",r,3,20,0)&&ok(t,e,n,"uv",r,2,20,12)}function TAe(t,e,n,r,i,a,o){var s,u,l;Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),a instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(r*i*4),u=t.FLOAT,l=o.internalFormatPackedFloat),s.set(a),Ge(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,i,0,t.RGBA,u,s)}),Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function MAe(t,e,n,r){Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Ge(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):Ge(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Ge(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function IAe(t,e,n,r,i){var a=t.createBuffer();Ge(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,a)});var o=16*n*r;return Ge(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)}),Ge(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),Ge(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),a}function kAe(t,e,n){var r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function RAe(t,e,n,r,i){var a=Cy(n,r),o=a[0],s=a[1],u=new Uint8Array(n*r*4);return Ge(t,e,function(){return t.readPixels(0,0,o,s,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function FAe(t,e,n,r,i,a,o,s){var u=t,l=new Float32Array(function(c,f){var d=Rp(c,f);return d[0]*d[1]*4}(a,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function PAe(t,e,n,r){var i=new Float32Array(n*r*4);return Ge(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i)}),i}var OAe=function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=_e().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,cSe(n,e)):this.gl=ho(n);var r="WEBGL_color_buffer_float";if(_e().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=km(this.gl,this.debug,"OES_texture_float"),ea(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=km(this.gl,this.debug,"OES_texture_half_float");else if(_e().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ea(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=km(this.gl,this.debug,"EXT_color_buffer_half_float");else if(_e().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ea(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!ea(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=wAe(this.gl,this.debug),this.indexBuffer=_Ae(this.gl,this.debug),this.framebuffer=CSe(this.gl,this.debug),this.textureConfig=AC(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return _e().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;Ge(n,this.debug,function(){return n.finish()}),Ge(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),Ge(n,this.debug,function(){return n.deleteFramebuffer(e.framebuffer)}),Ge(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),Ge(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),Ge(n,this.debug,function(){return n.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),EAe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),CAe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),NAe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),MAe(this.gl,this.debug,e,n)},t.prototype.uploadDenseMatrixToTexture=function(e,n,r,i){this.throwIfDisposed(),TAe(this.gl,this.debug,e,n,r,i,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),DAe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),SAe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(sk(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Ge(this.gl,this.debug,function(){return n.gl.deleteTexture(e)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return RAe(i.gl,i.debug,n,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,i,a,o){return FAe(this.gl,e,0,0,0,a,o,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return kAe(this.gl,e,n)},t.prototype.createBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var i=IAe(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,i=this;if(_e().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=a.clientWaitSync(o,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=o}else _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(n,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return PAe(i.gl,i.debug,n,r)})},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=vSe(n,this.debug,e),i=bAe(n,this.debug),a=ySe(n,this.debug);return Ge(n,this.debug,function(){return n.attachShader(a,i)}),Ge(n,this.debug,function(){return n.attachShader(a,r)}),xSe(n,this.debug,a),this.debug&&ix(n,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=AAe(n,this.debug,this.program,this.vertexBuffer)),a},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Ge(this.gl,this.debug,function(){return n.gl.deleteProgram(e)})},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&ix(this.gl,this.debug,this.program),Ge(this.gl,this.debug,function(){return n.gl.useProgram(e)})},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?SSe(this.gl,this.debug,e,n):DSe(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),Ge(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,n)})},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),ASe(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var i=Rp(n,r),a=i[0],o=i[1];this.setOutputMatrixTextureDriver(e,a,o)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&ix(this.gl,this.debug,this.program),Rm(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Ge(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Ge(this.gl,this.debug,function(){return e.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=km(this.gl,this.debug,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),a=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,a),a},t.prototype.endQuery=function(){if(_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return Ve(this,void 0,void 0,function(){var n=this;return We(this,function(r){switch(r.label){case 0:return[4,ek(function(){return n.disposed||n.isQueryAvailable(e,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var e=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||ek(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),ax(this.gl,this.debug,e,this.framebuffer),this.debug&&Rm(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(ax(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Rm(this.gl)):sk(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var i=this.gl;ax(i,this.debug,e,this.framebuffer),this.debug&&Rm(i),this.outputTexture=e,Ge(i,this.debug,function(){return i.viewport(0,0,n,r)}),Ge(i,this.debug,function(){return i.scissor(0,0,n,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,i){var a=this;this.throwIfDisposed(),Ge(this.gl,this.debug,function(){return a.gl.scissor(e,n,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function bk(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(n,r){var i=n.logicalShape,a=e[r],o=a.shape;if(!sr(i,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+o+" must match");if(!n.isUniform||!a.isUniform){var s=n.texShape,u=a.isUniform?null:a.texData.texShape;if(!sr(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var BAe=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,i=n.inChannels,a=n.strideWidth,o=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,f=n.dataFormat,d=s.left,h=s.top,p=i*r,m=kr(),y=f==="channelsLast",v=y?0:1,x=y?1:2,g="",b=0;b<=1;b++)for(var w=0;w<=1;w++)g+=`
          blockIndex = rc.y + `+w+`;
          pos = rc.x + `+b+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+o+" - "+h+`;
            d0 = offsetY + `+c+" * (pos / "+p+`);

            if(d0 < `+e[v]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+d+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+p+".) / "+i+`.));

              if(d1 < `+e[x]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+y+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*b+w)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*b+w)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+g+`

        `+m.output+` = result;
      }
    `},LAe=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];var a,o=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `},jAe=function(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},$Ae=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,o=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+a+`;
        setOutput(result);
      }
    `},zAe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,a=t.effectiveFilterWidth,o=i-1-t.padInfo.top,s=a-1-t.padInfo.left,u=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},UAe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=s-1-t.padInfo.front,f=u-1-t.padInfo.top,d=l-1-t.padInfo.left,h=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+f+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},cx=function(t,e,n,r,i,a,o){n===void 0&&(n=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),a===void 0&&(a=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=n?t[1]:t[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",p="";a&&(h=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+a+`
        }`:`vec4 activation(vec4 x) {
          `+a+`
        }`,p="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+d[0]+`);
          result += (`+f[1]+" * "+d[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+p+`

        setOutput(result);
      }
    `},VAe=function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t}(),WAe=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},qAe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=si("rc",e),r=sn(e),i=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",f=s-2;f<s;f++)c+=l[f]+" >= "+u[f],f<s-1&&(c+="||");return c}(e,t,n),a=function(s,u,l,c){if(s===1)return"";var f=c.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(e,t[t.length-1],t[t.length-2],n),o=function(s,u){var l=s.length,c=function(f,d){for(var h=[],p=0;p<=1;p++)for(var m=0;m<=1;m++){for(var y=(p===0?"r":"rp1")+", "+(m===0?"c":"cp1"),v=2;v<f;v++)y=d[d.length-1-v]+","+y;h.push(y)}return h}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},HAe=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,i=sn(r),a=e.map(function(u){return u[0]}).join(","),o=e.map(function(u,l){return u[0]+t[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+a+`);
      `+i+" end = "+i+"("+o+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},GAe=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(y,v){return y[0]+t[v]+y[1]});for(var r=t.length,i=sn(r),a=e.map(function(y){return y[0]}).join(","),o=e.map(function(y,v){return y[0]+t[v]}).join(","),s=si("rc",r),u=si("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],d=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,m=r===1?2:4;p<m;p++)h+=`
        `+f[p]+`
        if (`+d+`) {
          result[`+p+"] = float("+n+`);
        } else {
          `+i+` source = rc - start;
          result[`+p+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+a+`);
      const `+i+" end = "+i+"("+o+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `},fx=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,a=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var d=e==="avg",h="0.0";if(d||(h="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+a+`);
        const ivec2 pads = ivec2(`+c+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(p="avgValue / count");var m=4*Math.floor(r/4),y=r%4,v=`
      if (`+d+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+a+`);
      const ivec2 pads = ivec2(`+c+", "+f+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+v+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(y===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(y===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(y===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+v+`
          }
        }
        setOutput(`+p+`);
      }
    `}},dx=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var y=e==="avg",v="0.0";if(y||(v="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+a+", "+o+`);
        const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+f+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+d+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+f+" * "+d+` +
                      wR * `+d+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(x="avgValue / count");var g=4*Math.floor(r/4),b=r%4,w=`
      if (`+y+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+a+", "+o+`);
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);
      const float initializationValue = `+v+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+v+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+g+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+w+`
            }

            int xC = xCCorner + `+g+`;
            if (`+(b===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(b===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(b===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+w+`
            }
          }
          setOutput(`+x+`);
        }
      }
    `}},KAe=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,i=t.inSize,a=Math.ceil(i/n);this.outputShape=[r,a];var o="0.0",s="";e==="prod"?o="1.0":e==="min"?(o="1.0 / 1e-20",s="min"):e==="max"&&(o="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,d="vec4";e==="all"?(o="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):e==="any"&&(o="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");var h="";i%n>0&&(h=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===2)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===3)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},YAe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Yu(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+LC(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `},XAe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=t.shape,s=o[1],u=o[2],l=[n&&s>1?i-1:i,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],d=l[1]/c[1],h=1/f,p=1/d,m=2*Math.ceil(h)+2,y=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+d+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},QAe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},ZAe=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},JAe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=t.shape,s=o[1],u=o[2],l=[n&&s>1?i-1:i,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],d=l[1]/c[1],h=1/f,p=1/d,m=2*Math.ceil(h)+2,y=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+d+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},eTe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},tTe=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map(function(a,o){return function(s){return e.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(o)}).join(","),i=sn(n);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},nTe=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=si("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],o=sn(n);function s(u){var l=t.map(function(c,f){return function(d,h){return e.indexOf(d)!==-1&&t[d]!==1?t[d]+" - "+h[d]+" - 1":""+h[d]}(f,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},wk=function(t,e,n,r,i,a,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=sn(i.length),u=sn(a.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var d="getUpdates("+f+")",h=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+d+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},rTe=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,i=t.inSize,a=t.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";i%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var f="";i%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},iTe=function(t,e,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)i="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<t&&o.push(""+a[u]);r=o.join(),i=s.join()}var l=sn(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},aTe=function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=sn(this.rank),i="uniform int start["+this.rank+"];",a=function(o){if(o===1)return"sourceLoc";if(o<=6)return hx.slice(0,o).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(o,s){return"sourceLoc."+hx[s]+" = start["+s+"] + coords."+hx[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+n+`
        setOutput(getSource(`+a+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),hx=["x","y","z","w","u","v"],oTe=function(){function t(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var n=sn(this.rank),r=si("coords",this.rank),i=si("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",o="getChannel(getSource("+i.join()+"), "+a+")",s=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+o+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map(function(c,f){return"start["+f+"]"}).join()+");":e.map(function(c,f){return i[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),sTe=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=sn(n.length),a=sn(n.length),o="";if(r===1)o="coords * strides + begin";else{var s=0;o=n.map(function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+t+`);
      `+i+" strides = "+i+"("+e+`);

      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},uTe=function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var i,a=_k(n,r),o=Ek(e,a,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[o].shift();return this.usedTextures[o].push(s),s}return this.numUsedTextures++,this.log(),a===Ni.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Ni.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Ni.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Ni.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Ni.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(i),i},t.prototype.releaseTexture=function(e,n,r,i){if(this.freeTextures!=null){var a=Ek(n,_k(r,i),i);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[a],s=o.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(i){e.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function _k(t,e){if(t===Ti.UPLOAD)return Ni.PACKED_2X2_FLOAT32;if(t===Ti.RENDER||t==null)return function(n){return _e().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Ni.PACKED_2X2_FLOAT32:Ni.UNPACKED_FLOAT32:n?Ni.PACKED_2X2_FLOAT16:Ni.UNPACKED_FLOAT16}(e);if(t===Ti.DOWNLOAD||t===Ti.PIXELS)return Ni.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function Ek(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var lTe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var i=sn(this.rank),a=function(o){var s=o.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+o[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<o.length;c++)l.push("imod("+u[c]+", "+o[c]+")");return l.join()}(t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},cTe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var i=sn(this.rank),a=function(o){var s=o.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<o.length;c++)l[o[c]]=u[c];return l.join()}(e);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `},fTe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=sn(this.rank),a=c9("rc",this.rank),o=new Array(this.rank);for(r=0;r<e.length;r++)o[e[r]]=a[r];var s="vec2("+o.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+o.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},jC=1.7580993408473768,$C=1.0507009873554805,_t=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},$a="if (isnan(x)) return x;",dTe="return x;",Ck="return abs(x);",m9=$a+`
  return (x < 0.0) ? 0.0 : x;
`,v9=$a+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,g9="return (x >= 0.0) ? x : (exp(x) - 1.0);",hTe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+jC+`;
  float scale = `+$C+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Nk="return -x;",Sk="return ceil(x);",Dk="return floor(x);",Ak="return exp(x);",Tk="return exp(x) - 1.0;",pTe=$a+`
  return sin(x);
`,mTe=$a+`
  return cos(x);
`,vTe=$a+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,gTe=$a+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,yTe=$a+`
  return atan(x);
`,xTe=$a+"return log(x + sqrt(x * x + 1.0));",bTe=$a+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,wTe=$a+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Bm="return x;",_Te="return x;",y9=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,x9=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,b9=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,bd=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},ETe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=si("rc",e),r=sn(e),i=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(e,n),a=n.slice(-2),o=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},Lm={};function jm(t,e){if(e===void 0&&(e=!1),t==="linear")return e?_Te:dTe;if(t==="relu")return e?y9:m9;if(t==="elu")return e?b9:g9;if(t==="relu6")return e?x9:v9;if(t==="prelu")return e?p9:h9;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var CTe=600,NTe=function(t){function e(n){var r,i=t.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!_e().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var a=ho(_e().getNumber("WEBGL_VERSION"));i.binaryCache=((r=_e().getNumber("WEBGL_VERSION"))in Lm||(Lm[r]={}),Lm[r]),i.gpgpu=new OAe(a),i.canvas=a.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=n,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=n.gl.canvas;return i.textureManager=new uTe(i.gpgpu),i.numMBBeforeWarning=_e().global.screen==null?1024:_e().global.screen.height*_e().global.screen.width*window.devicePixelRatio*CTe/1024/1024,i.texData=new t9(i,se),i}return ja(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(n,r,i){if(_e().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={};return this.texData.set(a,{shape:r,dtype:i,values:n,usage:Ti.UPLOAD}),a},e.prototype.move=function(n,r,i,a){if(_e().getBool("DEBUG")&&this.checkNumericalProblems(r),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:i,dtype:a,values:r,usage:Ti.UPLOAD})},e.prototype.readSync=function(n){var r=this.texData.get(n),i=r.values,a=r.dtype,o=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new bd(u,Bm):new _t(u,Bm);var f=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:a}],a),d=this.readSync(f.dataId);return this.disposeData(f.dataId),d}if(i!=null)return this.convertAndCacheOnCPU(n);if(a==="string")return i;var h,p,m=this.activeTimers!=null;return m&&(h=qa()),a==="complex64"?p=Xw(o.real.dataSync(),o.imag.dataSync()):p=this.getValuesFromTexture(n),m&&(this.downloadWaitMs+=qa()-h),this.convertAndCacheOnCPU(n,p)},e.prototype.read=function(n){return Ve(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,d,h,p,m,y,v,x,g,b,w,_,E,C;return We(this,function(N){switch(N.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(D){return r.push(D)})];if(i=this.texData.get(n),a=i.values,o=i.shape,s=i.slice,u=i.dtype,l=i.complexTensors,c=i.isPacked,s!=null)return f=void 0,f=c?new bd(o,Bm):new _t(o,Bm),d=this.runWebGLProgram(f,[{dataId:n,shape:o,dtype:u}],u),h=this.read(d.dataId),this.disposeData(d.dataId),[2,h];if(a!=null)return[2,this.convertAndCacheOnCPU(n)];if(!_e().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&_e().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,u!=="complex64"&&_e().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(n),y=this.texData.get(m.dataId),p=(C=this.gpgpu).createBufferFromTexture.apply(C,[y.texture].concat(Zd(o)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:N.sent(),N.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return x=N.sent(),g=x[0],b=x[1],v=Xw(g,b),[3,5];case 4:p==null?v=this.getValuesFromTexture(n):(w=He(o),v=this.gpgpu.downloadFloat32MatrixFromBuffer(p,w)),N.label=5;case 5:return m!=null&&this.disposeData(m.dataId),_=this.convertAndCacheOnCPU(n,v),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(D){return D(_)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,_]}})})},e.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var i=n[r];if(!hSe(i))throw _e().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(n){var r,i=this.texData.get(n),a=i.shape,o=i.dtype,s=i.isPacked,u=He(a);if(_e().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(Zd(a))).subarray(0,u);return this.disposeData(l.dataId),f}var d=_e().getBool("WEBGL_PACK")&&s===!0,h=d?ox(a):a,p=d?new dAe(h):new fAe(h),m=this.runWebGLProgram(p,[{shape:h,dtype:o,dataId:n}],"float32"),y=this.texData.get(m.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(y.texture,y.texShape[0],y.texShape[1]).subarray(0,u);return this.disposeData(m.dataId),v},e.prototype.time=function(n){return Ve(this,void 0,void 0,function(){var r,i,a,o,s,u,l;return We(this,function(c){switch(c.label){case 0:return r=this.activeTimers,i=[],a=!1,this.programTimersStack==null?(this.programTimersStack=i,a=!0):this.activeTimers.push(i),this.activeTimers=i,n(),o=bf(this.activeTimers.map(function(f){return f.query})).filter(function(f){return f!=null}),s=bf(this.activeTimers.map(function(f){return f.name})).filter(function(f){return f!=null}),this.activeTimers=r,a&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return l=c.sent(),u.kernelMs=GNe(l),u.getExtraProfileInfo=function(){return l.map(function(f,d){return{name:s[d],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:qa(),endMs:null}},e.prototype.endTimer=function(n){return _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=qa(),n)},e.prototype.getQueryTime=function(n){return Ve(this,void 0,void 0,function(){var r;return We(this,function(i){return _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},e.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},e.prototype.releaseGPUData=function(n){var r=this.texData.get(n),i=r.texture,a=r.dtype,o=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(o,a),this.textureManager.releaseTexture(i,o,s,u)));var d=this.texData.get(n);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null},e.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},e.prototype.getDataInfo=function(n){return this.texData.get(n)},e.prototype.getCPUBackend=function(){return _e().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=se.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(n,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(a){return i.texData.get(a.dataId).texture==null&&a.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(n,r){var i=this.makeOutput(n.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:se.keep(n.clone()),imag:se.keep(r.clone())},i},e.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,i);if(He(i)===0)return hr([],i,n.dtype);var a=this.texData.get(n.dataId).isPacked,o=J7(n.shape,r,i);if(a||!o){var s=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oTe(i):new aTe(i),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,i)},e.prototype.shallowSlice=function(n,r,i){var a=this.texData.get(n.dataId),o=this.makeOutput(i,n.dtype),s=this.texData.get(o.dataId);Object.assign(s,a),s.shape=i,s.dtype=n.dtype;var u=e9(r,n.strides);a.slice&&(u+=a.slice.flatOffset),s.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),o},e.prototype.stridedSlice=function(n,r,i,a){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,i,a);var o=RC(r,i,a);if(o.some(function(u){return u===0}))return hr([],o);var s=new sTe(r,a,o);return this.compileAndRun(s,[n])},e.prototype.reverse=function(n,r){var i=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nTe(n.shape,r):new tTe(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var i=n.map(function(h){return Zi(h)}),a=n.map(function(h){return Ka(h)});return fr(this.concat(i,r),this.concat(a,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>_e().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(n.length/2),s=this.concat(n.slice(0,o),r),u=this.concat(n.slice(o),r);return this.concat([s,u],r)}if(_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new QDe(n.map(function(h){return h.shape}),r);return this.compileAndRun(l,n)}var c=_f(n.map(function(h){return h.shape}),r),f=n.map(function(h){return h.as2D(-1,He(h.shape.slice(r)))}),d=new XDe(f.map(function(h){return h.shape}));return this.compileAndRun(d,f).reshape(c)},e.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Nk,n.dtype);var r=new _t(n.shape,Nk);return this.compileAndRun(r,[n])},e.prototype.batchMatMul=function(n,r,i,a){var o=i?n.shape[2]:n.shape[1],s=a?r.shape[1]:r.shape[2],u=i?n.shape[1]:n.shape[2],l=n.shape[0];if((o===1||s===1)&&u>1e3){i&&(n=n.transpose([0,2,1])),a&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(l,u,1),f=s===1?2:1,d=s===1?r.as3D(l,1,u):r;return this.multiply(c,d).sum(f,!0)}var h=dr(n.dtype,r.dtype),p=new cx(n.shape,[l,o,s],i,a);return this.compileAndRun(p,[n,r],h)},e.prototype.fusedBatchMatMul=function(n){var r=n.a,i=n.b,a=n.transposeA,o=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=a?r.shape[2]:r.shape[1],f=o?i.shape[1]:i.shape[2],d=r.shape[0],h=dr(r.dtype,i.dtype),p=s!=null,m=l!=null,y=u?jm(u,!0):null,v=new cx(r.shape,[d,c,f],a,o,p,y,m),x=[r,i];return s&&x.push(s),l&&x.push(l),this.compileAndRun(v,x,h)},e.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var i=this.texData.get(n.dataId),a=this.texData.get(r.dataId),o=new hk(qDe,n.shape,r.shape),s=new hk(HDe,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)],l=this.compileAndRun(o,u),c=this.compileAndRun(s,u),f=this.complex(l,c);return l.dispose(),c.dispose(),f}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,pk,n.dtype);var d=new Nn(pk,n.shape,r.shape);return this.compileAndRun(d,[n,r],n.dtype)},e.prototype.batchNormalization=function(n,r,i,a,o,s){var u=[n,r,i],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(o!=null&&(c=o.shape,u.push(o)),_e().getBool("WEBGL_PACK_NORMALIZATION")){var f=new WDe(n.shape,r.shape,i.shape,l,c,a);return this.compileAndRun(f,u)}var d=new VDe(n.shape,r.shape,i.shape,l,c,a);return this.compileAndRun(d,u)},e.prototype.localResponseNormalization4D=function(n,r,i,a,o){var s=_e().getBool("WEBGL_PACK_NORMALIZATION")?new $Ae(n.shape,r,i,a,o):new LAe(n.shape,r,i,a,o);return this.compileAndRun(s,[n])},e.prototype.LRNGrad=function(n,r,i,a,o,s,u){var l=new jAe(r.shape,a,o,s,u);return this.compileAndRun(l,[r,i,n])},e.prototype.tile=function(n,r){if(n.dtype==="string"){var i=this.readSync(n.dataId).map(function(o){return Hg(o)});return u9(vt(n.shape,n.dtype,i),r)}var a=new lTe(n.shape,r);return this.compileAndRun(a,[n])},e.prototype.pad=function(n,r,i){var a=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GAe(n.shape,r,i):new HAe(n.shape,r,i);return this.compileAndRun(a,[n])},e.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var i=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fTe(n.shape,r):new cTe(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.gather=function(n,r,i){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,i);var a=new yAe(n.shape,r.size,i);return this.compileAndRun(a,[n,r])},e.prototype.batchToSpaceND=function(n,r,i){X(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(f,d){return f*d}),o=Zg(n.shape,r,a),s=Jg(o.length,r.length),u=e0(n.shape,r,a),l=Y7(i,r.length),c=X7(u,i,r.length);return n.reshape(o).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,i){X(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(d,h){return d*h}),o=[[0,0]];o.push.apply(o,i);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var u=n.pad(o),l=Zg(u.shape,r,a,!1),c=Jg(l.length,r.length,!1),f=e0(u.shape,r,a,!1);return u.reshape(l).transpose(c).reshape(f)},e.prototype.reduce=function(n,r,i){var a=n.shape[0],o=n.shape[1],s=sx(o),u=new KAe({windowSize:s,inSize:o,batchSize:a},r),l=this.compileAndRun(u,[n],i);return l.shape[1]===1?l:this.reduce(l,r,i)},e.prototype.argReduce=function(n,r,i){i===void 0&&(i=null);var a=n.shape[0],o=n.shape[1];i!=null&&(a=i.shape[0],o=i.shape[1]);var s=sx(o),u=new FDe({windowSize:s,inSize:o,batchSize:a},r,i==null),l=[n];i!=null&&l.push(i);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},e.prototype.argReducePacked=function(n,r,i){i===void 0&&(i=null);var a=i!=null?i.shape:n.shape,o=sx(a[a.length-1]),s=new $De(a,o,r,i==null),u=i==null?[n]:[n,i],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},e.prototype.sum=function(n,r){Ci("sum",r,n.rank);var i=Dr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o),u=J1(n.dtype);return this.reduce(s,"sum",u).reshape(a)},e.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var i=Dr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o),u=J1(n.dtype);return this.reduce(s,"prod",u).reshape(a)},e.prototype.unsortedSegmentSum=function(n,r,i){var a=0,o=po([a],n.rank),s=n;o!=null&&(s=n.transpose(o),a=mo(1,n.rank)[0]);var u=function(h,p,m){for(var y=[],v=h.length,x=0;x<v;x++)x!==p?y.push(h[x]):y.push(m);return y}(s.shape,a,i),l=He([s.shape[a]]),c=s.as2D(-1,l),f=J1(n.dtype),d=this.segOpCompute(c,"unsortedSegmentSum",r,f,i).reshape(u);return o!=null&&(d=d.transpose(TC(o))),d},e.prototype.segOpCompute=function(n,r,i,a,o){var s=n.shape[0],u=n.shape[1],l=function(d,h){var p,m=!1;for(d<=Z7?(p=d,m=!0):p=zw(d,Math.floor(Math.sqrt(d)));!m;)p>h||p===d?m=!0:p=zw(d,p+1);return p}(u,o),c=new rTe({windowSize:l,inSize:u,batchSize:s,numSegments:o}),f=this.compileAndRun(c,[n,i],a);return f.shape[1]===o?f:(i=Qg(0,o).tile([u/l]),this.segOpCompute(f,r,i,a,o))},e.prototype.argMinMaxReduce=function(n,r,i){var a=[r];if(Ci("arg"+i.charAt(0).toUpperCase()+i.slice(1),a,n.rank),!_e().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var o=Dr(n.shape,a),s=o[0],u=He(o[1]),l=n.as2D(-1,u);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(n,i)},e.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},e.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},e.prototype.cumsum=function(n,r,i,a){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var o=new oAe(n.shape,i,a);return this.compileAndRun(o,[n])},e.prototype.equal=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var i=new Nn("return float(a == b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.notEqual=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new Nn("return float(a != b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new Nn("return float(a < b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.lessEqual=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new Nn("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new Nn("return float(a > b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.greaterEqual=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new Nn("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.logicalNot=function(n){var r=new _t(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},e.prototype.logicalAnd=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new Nn("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.logicalOr=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new Nn("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.select=function(n,r,i){var a=new iTe(n.rank,r.shape,r.rank);return this.compileAndRun(a,[n,r,i],dr(r.dtype,i.dtype))},e.prototype.where=function(n){Yg("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return BC(n.shape,r)},e.prototype.topk=function(n,r,i){return l9(n.dataSync(),n.shape,n.dtype,r)},e.prototype.min=function(n,r){Ci("min",r,n.rank);var i=Dr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o);return this.reduce(s,"min",s.dtype).reshape(a)},e.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bo(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Nn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.mod=function(n,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bo(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Nn(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);Ci("max",r,n.rank);var i=Dr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o);return this.reduce(s,"max",s.dtype).reshape(a)},e.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bo(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Nn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.all=function(n,r){Ci("all",r,n.rank);var i=Dr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o);return this.reduce(s,"all",s.dtype).reshape(a)},e.prototype.any=function(n,r){Ci("any",r,n.rank);var i=Dr(n.shape,r),a=i[0],o=He(i[1]),s=n.as2D(-1,o);return this.reduce(s,"any",s.dtype).reshape(a)},e.prototype.realDivide=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new Nn(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(i,[n,r],"float32")},e.prototype.floorDiv=function(n,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new Nn(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(i,[n,r],"int32")},e.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,ux);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var i=dr(n.dtype,r.dtype);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,ux,i);var a=new Nn(ux,n.shape,r.shape);return this.compileAndRun(a,[n,r],i)},e.prototype.packedUnaryOp=function(n,r,i){var a=new bd(n.shape,r);return this.compileAndRun(a,[n],i)},e.prototype.packedBinaryOp=function(n,r,i,a,o){o===void 0&&(o=!1);var s=new bo(i,n.shape,r.shape,o);return this.compileAndRun(s,[n,r],a)},e.prototype.complexSeparableBinaryOp=function(n,r,i){var a=this,o=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[o.complexTensors.real,s.complexTensors.real],[o.complexTensors.imag,s.complexTensors.imag]].map(function(d){var h=d[0],p=d[1],m=a.makeComplexComponentTensorInfo(n,h),y=a.makeComplexComponentTensorInfo(r,p),v=new Nn(i,n.shape,r.shape);return a.compileAndRun(v,[m,y],dr(h.dtype,p.dtype))}),l=u[0],c=u[1],f=this.complex(l,c);return l.dispose(),c.dispose(),f},e.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},e.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>_e().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),i=this.addN(n.slice(0,r)),a=this.addN(n.slice(r));return this.addN([i,a])}var o=n.map(function(l){return l.dtype}).reduce(function(l,c){return dr(l,c)}),s=n.map(function(l){return l.shape}),u=_e().getBool("WEBGL_PACK")?new RDe(n[0].shape,s):new kDe(n[0].shape,s);return this.compileAndRun(u,n,o)},e.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,lx);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var i=dr(n.dtype,r.dtype);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,lx,n.dtype);var a=new Nn(lx,n.shape,r.shape);return this.compileAndRun(a,[n,r],i)},e.prototype.pow=function(n,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bo(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Nn(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),a=dr(n.dtype,r.dtype);return this.compileAndRun(i,[n,r],a)},e.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Sk,n.dtype);var r=new _t(n.shape,Sk);return this.compileAndRun(r,[n])},e.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Dk,n.dtype);var r=new _t(n.shape,Dk);return this.compileAndRun(r,[n])},e.prototype.sign=function(n){var r=new _t(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},e.prototype.isNaN=function(n){var r=new _t(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isInf=function(n){var r=new _t(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isFinite=function(n){var r=new _t(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.round=function(n){var r=new _t(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},e.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Ak,n.dtype);var r=new _t(n.shape,Ak);return this.compileAndRun(r,[n])},e.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Tk,n.dtype);var r=new _t(n.shape,Tk);return this.compileAndRun(r,[n])},e.prototype.softmax=function(n,r){var i=Qn([r],n.shape),a=this.max(n,i),o=wi(a.shape,i),s=this.subtract(n,a.reshape(o)),u=this.exp(s),l=this.sum(u,i).reshape(o);return this.realDivide(u,l)},e.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new _t(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},e.prototype.log1p=function(n){var r=new _t(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},e.prototype.sqrt=function(n){var r=new _t(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},e.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new _t(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},e.prototype.reciprocal=function(n){var r=new _t(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},e.prototype.relu=function(n){var r;return r=_e().getBool("WEBGL_PACK")?new bd(n.shape,y9):new _t(n.shape,m9),this.compileAndRun(r,[n])},e.prototype.relu6=function(n){var r;return r=_e().getBool("WEBGL_PACK")?new bd(n.shape,x9):new _t(n.shape,v9),this.compileAndRun(r,[n])},e.prototype.prelu=function(n,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bo(p9,n.shape,r.shape):new Nn(h9,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.elu=function(n){if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,b9,n.dtype);var r=new _t(n.shape,g9);return this.compileAndRun(r,[n])},e.prototype.eluDer=function(n,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bo(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new Nn("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.selu=function(n){var r=new _t(n.shape,hTe);return this.compileAndRun(r,[n])},e.prototype.int=function(n){var r=new _t(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},e.prototype.clip=function(n,r,i){var a,o=(a=_e().getBool("WEBGL_PACK_CLIP")?new KDe(n.shape):new GDe(n.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(a,[n],null,o)},e.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Ck,n.dtype);var r=new _t(n.shape,Ck);return this.compileAndRun(r,[n])},e.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),i=new YDe(n.shape),a=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(i,a)},e.prototype.sigmoid=function(n){var r=new _t(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},e.prototype.softplus=function(n){var r=new _t(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},e.prototype.sin=function(n){var r=new _t(n.shape,pTe);return this.compileAndRun(r,[n])},e.prototype.cos=function(n){var r=new _t(n.shape,mTe);return this.compileAndRun(r,[n])},e.prototype.tan=function(n){var r=new _t(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},e.prototype.asin=function(n){var r=new _t(n.shape,vTe);return this.compileAndRun(r,[n])},e.prototype.acos=function(n){var r=new _t(n.shape,gTe);return this.compileAndRun(r,[n])},e.prototype.atan=function(n){var r=new _t(n.shape,yTe);return this.compileAndRun(r,[n])},e.prototype.atan2=function(n,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bo(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Nn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.sinh=function(n){var r=new _t(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.cosh=function(n){var r=new _t(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.tanh=function(n){var r=new _t(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},e.prototype.asinh=function(n){var r=new _t(n.shape,xTe);return this.compileAndRun(r,[n])},e.prototype.acosh=function(n){var r=new _t(n.shape,bTe);return this.compileAndRun(r,[n])},e.prototype.atanh=function(n){var r=new _t(n.shape,wTe);return this.compileAndRun(r,[n])},e.prototype.erf=function(n){var r=new _t(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},e.prototype.step=function(n,r){var i=new _t(n.shape,function(a){return a===void 0&&(a=0),$a+`
    return x > 0.0 ? 1.0 : float(`+a+`);
  `}(r));return this.compileAndRun(i,[n])},e.prototype.conv2dByMatMul=function(n,r,i,a,o,s){var u=n.shape,l=this.texData.get(n.dataId),c=i.inChannels,f=u[0]*u[1]*u[2],d=i.outChannels,h=i.dataFormat==="channelsLast",p=(f===1||d===1)&&c>1e3,m=u[2]%2!=0&&!!l.isPacked;if(p||!_e().getBool("WEBGL_LAZILY_UNPACK")||!_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var y=h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],v=this.reshape(n,[1,y,i.inChannels]),x=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:v,b:x,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s}),i.outShape)}var g=h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),b={dataId:n.dataId,shape:[1,g,i.inChannels],dtype:n.dtype},w=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,X(Pm(l.shape,b.shape),function(){return"packed reshape "+l.shape+" to "+b.shape+" isn't free"});var _=this.reshape(r,[1,i.inChannels,i.outChannels]),E=this.fusedBatchMatMul({a:b,b:_,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s}),C=this.texData.get(E.dataId);return X(C.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=w,C.shape=i.outShape,se.makeTensorFromDataId(E.dataId,i.outShape,E.dtype)},e.prototype.conv2dWithIm2Row=function(n,r,i,a,o,s){var u=i.filterWidth,l=i.filterHeight,c=i.inChannels,f=i.outWidth,d=i.outHeight,h=i.dataFormat==="channelsLast",p=u*l*c,m=d*f,y=[p,m],v=n.squeeze([0]),x=r.reshape([1,p,-1]),g=new BAe(y,v.shape,i),b=this.compileAndRun(g,[v]).reshape([1,y[0],y[1]]),w=a!=null,_=s!=null,E=o?jm(o,!0):null,C=new cx(b.shape,[1,m,i.outChannels],!0,!1,w,E,_),N=[b,x];a&&N.push(a),_&&N.push(s);var D=this.compileAndRun(C,N);return h?D.reshape([1,d,f,i.outChannels]):D.reshape([1,i.outChannels,d,f])},e.prototype.fusedConv2d=function(n){var r=n.input,i=n.filter,a=n.convInfo,o=n.bias,s=n.activation,u=n.preluActivationWeights;if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,a,o,s,u);if(_e().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,a,o,s,u);var l=o!=null,c=u!=null,f=s?jm(s,!1):null,d=new mk(a,l,f,c),h=[r,i];return o&&h.push(o),u&&h.push(u),this.compileAndRun(d,h)},e.prototype.conv2d=function(n,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,i);if(_e().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,i);var a=new mk(i);return this.compileAndRun(a,[n,r])},e.prototype.conv2dDerInput=function(n,r,i){var a=new JDe(i);return this.compileAndRun(a,[n,r])},e.prototype.conv2dDerFilter=function(n,r,i){var a=new ZDe(i);return this.compileAndRun(a,[n,r])},e.prototype.fusedDepthwiseConv2D=function(n){var r,i=n.input,a=n.filter,o=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=_e().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,f=u?jm(u,c):null,d=[i,a],h=s!=null,p=l!=null;return h&&d.push(s),p&&d.push(l),c?(r=new gk(o,h,f,p),this.compileAndRun(r,d)):(r=new vk(o,h,f,p),this.compileAndRun(r,d))},e.prototype.depthwiseConv2D=function(n,r,i){var a;return _e().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(a=new gk(i),this.compileAndRun(a,[n,r])):(a=new vk(i),this.compileAndRun(a,[n,r]))},e.prototype.depthwiseConv2DDerInput=function(n,r,i){var a=new rAe(i);return this.compileAndRun(a,[n,r])},e.prototype.depthwiseConv2DDerFilter=function(n,r,i){var a=new nAe(i);return this.compileAndRun(a,[n,r])},e.prototype.conv3d=function(n,r,i){var a=new iAe(i);return this.compileAndRun(a,[n,r])},e.prototype.conv3dDerInput=function(n,r,i){var a=new tAe(i);return this.compileAndRun(a,[n,r])},e.prototype.conv3dDerFilter=function(n,r,i){var a=new eAe(i);return this.compileAndRun(a,[n,r])},e.prototype.maxPool=function(n,r){var i=new fx(r,"max",!1);return this.compileAndRun(i,[n])},e.prototype.avgPool=function(n,r){var i=new fx(r,"avg",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.maxPoolBackprop=function(n,r,i,a){var o=new fx(a,"max",!0),s=this.compileAndRun(o,[r]),u=new zAe(a),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.avgPoolBackprop=function(n,r,i){var a=new zDe(i);return this.compileAndRun(a,[n],r.dtype)},e.prototype.cast=function(n,r){return i9(n,r,this)},e.prototype.unstack=function(n,r){for(var i=n.shape[r],a=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(a[o++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(a);return c},e.prototype.avgPool3d=function(n,r){var i=new dx(r,"avg",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.avgPool3dBackprop=function(n,r,i){var a=new UDe(i);return this.compileAndRun(a,[n],r.dtype)},e.prototype.maxPool3d=function(n,r){var i=new dx(r,"max",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.maxPool3dBackprop=function(n,r,i,a){var o=new dx(a,"max",!0),s=this.compileAndRun(o,[r]),u=new UAe(a),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.reshape=function(n,r){var i=this.texData.get(n.dataId);if(i.isPacked&&!Pm(n.shape,r)&&(i.texture===null||!Pm(i.shape,r))){var a=this.packedReshape(n,r);return se.makeTensorFromDataId(a.dataId,a.shape,a.dtype)}return Yw(n,r)},e.prototype.resizeBilinear=function(n,r,i,a){var o=_e().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ZAe(n.shape,r,i,a):new QAe(n.shape,r,i,a);return this.compileAndRun(o,[n],"float32")},e.prototype.resizeBilinearBackprop=function(n,r,i){var a=new XAe(n,r,i);return this.compileAndRun(a,[n])},e.prototype.resizeNearestNeighbor=function(n,r,i,a){var o=new eTe(n.shape,r,i,a);return this.compileAndRun(o,[n])},e.prototype.resizeNearestNeighborBackprop=function(n,r,i){var a=new JAe(n,r,i);return this.compileAndRun(a,[n])},e.prototype.multinomial=function(n,r,i,a){var o=r?n:rs(n),s=o.shape[0],u=o.shape[1],l=new VAe(s,u,i),c=l.getCustomSetupFunc(a);return this.compileAndRun(l,[o],"int32",c)},e.prototype.oneHot=function(n,r,i,a){var o=new WAe(n.size,r,i,a);return this.compileAndRun(o,[n])},e.prototype.diag=function(n){var r=new cAe(n.size);return this.compileAndRun(r,[n])},e.prototype.nonMaxSuppression=function(n,r,i,a,o){return Yg("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),PC(n.dataSync(),r.dataSync(),i,a,o)},e.prototype.cropAndResize=function(n,r,i,a,o,s){var u=new aAe(n.shape,r.shape,a,o,s);return this.compileAndRun(u,[n,r,i],"float32")},e.prototype.depthToSpace=function(n,r,i){X(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var a=n.shape[0],o=i==="NHWC"?n.shape[1]:n.shape[2],s=i==="NHWC"?n.shape[2]:n.shape[3],u=i==="NHWC"?n.shape[3]:n.shape[1],l=o*r,c=s*r,f=u/(r*r),d=new lAe(i==="NHWC"?[a,l,c,f]:[a,f,l,c],r,i);return this.compileAndRun(d,[n])},e.prototype.split=function(n,r,i){return s9(n,r,i)},e.prototype.scatterND=function(n,r,i){var a=t0(0,n,i),o=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,c=a.outputSize,f=[c/u,u],d=n.reshape([s,o]),h=r.reshape([s,u]);if(c===0)return Yw(hr([]),i);var p=je(0),m=new wk(s,o,d.rank,h.rank,l,f);return this.compileAndRun(m,[h,d,p]).reshape(i)},e.prototype.sparseToDense=function(n,r,i,a){var o=t0(0,n,i),s=o.sliceRank,u=o.numUpdates,l=o.strides,c=o.outputSize,f=new wk(u,s,n.rank,r.rank,l,[c,1]);return this.compileAndRun(f,[r,n,a]).reshape(i)},e.prototype.fft=function(n){return this.fftImpl(n,!1)},e.prototype.ifft=function(n){return this.fftImpl(n,!0)},e.prototype.fftImpl=function(n,r){var i=this.texData.get(n.dataId),a=new xk(mAe,n.shape,r),o=new xk(vAe,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag)],u=this.compileAndRun(a,s),l=this.compileAndRun(o,s),c=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),c},e.prototype.gatherND=function(n,r){var i=r.shape,a=i[i.length-1],o=Q7(n,r),s=o[0],u=o[1],l=o[2],c=o[3],f=r.reshape([u,a]),d=n.reshape([n.size/l,l]),h=new xAe(a,c,[u,l]);return this.compileAndRun(h,[d,f]).reshape(s)},e.prototype.fill=function(n,r,i){if((i=i||Ip(r))==="string"){var a=qg(i,He(n));return a.fill(r),se.makeTensor(a,n,i,this)}var o=new gAe(n,r),s=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],i,s)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},e.prototype.linspace=function(n,r,i){return a9(n,r,i)},e.prototype.makeTensorInfo=function(n,r){var i=this.write(null,n,r);return this.texData.get(i).usage=null,{dataId:i,shape:n,dtype:r}},e.prototype.makeOutput=function(n,r){var i=this.makeTensorInfo(n,r).dataId;return se.makeTensorFromDataId(i,n,r,this)},e.prototype.unpackTensor=function(n){var r=new ETe(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},e.prototype.packTensor=function(n){var r=new qAe(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},e.prototype.packedReshape=function(n,r){var i=[Gg(n.shape)].concat(Kg(n.shape)),a={dtype:n.dtype,shape:i,dataId:n.dataId},o=[Gg(r)].concat(Kg(r)),s=new YAe(o,i),u=this.runWebGLProgram(s,[a],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},e.prototype.decode=function(n){var r,i=this.texData.get(n),a=i.isPacked,o=i.shape,s=i.dtype,u=ox(o);return r=a?new uAe(u):new sAe(u),{dtype:s,shape:o,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},e.prototype.runWebGLProgram=function(n,r,i,a,o){var s=this;o===void 0&&(o=!1);var u=this.makeTensorInfo(n.outputShape,i),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===Gh.DENSE){var c=Zd(n.outputShape);l.texShape=c.map(function(g){return 2*g})}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),He(u.shape)===0)return l.values=qh(u.dtype,0),u;var f=[],d=r.map(function(g){if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var b=s.texData.get(g.dataId);if(b.texture==null){if(!n.packedInputs&&He(g.shape)<=_e().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:b.values};n.packedInputs&&(b.isPacked=!0,b.shape=g.shape)}else if(!!b.isPacked!=!!n.packedInputs)g=b.isPacked?s.unpackTensor(g):s.packTensor(g),f.push(g),b=s.texData.get(g.dataId);else if(b.isPacked&&!Pm(b.shape,g.shape)){var w=g,_=g.shape;g.shape=b.shape,g=s.packedReshape(g,_),f.push(g),b=s.texData.get(g.dataId),w.shape=_}return s.uploadToGPU(g.dataId),{shape:g.shape,texData:b,isUniform:!1}});this.uploadToGPU(u.dataId);var h,p={shape:u.shape,texData:l,isUniform:!1},m=function(g,b,w){var _="";b.concat(w).forEach(function(N){var D=N.texData!=null&&N.texData.slice!=null&&N.texData.slice.flatOffset>0,A=N.isUniform?"uniform":N.texData.texShape;_+=N.shape+"_"+A+"_"+D});var E=g.userCode,C=g.constructor.name;return C+="_"+_+"_"+E}(n,d,p),y=this.getAndSaveBinary(m,function(){return function(g,b,w,_){var E=b.userCode,C=w.map(function(B,k){var j={logicalShape:B.shape,texShape:B.isUniform?null:B.texData.texShape,isUniform:B.isUniform,isPacked:!B.isUniform&&B.texData.isPacked,flatOffset:null};return B.texData!=null&&B.texData.slice!=null&&B.texData.slice.flatOffset>0&&(j.flatOffset=B.texData.slice.flatOffset),{name:b.variableNames[k],shapeInfo:j}}),N=C.map(function(B){return B.shapeInfo}),D={logicalShape:_.shape,texShape:_.texData.texShape,isUniform:!1,isPacked:_.texData.isPacked,flatOffset:null},A=PDe(C,D,E,b.packedInputs),T=g.createProgram(A),R=null,F=g.getUniformLocation(T,"NAN",!1);_e().getNumber("WEBGL_VERSION")===1&&(R=g.getUniformLocation(T,"INFINITY",!1));for(var O={},I=0;I<b.variableNames.length;I++){var M=b.variableNames[I];O[M]=g.getUniformLocation(T,M,!1),O["offset"+M]=g.getUniformLocation(T,"offset"+M,!1)}return{program:b,source:A,webGLProgram:T,uniformLocations:O,inShapeInfos:N,outShapeInfo:D,infLoc:R,nanLoc:F}}(s.gpgpu,n,d,p)}),v=this.activeTimers!=null;if(v&&(h=this.startTimer()),function(g,b,w,_,E){bk(b.inShapeInfos,w),bk([b.outShapeInfo],[_]);var C=_.texData.texture,N=_.texData.texShape;_.texData.isPacked?g.setOutputPackedMatrixTexture(C,N[0],N[1]):g.setOutputMatrixTexture(C,N[0],N[1]),g.setProgram(b.webGLProgram),_e().getNumber("WEBGL_VERSION")===1&&b.infLoc!==null&&g.gl.uniform1f(b.infLoc,1/0),b.nanLoc!==null&&g.gl.uniform1f(b.nanLoc,NaN),w.forEach(function(D,A){var T=b.program.variableNames[A],R=b.uniformLocations[T],F=b.uniformLocations["offset"+T];if(R!=null)if(D.isUniform)if(He(D.shape)<2)g.gl.uniform1f(R,D.uniformValues[0]);else{var O=D.uniformValues;O instanceof Float32Array||(O=new Float32Array(O)),g.gl.uniform1fv(R,O)}else D.texData.slice!=null&&F!=null&&g.gl.uniform1i(F,D.texData.slice.flatOffset),g.setInputMatrixTexture(D.texData.texture,R,A)}),E!=null&&E(g,b.webGLProgram),g.executeProgram()}(this.gpgpu,y,d,p,a),f.forEach(function(g){return s.disposeData(g.dataId)}),v&&(h=this.endTimer(h),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(h)})),!_e().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&o===!1){var x=this.unpackTensor(u);return this.disposeData(u.dataId),x}return u},e.prototype.compileAndRun=function(n,r,i,a,o){o===void 0&&(o=!1),i=i||r[0].dtype;var s=this.runWebGLProgram(n,r,i,a,o);return se.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},e.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var n=this;this.disposed||(_e().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=$e(function(){if(!_e().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=_e().getBool("DEBUG");_e().set("DEBUG",!1);var i=n.abs(je(1e-8)).dataSync()[0];if(_e().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(n){var r,i=this.texData.get(n),a=i.shape,o=i.dtype,s=i.values,u=i.texture,l=i.usage,c=i.isPacked;if(u==null){var f,d=this.activeTimers!=null;d&&(f=qa());var h=i.texShape;if(h==null&&(h=ISe(a,c),i.texShape=h),s!=null){var p=ox(a),m=void 0,y=h[1],v=h[0],x=s instanceof Uint8Array;c?(y=(r=Rp(h[0],h[1]))[0],v=r[1],m=new pAe(p,[v,y],x)):m=new hAe(p,[v,y],x);var g=this.makeTensorInfo([v,y],o);this.texData.get(g.dataId).usage=x?Ti.PIXELS:Ti.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),y,v,s);var b=this.runWebGLProgram(m,[g],o,null,!0),w=this.texData.get(b.dataId);i.texture=w.texture,i.texShape=w.texShape,i.isPacked=w.isPacked,i.usage=w.usage,this.disposeData(g.dataId),this.texData.delete(b.dataId),i.values=null,d&&(this.uploadWaitMs+=qa()-f)}else{var _=this.acquireTexture(h,l,o,c);i.texture=_}}},e.prototype.convertAndCacheOnCPU=function(n,r){var i=this.texData.get(n),a=i.dtype;return this.releaseGPUData(n),r!=null&&(i.values=function(o,s){if(s==="float32"||s==="complex64")return o;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(o.length):new Uint8Array(o.length),l=0;l<u.length;++l)u[l]=Math.round(o[l]);return u}throw new Error("Unknown dtype "+s)}(r,a)),i.values},e.prototype.acquireTexture=function(n,r,i,a){if(this.numBytesInGPU+=this.computeBytes(n,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,a)},e.prototype.computeBytes=function(n,r){return n[0]*n[1]*R7(r)},e}(n9);$7()&&se.registerBackend("webgl",function(){return new NTe},2);var STe=ae({square_:function(t){var e=V(t,"x","square"),n=[e];return se.runKernelFunc(function(r,i){return i([e]),r.square(e)},{x:e},null,"Square",{},n,[])}}),Yh="SquaredDifference",w9=ae({squaredDifference_:function(t,e){var n,r=V(t,"a","squaredDifference"),i=V(e,"b","squaredDifference");n=Cn(r,i),r=n[0],i=n[1],It(r.shape,i.shape);var a={a:r,b:i},o=[r,i];return se.runKernelFunc(function(s,u){var l=s.squaredDifference(r,i);return u([r,i]),l},a,function(s,u){var l=u[0],c=u[1],f=je(2);return{a:function(){return s.mul(l.sub(c).mul(f))},b:function(){return s.mul(c.sub(l).mul(f))}}},Yh,{},o,[])}}),DTe=ae({abs_:function(t){var e=V(t,"x","abs");return e.dtype==="complex64"?se.runKernelFunc(function(n){return n.complexAbs(e)},{$x:e}):se.runKernelFunc(function(n,r){var i=n.abs(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mul(i.toFloat().step(-1))}}},"Abs")}}),ATe=ae({acos_:function(t){var e=V(t,"x","acos");return se.runKernelFunc(function(n,r){var i=n.acos(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(je(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),TTe=ae({acosh_:function(t){var e=V(t,"x","acosh");return se.runKernelFunc(function(n,r){var i=n.acosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),MTe=ae({asin_:function(t){var e=V(t,"x","asin");return se.runKernelFunc(function(n,r){var i=n.asin(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(je(1).sub(i.toFloat().square()).sqrt())}}})}}),ITe=ae({asinh_:function(t){var e=V(t,"x","asinh");return se.runKernelFunc(function(n,r){var i=n.asinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(je(1).add(i.toFloat().square()).sqrt())}}})}}),kTe=ae({atan_:function(t){var e=V(t,"x","atan");return se.runKernelFunc(function(n,r){var i=n.atan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().square().add(1))}}})}}),RTe=ae({atanh_:function(t){var e=V(t,"x","atanh");return se.runKernelFunc(function(n,r){var i=n.atanh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(je(1).sub(i.toFloat().square()))}}})}}),FTe=ae({ceil_:function(t){var e=V(t,"x","ceil");return se.runKernelFunc(function(n){return n.ceil(e)},{$x:e},function(n){return{$x:function(){return Bt(n)}}})}}),zC=ae({clipByValue_:function(t,e,n){var r=V(t,"x","clipByValue");X(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."});var i=[r],a={min:e,max:n};return se.runKernelFunc(function(o,s){var u=o.clip(r,e,n);return s([r]),u},{x:r},function(o,s){var u=s[0];return{x:function(){return o.where(u.greaterEqual(e).logicalAnd(u.lessEqual(n)),Bt(o))}}},"ClipByValue",a,i)}}),PTe=ae({cos_:function(t){var e=V(t,"x","cos"),n=[e];return se.runKernelFunc(function(r,i){var a=r.cos(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return a.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),OTe=ae({cosh_:function(t){var e=V(t,"x","cosh");return se.runKernelFunc(function(n,r){var i=n.cosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(n)}}})}}),BTe=ae({erf_:function(t){var e=V(t,"x","erf");return X(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),se.runKernelFunc(function(n,r){var i=n.erf(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Qw=ae({exp_:function(t){var e=V(t,"x","exp");return se.runKernelFunc(function(n,r){var i=n.exp(e);return r([i]),i},{x:e},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),LTe=ae({expm1_:function(t){var e=V(t,"x","expm1");return se.runKernelFunc(function(n,r){var i=n.expm1(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.exp())}}})}}),jTe=ae({floor_:function(t){var e=V(t,"x","floor");return se.runKernelFunc(function(n){return n.floor(e)},{$x:e},function(n){return{$x:function(){return Bt(n)}}})}}),$Te=ae({log_:function(t){var e=V(t,"x","log"),n=[e];return se.runKernelFunc(function(r,i){var a=r.log(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return r.div(a.toFloat())}}},"Log",{},n)}}),zTe=ae({log1p_:function(t){var e=V(t,"x","log1p");return se.runKernelFunc(function(n,r){var i=n.log1p(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.add(1))}}})}}),UTe=ae({logSigmoid_:function(t){var e=V(t,"x","logSigmoid");return se.runKernelFunc(function(n,r){var i=n.softplus(e.neg()).neg();return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.neg().sigmoid())}}})}}),a0=ae({neg_:function(t){var e=V(t,"x","neg"),n=[e];return se.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),VTe=ae({reciprocal_:function(t){var e=V(t,"x","reciprocal");return se.runKernelFunc(function(n,r){var i=n.reciprocal(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.square().neg())}}})}}),WTe=ae({round_:function(t){var e=V(t,"x","round");return se.runKernelFunc(function(n){return n.round(e)},{$x:e},function(n){return{$x:function(){return Bt(n)}}})}}),_9=ae({rsqrt_:function(t){var e=V(t,"x","rsqrt"),n=[e];return se.runKernelFunc(function(r,i){var a=r.rsqrt(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return r.div(a.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),E9=ae({sigmoid_:function(t){var e=V(t,"x","sigmoid");return se.runKernelFunc(function(n,r){var i=n.sigmoid(e);return r([i]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mul(i.mul(je(1).sub(i)))}}},"Sigmoid")}}),qTe=ae({sign_:function(t){var e=V(t,"x","sign");return se.runKernelFunc(function(n){return n.sign(e)},{$x:e},function(n){return{$x:function(){return Bt(n)}}})}}),HTe=ae({isNaN_:function(t){var e=V(t,"x","isNaN");return se.runKernelFunc(function(n){return n.isNaN(e)},{$x:e},function(n){return{$x:function(){return Bt(n)}}})}}),GTe=ae({isInf_:function(t){var e=V(t,"x","isInf");return se.runKernelFunc(function(n){return n.isInf(e)},{$x:e},function(n){return{$x:function(){return Bt(n)}}})}}),KTe=ae({isFinite_:function(t){var e=V(t,"x","isFinite");return se.runKernelFunc(function(n){return n.isFinite(e)},{$x:e},function(n){return{$x:function(){return Bt(n)}}})}}),YTe=ae({sin_:function(t){var e=V(t,"x","sin"),n=[e];return se.runKernelFunc(function(r,i){var a=r.sin(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return a.toFloat().cos().mul(r)}}},"Sin",{},n)}}),XTe=ae({sinh_:function(t){var e=V(t,"x","sinh");return se.runKernelFunc(function(n,r){var i=n.sinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(n)}}})}}),QTe=ae({softplus_:function(t){var e=V(t,"x","softplus");return se.runKernelFunc(function(n,r){var i=n.softplus(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.sigmoid())}}})}}),ZTe=ae({sqrt_:function(t){var e=V(t,"x","sqrt");return se.runKernelFunc(function(n,r){var i=n.sqrt(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().sqrt().mul(2))}}})}}),JTe=ae({step_:function(t,e){e===void 0&&(e=0);var n=V(t,"x","step");return se.runKernelFunc(function(r){return r.step(n,e)},{$x:n},function(r){return{$x:function(){return Bt(r)}}})}}),e3e=ae({tan_:function(t){var e=V(t,"x","tan");return se.runKernelFunc(function(n,r){var i=n.tan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.cos().square())}}})}}),t3e=ae({tanh_:function(t){var e=V(t,"x","tanh");return se.runKernelFunc(function(n,r){var i=n.tanh(e);return r([i]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return je(1).sub(i.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function C9(t,e,n,r,i,a){var o,s,u=V(t,"x","batchNorm"),l=V(e,"mean","batchNorm"),c=V(n,"variance","batchNorm");return i!=null&&(o=V(i,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),X(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),X(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),X(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),o!=null&&X(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),s!=null&&X(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Pp(u,l,c,s,o,a)}function N9(t,e,n,r,i,a){var o,s,u=V(t,"x","batchNorm"),l=V(e,"mean","batchNorm"),c=V(n,"variance","batchNorm");return i!=null&&(o=V(i,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),X(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),X(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),X(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),o!=null&&X(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),s!=null&&X(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Pp(u,l,c,s,o,a)}function S9(t,e,n,r,i,a){var o,s,u=V(t,"x","batchNorm"),l=V(e,"mean","batchNorm"),c=V(n,"variance","batchNorm");return i!=null&&(o=V(i,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),X(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),X(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),X(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),o!=null&&X(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),s!=null&&X(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Pp(u,l,c,s,o,a)}function Pp(t,e,n,r,i,a){a==null&&(a=.001);var o,s,u,l=V(t,"x","batchNorm"),c=V(e,"mean","batchNorm"),f=V(n,"variance","batchNorm");i!=null&&(o=V(i,"scale","batchNorm")),r!=null&&(s=V(r,"offset","batchNorm")),X(c.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),X(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),X(o==null||c.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var d=[l,c,f,o];return se.runKernelFunc(function(h,p){var m=h.batchNormalization(u,$m(c),$m(f),a,$m(o),$m(s));return p([l,c,f,o]),m},{x:l,mean:c,variance:f,scale:o,offset:s},function(h,p){var m=p,y=m[0],v=m[1],x=m[2],g=m[3],b=g??je(1),w=Hn(v.shape,u.shape),_=[];if(v.rank===1){for(var E=0;E<u.shape.length-1;++E)_.push(u.shape[E]);_.push(1)}var C=y.sub(v),N=h.mul(b),D=_9(x.add(je(a))),A=D.mul(D).mul(D).mul(je(-.5));return{x:function(){return v.rank===1?h.mul(Uc(D.as4D(1,1,1,v.shape[0]),_)).mul(b).reshape(y.shape):h.mul(D).mul(b).reshape(y.shape)},mean:function(){var T=D.mul(je(-1)).mul(N);return v.rank===1&&(T=T.sum(w)),T.reshape(v.shape)},variance:function(){var T=A.mul(C).mul(N);return v.rank===1&&(T=T.sum(w)),T.reshape(v.shape)},scale:function(){var T=C.mul(D),R=h.mul(T);return v.rank===1&&(R=R.sum(w)),R.reshape(v.shape)},offset:function(){var T=h;return v.rank===1&&(T=T.sum(w)),T.reshape(v.shape)}}},"BatchNormalization",{varianceEpsilon:a},d).reshape(l.shape)}function $m(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Dy(){z7("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var n3e=ae({batchNormalization2d_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),Dy(),C9(t,e,n,a,i,r)}}),r3e=ae({batchNormalization3d_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),Dy(),N9(t,e,n,a,i,r)}}),i3e=ae({batchNormalization4d_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),Dy(),S9(t,e,n,a,i,r)}}),a3e=ae({batchNormalization_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),Dy(),Pp(t,e,n,a,i,r)}}),D9=ae({batchNorm_:Pp}),o3e=ae({batchNorm2d_:C9}),s3e=ae({batchNorm3d_:N9}),u3e=ae({batchNorm4d_:S9}),Ay=ae({logicalAnd_:function(t,e){var n=V(t,"a","logicalAnd","bool"),r=V(e,"b","logicalAnd","bool");return It(n.shape,r.shape),se.runKernelFunc(function(i){return i.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),l3e=ae({logicalNot_:function(t){var e=V(t,"x","logicalNot","bool");return se.runKernelFunc(function(n){return n.logicalNot(e)},{$x:e})}}),A9=ae({logicalOr_:function(t,e){var n=V(t,"a","logicalOr","bool"),r=V(e,"b","logicalOr","bool");return It(n.shape,r.shape),se.runKernelFunc(function(i){return i.logicalOr(n,r)},{$a:n,$b:r})}}),c3e=ae({logicalXor_:function(t,e){var n=V(t,"a","logicalXor","bool"),r=V(e,"b","logicalXor","bool");return It(n.shape,r.shape),A9(t,e).logicalAnd(Ay(t,e).logicalNot())}}),xl=ae({where_:function(t,e,n){var r=V(e,"a","where"),i=V(n,"b","where"),a=V(t,"condition","where","bool");return Wt(r.shape,i.shape,"Error in where: "),a.rank===1?X(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Wt(a.shape,i.shape,"Error in where: "),se.runKernelFunc(function(o,s){var u=o.select(a,r,i);return s([a]),u},{$condition:a,$a:r,$b:i},function(o,s){var u=s[0];return{$condition:function(){return Bt(u).toFloat()},$a:function(){return o.mul(u.cast(o.dtype))},$b:function(){return o.mul(u.logicalNot().cast(o.dtype))}}})}}),T9=function(t){return Ve(this,void 0,void 0,function(){var e,n,r;return We(this,function(i){switch(i.label){case 0:return[4,(e=V(t,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=BC(e.shape,n),t!==e&&e.dispose(),[2,r]}})})},Dt=ae({add_:function(t,e){var n,r=V(t,"a","add"),i=V(e,"b","add");n=Cn(r,i),r=n[0],i=n[1];var a=It(r.shape,i.shape);return se.runKernelFunc(function(o){return o.add(r,i)},{a:r,b:i},function(o){return{a:function(){var s=o,u=Hn(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=o,u=Hn(i.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(i.shape)}}},"Add")}}),f3e=ae({addN_:function(t){X(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),X(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(i,a){return V(i,"tensors"+a,"addN")}),n=e[0];e.forEach(function(i){if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(i){if(!sr(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return se.runKernelFunc(function(i){return i.addN(e)},r,function(i){var a={};return e.forEach(function(o,s){a[s]=function(){return i.clone()}}),a},"AddN")}}),d3e=ae({addStrict_:function(t,e){var n=V(t,"a","addStrict"),r=V(e,"b","addStrict");return Wt(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),h3e=ae({atan2_:function(t,e){var n,r=V(t,"a","atan2"),i=V(e,"b","atan2");n=Cn(r,i),r=n[0],i=n[1];var a=It(r.shape,i.shape);return se.runKernelFunc(function(o,s){var u=o.atan2(r,i);return s([r,i]),u},{$a:r,$b:i},function(o,s){var u=s[0],l=s[1];return{$a:function(){var c=Dt(u.square(),l.square()),f=o.mul(l.div(c)),d=Hn(u.shape,a);return d.length>0&&(f=f.sum(d)),f.reshape(u.shape)},$b:function(){var c=Dt(u.square(),l.square()),f=a0(o.mul(u.div(c))),d=Hn(l.shape,a);return d.length>0&&(f=f.sum(d)),f.reshape(l.shape)}}})}}),xa=ae({div_:function(t,e){var n,r=V(t,"a","div"),i=V(e,"b","div");if(n=Cn(r,i),r=n[0],i=n[1],r.dtype==="int32"&&i.dtype==="int32")return M9(r,i);var a=It(r.shape,i.shape);return se.runKernelFunc(function(o,s){var u=o.realDivide(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.div(l.toFloat()),f=Hn(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=Hn(l.shape,a);f.length>0&&(c=c.sum(f).reshape(l.shape));var d=l.square();return c.div(d.toFloat()).neg()}}},"Div")}}),p3e=ae({divNoNan_:function(t,e){var n,r=V(t,"a","div"),i=V(e,"b","div");r=(n=Cn(r,i))[0],i=n[1];var a=xa(r,i),o=Bt(a),s=i.equal(o);return xl(s,o,a)}}),m3e=ae({divStrict_:function(t,e){var n=V(t,"a","div"),r=V(e,"b","div");return Wt(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),M9=ae({floorDiv_:function(t,e){var n,r=V(t,"a","floorDiv"),i=V(e,"b","floorDiv");n=Cn(r,i),r=n[0],i=n[1];var a=It(r.shape,i.shape);return se.runKernelFunc(function(o,s){var u=o.floorDiv(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.div(l.toFloat()),f=Hn(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=Hn(l.shape,a);f.length>0&&(c=c.sum(f).reshape(l.shape));var d=l.square();return c.div(d.toFloat()).neg()}}},"FloorDiv")}}),UC=ae({maximum_:function(t,e){var n,r=V(t,"a","maximum"),i=V(e,"b","maximum");return n=Cn(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),It(r.shape,i.shape),se.runKernelFunc(function(a,o){var s=a.maximum(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return a.mul(s.greaterEqual(u).toFloat())},b:function(){return a.mul(s.less(u).toFloat())}}},"Maximum")}}),v3e=ae({maximumStrict_:function(t,e){var n=V(t,"a","maximumStrict"),r=V(e,"b","maximumStrict");return Wt(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),I9=ae({minimum_:function(t,e){var n,r=V(t,"a","minimum"),i=V(e,"b","minimum");return n=Cn(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),It(r.shape,i.shape),se.runKernelFunc(function(a,o){var s=a.minimum(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return a.mul(s.lessEqual(u).toFloat())},b:function(){return a.mul(s.greater(u).toFloat())}}},"Minimum")}}),g3e=ae({minimumStrict_:function(t,e){var n=V(t,"a","minimumStrict"),r=V(e,"b","minimumStrict");return Wt(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),y3e=ae({mod_:function(t,e){var n,r=V(t,"a","mod"),i=V(e,"b","mod");n=Cn(r,i),r=n[0],i=n[1];var a=It(r.shape,i.shape);return se.runKernelFunc(function(o,s){var u=o.mod(r,i);return s([r,i]),u},{$a:r,$b:i},function(o,s){var u=s[0],l=s[1];return{$a:function(){var c=Hn(u.shape,a);return c.length>0?o.sum(c).reshape(u.shape):o},$b:function(){var c=o.mul(u.div(l).floor().neg()),f=Hn(l.shape,a);return f.length>0?c.sum(f).reshape(l.shape):c}}})}}),x3e=ae({modStrict_:function(t,e){var n=V(t,"a","modStrict"),r=V(e,"b","modStrict");return Wt(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Pr=ae({mul_:function(t,e){var n,r=V(t,"a","mul"),i=V(e,"b","mul");n=Cn(r,i),r=n[0],i=n[1];var a=It(r.shape,i.shape);return se.runKernelFunc(function(o,s){var u=o.multiply(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.mul(l.toFloat()),f=Hn(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=Hn(l.shape,a);return f.length>0?c.sum(f).reshape(l.shape):c}}},"Mul")}}),b3e=ae({mulStrict_:function(t,e){var n=V(t,"a","mul"),r=V(e,"b","mul");return Wt(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),o0=ae({pow_:function(t,e){var n,r=V(t,"base","pow"),i=V(e,"exp","pow");n=Cn(r,i),r=n[0],i=n[1];var a=It(r.shape,i.shape),o=[r,i];return se.runKernelFunc(function(s,u){var l=s.pow(r,i);return u([r,i,l]),l},{a:r,b:i},function(s,u){var l=u[0],c=u[1],f=u[2];return{a:function(){var d=c.toFloat(),h=s.mul(d.mul(l.pow(d.sub(je(1))))),p=Hn(l.shape,a);return p.length>0&&(h=h.sum(p)),h.reshape(l.shape)},b:function(){var d=l.greater(0),h=l.log().where(d,Bt(l)),p=s.mul(f.mul(h)),m=Hn(c.shape,a);return m.length>0&&(p=p.sum(m)),p.reshape(c.shape)}}},"Pow",{},o,[!0])}}),w3e=ae({powStrict_:function(t,e){return Wt(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),_3e=ae({squaredDifferenceStrict_:function(t,e){var n=V(t,"a","squaredDifferenceStrict"),r=V(e,"b","squaredDifferenceStrict");return Wt(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Gn=ae({sub_:function(t,e){var n,r=V(t,"a","sub"),i=V(e,"b","sub");n=Cn(r,i),r=n[0],i=n[1];var a=It(r.shape,i.shape);return se.runKernelFunc(function(o){return o.subtract(r,i)},{a:r,b:i},function(o){return{a:function(){var s=o,u=Hn(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=o,u=Hn(i.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(i.shape)}}},"Sub")}}),E3e=ae({subStrict_:function(t,e){var n=V(t,"a","subStrict"),r=V(e,"b","subStrict");return Wt(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),k9=ae({equal_:function(t,e){var n,r=V(t,"a","equal"),i=V(e,"b","equal");return n=Cn(r,i),r=n[0],i=n[1],It(r.shape,i.shape),se.runKernelFunc(function(a){return a.equal(r,i)},{$a:r,$b:i})}}),C3e=ae({equalStrict_:function(t,e){var n=V(t,"a","equalStrict"),r=V(e,"b","equalStrict");return Wt(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),N3e=ae({greater_:function(t,e){var n,r=V(t,"a","greater"),i=V(e,"b","greater");return n=Cn(r,i),r=n[0],i=n[1],It(r.shape,i.shape),se.runKernelFunc(function(a){return a.greater(r,i)},{a:r,b:i},null,"Greater")}}),R9=ae({greaterEqual_:function(t,e){var n,r=V(t,"a","greaterEqual"),i=V(e,"b","greaterEqual");return n=Cn(r,i),r=n[0],i=n[1],It(r.shape,i.shape),se.runKernelFunc(function(a,o){var s=a.greaterEqual(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return Bt(s)},b:function(){return Bt(u)}}},"GreaterEqual")}}),S3e=ae({greaterEqualStrict_:function(t,e){var n=V(t,"a","greaterEqualStrict"),r=V(e,"b","greaterEqualStrict");return Wt(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),D3e=ae({greaterStrict_:function(t,e){var n=V(t,"a","greaterStrict"),r=V(e,"b","greaterStrict");return Wt(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),A3e=ae({less_:function(t,e){var n,r=V(t,"a","less"),i=V(e,"b","less");return n=Cn(r,i),r=n[0],i=n[1],It(r.shape,i.shape),se.runKernelFunc(function(a){return a.less(r,i)},{a:r,b:i},null,"Less")}}),T3e=ae({lessEqual_:function(t,e){var n,r=V(t,"a","lessEqual"),i=V(e,"b","lessEqual");return n=Cn(r,i),r=n[0],i=n[1],It(r.shape,i.shape),se.runKernelFunc(function(a,o){var s=a.lessEqual(r,i);return o([r,i]),s},{a:r,b:i},null,"LessEqual")}}),M3e=ae({lessEqualStrict_:function(t,e){var n=V(t,"a","lessEqualStrict"),r=V(e,"b","lessEqualStrict");return Wt(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),I3e=ae({lessStrict_:function(t,e){var n=V(t,"a","lessStrict"),r=V(e,"b","lessStrict");return Wt(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),k3e=ae({notEqual_:function(t,e){var n,r=V(t,"a","notEqual"),i=V(e,"b","notEqual");return n=Cn(r,i),r=n[0],i=n[1],It(r.shape,i.shape),se.runKernelFunc(function(a){return a.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),R3e=ae({notEqualStrict_:function(t,e){var n=V(t,"a","notEqualStrict"),r=V(e,"b","notEqualStrict");return Wt(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function Mk(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function Ik(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var VC=ae({gather_:function(t,e,n){n===void 0&&(n=0);var r=V(t,"x","gather"),i=V(e,"indices","gather","int32");n=Qn(n,r.shape)[0];var a=function(o,s,u){for(var l=o.shape[u],c=[],f=1,d=1,h=0;h<u;h++)c.push(o.shape[h]),f*=o.shape[h];for(h=0;h<s.rank;h++)c.push(s.shape[h]);for(h=u+1;h<o.rank;h++)c.push(o.shape[h]),d*=o.shape[h];return{batchSize:f,sliceSize:d,dimSize:l,outputShape:c}}(r,i,n);return se.runKernelFunc(function(o,s){var u=o.gather(r,i.flatten(),n);return s([i]),u},{x:r,indices:i},function(o,s){var u=s[0];return{x:function(){var l=r.shape,c=u.size,f=l.slice(0,n),d=f.length,h=l.slice(n,l.length).slice(1),p=h.length,m=Mk(0,d),y=Mk(d+1,d+1+p),v=Ik([f,[c],h]),x=o.reshape(v),g=u.reshape([c]),b=Ik([[d],m,y]),w=x.transpose(b),_=F9(w,g,r.shape[n]),E=TC(b);return _=_.transpose(E)},indices:function(){return u}}},"Gather",{axis:n}).reshape(a.outputShape)}}),F9=ae({unsortedSegmentSum_:function(t,e,n){var r=V(t,"x","unsortedSegmentSum"),i=V(e,"segmentIds","unsortedSegmentSum","int32");return X(Fn(n),function(){return"numSegments must be of dtype int"}),se.runKernelFunc(function(a,o){var s=a.unsortedSegmentSum(r,i,n);return o([i]),s},{$x:r},function(a,o){var s=o[0];return{$x:function(){return function(u,l){for(var c=UC(l,Bt(l)),f=VC(u,c),d=R9(l,je(0,"int32")),h=f.rank-d.rank,p=0;p<h;++p)d=Xi(d,p+1);d=Ay(d,Zf(f.shape,"bool"));var m=Bt(f);return xl(d,f,m)}(a,s)}}})}}),F3e=function(t,e,n){return Ve(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,d,h,p,m;return We(this,function(y){switch(y.label){case 0:for(r=V(t,"tensor","boolMask"),i=V(e,"mask","boolMask","bool"),a=n??0,o=i.rank,s=r.shape,X(o>0,function(){return"mask cannot be scalar"}),Wt(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=a;l<a+o;l++)u*=s[l];return c=s.slice(0,a).concat([u],s.slice(a+o)),f=r.reshape(c),d=i.reshape([-1]),[4,T9(d)];case 1:return h=y.sent(),p=h.squeeze([1]),m=VC(f,p,a),t!==r&&r.dispose(),e!==i&&i.dispose(),p.dispose(),f.dispose(),d.dispose(),h.dispose(),[2,m]}})})};function P9(t,e,n,r,i,a,o){a===void 0&&(a="NHWC"),X(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),X(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),X(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),X(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?u.shape[3]:u.shape[1];X(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),X(f===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."}),o!=null&&X(Fn(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var d=FC(a),h=zl(s,n.shape,r,1,i,o,!1,d),p=se.runKernelFunc(function(m,y){var v=m.conv2dDerInput(u,n,h);return y([n,u]),v},{dy4D:u,filter:n},function(m,y){var v=y[0],x=y[1];return{dy4D:function(){return ca(m,v,r,i,a,1,o)},filter:function(){return WC(m,x,v.shape,r,i,a,o)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function px(t){var e=function(a){return typeof a=="number"?[a,a,a]:a.length===2?[a[0],a[1],1]:a}(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function O9(t,e,n,r,i){X(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var a=t,o=e,s=!1;e.rank===4&&(s=!0,o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,t[0],t[1],t[2],t[3]]);var u=a[4],l=o.shape[4];X(a.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),X(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),X(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),X(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),X(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var c=r0(a,n.shape,r,1,i),f=se.runKernelFunc(function(d){return d.conv3dDerInput(o,n,c)},{dy5D:o});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var P3e=ae({conv1d_:function(t,e,n,r,i,a,o){i===void 0&&(i="NWC"),a===void 0&&(a=1);var s=V(t,"x","conv1d"),u=V(e,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),X(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),X(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),o!=null&&X(Fn(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),X(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),X(_i(n,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"}),X(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),d=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=ca(d,f,[1,n],r,"NHWC",[1,a],o);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),ca=ae({conv2d_:function(t,e,n,r,i,a,o){i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]);var s=V(t,"x","conv2d"),u=V(e,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),X(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),X(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),o!=null&&X(Fn(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var f=i==="NHWC"?l.shape[3]:l.shape[1];X(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),X(_i(n,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"});var d=FC(i),h=zl(l.shape,u.shape,n,a,r,o,!1,d),p=[u,l],m=se.runKernelFunc(function(y,v){var x=y.conv2d(l,u,h);return v([u,l]),x},{x:l,filter:u},function(y,v){var x=v,g=x[0],b=x[1];return X(Ef(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return B9(b.shape,y,g,n,r,i)},filter:function(){return WC(b,y,g.shape,n,r,i)}}},"Conv2D",h,p);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),O3e=ae({conv3d_:function(t,e,n,r,i,a){i===void 0&&(i="NDHWC"),a===void 0&&(a=[1,1,1]);var o=V(t,"x","conv3d"),s=V(e,"filter","conv3d"),u=o,l=!1;o.rank===4&&(l=!0,u=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),X(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),X(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),X(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),X(function(d,h){return px(d)||px(h)}(n,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),X(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var c=r0(u.shape,s.shape,n,a,r),f=se.runKernelFunc(function(d,h){var p=d.conv3d(u,s,c);return h([u,s]),p},{x:u,$filter:s},function(d,h){X(px(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var p=h[0],m=h[1];return{x:function(){return O9(p.shape,d,m,n,r)},$filter:function(){return function(y,v,x,g,b){var w=y;y.rank===4&&(w=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3]));var _=v;_.rank===4&&(_=v.as5D(1,v.shape[0],v.shape[1],v.shape[2],v.shape[3])),X(w.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+w.shape+"."}),X(_.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+_.shape+"."}),X(x.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+x+"."}),X(w.shape[4]===x[3],function(){return"Error in conv3dDerFilter: depth of input "+w.shape[4]+") must match input depth in filter ("+x[3]+"."}),X(_.shape[4]===x[4],function(){return"Error in conv3dDerFilter: depth of dy ("+_.shape[4]+") must match output depth for filter ("+x[4]+")."});var E=r0(w.shape,x,g,1,b);return se.runKernelFunc(function(C){return C.conv3dDerFilter(w,_,E)},{x5D:w,dy5D:_})}(p,d,m.shape,n,r)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),WC=ae({conv2dDerFilter_:function(t,e,n,r,i,a,o){a===void 0&&(a="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),X(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),X(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),X(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=a==="NHWC"?s.shape[3]:s.shape[1],c=a==="NHWC"?u.shape[3]:u.shape[1];X(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),X(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),o!=null&&X(Fn(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var f=FC(a),d=zl(s.shape,n,r,1,i,o,!1,f);return se.runKernelFunc(function(h){return h.conv2dDerFilter(s,u,d)},{x4D:s,dy4D:u})}}),B9=ae({conv2dDerInput_:P9}),Ty=ae({depthwiseConv2d_:function(t,e,n,r,i,a,o){a===void 0&&(a=[1,1]);var s=V(t,"x","depthwiseConv2d"),u=V(e,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),X(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),X(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),X(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),a==null&&(a=[1,1]),X(_i(n,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&X(Fn(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var f=zl(l.shape,u.shape,n,a,r,o,!0),d=[l,u],h=se.runKernelFunc(function(p,m){var y=p.depthwiseConv2D(l,u,f);return m([l,u]),y},{x:l,filter:u},function(p,m){X(Ef(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var y=m[0],v=m[1];return{x:function(){return L9(y.shape,p,v,f)},filter:function(){return j9(y,p,v.shape,f)}}},"DepthwiseConv2dNative",f,d);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),L9=ae({depthwiseConv2dDerInput_:function(t,e,n,r){var i=e,a=!1;e.rank===3&&(a=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=se.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,n,r)},{dy4D:i});return a?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),j9=ae({depthwiseConv2dDerFilter_:function(t,e,n,r){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return a.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),se.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(i,a,r)},{x4D:i,dy4D:a})}}),qC=ae({separableConv2d_:function(t,e,n,r,i,a,o){a===void 0&&(a=[1,1]),o===void 0&&(o="NHWC");var s=V(t,"x","separableConv2d"),u=V(e,"depthwiseFilter","separableConv2d"),l=V(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(s.rank===3&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");X(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),X(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),X(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),X(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),X(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var d=u.shape[2],h=u.shape[3];X(l.shape[2]===d*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*h+", but got "+l.shape[2]+"."});var p=Ty(c,u,r,i,o,a),m=ca(p,l,1,"valid",o);return f?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),B3e=ae({conv2dTranspose_:function(t,e,n,r,i,a){return P9(n,V(t,"x","conv2dTranspose"),V(e,"filter","conv2dTranspose"),r,i,"NHWC",a)}}),L3e=ae({conv3dTranspose_:function(t,e,n,r,i){return O9(n,V(t,"x","conv3dTranspose"),V(e,"filter","conv3dTranspose"),r,i)}}),My=ae({matMul_:function(t,e,n,r){var i;n===void 0&&(n=!1),r===void 0&&(r=!1);var a=V(t,"a","matMul"),o=V(e,"b","matMul");i=Cn(a,o),a=i[0],o=i[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?o.shape[o.rank-1]:o.shape[o.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],c=r?o.shape[o.rank-2]:o.shape[o.rank-1],f=a.shape.slice(0,-2),d=o.shape.slice(0,-2),h=He(f),p=He(d);X(a.rank>=2&&o.rank>=2&&a.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+o.rank+"."}),X(sr(f,d),function(){return"Error in matMul: outer dimensions ("+f+") and ("+d+") of Tensors with shapes "+a.shape+" and "+o.shape+" must match."}),X(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var m=a.shape.slice(0,-2).concat([l,c]),y=n?a.as3D(h,s,l):a.as3D(h,l,s),v=r?o.as3D(p,c,u):o.as3D(p,u,c),x={transposeA:n,transposeB:r};return se.runKernelFunc(function(g,b){var w=g.batchMatMul(y,v,n,r);return b([y,v]),w},{a:y,b:v},function(g,b){var w=b,_=w[0],E=w[1];return n||r?!n&&r?{a:function(){return g.matMul(E,!1,!1)},b:function(){return g.matMul(_,!0,!1)}}:n&&!r?{a:function(){return E.matMul(g,!1,!0)},b:function(){return _.matMul(g,!1,!1)}}:{a:function(){return E.matMul(g,!0,!0)},b:function(){return g.matMul(_,!0,!0)}}:{a:function(){return g.matMul(E,!1,!0)},b:function(){return _.matMul(g,!0,!1)}}},"BatchMatMul",x).reshape(m)}}),j3e=ae({dot_:function(t,e){var n=V(t,"t1","dot"),r=V(e,"t2","dot");X(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var i=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];return X(i===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+a+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),$3e=ae({outerProduct_:function(t,e){var n=V(t,"v1","outerProduct"),r=V(e,"v2","outerProduct");return X(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Op=ae({reverse_:function(t,e){var n=V(t,"x","reverse");if(n.rank===0)return n.clone();var r=Qn(e,n.shape);return se.runKernelFunc(function(i){return i.reverse(n,r)},{$x:n},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(n)}}),z3e=ae({reverse1d_:function(t){var e=V(t,"x","reverse");return X(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),Op(e,0)}}),U3e=ae({reverse2d_:function(t,e){var n=V(t,"x","reverse");return X(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),Op(n,e)}}),V3e=ae({reverse3d_:function(t,e){var n=V(t,"x","reverse");return X(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),Op(n,e)}}),W3e=ae({reverse4d_:function(t,e){var n=V(t,"x","reverse");return X(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),Op(n,e)}});function $9(t,e,n,r,i,a){var o=V(t,"x","maxPool"),s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),X(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),X(_i(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),a!=null&&X(Fn(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var l=Kh(s.shape,e,n,r,i,a);if(l.filterWidth===1&&l.filterHeight===1&&sr(l.inShape,l.outShape))return o.clone();var c=[s],f=se.runKernelFunc(function(d,h){var p=d.maxPool(s,l);return h([s,p]),p},{x:s},function(d,h){var p=h[0],m=h[1];return{x:function(){return function(y,v,x,g,b,w,_,E){var C=V(y,"dy","maxPoolBackprop"),N=V(v,"input","maxPoolBackprop"),D=V(x,"output","maxPoolBackprop");X(N.rank===C.rank,function(){return"Rank of input ("+N.rank+") does not match rank of dy ("+C.rank+")"}),X(_i(b,w),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+w+"'"}),X(C.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+C.rank+"."}),X(N.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+N.rank+"."});var A=Kh(N.shape,g,b,w,_,E);return se.runKernelFunc(function(T){return T.maxPoolBackprop(C,N,D,A)},{$dy:C,$input:N})}(d,p,m,e,n,r,i)}}},"MaxPool",l,c);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function z9(t,e,n,r,i,a){var o=V(t,"x","avgPool","float32");X(_i(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),X(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),a!=null&&X(Fn(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var l=Kh(s.shape,e,n,r,i,a);if(l.filterWidth===1&&l.filterHeight===1&&sr(l.inShape,l.outShape))return o.clone();var c=se.runKernelFunc(function(f){return f.avgPool(s,l)},{x:s},function(f){return{x:function(){return function(d,h,p,m,y,v){var x=V(d,"dy","avgPoolBackprop"),g=V(h,"input","avgPoolBackprop");X(g.rank===x.rank,function(){return"Rank of input ("+g.rank+") does not match rank of dy ("+x.rank+")"}),X(_i(m,y),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+y+"'"});var b=g,w=x,_=!1;g.rank===3&&(_=!0,b=g.as4D(1,g.shape[0],g.shape[1],g.shape[2]),w=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),X(w.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+w.rank+"."}),X(b.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+b.rank+"."});var E=Kh(b.shape,p,m,y,v),C=se.runKernelFunc(function(N){return N.avgPoolBackprop(w,b,E)},{dy4D:w,input4D:b});return _?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}(f,s,e,n,r,i)}}},"AvgPool",l);return c=c.cast(o.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var er=ae({maxPool_:function(t,e,n,r,i){return $9(t,e,n,1,r,i)}}),Bp=ae({avgPool_:function(t,e,n,r,i){return z9(t,e,n,1,r,i)}}),q3e=ae({pool_:function(t,e,n,r,i,a){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");var o=V(t,"x","maxPool"),s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),X(_i(a,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"});var l,c=Kh(s.shape,e,a,i,r),f=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(b,w){var _=b.map(function(N,D){return N+(N-1)*(w[D]-1)}).map(function(N){return N-1}),E=_.map(function(N){return Math.floor(N/2)}),C=_.map(function(N,D){return N-E[D]});return _.map(function(N,D){return[E[D],C[D]]})}([c.filterHeight,c.filterWidth],f):[[0,0],[0,0]];var d=f[0]===1&&f[1]===1,h=function(b,w,_){var E=_.map(function(F){return F[0]}),C=_.map(function(F){return F[1]}),N=b.concat(E,C),D=w.map(function(F,O){return(F-N[O]%F)%F}),A=C.map(function(F,O){return F+D[O]}),T=w.map(function(F,O){return[E[O],A[O]]}),R=w.map(function(F,O){return[0,D[O]]});return[T,R]}([c.inHeight,c.inWidth],f,l),p=h[0],m=h[1],y=d?r:"valid",v=d?s:G7(s,f,p),x=(n==="avg"?function(){return z9(v,e,a,1,y)}:function(){return $9(v,e,a,1,y)})(),g=d?x:W7(x,f,m);return u?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),H3e=ae({maxPool3d_:function(t,e,n,r,i,a,o){a===void 0&&(a="NDHWC");var s=V(t,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),X(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),X(a==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),X(_i(n,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),i!=null&&X(Fn(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=n0(u.shape,e,n,o,r,i,a),f=se.runKernelFunc(function(d,h){var p=d.maxPool3d(u,c);return h([u,p]),p},{x:u},function(d,h){var p=h[0],m=h[1];return{x:function(){return function(y,v,x,g,b,w,_,E){var C=V(y,"dy","maxPool3dBackprop"),N=V(v,"input","maxPool3dBackprop"),D=V(x,"output","maxPool3dBackprop"),A=C,T=N,R=D,F=!1;N.rank===4&&(F=!0,A=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),T=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),R=D.as5D(1,D.shape[0],D.shape[1],D.shape[2],D.shape[3])),X(A.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+A.rank+"."}),X(T.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+T.rank+"."}),X(R.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+R.rank+"."}),w==null&&(w=[1,1,1]),X(_i(b,w),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+w+"'"}),E!=null&&X(Fn(_),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+_+"."});var O=n0(T.shape,g,b,w,_,E),I=se.runKernelFunc(function(M){return M.maxPool3dBackprop(A,T,R,O)},{dy5D:A,input5D:T});return F?I.as4D(I.shape[1],I.shape[2],I.shape[3],I.shape[4]):I}(d,p,m,e,n,o,r,i)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),G3e=ae({avgPool3d_:function(t,e,n,r,i,a,o){a===void 0&&(a="NDHWC");var s=V(t,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),X(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),X(a==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),X(_i(n,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),i!=null&&X(Fn(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=n0(u.shape,e,n,o,r,i,a),f=se.runKernelFunc(function(d){return d.avgPool3d(u,c)},{x:u},function(d){return{x:function(){return function(h,p,m,y,v,x,g){var b=V(h,"dy","avgPool3dBackprop"),w=V(p,"input","avgPool3dBackprop"),_=b,E=w,C=!1;w.rank===4&&(C=!0,_=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]),E=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3])),X(_.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+_.rank+"."}),X(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),v==null&&(v=[1,1,1]),X(_i(y,v),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+v+"'"}),g!=null&&X(Fn(x),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+g+" but got pad "+x+"."});var N=n0(E.shape,m,y,v,x,g),D=se.runKernelFunc(function(A){return A.avgPool3dBackprop(_,E,N)},{dy5D:_,input5D:E});return C?D.as4D(D.shape[1],D.shape[2],D.shape[3],D.shape[4]):D}(d,u,e,n,o,r,i)}}});return f=f.cast(u.dtype),l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),oo=ae({slice_:function(t,e,n){var r,i,a=V(t,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice()).forEach(function(u){X(u!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=n==null?new Array(a.rank).fill(-1):typeof n=="number"?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(u,l){return u>=0?u:(X(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),a.shape[l]-r[l])}),wDe(a,r,i);var o=a.shape,s={begin:r,size:i};return se.runKernelFunc(function(u){return u.slice(a,r,i)},{x:a},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],o[c]-r[c]-i[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),K3e=ae({slice1d_:function(t,e,n){var r=V(t,"x","slice1d");return X(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),oo(r,[e],[n])}}),Y3e=ae({slice2d_:function(t,e,n){var r=V(t,"x","slice2d");return X(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),oo(r,e,n)}}),U9=ae({slice3d_:function(t,e,n){var r=V(t,"x","slice3d");return X(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),oo(r,e,n)}}),X3e=ae({slice4d_:function(t,e,n){var r=V(t,"x","slice4d");return X(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),oo(r,e,n)}});function V9(t,e,n,r,i){return e.rank<n.rank&&(e=e.reshape(wi(e.shape,r))),t.rank<n.rank&&(t=t.reshape(wi(t.shape,r))),{x:function(){var a=t.mul(n.equal(e).cast(t.dtype));return i==null?a:a.transpose(i)}}}var Q3e=ae({all_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","all","bool"),i=Qn(e,r.shape),a=i,o=po(a,r.rank);o!=null&&(r=r.transpose(o),a=mo(a.length,r.rank));var s=se.runKernelFunc(function(l){return l.all(r,a)},{$x:r});if(n){var u=wi(s.shape,i);return s.reshape(u)}return s}}),Z3e=ae({any_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","any","bool"),i=Qn(e,r.shape),a=i,o=po(a,r.rank);o!=null&&(r=r.transpose(o),a=mo(a.length,r.rank));var s=se.runKernelFunc(function(l){return l.any(r,a)},{$x:r});if(n){var u=wi(s.shape,i);return s.reshape(u)}return s}}),J3e=ae({argMax_:function(t,e){e===void 0&&(e=0);var n=V(t,"x","argMax");e==null&&(e=0);var r=Qn(e,n.shape),i=po(r,n.rank);i!=null&&(n=n.transpose(i),r=mo(r.length,n.rank));var a={axis:r[0]},o=[n];return se.runKernelFunc(function(s,u){var l=s.argMax(n,r[0]);return u([n]),l},{x:n},function(s,u){var l=u[0];return{x:function(){return Bt(l)}}},"ArgMax",a,o)}}),eMe=ae({argMin_:function(t,e){e===void 0&&(e=0);var n=V(t,"x","argMin");e==null&&(e=0);var r=Qn(e,n.shape),i=po(r,n.rank);return i!=null&&(n=n.transpose(i),r=mo(r.length,n.rank)),se.runKernelFunc(function(a,o){var s=a.argMin(n,r[0]);return o([n]),s},{$x:n},function(a,o){var s=o[0];return{$x:function(){return Bt(s)}}})}}),tMe=ae({logSumExp_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","logSumExp"),i=Qn(e,r.shape),a=r.max(i,!0),o=r.sub(a).exp().sum(i).log(),s=a.reshape(o.shape).add(o);if(n){var u=wi(s.shape,i);return s.reshape(u)}return s}}),Iy=ae({max_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","max"),i=r,a=Qn(e,r.shape),o=a,s=po(o,r.rank);s!=null&&(r=r.transpose(s),o=mo(o.length,r.rank));var u=[r],l=se.runKernelFunc(function(f,d){var h=f.max(r,o);return d([i,h]),h},{x:r},function(f,d){return V9(f,d[1],d[0],a,s)},"Max",{axes:o},u,[!0]);if(n){var c=wi(l.shape,a);l=l.reshape(c)}return l}}),nMe=ae({mean_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","mean"),i=Qn(e,r.shape),a=He(Dr(r.shape,i)[1]);return Sy(function(o){var s=je(a);return{value:(s.dtype===o.dtype?o:o.cast(s.dtype)).div(s).sum(e,n),gradFunc:function(u){var l=o.shape.slice();return i.forEach(function(c){l[c]=1}),u.reshape(l).mul(Zf(o.shape,"float32")).div(a)}}})(r)}}),rMe=ae({min_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","min"),i=r,a=Qn(e,r.shape),o=a,s=po(o,r.rank);s!=null&&(r=r.transpose(s),o=mo(o.length,r.rank));var u=[r],l=se.runKernelFunc(function(f,d){var h=f.min(r,o);return d([i,h]),h},{x:r},function(f,d){return V9(f,d[1],d[0],a,s)},"Min",{axes:o},u,[!0]);if(n){var c=wi(l.shape,a);l=l.reshape(c)}return l}}),iMe=ae({moments_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Qn(e,(t=V(t,"x","moments")).shape),i=t.mean(r,n),a=i.shape;n||(a=wi(i.shape,r));var o=t.toFloat().sub(i.reshape(a)).square();return{mean:i,variance:o.mean(r,n)}}}),W9=ae({sum_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=Qn(e,r.shape);return Sy(function(a){var o=po(i,a.rank),s=i,u=a;o!=null&&(u=a.transpose(o),s=mo(s.length,a.rank));var l=function(h){var p=a.shape.slice();return i.forEach(function(m){p[m]=1}),h.reshape(p).mul(Zf(a.shape,"float32"))},c={axes:s},f=se.runKernelFunc(function(h){return h.sum(u,s)},{x:u},function(h){return{x:function(){return l(h)}}},"Sum",c);if(n){var d=wi(f.shape,i);f=f.reshape(d)}return{value:f,gradFunc:l}})(r)}}),aMe=ae({prod_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=Qn(e,r.shape),a=po(i,r.rank),o=i,s=r;a!=null&&(s=r.transpose(a),o=mo(o.length,r.rank));var u=se.runKernelFunc(function(c){return c.prod(s,o)},{permutedX:s});if(n){var l=wi(u.shape,i);u=u.reshape(l)}return u}}),q9=ae({elu_:function(t){var e=V(t,"x","elu");return se.runKernelFunc(function(n,r){var i=n.elu(e);return r([i]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return se.runKernelFunc(function(a){return a.eluDer(n,i)},{dy:n,y:i})}}})}}),oMe=ae({leakyRelu_:function(t,e){e===void 0&&(e=.2);var n=V(t,"x","leakyRelu");return UC(je(e).mul(n),n)}}),H9=ae({prelu_:function(t,e){var n=V(t,"x","prelu"),r=V(e,"alpha","prelu");return se.runKernelFunc(function(i,a){var o=i.prelu(n,r);return a([n,r]),o},{x:n,alpha:r},function(i,a){var o=a[0],s=a[1],u=o.greater(0);return{x:function(){return xl(u,i,i.mul(s))},alpha:function(){var l=xl(u,Bt(i),i.mul(o)),c=Hn(s.shape,i.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),bn=ae({relu_:function(t){var e=V(t,"x","relu");return e.dtype==="bool"?e.toInt():se.runKernelFunc(function(n,r){var i=n.relu(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mulStrict(i.step().toFloat())}}},"Relu")}}),G9=ae({relu6_:function(t){var e=V(t,"x","relu6");return e.dtype==="bool"?e.toInt():se.runKernelFunc(function(n,r){var i=n.relu6(e);return r([e]),i},{x:e},function(n,r){var i=r[0],a=i.lessEqual(6).mul(i.step());return{x:function(){return n.mulStrict(a.toFloat())}}},"Relu6")}}),sMe=ae({selu_:function(t){var e=V(t,"x","selu");return se.runKernelFunc(function(n,r){var i=n.selu(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){var a=i.greater(je(0)),o=je(jC),s=je($C),u=n.mul(s),l=n.mul(o).mul(i.toFloat().exp());return xl(a,u,l)}}})}}),ru=ae({transpose_:function(t,e){var n=V(t,"x","transpose");if(e==null&&(e=n.shape.map(function(i,a){return a}).reverse()),X(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(i){X(i>=0&&i<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1)return n.clone();var r={perm:e};return se.runKernelFunc(function(i){return i.transpose(n,e)},{x:n},function(i){var a=TC(e);return{x:function(){return i.transpose(a)}}},"Transpose",r)}}),uMe=ae({localResponseNormalization_:function(t,e,n,r,i){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5);var a=V(t,"x","localResponseNormalization");X(a.rank===4||a.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."}),X(Fn(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var o=a,s=!1;a.rank===3&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=se.runKernelFunc(function(l,c){var f=l.localResponseNormalization4D(o,e,n,r,i);return c([o,f]),f},{x4D:o},function(l,c){var f=c[0],d=c[1];return{x4D:function(){return se.runKernelFunc(function(h){return h.LRNGrad(l,f,d,e,n,r,i)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),K9=ae({norm_:function(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var i=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(je(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(t=V(t,"x","norm"),e,n),a=i.shape;if(r){var o=Qn(n,t.shape);a=wi(i.shape,o)}return i.reshape(a)}}),lMe=ae({basicLSTMCell_:function(t,e,n,r,i,a){var o=V(t,"forgetBias","basicLSTMCell"),s=V(e,"lstmKernel","basicLSTMCell"),u=V(n,"lstmBias","basicLSTMCell"),l=V(r,"data","basicLSTMCell"),c=V(i,"c","basicLSTMCell"),f=V(a,"h","basicLSTMCell"),d=l.concat(f,1).matMul(s).add(u),h=d.shape[0],p=d.shape[1]/4,m=[h,p],y=d.slice([0,0],m),v=d.slice([0,p],m),x=d.slice([0,2*p],m),g=d.slice([0,3*p],m),b=y.sigmoid().mulStrict(v.tanh()).addStrict(c.mulStrict(o.add(x).sigmoid())),w=b.tanh().mulStrict(g.sigmoid());return[b,w]}}),cMe=ae({multiRNNCell_:function(t,e,n,r){for(var i=V(e,"data","multiRNNCell"),a=Xg(n,"c","multiRNNCell"),o=Xg(r,"h","multiRNNCell"),s=i,u=[],l=0;l<t.length;l++){var c=t[l](s,a[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],d=[];for(l=0;l<u.length;l+=2)f.push(u[l]),d.push(u[l+1]);return[f,d]}}),fMe=ae({movingAverage_:function(t,e,n,r,i){i===void 0&&(i=!0);var a=V(t,"v","movingAverage"),o=V(e,"x","movingAverage"),s=V(n,"decay","movingAverage");uSe(a,o),X(sr(a.shape,o.shape),function(){return"Shape mismatch in v and x"});var u=je(1),l=u.sub(s),c=o.sub(a).mul(l);if(i){X(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=V(r,"step","movingAverage");c=c.div(u.sub(o0(s,f)))}return a.add(c)}}),dMe=ae({stridedSlice_:function(t,e,n,r,i,a,o,s,u){if(i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var l=V(t,"x","stridedSlice"),c=ck(s),f=l.shape.slice();c.forEach(function(y){e[y]=0,n[y]=1,f.splice(y,0,1)}),l=l.reshape(f);for(var d=0;d<l.rank;d++)e[d]=_De(i,e,r,l.shape,d),n[d]=EDe(a,n,r,l.shape,d),r[d]=r[d]||1;var h=ck(u);h.forEach(function(y){n[y]=e[y]+1,r[y]=1});var p=RC(e,n,r),m=p.filter(function(y,v){return h.indexOf(v)===-1});return r.every(function(y){return y===1})?oo(l,e,p).reshape(m):se.runKernelFunc(function(y){return y.stridedSlice(l,e,n,r)},{$x:l}).reshape(m)}}),hMe=ae({topk_:function(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=V(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var a=se.runKernelFunc(function(o){return o.topk(r,e,n)},{$x:r});return{values:a[0],indices:a[1]}}}),pMe=ae({scatterND_:function(t,e,n){var r=V(t,"indices","scatterND","int32"),i=V(e,"updates","scatterND");return bDe(i,r,n),se.runKernelFunc(function(a){return a.scatterND(r,i,n)},{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),HC=ae({fft_:function(t){X(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return se.runKernelFunc(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}}),s0=ae({ifft_:function(t){X(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return se.runKernelFunc(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}}),GC=ae({rfft_:function(t,e){X(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],i=t.size/r;if(e!=null&&e<r){var a=t.shape.map(function(v){return 0}),o=t.shape.map(function(v){return v});o[t.shape.length-1]=e,n=t.slice(a,o),r=e}else if(e!=null&&e>r){var s=t.shape.map(function(v){return v});s[t.shape.length-1]=e-r,n=t.concat(ln(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),l=fr(n,u).as2D(i,r),c=HC(l),f=Math.floor(r/2)+1,d=Zi(c),h=Ka(c),p=d.split([f,r-f],d.shape.length-1),m=h.split([f,r-f],h.shape.length-1),y=n.shape.slice();return y[n.shape.length-1]=f,fr(p[0],m[0]).reshape(y)}}),Y9=ae({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),i=s0(r);return Zi(i)}var a=[n,2*(e-1)],o=Zi(t).as2D(n,e),s=Ka(t).as2D(n,e),u=o.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(je(-1)),c=o.concat(u,1),f=s.concat(l,1);return r=fr(c,f).as2D(a[0],a[1]),i=s0(r),Zi(i)}}),mMe=Object.freeze({fft:HC,ifft:s0,rfft:GC,irfft:Y9}),vMe=ae({sparseToDense_:function(t,e,n,r){r===void 0&&(r=0);var i=V(t,"sparseIndices","sparseToDense","int32"),a=V(e,"sparseValues","sparseToDense"),o=V(r,"defaultValue","sparseToDense",a.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,d=s.rank>1?s.shape[1]:1;if(l.length!==d)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+d+".");var h=u.size;if(u.rank!==0&&(u.rank!==1||h!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,n,o),se.runKernelFunc(function(s){return s.sparseToDense(i,a,n,o)},{$sparseIndices:i,$sparseValues:a,$defaultValue:o})}}),gMe=ae({gatherND_:function(t,e){var n=V(e,"indices","gatherND","int32"),r=V(t,"x","gatherND");return se.runKernelFunc(function(i){return i.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),yMe=ae({diag_:function(t){var e=V(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return se.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(n)}}),xMe=ae({dropout_:function(t,e,n,r){var i=V(t,"x","dropout");if(X(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),X(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return t instanceof yn?i.clone():i;var a=function(u,l){if(l==null)return u.shape.slice();if(sr(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],f=0;f<u.shape.length;f++)l[f]==null&&u.shape[f]!=null?c.push(u.shape[f]):c.push(l[f]);return c}return l}(i,n),o=1-e,s=H7(a,0,1,"float32",r).add(o).floor().div(o);return i.mul(s)}});function X9(t,e,n){for(var r=1-t%2,i=new Float32Array(t),a=0;a<t;++a){var o=2*Math.PI*a/(t+r-1);i[a]=e-n*Math.cos(o)}return On(i,"float32")}var KC=ae({hannWindow_:function(t){return X9(t,.5,.5)}}),Q9=ae({hammingWindow_:function(t){return X9(t,.54,.46)}}),YC=ae({frame_:function(t,e,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var a=0,o=[];a+e<=t.size;)o.push(oo(t,a,e)),a+=n;if(r)for(;a<t.size;){var s=a+e-t.size,u=Wn([oo(t,a,e-s),io([s],i)]);o.push(u),a+=n}return o.length===0?Ws([],[0,e]):Wn(o).as2D(o.length,e)}}),Z9=ae({stft_:function(t,e,n,r,i){var a;i===void 0&&(i=KC),r==null&&(a=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var o=YC(t,e,n),s=Pr(o,i(e)),u=[],l=0;l<o.shape[0];l++)u.push(GC(s.slice([l,0],[1,e]),r));return Wn(u)}}),bMe=Object.freeze({hannWindow:KC,hammingWindow:Q9,frame:YC,stft:Z9}),Rr,wMe=function(t,e,n){return n===void 0&&(n=1),Ve(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,d,h,p,m,y;return We(this,function(v){switch(v.label){case 0:return r=V(t,"predictions","inTopK"),i=V(e,"targets","inTopK"),X(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),X(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),Wt(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],X(n>0&&n<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n}),[4,r.data()];case 1:return o=v.sent(),[4,i.data()];case 2:for(s=v.sent(),u=[o.length/a,a],c=u[1],f=qh("bool",l=u[0]),d=0;d<l;d++){for(h=d*c,p=o.subarray(h,h+c),m=[],y=0;y<p.length;y++)m.push({value:p[y],index:y});for(m.sort(function(x,g){return g.value-x.value}),f[d]=0,y=0;y<n;y++)if(m[y].index===s[d]){f[d]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),[2,hr(f,i.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Rr||(Rr={}));var _Me=ae({absoluteDifference_:function(t,e,n,r){r===void 0&&(r=Rr.SUM_BY_NONZERO_WEIGHTS);var i=V(t,"labels","absoluteDifference"),a=V(e,"predictions","absoluteDifference"),o=null;n!=null&&(o=V(n,"weights","absoluteDifference")),Wt(i.shape,a.shape,"Error in absoluteDifference: ");var s=i.sub(a).abs();return is(s,o,r)}}),is=ae({computeWeightedLoss_:function(t,e,n){n===void 0&&(n=Rr.SUM_BY_NONZERO_WEIGHTS);var r=V(t,"losses","computeWeightedLoss"),i=null;e!=null&&(i=V(e,"weights","computeWeightedLoss"));var a=i==null?r:r.mul(i);if(n===Rr.NONE)return a;if(n===Rr.SUM)return a.sum();if(n===Rr.MEAN){if(i==null)return a.mean();var o=r.size/i.size,s=a.sum().div(i.sum());return o>1?s.div(je(o)):s}if(n===Rr.SUM_BY_NONZERO_WEIGHTS){if(i==null)return a.sum().div(je(r.size));var u=i.mul(Zf(r.shape)).notEqual(je(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),EMe=ae({cosineDistance_:function(t,e,n,r,i){i===void 0&&(i=Rr.SUM_BY_NONZERO_WEIGHTS);var a=V(t,"labels","cosineDistance"),o=V(e,"predictions","cosineDistance"),s=null;r!=null&&(s=V(r,"weights","cosineDistance")),Wt(a.shape,o.shape,"Error in cosineDistance: ");var u=je(1).sub(a.mul(o).sum(n,!0));return is(u,s,i)}}),CMe=ae({hingeLoss_:function(t,e,n,r){r===void 0&&(r=Rr.SUM_BY_NONZERO_WEIGHTS);var i=V(t,"labels","hingeLoss"),a=V(e,"predictions","hingeLoss"),o=null;n!=null&&(o=V(n,"weights","hingeLoss")),Wt(i.shape,a.shape,"Error in hingeLoss: ");var s=je(1);i=je(2).mul(i).sub(s);var u=s.sub(i.mul(a)).relu();return is(u,o,r)}}),NMe=ae({huberLoss_:function(t,e,n,r,i){r===void 0&&(r=1),i===void 0&&(i=Rr.SUM_BY_NONZERO_WEIGHTS);var a=V(t,"labels","huberLoss"),o=V(e,"predictions","huberLoss"),s=null;n!=null&&(s=V(n,"weights","huberLoss")),Wt(a.shape,o.shape,"Error in huberLoss: ");var u=je(r),l=o.sub(a).abs(),c=I9(l,u),f=l.sub(c),d=je(.5).mul(c.square()).add(u.mul(f));return is(d,s,i)}}),SMe=ae({logLoss_:function(t,e,n,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=Rr.SUM_BY_NONZERO_WEIGHTS);var a=V(t,"labels","logLoss"),o=V(e,"predictions","logLoss"),s=null;n!=null&&(s=V(n,"weights","logLoss")),Wt(a.shape,o.shape,"Error in logLoss: ");var u=je(1),l=je(r),c=a.mul(o.add(l).log()).neg().sub(u.sub(a).mul(u.sub(o).add(l).log()));return is(c,s,i)}}),DMe=ae({meanSquaredError_:function(t,e,n,r){r===void 0&&(r=Rr.SUM_BY_NONZERO_WEIGHTS);var i=V(t,"labels","meanSquaredError"),a=V(e,"predictions","meanSquaredError"),o=null;n!=null&&(o=V(n,"weights","meanSquaredError")),Wt(i.shape,a.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(a);return is(s,o,r)}}),AMe=ae({sigmoidCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=Rr.SUM_BY_NONZERO_WEIGHTS);var a=V(t,"multiClassLabels","sigmoidCrossEntropy"),o=V(e,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=V(n,"weights","sigmoidCrossEntropy")),Wt(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=je(r),l=je(1),c=je(.5);a=a.mul(l.sub(u)).add(c.mul(u))}var f=function(d,h){var p=V(d,"labels","sigmoidCrossEntropyWithLogits"),m=V(h,"logits","sigmoidCrossEntropyWithLogits");Wt(p.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var y=m.relu(),v=m.mul(p),x=m.abs().neg().exp().log1p();return y.sub(v).add(x)}(a,o);return is(f,s,i)}}),TMe=ae({softmaxCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=Rr.SUM_BY_NONZERO_WEIGHTS);var a=V(t,"onehotLabels","softmaxCrossEntropy"),o=V(e,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=V(n,"weights","softmaxCrossEntropy")),Wt(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=je(r),l=je(1),c=je(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(c))}var f=function(d,h,p){if(p===void 0&&(p=-1),p===-1&&(p=h.rank-1),p!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+p);return Sy(function(m,y,v){var x=y.logSumExp([p],!0),g=y.toFloat().sub(x);return v([m,g]),{value:g.mul(m).neg().sum([p]),gradFunc:function(b,w){var _=w[0],E=w[1],C=wi(b.shape,[p]);return[b.reshape(C).mul(_.toFloat().sub(E.exp())),b.reshape(C).mul(E.exp().sub(_.toFloat()))]}}})(d,h)}(a,o);return is(f,s,i)}}),MMe=Object.freeze({get Reduction(){return Rr},absoluteDifference:_Me,computeWeightedLoss:is,cosineDistance:EMe,hingeLoss:CMe,huberLoss:NMe,logLoss:SMe,meanSquaredError:DMe,sigmoidCrossEntropy:AMe,softmaxCrossEntropy:TMe});function kk(t,e){return e===void 0&&(e=!1),se.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],i=q7(n),a=t.clone(),o=Ws([[1]],[1,1]),s=o.clone(),u=n>=r?r:n,l=function(f){var d,h=a,p=s,m=i;d=se.tidy(function(){var y=a.slice([f,f],[n-f,1]),v=y.norm(),x=a.slice([f,f],[1,1]),g=Ws([[-1]]).where(x.greater(0),Ws([[1]])),b=x.sub(g.mul(v)),w=y.div(b);s=w.shape[0]===1?o.clone():o.concat(w.slice([1,0],[w.shape[0]-1,w.shape[1]]),0);var _=g.matMul(b).div(v).neg(),E=a.slice([f,0],[n-f,r]),C=_.mul(s);if(f===0)a=E.sub(C.matMul(s.transpose().matMul(E)));else{var N=E.sub(C.matMul(s.transpose().matMul(E)));a=a.slice([0,0],[f,r]).concat(N,0)}var D=i.slice([0,f],[n,i.shape[1]-f]);if(f===0)i=D.sub(D.matMul(s).matMul(C.transpose()));else{var A=D.sub(D.matMul(s).matMul(C.transpose()));i=i.slice([0,0],[n,f]).concat(A,1)}return[s,a,i]}),s=d[0],a=d[1],i=d[2],yi([h,p,m])},c=0;c<u;++c)l(c);return!e&&n>r&&(i=i.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[i,a]})}var IMe=ae({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=V(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,a=r.shape.slice(-2),o=a[0],s=a[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=o),n<0&&(n=s);var u=Qg(0,o,1,"int32").reshape([-1,1]),l=Qg(0,s,1,"int32"),c=Gn(u,l),f=Ay(c.lessEqual(je(+e,"int32")),c.greaterEqual(je(-n,"int32"))),d=ln([o,s],r.dtype);return Fi(qn(r.reshape([-1,o,s])).map(function(h){return xl(f,h,d)})).reshape(i)}}),kMe=ae({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,X(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(u){X(t[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"})},i=1;i<t.length;++i)r(i)}else e=!0,t=IC(t,t.shape[0],0).map(function(u){return K7(u,[0])});X(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var a=[],o=t,s=function(u){a.push(se.tidy(function(){var l=o[u];if(u>0)for(var c=0;c<u;++c){var f=W9(a[c].mulStrict(l)).mul(a[c]);l=l.sub(f)}return l.div(K9(l,"euclidean"))}))};for(i=0;i<t.length;++i)s(i);return e?Fi(a,0):a}}),RMe=ae({qr_:function(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return kk(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(o,s){return o*s}),r=qn(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],a=[];return r.forEach(function(o){var s=kk(o,e),u=s[0],l=s[1];i.push(u),a.push(l)}),[Fi(i,0).reshape(t.shape),Fi(a,0).reshape(t.shape)]}}),FMe=Object.freeze({bandPart:IMe,gramSchmidt:kMe,qr:RMe});function ky(t,e,n,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);var o=t.shape[0];return n=Math.min(n,o),X(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),X(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),X(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),X(e.rank===1,function(){return"scores must be a 1D tensor"}),X(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]}),X(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}var PMe=ae({resizeBilinear_:function(t,e,n){n===void 0&&(n=!1);var r=V(t,"images","resizeBilinear");X(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),X(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var i=r,a=!1;r.rank===3&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],u=se.runKernelFunc(function(l,c){return c([i]),l.resizeBilinear(i,o,s,n)},{x:i},function(l,c){return{x:function(){return se.runKernelFunc(function(f){return f.resizeBilinearBackprop(l,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),OMe=ae({resizeNearestNeighbor_:function(t,e,n){n===void 0&&(n=!1);var r=V(t,"images","resizeNearestNeighbor");X(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),X(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),X(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,a=!1;r.rank===3&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],u=se.runKernelFunc(function(l,c){return c([i]),l.resizeNearestNeighbor(i,o,s,n)},{batchImages:i},function(l,c){return{batchImages:function(){return se.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(l,c[0],n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),BMe=ae({nonMaxSuppression_:function(t,e,n,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var a=V(t,"boxes","nonMaxSuppression"),o=V(e,"scores","nonMaxSuppression"),s=ky(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return se.runKernelFunc(function(l){return l.nonMaxSuppression(a,o,n,r,i)},{boxes:a,scores:o},null,"NonMaxSuppressionV3",u)}}),LMe=function(t,e,n,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),Ve(this,void 0,void 0,function(){var a,o,s,u,l,c,f;return We(this,function(d){switch(d.label){case 0:return a=V(t,"boxes","nonMaxSuppressionAsync"),o=V(e,"scores","nonMaxSuppressionAsync"),s=ky(a,o,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([a.data(),o.data()])];case 1:return u=d.sent(),l=u[0],c=u[1],f=PC(l,c,n,r,i),a!==t&&a.dispose(),o!==e&&o.dispose(),[2,f]}})})},jMe=ae({nonMaxSuppressionWithScore_:function(t,e,n,r,i,a){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),a===void 0&&(a=0);var o=V(t,"boxes","nonMaxSuppression"),s=V(e,"scores","nonMaxSuppression"),u=ky(o,s,n,r,i,a),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},c=se.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),$Me=function(t,e,n,r,i,a){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),a===void 0&&(a=0),Ve(this,void 0,void 0,function(){var o,s,u,l,c,f,d;return We(this,function(h){switch(h.label){case 0:return o=V(t,"boxes","nonMaxSuppressionAsync"),s=V(e,"scores","nonMaxSuppressionAsync"),u=ky(o,s,n,r,i,a),n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return l=h.sent(),c=l[0],f=l[1],d=OC(c,f,n,r,i,a),o!==t&&o.dispose(),s!==e&&s.dispose(),[2,d]}})})},zMe=ae({cropAndResize_:function(t,e,n,r,i,a){var o=V(t,"image","cropAndResize"),s=V(e,"boxes","cropAndResize","float32"),u=V(n,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;var l=s.shape[0];return X(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),X(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),X(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),X(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),X(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),X(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),se.runKernelFunc(function(c,f){return c.cropAndResize(o,s,u,r,i,a)},{images:o,boxes:s,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:a,cropSize:r})}}),XC=Object.freeze({resizeBilinear:PMe,resizeNearestNeighbor:OMe,nonMaxSuppression:BMe,nonMaxSuppressionAsync:LMe,nonMaxSuppressionWithScore:jMe,nonMaxSuppressionWithScoreAsync:$Me,cropAndResize:zMe}),QC=function(t,e){return!(t>0)||e==="linear"},ZC=function(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},JC=function(t,e){var n=e,r=Hn(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},eN=function(t,e,n){if(e==="linear")return t;if(e==="relu")return bn(t);if(e==="elu")return q9(t);if(e==="relu6")return G9(t);if(e==="prelu")return H9(t,n);throw new Error("Unknown fused activation "+e+".")},UMe=ae({fusedMatMul_:function(t){var e,n=t.a,r=t.b,i=t.transposeA,a=i!==void 0&&i,o=t.transposeB,s=o!==void 0&&o,u=t.bias,l=t.activation,c=l===void 0?"linear":l,f=t.preluActivationWeights;if(QC(se.state.gradientDepth,c)===!1){var d=My(n,r,a,s);return u!=null&&(d=Dt(d,u)),eN(d,c,f)}var h=V(n,"a","fused matMul"),p=V(r,"b","fused matMul");e=Cn(h,p),h=e[0],p=e[1];var m=a?h.shape[h.rank-2]:h.shape[h.rank-1],y=s?p.shape[p.rank-1]:p.shape[p.rank-2],v=a?h.shape[h.rank-1]:h.shape[h.rank-2],x=s?p.shape[p.rank-2]:p.shape[p.rank-1],g=h.shape.slice(0,-2),b=p.shape.slice(0,-2),w=He(g),_=He(b);X(h.rank>=2&&p.rank>=2&&h.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+p.rank+"."}),X(sr(g,b),function(){return"Error in fused matMul: outer dimensions ("+g+") and ("+b+") of Tensors with shapes "+h.shape+" and "+p.shape+" must match."}),X(m===y,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+y+") of Tensors with shapes "+h.shape+" and "+p.shape+" and transposeA="+a+" and transposeB="+s+" must match."});var E,C,N=h.shape.slice(0,-2).concat([v,x]),D=a?h.as3D(w,m,v):h.as3D(w,v,m),A=s?p.as3D(_,x,y):p.as3D(_,y,x);u!=null&&It(N,(E=Cn(E=V(u,"bias","fused matMul"),h)[0]).shape),f!=null&&(C=V(f,"prelu weights","fused matMul"));var T={a:D,b:A};u!=null&&(T.bias=E),f!=null&&(T.preluActivationWeights=C);var R=[D,A];return se.runKernelFunc(function(F,O){var I=F.fusedBatchMatMul({a:D,b:A,transposeA:a,transposeB:s,bias:E,activation:c,preluActivationWeights:C});return O([D,A,I]),I},T,function(F,O){var I=O[0],M=O[1],B=O[2],k=ZC(F,B,c),j={};return u!=null&&(j={bias:function(){return JC(E,k)}}),Object.assign(a||s?!a&&s?{a:function(){return k.matMul(M,!1,!1)},b:function(){return k.matMul(I,!0,!1)}}:a&&!s?{a:function(){return M.matMul(k,!1,!0)},b:function(){return I.matMul(k,!1,!1)}}:{a:function(){return M.matMul(k,!0,!0)},b:function(){return k.matMul(I,!0,!0)}}:{a:function(){return k.matMul(M,!1,!0)},b:function(){return I.matMul(k,!0,!1)}},j)},"_FusedMatMul",{transposeA:a,transposeB:s,activation:c},R,[!0]).reshape(N)}}),VMe=ae({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,a=t.dataFormat,o=a===void 0?"NHWC":a,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,f=t.activation,d=f===void 0?"linear":f,h=t.preluActivationWeights;if(d=d||"linear",QC(se.state.gradientDepth,d)===!1){var p=ca(e,n,r,i,o,u,l);return c!=null&&(p=Dt(p,c)),eN(p,d,h)}var m=V(e,"x","conv2d"),y=V(n,"filter","conv2d"),v=m,x=!1;m.rank===3&&(x=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),X(v.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."}),X(y.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+y.rank+"."}),l!=null&&X(Fn(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),X(v.shape[3]===y.shape[2],function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+y.shape[2]+"."}),X(_i(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),X(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var g,b,w=zl(v.shape,y.shape,r,u,i,l);c!=null&&(g=Cn(g=V(c,"bias","fused conv2d"),m)[0],It(w.outShape,g.shape)),h!=null&&(b=V(h,"prelu weights","fused conv2d"));var _={x:v,filter:y};c!=null&&(_.bias=g),h!=null&&(_.preluActivationWeights=b);var E=[y,v],C=se.runKernelFunc(function(N,D){var A=N.fusedConv2d({input:v,filter:y,convInfo:w,bias:g,activation:d,preluActivationWeights:b});return D([y,v,A]),A},_,function(N,D){var A=D,T=A[0],R=A[1],F=A[2],O=ZC(N,F,d);X(Ef(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var I={};return c!=null&&(I={bias:function(){return JC(g,O)}}),Object.assign({x:function(){return B9(R.shape,O,T,r,i)},filter:function(){return WC(R,O,T.shape,r,i)}},I)},"FusedConv2D",{convInfo:w,activation:d},E,[!0]);return x?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),WMe=ae({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,a=t.dataFormat,o=a===void 0?"NHWC":a,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,f=t.activation,d=f===void 0?"linear":f,h=t.preluActivationWeights;if(QC(se.state.gradientDepth,d)===!1){var p=Ty(e,n,r,i,o,u,l);return c!=null&&(p=Dt(p,c)),eN(p,d,h)}var m=V(e,"x","depthwiseConv2d"),y=V(n,"filter","depthwiseConv2d"),v=m,x=!1;m.rank===3&&(x=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),X(v.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."}),X(y.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+y.rank+"."}),X(v.shape[3]===y.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+y.shape[2]+"."}),u==null&&(u=[1,1]),X(_i(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&X(Fn(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var g,b,w=zl(v.shape,y.shape,r,u,i,l,!0);c!=null&&(g=Cn(g=V(c,"bias","fused conv2d"),m)[0],It(w.outShape,g.shape)),h!=null&&(b=V(h,"prelu weights","fused depthwiseConv2d"));var _={x:v,filter:y};c!=null&&(_.bias=g),h!=null&&(_.preluActivationWeights=b);var E=[y,v],C=se.runKernelFunc(function(N,D){var A=N.fusedDepthwiseConv2D({input:v,filter:y,convInfo:w,bias:g,activation:d,preluActivationWeights:b});return D([y,v,A]),A},_,function(N,D){X(Ef(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var A=D[0],T=D[1],R=D[2],F=ZC(N,R,d),O={};return c!=null&&(O={bias:function(){return JC(g,F)}}),Object.assign({x:function(){return L9(T.shape,F,A,w)},filter:function(){return j9(T,F,A.shape,w)}},O)},"FusedDepthwiseConv2D",{convInfo:w,activation:d},E,[!0]);return x?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),qMe=Object.freeze({matMul:UMe,conv2d:VMe,depthwiseConv2d:WMe}),HMe=Object.freeze({image:XC,linalg:FMe,losses:MMe,spectral:mMe,fused:qMe,signal:bMe,square:STe,squaredDifference:w9,conv1d:P3e,conv2d:ca,conv3d:O3e,depthwiseConv2d:Ty,separableConv2d:qC,conv2dTranspose:B3e,conv3dTranspose:L3e,op:ae,batchNormalization2d:n3e,batchNormalization3d:r3e,batchNormalization4d:i3e,batchNormalization:a3e,batchNorm:D9,batchNorm2d:o3e,batchNorm3d:s3e,batchNorm4d:u3e,booleanMaskAsync:F3e,complex:fr,real:Zi,imag:Ka,concat:Wn,concat1d:qSe,concat2d:HSe,concat3d:GSe,concat4d:KSe,split:IC,matMul:My,dot:j3e,outerProduct:$3e,reverse:Op,reverse1d:z3e,reverse2d:U3e,reverse3d:V3e,reverse4d:W3e,maxPool:er,avgPool:Bp,pool:q3e,maxPool3d:H3e,avgPool3d:G3e,slice:oo,slice1d:K3e,slice2d:Y3e,slice3d:U9,slice4d:X3e,abs:DTe,acos:ATe,acosh:TTe,asin:MTe,asinh:ITe,atan:kTe,atanh:RTe,ceil:FTe,clipByValue:zC,cos:PTe,cosh:OTe,erf:BTe,exp:Qw,expm1:LTe,floor:jTe,log:$Te,log1p:zTe,logSigmoid:UTe,neg:a0,reciprocal:VTe,round:WTe,rsqrt:_9,sigmoid:E9,sign:qTe,isNaN:HTe,isInf:GTe,isFinite:KTe,sin:YTe,sinh:XTe,softplus:QTe,sqrt:ZTe,step:JTe,tan:e3e,tanh:t3e,all:Q3e,any:Z3e,argMax:J3e,argMin:eMe,logSumExp:tMe,max:Iy,mean:nMe,min:rMe,moments:iMe,sum:W9,prod:aMe,equal:k9,equalStrict:C3e,greater:N3e,greaterEqual:R9,greaterEqualStrict:S3e,greaterStrict:D3e,less:A3e,lessEqual:T3e,lessEqualStrict:M3e,lessStrict:I3e,notEqual:k3e,notEqualStrict:R3e,add:Dt,addN:f3e,addStrict:d3e,atan2:h3e,div:xa,divNoNan:p3e,divStrict:m3e,floorDiv:M9,maximum:UC,maximumStrict:v3e,minimum:I9,minimumStrict:g3e,mod:y3e,modStrict:x3e,mul:Pr,mulStrict:b3e,pow:o0,powStrict:w3e,squaredDifferenceStrict:_3e,sub:Gn,subStrict:E3e,elu:q9,leakyRelu:oMe,prelu:H9,relu:bn,relu6:G9,selu:sMe,logicalAnd:Ay,logicalNot:l3e,logicalOr:A9,logicalXor:c3e,where:xl,whereAsync:T9,buffer:vt,print:rDe,batchToSpaceND:W7,broadcastTo:iDe,cast:aDe,clone:oDe,cumsum:sDe,depthToSpace:uDe,expandDims:Xi,eye:q7,multinomial:lDe,oneHot:Gw,pad:$l,pad1d:cDe,pad2d:fDe,pad3d:dDe,pad4d:hDe,rand:pDe,randomNormal:mDe,randomGamma:vDe,randomUniform:H7,reshape:Ca,spaceToBatchND:G7,squeeze:K7,stack:Fi,tile:Uc,truncatedNormal:gDe,unstack:qn,setdiff1dAsync:yDe,fill:io,linspace:WSe,ones:Zf,range:Qg,scalar:je,tensor:hr,tensor1d:On,tensor2d:Ws,tensor3d:MC,tensor4d:oi,tensor5d:zSe,tensor6d:USe,variable:VSe,zeros:ln,onesLike:V7,zerosLike:Bt,transpose:ru,softmax:rs,logSoftmax:NDe,localResponseNormalization:uMe,norm:K9,gather:VC,unsortedSegmentSum:F9,basicLSTMCell:lMe,multiRNNCell:cMe,movingAverage:fMe,stridedSlice:dMe,topk:hMe,scatterND:pMe,fft:HC,ifft:s0,rfft:GC,irfft:Y9,sparseToDense:vMe,gatherND:gMe,diag:yMe,dropout:xMe,hannWindow:KC,hammingWindow:Q9,frame:YC,stft:Z9,inTopKAsync:wMe});function Ne(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(n){n!=null&&X(n.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function mx(t,e,n,r){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);if(n==="elu")return t.elu(e);if(n==="relu6")return t.relu6(e);if(n==="prelu")return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var GMe=function(t){function e(){var n=t.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new t9(n,se),n}return ja(e,t),e.prototype.write=function(n,r,i){this.firstUse&&(this.firstUse=!1,_e().get("IS_NODE")&&Yg(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var a={};return this.data.set(a,{values:n,dtype:i}),a},e.prototype.move=function(n,r,i,a){this.data.set(n,{values:r,dtype:a})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(n){return Ve(this,void 0,void 0,function(){return We(this,function(r){return[2,this.readSync(n)]})})},e.prototype.readSync=function(n){var r=this.data.get(n),i=r.dtype,a=r.complexTensors;return i==="complex64"?Xw(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.data.get(n).values},e.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),i=r;if(n.dtype==="string")try{i=r.map(function(a){return Hg(a)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return vt(n.shape,n.dtype,i)},e.prototype.makeOutput=function(n,r,i){var a=this.write(n,r,i);return se.makeTensorFromDataId(a,r,i,this)},e.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},e.prototype.time=function(n){return Ve(this,void 0,void 0,function(){var r;return We(this,function(i){return r=qa(),n(),[2,{kernelMs:qa()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(n,r){var i=this.makeOutput(null,n.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:se.keep(n.clone()),imag:se.keep(r.clone())},i},e.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,i){if(Ne(n,"slice"),J7(n.shape,r,i)){var a=e9(r,n.strides),o=He(i);return hr(this.readSync(n.dataId).subarray(a,a+o),i,n.dtype)}for(var s=vt(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(f,d){return f+r[d]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},e.prototype.stridedSlice=function(n,r,i,a){Ne(n,"stridedSlice");var o=RC(r,i,a);if(o.some(function(h){return h===0}))return hr([],o);for(var s=vt(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),f=new Array(c.length),d=0;d<f.length;d++)f[d]=c[d]*a[d]+r[d];s.set.apply(s,[u.get.apply(u,f)].concat(c))}return s.toTensor()},e.prototype.diag=function(n){for(var r=this.readSync(n.dataId),i=vt([n.size,n.size],n.dtype),a=i.values,o=0;o<r.length;o++)a[o*n.size+o]=r[o];return i.toTensor()},e.prototype.unstack=function(n,r){for(var i=n.shape[r],a=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(a[o++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(a);return c},e.prototype.reverse=function(n,r){Ne(n,"reverse");for(var i=vt(n.shape,n.dtype),a=this.bufferSync(n),o=function(u){var l=i.indexToLoc(u),c=l.slice();r.forEach(function(f){return c[f]=n.shape[f]-1-c[f]}),i.set.apply(i,[a.get.apply(a,c)].concat(l))},s=0;s<i.size;s++)o(s);return i.toTensor()},e.prototype.concat=function(n,r){var i=this;if(n[0].dtype==="complex64"){var a=n.map(function(h){return Zi(h)}),o=n.map(function(h){return Ka(h)});return fr(this.concat(a,r),this.concat(o,r))}var s=n.map(function(h){var p=He(h.shape.slice(r));return h.as2D(-1,p)}),u=_f(s.map(function(h){return h.shape}),1),l=vt(u,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(h){l.set(i.readSync(h.dataId),c),c+=h.size})}else{var f=0;s.forEach(function(h){for(var p=i.readSync(h.dataId),m=0,y=0;y<h.shape[0];++y)for(var v=y*u[1]+f,x=0;x<h.shape[1];++x)l[v+x]=p[m++];f+=h.shape[1]})}var d=_f(n.map(function(h){return h.shape}),r);return hr(l,d,n[0].dtype)},e.prototype.neg=function(n){return Ne(n,"neg"),this.multiply(je(-1),n)},e.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i+o,imag:a+s}}):this.broadcastedBinaryOp(n,r,dr(n.dtype,r.dtype),function(i,a){return i+a})},e.prototype.addN=function(n){var r=this;Ne(n,"addN");for(var i=n.map(function(c){return r.readSync(c.dataId)}),a=vt(n[0].shape,n[0].dtype),o=a.values,s=0;s<n.length;s++)for(var u=i[s],l=0;l<o.length;l++)o[l]+=u[l];return a.toTensor()},e.prototype.softmax=function(n,r){var i=Qn([r],n.shape),a=this.max(n,i),o=wi(a.shape,i),s=this.subtract(n,a.reshape(o)),u=this.exp(s),l=this.sum(u,i).reshape(o);return this.realDivide(u,l)},e.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i-o,imag:a-s}}):this.broadcastedBinaryOp(n,r,dr(n.dtype,r.dtype),function(i,a){return i-a})},e.prototype.pow=function(n,r){return Ne([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.pow(i,a)})},e.prototype.batchMatMul=function(n,r,i,a){Ne([n,r],"matMul");for(var o=i?n.shape[1]:n.shape[2],s=i?n.shape[2]:n.shape[1],u=a?r.shape[1]:r.shape[2],l=n.shape[0],c=this.readSync(n.dataId),f=this.readSync(r.dataId),d=i?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],h=d[0],p=d[1],m=d[2],y=a?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],v=y[0],x=y[1],g=y[2],b=s*u,w=vt([l,s,u],n.dtype),_=w.values,E=this.blockSize,C=0;C<l;C++)for(var N=0;N<s;N+=E)for(var D=0;D<u;D+=E)for(var A=0;A<o;A+=E)for(var T=Math.min(N+E,s),R=Math.min(D+E,u),F=Math.min(A+E,o),O=N;O<T;O++)for(var I=D;I<R;I++){for(var M=0,B=A;B<F;B++)M+=c[C*h+O*p+B*m]*f[B*v+I*x+C*g];_[C*b+(O*u+I)]+=M}return w.toTensor()},e.prototype.fusedBatchMatMul=function(n){var r=n.a,i=n.b,a=n.transposeA,o=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=this.batchMatMul(r,i,a,o);return s&&(c=this.add(c,s)),u&&(c=mx(this,c,u,l)),c},e.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i*o-a*s,imag:i*s+a*o}}):this.broadcastedBinaryOp(n,r,dr(n.dtype,r.dtype),function(i,a){return i*a})},e.prototype.realDivide=function(n,r){return Ne([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(i,a){return i/a})},e.prototype.floorDiv=function(n,r){return Ne([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(i,a){return Math.floor(i/a)})},e.prototype.sum=function(n,r){Ne(n,"sum"),Ci("sum",r,n.rank);for(var i=Dr(n.shape,r),a=i[0],o=i[1],s=ln(a,dr(n.dtype,"int32")),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=0,p=0;p<u;++p)h+=c[d+p];l[f]=h}return s},e.prototype.prod=function(n,r){Ne(n,"sum");for(var i=Dr(n.shape,r),a=i[0],o=i[1],s=ln(a,dr(n.dtype,"int32")),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=1,p=0;p<u;++p)h*=c[d+p];l[f]=h}return s},e.prototype.unsortedSegmentSum=function(n,r,i){Ne(n,"unsortedSegmentSum");for(var a=[],o=n.rank-r.rank,s=0;s<o;++s)r=r.expandDims(s+1);for(s=0;s<i;++s){var u=je(s,"int32"),l=k9(u,r).asType("float32").mul(n).sum(0);a.push(l)}return Fi(a)},e.prototype.argMin=function(n,r){Ne(n,"argMin");var i=[r];Ci("argMin",i,n.rank);for(var a=Dr(n.shape,i),o=a[0],s=a[1],u=ln(o,"int32"),l=He(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),d=0;d<c.length;++d){for(var h=d*l,p=f[h],m=0,y=0;y<l;++y){var v=f[h+y];v<p&&(p=v,m=y)}c[d]=m}return u},e.prototype.argMax=function(n,r){Ne(n,"argMax");var i=[r];Ci("argMax",i,n.rank);for(var a=Dr(n.shape,i),o=a[0],s=a[1],u=ln(o,"int32"),l=He(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),d=0;d<c.length;++d){for(var h=d*l,p=f[h],m=0,y=0;y<l;++y){var v=f[h+y];v>p&&(p=v,m=y)}c[d]=m}return u},e.prototype.cumsum=function(n,r,i,a){if(Ne(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var o=dr(n.dtype,"int32"),s=ln(n.shape,o),u=this.readSync(s.dataId),l=this.readSync(n.dataId),c=n.shape[n.rank-1],f=a?function(y,v){return y+c-v-1}:function(y,v){return y+v},d=0;d<l.length;d+=c)for(var h=0;h<c;h++){var p=f(d,h);if(h===0)u[p]=i?0:l[p];else{var m=f(d,h-1);u[p]=i?l[m]+u[m]:l[p]+u[m]}}return s},e.prototype.equal=function(n,r){return Ne([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i===a?1:0})},e.prototype.notEqual=function(n,r){return Ne([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i!==a?1:0})},e.prototype.less=function(n,r){return Ne([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i<a?1:0})},e.prototype.lessEqual=function(n,r){return Ne([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i<=a?1:0})},e.prototype.greater=function(n,r){return Ne([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i>a?1:0})},e.prototype.greaterEqual=function(n,r){return Ne([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i>=a?1:0})},e.prototype.logicalNot=function(n){Ne(n,"logicalNot");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)i[a]=r[a]?0:1;return this.makeOutput(i,n.shape,"bool")},e.prototype.logicalAnd=function(n,r){return Ne([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i&&a})},e.prototype.logicalOr=function(n,r){return Ne([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i||a})},e.prototype.select=function(n,r,i){Ne([n,r,i],"select");for(var a=this.readSync(n.dataId),o=this.readSync(r.dataId),s=this.readSync(i.dataId),u=ln(r.shape,dr(r.dtype,i.dtype)),l=this.readSync(u.dataId),c=0,f=n.rank===0||n.rank>1||r.rank===1?1:He(r.shape.slice(1)),d=0;d<a.length;d++)for(var h=0;h<f;h++)a[d]===1?l[c++]=o[d]:l[c++]=s[d];return u},e.prototype.where=function(n){Ne([n],"where");var r=this.readSync(n.dataId);return BC(n.shape,r)},e.prototype.topk=function(n,r,i){return Ne(n,"topk"),l9(this.readSync(n.dataId),n.shape,n.dtype,r)},e.prototype.min=function(n,r){Ne(n,"min"),Ci("min",r,n.rank);for(var i=Dr(n.shape,r),a=i[0],o=i[1],s=ln(a,n.dtype),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=c[d],p=0;p<u;++p){var m=c[d+p];m<h&&(h=m)}l[f]=h}return s},e.prototype.minimum=function(n,r){return Ne([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.min(i,a)})},e.prototype.mod=function(n,r){return Ne([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){var o=i%a;return i<0&&a<0||i>=0&&a>=0?o:(o+a)%a})},e.prototype.max=function(n,r){Ne(n,"max"),Ci("max",r,n.rank);for(var i=Dr(n.shape,r),a=i[0],o=i[1],s=ln(a,n.dtype),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=c[d],p=0;p<u;++p){var m=c[d+p];m>h&&(h=m)}l[f]=h}return s},e.prototype.maximum=function(n,r){return Ne([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.max(i,a)})},e.prototype.all=function(n,r){Ne(n,"all"),Ci("all",r,n.rank);for(var i=Dr(n.shape,r),a=i[0],o=i[1],s=ln(a,n.dtype),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=c[d],p=0;p<u;++p){var m=c[d+p];h=h&&m}l[f]=h}return s},e.prototype.any=function(n,r){Ne(n,"any"),Ci("any",r,n.rank);for(var i=Dr(n.shape,r),a=i[0],o=i[1],s=ln(a,n.dtype),u=He(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var d=f*u,h=c[d],p=0;p<u;++p){var m=c[d+p];h=h||m}l[f]=h}return s},e.prototype.squaredDifference=function(n,r){return Ne([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){var o=i-a;return o*o})},e.prototype.ceil=function(n){Ne(n,"ceil");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.ceil(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.floor=function(n){Ne(n,"floor");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.floor(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.sign=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)r[a]<0?i[a]=-1:r[a]>0?i[a]=1:i[a]=0;return this.makeOutput(i,n.shape,"float32")},e.prototype.isNaN=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isNaN(r[a])&&(i[a]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.isInf=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Math.abs(r[a])===1/0&&(i[a]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.isFinite=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isFinite(r[a])&&(i[a]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.round=function(n){Ne(n,"round");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=Math.floor(r[a]);r[a]-o<.5?i[a]=Math.floor(r[a]):r[a]-o>.5?i[a]=Math.ceil(r[a]):i[a]=o%2==0?o:o+1}return this.makeOutput(i,n.shape,"float32")},e.prototype.exp=function(n){Ne(n,"exp");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.exp(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.expm1=function(n){Ne(n,"expm1");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.expm1(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.log=function(n){Ne(n,"log");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.log(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.log1p=function(n){Ne(n,"log1p");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.log1p(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.sqrt=function(n){Ne(n,"sqrt");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.sqrt(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.rsqrt=function(n){Ne(n,"rsqrt");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=1/Math.sqrt(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.reciprocal=function(n){Ne(n,"reciprocal");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=1/r[a];return this.makeOutput(i,n.shape,"float32")},e.prototype.linear=function(n){return n},e.prototype.relu=function(n){Ne(n,"relu");for(var r=ln(n.shape,n.dtype),i=this.readSync(r.dataId),a=this.readSync(n.dataId),o=0;o<a.length;++o)i[o]=Math.max(0,a[o]);return r},e.prototype.relu6=function(n){Ne(n,"relu");for(var r=ln(n.shape,n.dtype),i=this.readSync(r.dataId),a=this.readSync(n.dataId),o=0;o<a.length;++o)i[o]=Math.min(Math.max(0,a[o]),6);return r},e.prototype.prelu=function(n,r){return Ne([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return i<0?a*i:i})},e.prototype.elu=function(n){Ne(n,"elu");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var o=i[a];r[a]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,n.shape,"float32")},e.prototype.eluDer=function(n,r){Ne([n,r],"eluDer");for(var i=new Float32Array(r.size),a=this.readSync(r.dataId),o=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>=1?o[s]:o[s]*(u+1)}return this.makeOutput(i,r.shape,"float32")},e.prototype.selu=function(n){Ne(n,"selu");for(var r=jC,i=$C,a=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(a,n.shape,"float32")},e.prototype.clip=function(n,r,i){Ne(n,"clip");for(var a=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>i?i:u<r?r:u}return this.makeOutput(a,n.shape,"float32")},e.prototype.abs=function(n){for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.abs(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<n.size;++a){var o=i[2*a],s=i[2*a+1];r[a]=Math.hypot(o,s)}return this.makeOutput(r,n.shape,"float32")},e.prototype.int=function(n){Ne(n,"int");for(var r=new Int32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=i[a];return this.makeOutput(r,n.shape,"int32")},e.prototype.sigmoid=function(n){Ne(n,"sigmoid");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=1/(1+Math.exp(-i[a]));return this.makeOutput(r,n.shape,"float32")},e.prototype.softplus=function(n){Ne(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o){var s=a[o]>-r,u=a[o]<r,l=Math.exp(a[o]),c=void 0;c=u?l:s?a[o]:Math.log(1+l),i[o]=c}return this.makeOutput(i,n.shape,"float32")},e.prototype.sin=function(n){Ne(n,"sin");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.sin(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cos=function(n){Ne(n,"cos");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.cos(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tan=function(n){Ne(n,"tan");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.tan(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asin=function(n){Ne(n,"asin");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.asin(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acos=function(n){Ne(n,"acos");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.acos(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan=function(n){Ne(n,"atan");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.atan(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan2=function(n,r){return Ne([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.atan2(i,a)})},e.prototype.sinh=function(n){Ne(n,"sinh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.sinh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cosh=function(n){Ne(n,"cosh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.cosh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tanh=function(n){Ne(n,"tanh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=KNe(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asinh=function(n){Ne(n,"asinh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.asinh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acosh=function(n){Ne(n,"acosh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.acosh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atanh=function(n){Ne(n,"atanh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.atanh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.erf=function(n){Ne(n,"erf");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var o=Math.sign(i[a]),s=Math.abs(i[a]),u=1/(1+.3275911*s);r[a]=o*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},e.prototype.step=function(n,r){r===void 0&&(r=0),Ne(n,"step");for(var i=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o){var s=a[o];isNaN(s)?i[o]=NaN:i[o]=s>0?1:r}return this.makeOutput(i,n.shape,"float32")},e.prototype.fusedConv2d=function(n){var r=n.input,i=n.filter,a=n.convInfo,o=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,i,a);return o&&(l=this.add(l,o)),s&&(l=mx(this,l,s,u)),l},e.prototype.conv2d=function(n,r,i){Ne([n,r],"conv2d");for(var a=i.filterHeight,o=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.dataFormat==="channelsLast",d=vt(i.outShape,n.dtype),h=n.strides[0],p=f?n.strides[1]:n.strides[2],m=f?n.strides[2]:1,y=f?1:n.strides[1],v=d.strides[0],x=f?d.strides[1]:d.strides[2],g=f?d.strides[2]:1,b=f?1:d.strides[1],w=this.readSync(n.dataId),_=this.readSync(r.dataId),E=d.values,C=0;C<i.batchSize;++C)for(var N=C*h,D=C*v,A=0;A<i.outHeight;++A)for(var T=D+A*x,R=A*i.strideHeight-c,F=0;F<a;F++){var O=R+F*s;if(!(O<0||O>=i.inHeight))for(var I=F*r.strides[0],M=N+O*p,B=0;B<i.outWidth;++B)for(var k=T+B*g,j=B*i.strideWidth-l,Y=0;Y<o;Y++){var q=j+Y*u;if(!(q<0||q>=i.inWidth))for(var L=M+q*m,ne=I+Y*r.strides[1],fe=0;fe<i.inChannels;++fe){for(var te=w[L+fe*y],oe=0;oe<i.outChannels;++oe)E[k+oe*b]+=te*_[ne+oe];ne+=i.outChannels}}}return d.toTensor()},e.prototype.conv3d=function(n,r,i){for(var a=i.filterDepth,o=i.filterHeight,s=i.filterWidth,u=i.dilationDepth,l=i.dilationHeight,c=i.dilationWidth,f=i.padInfo.front,d=i.padInfo.left,h=i.padInfo.top,p=vt(i.outShape,n.dtype),m=this.readSync(n.dataId),y=this.readSync(r.dataId),v=p.values,x=0;x<i.batchSize;++x)for(var g=x*n.strides[0],b=x*p.strides[0],w=0;w<i.outDepth;++w)for(var _=b+w*p.strides[1],E=w*i.strideDepth-f,C=0;C<a;C++){var N=E+C*u;if(!(N<0||N>=i.inDepth))for(var D=C*r.strides[0],A=g+N*n.strides[1],T=0;T<i.outHeight;++T)for(var R=_+T*p.strides[2],F=T*i.strideHeight-h,O=0;O<o;O++){var I=F+O*l;if(!(I<0||I>=i.inHeight))for(var M=D+O*r.strides[1],B=A+I*n.strides[2],k=0;k<i.outWidth;++k)for(var j=R+k*i.outChannels,Y=k*i.strideWidth-d,q=0;q<s;q++){var L=Y+q*c;if(!(L<0||L>=i.inWidth))for(var ne=M+q*r.strides[2],fe=B+L*i.inChannels,te=ne,oe=0;oe<i.inChannels;++oe){for(var G=m[fe+oe],U=0;U<i.outChannels;++U)v[j+U]+=G*y[te+U];te+=i.outChannels}}}}return p.toTensor()},e.prototype.conv2dDerInput=function(n,r,i){Ne([n,r],"conv2dDerInput");for(var a=vt(i.inShape,"float32"),o=a.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],f=l[1],d=l[2],h=i.batchSize,p=i.filterHeight,m=i.filterWidth,y=i.inChannels,v=i.inHeight,x=i.inWidth,g=i.outChannels,b=i.outHeight,w=i.outWidth,_=i.strideHeight,E=i.strideWidth,C=i.dataFormat,N=p-1-i.padInfo.top,D=m-1-i.padInfo.left,A=C==="channelsLast",T=a.strides[0],R=A?a.strides[1]:a.strides[2],F=A?a.strides[2]:1,O=A?1:a.strides[1],I=n.strides[0],M=A?n.strides[1]:n.strides[2],B=A?n.strides[2]:1,k=A?1:n.strides[1],j=0;j<h;++j)for(var Y=0;Y<y;++Y)for(var q=0;q<v;++q)for(var L=q-N,ne=Math.max(0,Math.ceil(L/_)),fe=Math.min(b,(p+L)/_),te=0;te<x;++te){for(var oe=te-D,G=Math.max(0,Math.ceil(oe/E)),U=Math.min(w,(m+oe)/E),Q=0,re=ne;re<fe;++re)for(var ie=re*_-L,de=G;de<U;++de)for(var he=I*j+M*re+B*de,$=c*(p-1-ie)+f*(m-1-(de*E-oe))+d*Y,K=0;K<g;++K)Q+=s[he+k*K]*u[$+K];o[T*j+R*q+F*te+O*Y]=Q}return a.toTensor()},e.prototype.conv3dDerInput=function(n,r,i){for(var a=vt(i.inShape,"float32"),o=a.values,s=a.strides,u=s[0],l=s[1],c=s[2],f=s[3],d=this.readSync(n.dataId),h=n.strides,p=h[0],m=h[1],y=h[2],v=h[3],x=this.readSync(r.dataId),g=r.strides,b=g[0],w=g[1],_=g[2],E=g[3],C=i.batchSize,N=i.filterDepth,D=i.filterHeight,A=i.filterWidth,T=i.inChannels,R=i.inDepth,F=i.inHeight,O=i.inWidth,I=i.outChannels,M=i.outDepth,B=i.outHeight,k=i.outWidth,j=i.strideDepth,Y=i.strideHeight,q=i.strideWidth,L=N-1-i.padInfo.front,ne=D-1-i.padInfo.top,fe=A-1-i.padInfo.left,te=0;te<C;++te)for(var oe=0;oe<T;++oe)for(var G=0;G<R;++G)for(var U=G-L,Q=Math.max(0,Math.ceil(U/j)),re=Math.min(M,(N+U)/j),ie=0;ie<F;++ie)for(var de=ie-ne,he=Math.max(0,Math.ceil(de/Y)),$=Math.min(B,(D+de)/Y),K=0;K<O;++K){for(var ue=K-fe,ce=Math.max(0,Math.ceil(ue/q)),ge=Math.min(k,(A+ue)/q),Ce=0,Ae=Q;Ae<re;++Ae)for(var Pe=Ae*j-U,H=he;H<$;++H)for(var ee=H*Y-de,le=ce;le<ge;++le)for(var pe=p*te+m*Ae+y*H+v*le,be=b*(N-1-Pe)+w*(D-1-ee)+_*(A-1-(le*q-ue))+E*oe,xe=0;xe<I;++xe)Ce+=d[pe+xe]*x[be+xe];o[u*te+l*G+c*ie+f*K+oe]=Ce}return a.toTensor()},e.prototype.conv2dDerFilter=function(n,r,i){Ne([n,r],"conv2dDerFilter");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dataFormat==="channelsLast",c=vt(i.filterShape,"float32"),f=i.padInfo.left,d=i.padInfo.top,h=this.bufferSync(n),p=this.bufferSync(r),m=0;m<s;++m)for(var y=Math.max(0,Math.ceil((d-m)/a)),v=Math.min(i.outHeight,(i.inHeight+d-m)/a),x=0;x<u;++x)for(var g=Math.max(0,Math.ceil((f-x)/o)),b=Math.min(i.outWidth,(i.inWidth+f-x)/o),w=0;w<i.inChannels;++w)for(var _=0;_<i.outChannels;++_){for(var E=0,C=0;C<i.batchSize;++C)for(var N=y;N<v;++N)for(var D=m+N*a-d,A=g;A<b;++A){var T=x+A*o-f;E+=l?h.get(C,D,T,w)*p.get(C,N,A,_):h.get(C,w,D,T)*p.get(C,_,N,A)}c.set(E,m,x,w,_)}return c.toTensor()},e.prototype.conv3dDerFilter=function(n,r,i){for(var a=i.strideDepth,o=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=vt(i.filterShape,"float32"),d=f.values,h=f.strides,p=h[0],m=h[1],y=h[2],v=h[3],x=this.readSync(r.dataId),g=r.strides,b=g[0],w=g[1],_=g[2],E=g[3],C=this.readSync(n.dataId),N=n.strides,D=N[0],A=N[1],T=N[2],R=N[3],F=i.padInfo.front,O=i.padInfo.left,I=i.padInfo.top,M=0;M<u;++M)for(var B=Math.max(0,Math.ceil((F-M)/a)),k=Math.min(i.outDepth,(i.inDepth+F-M)/a),j=M*p,Y=0;Y<l;++Y)for(var q=Math.max(0,Math.ceil((I-Y)/o)),L=Math.min(i.outHeight,(i.inHeight+I-Y)/o),ne=Y*m+j,fe=0;fe<c;++fe)for(var te=Math.max(0,Math.ceil((O-fe)/s)),oe=Math.min(i.outWidth,(i.inWidth+O-fe)/s),G=fe*y+ne,U=0;U<i.inChannels;++U)for(var Q=U*v+G,re=0;re<i.outChannels;++re){for(var ie=0,de=0;de<i.batchSize;++de)for(var he=de*D,$=de*b,K=B;K<k;++K)for(var ue=(M+K*a-F)*A+he,ce=K*w+$,ge=q;ge<L;++ge)for(var Ce=(Y+ge*o-I)*T+ue,Ae=ge*_+ce,Pe=te;Pe<oe;++Pe){var H=Pe*E+Ae;ie+=C[(fe+Pe*s-O)*R+Ce+U]*x[H+re]}d[Q+re]=ie}return f.toTensor()},e.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,i=n.filter,a=n.convInfo,o=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,i,a);return o&&(l=this.add(l,o)),s&&(l=mx(this,l,s,u)),l},e.prototype.depthwiseConv2D=function(n,r,i){Ne([n,r],"depthwiseConv2D");for(var a=i.filterHeight,o=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.outChannels/i.inChannels,d=vt(i.outShape,n.dtype),h=this.readSync(n.dataId),p=this.readSync(r.dataId),m=d.values,y=0;y<i.batchSize;++y)for(var v=y*n.strides[0],x=y*d.strides[0],g=0;g<i.outHeight;++g)for(var b=x+g*d.strides[1],w=g*i.strideHeight-l,_=0;_<a;++_){var E=w+_*s;if(!(E<0||E>=i.inHeight))for(var C=_*r.strides[0],N=v+E*n.strides[1],D=0;D<i.outWidth;++D)for(var A=b+D*d.strides[2],T=D*i.strideWidth-c,R=0;R<o;++R){var F=T+R*u;if(!(F<0||F>=i.inWidth))for(var O=C+R*r.strides[1],I=N+F*i.inChannels,M=A,B=O,k=0;k<i.inChannels;++k){for(var j=h[I+k],Y=0;Y<f;++Y)m[M+Y]+=j*p[B+Y];M+=f,B+=f}}}return d.toTensor()},e.prototype.depthwiseConv2DDerInput=function(n,r,i){Ne([n,r],"depthwiseConv2DDerInput");for(var a=vt(i.inShape,"float32"),o=a.values,s=a.strides,u=s[0],l=s[1],c=s[2],f=this.readSync(n.dataId),d=n.strides,h=d[0],p=d[1],m=d[2],y=this.readSync(r.dataId),v=r.strides,x=v[0],g=v[1],b=v[2],w=i.batchSize,_=i.filterHeight,E=i.filterWidth,C=i.inChannels,N=i.inHeight,D=i.inWidth,A=i.outChannels,T=i.outHeight,R=i.outWidth,F=i.strideHeight,O=i.strideWidth,I=_-1-i.padInfo.top,M=E-1-i.padInfo.left,B=A/C,k=0;k<w;++k)for(var j=0;j<C;++j)for(var Y=0;Y<N;++Y)for(var q=Y-I,L=Math.max(0,Math.ceil(q/F)),ne=Math.min(T,(_+q)/F),fe=0;fe<D;++fe){for(var te=fe-M,oe=Math.max(0,Math.ceil(te/O)),G=Math.min(R,(E+te)/O),U=0,Q=L;Q<ne;++Q)for(var re=Q*F-q,ie=oe;ie<G;++ie)for(var de=h*k+p*Q+m*ie,he=x*(_-1-re)+g*(E-1-(ie*O-te))+b*j,$=0;$<B;++$)U+=f[de+(j*B+$)]*y[he+$];o[u*k+l*Y+c*fe+j]=U}return a.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(n,r,i){Ne([n,r],"depthwiseConv2DDerFilter");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=vt(i.filterShape,"float32"),c=i.padInfo.left,f=i.padInfo.top,d=i.outChannels/i.inChannels,h=this.bufferSync(n),p=this.bufferSync(r),m=0;m<s;++m)for(var y=Math.max(0,Math.ceil((f-m)/a)),v=Math.min(i.outHeight,(i.inHeight+f-m)/a),x=0;x<u;++x)for(var g=Math.max(0,Math.ceil((c-x)/o)),b=Math.min(i.outWidth,(i.inWidth+c-x)/o),w=0;w<i.outChannels;++w){for(var _=Math.trunc(w/d),E=w%d,C=0,N=0;N<i.batchSize;++N)for(var D=y;D<v;++D)for(var A=m+D*a-f,T=g;T<b;++T){var R=x+T*o-c;C+=h.get(N,A,R,_)*p.get(N,D,T,w)}l.set(C,m,x,_,E)}return l.toTensor()},e.prototype.tile=function(n,r){return Ne(n,"tile"),u9(this.bufferSync(n),r)},e.prototype.pad=function(n,r,i){Ne(n,"pad");var a=r.map(function(d,h){return d[0]+n.shape[h]+d[1]}),o=r.map(function(d){return d[0]}),s=this.bufferSync(n),u=vt(a,n.dtype);i!==0&&u.values.fill(i);for(var l=0;l<n.size;l++){var c=s.indexToLoc(l),f=c.map(function(d,h){return d+o[h]});u.set.apply(u,[s.get.apply(s,c)].concat(f))}return u.toTensor()},e.prototype.transpose=function(n,r){Ne(n,"transpose");for(var i=new Array(n.rank),a=0;a<i.length;a++)i[a]=n.shape[r[a]];var o=this.readSync(n.dataId),s=vt(i,n.dtype),u=this.bufferSync(n);for(a=0;a<n.size;++a){for(var l=u.indexToLoc(a),c=new Array(l.length),f=0;f<c.length;f++)c[f]=l[r[f]];var d=s.locToIndex(c);s.values[d]=o[a]}return s.toTensor()},e.prototype.gather=function(n,r,i){Ne([n,r],"gather");var a=n.shape.slice(),o=this.readSync(r.dataId);a[i]=o.length;for(var s=vt(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l),f=c.slice();f[i]=o[c[i]];var d=u.locToIndex(f);s.values[l]=u.values[d]}return s.toTensor()},e.prototype.batchToSpaceND=function(n,r,i){Ne([n],"batchToSpaceND");var a=r.reduce(function(f,d){return f*d}),o=Zg(n.shape,r,a),s=Jg(o.length,r.length),u=e0(n.shape,r,a),l=Y7(i,r.length),c=X7(u,i,r.length);return n.reshape(o).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,i){Ne([n],"spaceToBatchND");var a=r.reduce(function(d,h){return d*h}),o=[[0,0]];o.push.apply(o,i);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var u=n.pad(o),l=Zg(u.shape,r,a,!1),c=Jg(l.length,r.length,!1),f=e0(u.shape,r,a,!1);return u.reshape(l).transpose(c).reshape(f)},e.prototype.pool=function(n,r,i){Ne(n,"pool");for(var a=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,h=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(n.dataId),m=vt(r.outShape,n.dtype),y=m.values,v=r.outShape[1]*r.outShape[2]*r.outShape[3],x=r.outShape[2]*r.outShape[3],g=r.outShape[3],b=0;b<r.batchSize;++b)for(var w=b*v,_=b*n.strides[0],E=0;E<r.inChannels;++E)for(var C=0;C<r.outHeight;++C)for(var N=C*a-f,D=Math.max(0,N),A=Math.min(r.inHeight,l+N),T=w+C*x,R=0;R<r.outWidth;++R){for(var F=R*o-d,O=Math.max(0,F),I=Math.min(r.inWidth,c+F),M=h,B=0,k=0,j=D;j<A;j+=s){for(var Y=_+j*n.strides[1],q=O;q<I;q+=u){var L=p[Y+q*n.strides[2]+E];i==="max"&&L>M?M=L:i==="avg"&&(B+=L,k++)}if(isNaN(M))break}y[T+R*g+E]=i==="avg"?B/k:M}return m.toTensor()},e.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},e.prototype.maxPoolPositions=function(n,r){for(var i=vt(r.outShape,"int32"),a=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,h=this.bufferSync(n),p=0;p<r.batchSize;++p)for(var m=0;m<r.inChannels;++m)for(var y=0;y<r.outHeight;++y){for(var v=y*a-f,x=v;x<0;)x+=s;for(var g=Math.min(r.inHeight,l+v),b=0;b<r.outWidth;++b){for(var w=b*o-d,_=w;_<0;)_+=u;for(var E=Math.min(r.inWidth,c+w),C=Number.NEGATIVE_INFINITY,N=-1,D=x;D<g;D+=s)for(var A=D-v,T=_;T<E;T+=u){var R=T-w,F=h.get(p,D,T,m);F>C&&(C=F,N=A*c+R)}i.set(N,p,y,b,m)}}return i.toTensor()},e.prototype.maxPoolBackprop=function(n,r,i,a){Ne([r,i],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,a),s=a.strideHeight,u=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,f=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=d-1-a.padInfo.left,p=f-1-a.padInfo.top,m=vt(r.shape,"float32"),y=this.bufferSync(o),v=this.bufferSync(n),x=0;x<a.batchSize;++x)for(var g=0;g<a.inChannels;++g)for(var b=0;b<a.inHeight;++b)for(var w=0;w<a.inWidth;++w){for(var _=b-p,E=w-h,C=0,N=0;N<f;N+=l){var D=(_+N)/s;if(!(D<0||D>=a.outHeight||Math.floor(D)!==D))for(var A=0;A<d;A+=c){var T=(E+A)/u;if(!(T<0||T>=a.outWidth||Math.floor(T)!==T)){var R=f*d-1-y.get(x,D,T,g)===N*d+A?1:0;R!==0&&(C+=v.get(x,D,T,g)*R)}}}m.set(C,x,b,w,g)}return m.toTensor()},e.prototype.avgPoolBackprop=function(n,r,i){Ne([n,r],"avgPoolBackprop");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,d=i.effectiveFilterWidth,h=d-1-i.padInfo.left,p=f-1-i.padInfo.top,m=vt(r.shape,"float32"),y=1/(s*u),v=this.bufferSync(n),x=0;x<i.batchSize;++x)for(var g=0;g<i.inChannels;++g)for(var b=0;b<i.inHeight;++b)for(var w=0;w<i.inWidth;++w){for(var _=b-p,E=w-h,C=0,N=0;N<f;N+=l){var D=(_+N)/a;if(!(D<0||D>=i.outHeight||Math.floor(D)!==D))for(var A=0;A<d;A+=c){var T=(E+A)/o;T<0||T>=i.outWidth||Math.floor(T)!==T||(C+=v.get(x,D,T,g))}}m.set(C*y,x,b,w,g)}return m.toTensor()},e.prototype.pool3d=function(n,r,i){Ne(n,"pool3d");for(var a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,y=r.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(n.dataId),g=vt(r.outShape,n.dtype),b=g.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],_=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],C=r.outShape[4],N=0;N<r.batchSize;++N)for(var D=N*w,A=N*n.strides[0],T=0;T<r.inChannels;++T)for(var R=0;R<r.outDepth;++R){for(var F=R*a-p,O=F;O<0;)O+=u;for(var I=Math.min(r.inDepth,f+F),M=D+R*_,B=0;B<r.outHeight;++B){for(var k=B*o-m,j=k;j<0;)j+=l;for(var Y=Math.min(r.inHeight,d+k),q=M+B*E,L=0;L<r.outWidth;++L){for(var ne=L*s-y,fe=ne;fe<0;)fe+=c;for(var te=Math.min(r.inWidth,h+ne),oe=q+L*C,G=v,U=0,Q=0,re=O;re<I;re+=u){for(var ie=A+re*n.strides[1],de=j;de<Y;de+=l){for(var he=ie+de*n.strides[2],$=fe;$<te;$+=c){var K=x[he+$*n.strides[3]+T];if(i==="max"&&K>G?G=K:i==="avg"&&(U+=K,Q++),isNaN(G))break}if(isNaN(G))break}if(isNaN(G))break}b[oe+T]=i==="avg"?U/Q:G}}}return g.toTensor()},e.prototype.avgPool3d=function(n,r){return Ne(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(n,r,i){Ne([n,r],"avgPool3dBackprop");for(var a=i.strideDepth,o=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=i.dilationDepth,d=i.dilationHeight,h=i.dilationWidth,p=i.effectiveFilterDepth,m=i.effectiveFilterHeight,y=i.effectiveFilterWidth,v=p-1-i.padInfo.front,x=y-1-i.padInfo.left,g=m-1-i.padInfo.top,b=vt(r.shape,"float32"),w=1/(u*l*c),_=this.bufferSync(n),E=0;E<i.batchSize;++E)for(var C=0;C<i.inChannels;++C)for(var N=0;N<i.inDepth;++N)for(var D=0;D<i.inHeight;++D)for(var A=0;A<i.inWidth;++A){for(var T=N-v,R=D-g,F=A-x,O=0,I=0;I<p;I+=f){var M=(T+I)/a;if(!(M<0||M>=i.outDepth||Math.floor(M)!==M))for(var B=0;B<m;B+=d){var k=(R+B)/o;if(!(k<0||k>=i.outHeight||Math.floor(k)!==k))for(var j=0;j<y;j+=h){var Y=(F+j)/s;Y<0||Y>=i.outWidth||Math.floor(Y)!==Y||(O+=_.get(E,M,k,Y,C))}}}b.set(O*w,E,N,D,A,C)}return b.toTensor()},e.prototype.maxPool3d=function(n,r){return Ne(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(n,r){for(var i=vt(r.outShape,"int32"),a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,y=r.padInfo.left,v=this.bufferSync(n),x=0;x<r.batchSize;++x)for(var g=0;g<r.inChannels;++g)for(var b=0;b<r.outDepth;++b){for(var w=b*a-p,_=w;_<0;)_+=u;for(var E=Math.min(r.inDepth,f+w),C=0;C<r.outHeight;++C){for(var N=C*o-m,D=N;D<0;)D+=l;for(var A=Math.min(r.inHeight,d+N),T=0;T<r.outWidth;++T){for(var R=T*s-y,F=R;F<0;)F+=c;for(var O=Math.min(r.inWidth,h+R),I=Number.NEGATIVE_INFINITY,M=-1,B=_;B<E;B+=u)for(var k=B-w,j=D;j<A;j+=l)for(var Y=j-N,q=F;q<O;q+=c){var L=q-R,ne=v.get(x,B,j,q,g);ne>=I&&(I=ne,M=k*d*h+Y*d+L)}i.set(M,x,b,C,T,g)}}}return i.toTensor()},e.prototype.maxPool3dBackprop=function(n,r,i,a){Ne([r,i],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,a),s=a.strideDepth,u=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,f=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,m=a.effectiveFilterWidth,y=h-1-a.padInfo.front,v=m-1-a.padInfo.left,x=p-1-a.padInfo.top,g=vt(r.shape,"float32"),b=this.bufferSync(o),w=this.bufferSync(n),_=0;_<a.batchSize;++_)for(var E=0;E<a.inChannels;++E)for(var C=0;C<a.inDepth;++C)for(var N=0;N<a.inHeight;++N)for(var D=0;D<a.inWidth;++D){for(var A=C-y,T=N-x,R=D-v,F=0,O=0;O<h;O+=c){var I=(A+O)/s;if(!(I<0||I>=a.outDepth||Math.floor(I)!==I))for(var M=0;M<p;M+=f){var B=(T+M)/u;if(!(B<0||B>=a.outHeight||Math.floor(B)!==B))for(var k=0;k<m;k+=d){var j=(R+k)/l;if(!(j<0||j>=a.outWidth||Math.floor(j)!==j)){var Y=h*p*m-1-b.get(_,I,B,j,E)===O*p*m+M*m+k?1:0;Y!==0&&(F+=w.get(_,I,B,j,E)*Y)}}}}g.set(F,_,C,N,D,E)}return g.toTensor()},e.prototype.cast=function(n,r){return i9(n,r,this)},e.prototype.reshape=function(n,r){return Yw(n,r)},e.prototype.avgPool=function(n,r){return Ne(n,"avgPool"),this.pool(n,r,"avg").toFloat()},e.prototype.resizeBilinear=function(n,r,i,a){Ne(n,"resizeBilinear");for(var o=n.shape,s=o[0],u=o[1],l=o[2],c=o[3],f=this.readSync(n.dataId),d=new Float32Array(He([s,r,i,c])),h=[a&&r>1?u-1:u,a&&i>1?l-1:l],p=[a&&r>1?r-1:r,a&&i>1?i-1:i],m=0,y=h[0]/p[0],v=h[1]/p[1],x=0;x<s;x++)for(var g=0;g<r;g++)for(var b=y*g,w=Math.floor(b),_=b-w,E=Math.min(u-1,Math.ceil(b)),C=x*n.strides[0]+w*n.strides[1],N=x*n.strides[0]+E*n.strides[1],D=0;D<i;D++)for(var A=v*D,T=Math.floor(A),R=A-T,F=Math.min(l-1,Math.ceil(A)),O=C+T*n.strides[2],I=N+T*n.strides[2],M=C+F*n.strides[2],B=N+F*n.strides[2],k=0;k<c;k++){var j=f[O+k],Y=f[I+k],q=j+(f[M+k]-j)*R,L=q+(Y+(f[B+k]-Y)*R-q)*_;d[m++]=L}return hr(d,[s,r,i,c])},e.prototype.resizeBilinearBackprop=function(n,r,i){Ne([n,r],"resizeBilinearBackprop");for(var a=r.shape,o=a[0],s=a[1],u=a[2],l=a[3],c=n.shape,f=c[1],d=c[2],h=new Float32Array(o*s*u*l),p=[i&&f>1?s-1:s,i&&d>1?u-1:u],m=[i&&f>1?f-1:f,i&&d>1?d-1:d],y=p[0]/m[0],v=p[1]/m[1],x=this.readSync(n.dataId),g=0,b=0;b<o;b++)for(var w=b*r.strides[0],_=0;_<f;_++)for(var E=_*y,C=Math.floor(E),N=Math.min(Math.ceil(E),s-1),D=w+C*r.strides[1],A=w+N*r.strides[1],T=E-C,R=1-T,F=0;F<d;F++)for(var O=F*v,I=Math.floor(O),M=Math.min(Math.ceil(O),u-1),B=O-I,k=1-B,j=D+I*r.strides[2],Y=D+M*r.strides[2],q=A+I*r.strides[2],L=A+M*r.strides[2],ne=R*k,fe=R*B,te=T*k,oe=T*B,G=0;G<l;G++){var U=x[g++];h[j+G]+=U*ne,h[Y+G]+=U*fe,h[q+G]+=U*te,h[L+G]+=U*oe}return oi(h,[o,u,s,l],r.dtype)},e.prototype.resizeNearestNeighbor=function(n,r,i,a){Ne(n,"resizeNearestNeighbor");for(var o=n.shape,s=o[0],u=o[1],l=o[2],c=o[3],f=this.readSync(n.dataId),d=new Float32Array(s*r*i*c),h=[a&&r>1?u-1:u,a&&i>1?l-1:l],p=[a&&r>1?r-1:r,a&&i>1?i-1:i],m=h[0]/p[0],y=h[1]/p[1],v=0,x=0;x<s;x++)for(var g=x*n.strides[0],b=0;b<r;b++)for(var w=m*b,_=g+Math.min(u-1,a?Math.round(w):Math.floor(w))*n.strides[1],E=0;E<i;E++)for(var C=y*E,N=_+Math.min(l-1,a?Math.round(C):Math.floor(C))*n.strides[2],D=0;D<c;D++){var A=f[N+D];d[v++]=A}return hr(d,[s,r,i,c],n.dtype)},e.prototype.resizeNearestNeighborBackprop=function(n,r,i){Ne([n,r],"resizeNearestNeighborBackprop");for(var a=r.shape,o=a[0],s=a[1],u=a[2],l=a[3],c=n.shape,f=c[1],d=c[2],h=new Float32Array(o*s*u*l),p=this.readSync(n.dataId),m=[i&&f>1?s-1:s,i&&d>1?u-1:u],y=[i&&f>1?f-1:f,i&&d>1?d-1:d],v=m[0]/y[0],x=m[1]/y[1],g=1/v,b=1/x,w=2*Math.ceil(g)+2,_=2*Math.ceil(b)+2,E=0;E<o;E++)for(var C=E*r.strides[0],N=0;N<s;N++)for(var D=C+N*r.strides[1],A=Math.floor(N*g),T=Math.floor(A-w/2),R=0;R<u;R++)for(var F=D+R*r.strides[2],O=Math.floor(R*b),I=Math.floor(O-_/2),M=0;M<l;M++){for(var B=0,k=0;k<w;k++){var j=k+T;if(!(j<0||j>=f)){var Y=C+j*n.strides[1],q=j*v;if(N===Math.min(s-1,i?Math.round(q):Math.floor(q)))for(var L=0;L<_;L++){var ne=L+I;if(!(ne<0||ne>=d)){var fe=Y+ne*n.strides[2],te=ne*x;R===Math.min(u-1,i?Math.round(te):Math.floor(te))&&(B+=p[fe+M])}}}}h[F+M]=B}return oi(h,r.shape,r.dtype)},e.prototype.batchNormalization=function(n,r,i,a,o,s){Ne([n,r,i,o,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=this.readSync(i.dataId),f=o?this.readSync(o.dataId):new Float32Array([1]),d=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(u.length),p=d.length,m=f.length,y=c.length,v=l.length,x=0,g=0,b=0,w=0,_=0;_<u.length;++_)h[_]=d[x++]+(u[_]-l[g++])*f[b++]/Math.sqrt(c[w++]+a),x>=p&&(x=0),g>=v&&(g=0),b>=m&&(b=0),w>=y&&(w=0);return oi(h,n.shape)},e.prototype.localResponseNormalization4D=function(n,r,i,a,o){Ne(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),c=n.size,f=new Float32Array(c);function d(y){for(var v=y%s,x=y-v+Math.max(0,v-r),g=y-v+Math.min(v+r,u),b=0;x<=g;x++){var w=l[x];b+=w*w}return b}for(var h=0;h<c;h++){var p=d(h),m=l[h]*Math.pow(i+a*p,-o);f[h]=m}return oi(f,n.shape)},e.prototype.LRNGrad=function(n,r,i,a,o,s,u){Ne(n,"LRNGrad");for(var l=n.shape[3],c=this.readSync(n.dataId),f=this.readSync(r.dataId),d=this.readSync(i.dataId),h=new Float32Array(n.size),p=n.size,m=0;m<p;m++){for(var y=m%l,v=m-y+Math.max(0,y-a),x=m-y+Math.min(l,y+a+1),g=0,b=v;b<x;b++)g+=Math.pow(f[b],2);for(g=s*g+o,b=v;b<x;b++){var w=-2*s*u*f[b]*d[m]/g;m===b&&(w+=Math.pow(g,-u)),w*=c[m],h[b]+=w}}return oi(h,n.shape)},e.prototype.multinomial=function(n,r,i,a){Ne(n,"multinomial");for(var o=r?n:rs(n),s=o.shape[0],u=o.shape[1],l=ln([s,i],"int32"),c=this.readSync(l.dataId),f=this.readSync(o.dataId),d=0;d<s;++d){var h=d*u,p=new Float32Array(u-1);p[0]=f[h];for(var m=1;m<p.length;++m)p[m]=p[m-1]+f[h+m];for(var y=Ny(a.toString()),v=d*i,x=0;x<i;++x){var g=y();c[v+x]=p.length;for(var b=0;b<p.length;b++)if(g<p[b]){c[v+x]=b;break}}}return l},e.prototype.oneHot=function(n,r,i,a){Ne(n,"oneHot");var o=new Float32Array(n.size*r);o.fill(a);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(o[u*r+s[u]]=i);return Ws(o,[n.size,r],"int32")},e.prototype.nonMaxSuppression=function(n,r,i,a,o){return Ne(n,"nonMaxSuppression"),PC(this.readSync(n.dataId),this.readSync(r.dataId),i,a,o)},e.prototype.fft=function(n){return this.fftBatch(n,!1)},e.prototype.ifft=function(n){return this.fftBatch(n,!0)},e.prototype.fftBatch=function(n,r){for(var i=n.shape[0],a=n.shape[1],o=vt(n.shape,"float32"),s=vt(n.shape,"float32"),u=Zi(n).as2D(i,a),l=Ka(n).as2D(i,a),c=0;c<i;c++)for(var f=u.slice([c,0],[1,a]),d=l.slice([c,0],[1,a]),h=fr(f,d),p=this.readSync(this.fftImpl(h,r).dataId),m=0;m<a;m++){var y=fk(p,m);o.values[c*a+m]=y.real,s.values[c*a+m]=y.imag}return fr(o.toTensor(),s.toTensor()).as2D(i,a)},e.prototype.fftImpl=function(n,r){var i=n.as1D(),a=i.size;if(this.isExponentOf2(a)){var o=this.fftRadix2(i,a,r).as2D(n.shape[0],n.shape[1]);return r&&(o=fr(Zi(o).div(je(a)),Ka(o).div(je(a)))),o}var s=this.readSync(n.dataId),u=function(l){for(var c=new Float32Array(l.length/2),f=new Float32Array(l.length/2),d=0;d<l.length;d+=2)c[d/2]=l[d],f[d/2]=l[d+1];return{real:c,imag:f}}(this.fourierTransformByMatmul(s,a,r));return fr(u.real,u.imag).as2D(n.shape[0],n.shape[1])},e.prototype.isExponentOf2=function(n){return(n&n-1)==0},e.prototype.fftRadix2=function(n,r,i){if(r===1)return n;var a=this.readSync(n.dataId),o=r/2,s=function(v){for(var x=Math.ceil(v.length/4),g=new Float32Array(x),b=new Float32Array(x),w=0;w<v.length;w+=4)g[Math.floor(w/4)]=v[w],b[Math.floor(w/4)]=v[w+1];return{real:g,imag:b}}(a),u=fr(s.real,s.imag).as1D(),l=function(v){for(var x=Math.floor(v.length/4),g=new Float32Array(x),b=new Float32Array(x),w=2;w<v.length;w+=4)g[Math.floor(w/4)]=v[w],b[Math.floor(w/4)]=v[w+1];return{real:g,imag:b}}(a),c=fr(l.real,l.imag).as1D();u=this.fftRadix2(u,o,i),c=this.fftRadix2(c,o,i);var f=function(v,x){for(var g=new Float32Array(v/2),b=new Float32Array(v/2),w=0;w<Math.ceil(v/2);w++){var _=(x?2:-2)*Math.PI*(w/v);g[w]=Math.cos(_),b[w]=Math.sin(_)}return{real:g,imag:b}}(r,i),d=fr(f.real,f.imag).mul(c),h=u.add(d),p=u.sub(d),m=Zi(h).concat(Zi(p)),y=Ka(h).concat(Ka(p));return fr(m,y).as1D()},e.prototype.fourierTransformByMatmul=function(n,r,i){for(var a=new Float32Array(2*r),o=0;o<r;o++){for(var s=0,u=0,l=0;l<r;l++){var c=DDe(o*l,r,i),f=fk(n,l);s+=f.real*c.real-f.imag*c.imag,u+=f.real*c.imag+f.imag*c.real}i&&(s/=r,u/=r),SDe(a,s,u,o)}return a},e.prototype.depthToSpace=function(n,r,i){X(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),X(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var a=n.shape[0],o=n.shape[1],s=n.shape[2],u=n.shape[3],l=o*r,c=s*r,f=u/(r*r),d=this.readSync(n.dataId),h=new Float32Array(a*l*c*f),p=0,m=0;m<a;++m)for(var y=0;y<l;++y)for(var v=Math.floor(y/r),x=y%r,g=0;g<c;++g)for(var b=Math.floor(g/r),w=(x*r+g%r)*f,_=0;_<f;++_){var E=_+w+u*(b+s*(v+o*m));h[p++]=d[E]}return oi(h,[a,l,c,f])},e.prototype.broadcastedBinaryOp=function(n,r,i,a){var o=It(n.shape,r.shape),s=vt(o,i),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=As(n.shape,o),f=As(r.shape,o),d=s.values;if(c.length+f.length===0)for(var h=0;h<d.length;++h)d[h]=a(u[h%u.length],l[h%l.length]);else{var p=this.bufferSync(n),m=this.bufferSync(r),y=function(v){var x=s.indexToLoc(v),g=x.slice(-n.rank);c.forEach(function(E){return g[E]=0});var b=p.locToIndex(g),w=x.slice(-r.rank);f.forEach(function(E){return w[E]=0});var _=m.locToIndex(w);d[v]=a(u[b],l[_])};for(h=0;h<d.length;++h)y(h)}return s.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(n,r,i){var a=It(n.shape,r.shape),o=vt(a,"float32"),s=vt(a,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=As(n.shape,a),f=As(r.shape,a),d=o.values,h=s.values;if(c.length+f.length===0)for(var p=0;p<d.length;p++){var m=p%u.length,y=p%l.length,v=i(u[2*m],u[2*m+1],l[2*y],l[2*y+1]);d[p]=v.real,h[p]=v.imag}else{var x=this.bufferSync(this.data.get(n.dataId).complexTensors.real),g=this.bufferSync(this.data.get(r.dataId).complexTensors.real),b=function(w){var _=o.indexToLoc(w),E=_.slice(-n.rank);c.forEach(function(T){return E[T]=0});var C=x.locToIndex(E),N=_.slice(-r.rank);f.forEach(function(T){return N[T]=0});var D=g.locToIndex(N),A=i(u[2*C],u[2*C+1],l[2*D],l[2*D+1]);d[w]=A.real,h[w]=A.imag};for(p=0;p<d.length;p++)b(p)}return this.complex(o.toTensor(),s.toTensor())},e.prototype.split=function(n,r,i){return s9(n,r,i)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(n,r,i,a,o,s){for(var u=n.shape,l=u[0],c=u[1],f=u[2],d=u[3],h=r.shape[0],p=a[0],m=a[1],y=vt([h,p,m,d],"float32"),v=this.readSync(r.dataId),x=this.readSync(i.dataId),g=this.readSync(n.dataId),b=n.strides,w=y.strides,_=0;_<h;_++){var E=4*_,C=v[E],N=v[E+1],D=v[E+2],A=v[E+3],T=x[_];if(!(T>=l))for(var R=p>1?(D-C)*(c-1)/(p-1):0,F=m>1?(A-N)*(f-1)/(m-1):0,O=0;O<p;O++){var I=p>1?C*(c-1)+O*R:.5*(C+D)*(c-1);if(I<0||I>c-1)for(var M=0;M<m;M++)for(var B=0;B<d;B++){var k=B+M*w[2]+O*w[1]+_*w[0];y.values[k]=s}else if(o==="bilinear"){var j=Math.floor(I),Y=Math.ceil(I),q=I-j;for(M=0;M<m;M++)if((re=m>1?N*(f-1)+M*F:.5*(N+A)*(f-1))<0||re>f-1)for(B=0;B<d;B++)k=B+M*w[2]+O*w[1]+_*w[0],y.values[k]=s;else{var L=Math.floor(re),ne=Math.ceil(re),fe=re-L;for(B=0;B<d;B++){var te=g[k=B+L*b[2]+j*b[1]+T*b[0]],oe=g[k=B+ne*b[2]+j*b[1]+T*b[0]],G=g[k=B+L*b[2]+Y*b[1]+T*b[0]],U=te+(oe-te)*fe,Q=G+(g[k=B+ne*b[2]+Y*b[1]+T*b[0]]-G)*fe;k=B+M*w[2]+O*w[1]+_*w[0],y.values[k]=U+(Q-U)*q}}}else for(M=0;M<m;++M){var re;if((re=m>1?N*(f-1)+M*F:.5*(N+A)*(f-1))<0||re>f-1)for(B=0;B<d;B++)k=B+M*w[2]+O*w[1]+_*w[0],y.values[k]=s;else{var ie=Math.round(re),de=Math.round(I);for(B=0;B<d;B++){var he=B+ie*b[2]+de*b[1]+T*b[0],$=B+M*w[2]+O*w[1]+_*w[0];y.values[$]=g[he]}}}}}return y.toTensor()},e.prototype.sparseToDense=function(n,r,i,a){var o=t0(0,n,i),s=o.sliceRank,u=o.numUpdates,l=o.sliceSize,c=o.strides,f=o.outputSize;return this.scatter(n,r,i,f,l,u,s,c,a,!1)},e.prototype.gatherND=function(n,r){var i=r.shape,a=i[i.length-1],o=Q7(n,r),s=o[0],u=o[1],l=o[2],c=o[3];if(u===0)return hr([],s,n.dtype);for(var f=new Hh([u,l],n.dtype),d=this.readSync(r.dataId),h=this.readSync(n.dataId),p=0;p<u;p++){for(var m=[],y=0,v=0;v<a;v++){var x=d[p*a+v];y+=x*c[v],m.push(x)}if(y<0||y>=n.size/l)throw new Error("Invalid indices: "+m+" does not index into "+n.shape);for(var g=0;g<l;g++)f.values[p*l+g]=h[y*l+g]}return f.toTensor().reshape(s)},e.prototype.scatterND=function(n,r,i){var a=t0(0,n,i),o=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,c=a.outputSize,f=je(0);return this.scatter(n,r,i,c,u,s,o,l,f,!0)},e.prototype.fill=function(n,r,i){var a=qg(i=i||Ip(r),He(n));return a.fill(r),se.makeTensor(a,n,i,this)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){var r=qg(n.dtype,He(n.shape));return this.makeOutput(r,n.shape,n.dtype)},e.prototype.linspace=function(n,r,i){return a9(n,r,i)},e.prototype.scatter=function(n,r,i,a,o,s,u,l,c,f){var d=[a/o,o],h=this.readSync(n.dataId),p=this.readSync(r.dataId);if(a===0)return hr([],i,r.dtype);var m=new Hh(d,r.dtype);m.values.fill(this.readSync(c.dataId)[0]);for(var y=0;y<s;y++){for(var v=[],x=0,g=0;g<u;g++){var b=h[y*u+g];v.push(b),x+=b*l[g]}if(x<0||x>=a/o)throw new Error("Invalid indices: "+v+" does not index into "+i);for(var w=0;w<o;w++)f?m.values[x*o+w]+=p[y*o+w]:m.values[x*o+w]=r.rank===0?p[0]:p[y*o+w]}return m.toTensor().reshape(i)},e}(n9);se.registerBackend("cpu",function(){return new GMe},1);for(var vx=0,Rk=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e,a=i.boxes,o=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,d=n;Ne(a,"NonMaxSuppressionWithScore");var h=OC(d.data.get(a.dataId).values,d.data.get(o.dataId).values,u,l,c,f);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n;Ne(r,"square");for(var a=i.data.get(r.dataId).values,o=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];o[s]=u*u}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Yh,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,i=r.a,a=r.b,o=n;Ne([i,a],Yh);var s=o.data.get(i.dataId).values,u=o.data.get(a.dataId).values,l=function(d,h,p,m,y,v){var x=It(d,h),g=x.length,b=ro(x),w=qh(y,He(x)),_=d.length,E=h.length,C=ro(d),N=ro(h),D=As(d,x),A=As(h,x);if(D.length+A.length===0)for(var T=0;T<w.length;++T)w[T]=v(p[T%p.length],m[T%m.length]);else{var R=function(F){var O=rSe(F,g,b),I=O.slice(-_);D.forEach(function(j){return I[j]=0});var M=nk(I,_,C),B=O.slice(-E);A.forEach(function(j){return B[j]=0});var k=nk(B,E,N);w[F]=v(p[M],m[k])};for(T=0;T<w.length;++T)R(T)}return[w,x]}(i.shape,a.shape,s,u,i.dtype,function(d,h){var p=d-h;return p*p}),c=l[0],f=l[1];return{dataId:o.write(c,f,i.dtype),shape:f,dtype:i.dtype}}}];vx<Rk.length;vx++)M7(Rk[vx]);var Jl,KMe=function(t){this.variableNames=["A"];var e=kr(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},YMe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=kr(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var gx=0,Fk=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.pixels,a=r.numChannels,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=u[0],c=u[1],f=[c,l],d=[c,l,a];(s||o)&&(Jl==null&&(Jl=document.createElement("canvas").getContext("2d")),Jl.canvas.width=l,Jl.canvas.height=c,Jl.drawImage(i,0,0,l,c),i=Jl.canvas);var h=n.makeTensorInfo(f,"int32");n.texData.get(h.dataId).usage=Ti.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),i);var p=_e().getBool("WEBGL_PACK")?new YMe(d):new KMe(d),m=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;Yg("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=e,a=i.boxes,o=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,d=n,h=OC(d.readSync(a.dataId),d.readSync(o.dataId),u,l,c,f);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n,a=new _t(r.shape,"return x * x;");return i.runWebGLProgram(a,[r],r.dtype)}},{kernelName:Yh,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,i=r.a,a=r.b,o=n,s=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bo("return (a - b) * (a - b);",i.shape,a.shape):new Nn("return (a - b) * (a - b);",i.shape,a.shape);return o.compileAndRun(s,[i,a])}}];gx<Fk.length;gx++)M7(Fk[gx]);for(var yx=0,Pk=[{kernelName:"Square",gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:Yh,gradFunc:function(t,e){var n=e[0],r=e[1],i=je(2);return{a:function(){return Pr(t,Pr(i,Gn(n,r)))},b:function(){return Pr(t,Pr(i,Gn(r,n)))}}}}];yx<Pk.length;yx++)HNe(Pk[yx]);var XMe=function(){function t(){}return t.prototype.fetch=function(e,n){return fetch(e,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return new TextDecoder(n).decode(e)},t}();_e().get("IS_BROWSER")&&_e().setPlatform("browser",new XMe);var xx,QMe=function(){return require("node-fetch")},ZMe=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,n){return _e().global.fetch!=null?_e().global.fetch(e,n):(xx==null&&(xx=QMe()),xx(e,n))},t.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)},t}();_e().get("IS_NODE")&&_e().setPlatform("node",new ZMe);var Zw={float32:4,int32:4,uint16:2,uint8:1,bool:1},u0=4;function J9(t,e){for(var n={},r=0,i=function(s){var u=s.name,l=s.dtype,c=s.shape,f=He(c),d=void 0;if("quantization"in s){var h=s.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=Zw[h.dtype],m=t.slice(r,r+f*p),y=h.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(l==="float32")d=Float32Array.from(y,function(_){return _*h.scale+h.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);d=Int32Array.from(y,function(_){return Math.round(_*h.scale+h.min)})}r+=f*p}else if(l==="string"){var v=He(s.shape);d=[];for(var x=0;x<v;x++){var g=new Uint32Array(t.slice(r,r+u0))[0];r+=u0;var b=new Uint8Array(t.slice(r,r+g));d.push(b),r+=g}}else{var w=Zw[l];if(m=t.slice(r,r+f*w),l==="float32")d=new Float32Array(m);else if(l==="int32")d=new Int32Array(m);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);d=new Uint8Array(m)}r+=f*w}n[u]=hr(d,c,l)},a=0,o=e;a<o.length;a++)i(o[a]);return n}function JMe(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(a){if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+a.constructor.name)});var r=new Uint8Array(e),i=0;return n.forEach(function(a){r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}var Jw=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Ok(t){return Jw?Buffer.byteLength(t):new Blob([t]).size}function tN(t){var e=0;t.forEach(function(i){e+=i.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(new Uint8Array(i),r),r+=i.byteLength}),n.buffer}function Bk(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function Lp(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:Ok(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:Ok(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Mi=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var i=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(a){var o=a(e,r);o!==null&&i.push(o)}),i},t}(),Wc="://",qs=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){X(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(Wc)&&(e=e.slice(0,e.indexOf(Wc))),X(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();X(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function pv(t){if(t.indexOf(Wc)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+qs.getSchemes().join(","));return{scheme:t.split(Wc)[0],path:t.split(Wc)[1]}}function Lk(t,e,n){return n===void 0&&(n=!1),Ve(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f;return We(this,function(d){switch(d.label){case 0:return X(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),X((r=Mi.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),X(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],X((a=Mi.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),X(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),o=a[0],s=pv(t).scheme,u=pv(t).path,l=s===pv(t).scheme,[4,i.load()];case 1:return c=d.sent(),n&&l?[4,qs.getManager(s).removeModel(u)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,o.save(c)];case 4:return f=d.sent(),!n||l?[3,6]:[4,qs.getManager(s).removeModel(u)];case 5:d.sent(),d.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var Xu="models_store",Ts="model_info_store";function ej(){if(!_e().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function e2(t){var e=t.result;e.createObjectStore(Xu,{keyPath:"modelPath"}),e.createObjectStore(Ts,{keyPath:"modelPath"})}var qc=function(){function t(e){if(this.indexedDB=ej(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return Ve(this,void 0,void 0,function(){return We(this,function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return Ve(this,void 0,void 0,function(){return We(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,n){var r=this;return new Promise(function(i,a){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return e2(o)},o.onsuccess=function(){var s=o.result;if(n==null){var u=s.transaction(Xu,"readonly"),l=u.objectStore(Xu).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(m){return s.close(),a(l.error)},u.oncomplete=function(){return s.close()}}else{var c,f=Lp(n),d=s.transaction(Ts,"readwrite"),h=d.objectStore(Ts),p=h.put({modelPath:r.modelPath,modelArtifactsInfo:f});p.onsuccess=function(){var m=(c=s.transaction(Xu,"readwrite")).objectStore(Xu).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});m.onsuccess=function(){return i({modelArtifactsInfo:f})},m.onerror=function(y){var v=(h=d.objectStore(Ts)).delete(r.modelPath);v.onsuccess=function(){return s.close(),a(m.error)},v.onerror=function(x){return s.close(),a(m.error)}}},p.onerror=function(m){return s.close(),a(p.error)},d.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},o.onerror=function(s){return a(o.error)}})},t.URL_SCHEME="indexeddb://",t}(),jk=function(t){return _e().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(qc.URL_SCHEME)?(e=t.slice(qc.URL_SCHEME.length),new qc(e)):null;var e};Mi.registerSaveRouter(jk),Mi.registerLoadRouter(jk);var eIe=function(){function t(){this.indexedDB=ej()}return t.prototype.listModels=function(){return Ve(this,void 0,void 0,function(){var e=this;return We(this,function(n){return[2,new Promise(function(r,i){var a=e.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return e2(a)},a.onsuccess=function(){var o=a.result,s=o.transaction(Ts,"readonly"),u=s.objectStore(Ts).getAll();u.onsuccess=function(){for(var l={},c=0,f=u.result;c<f.length;c++){var d=f[c];l[d.modelPath]=d.modelArtifactsInfo}r(l)},u.onerror=function(l){return o.close(),i(u.error)},s.oncomplete=function(){return o.close()}},a.onerror=function(o){return i(a.error)}})]})})},t.prototype.removeModel=function(e){return Ve(this,void 0,void 0,function(){var n=this;return We(this,function(r){var i;return e=(i=e).startsWith(qc.URL_SCHEME)?i.slice(qc.URL_SCHEME.length):i,[2,new Promise(function(a,o){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return e2(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(Ts,"readwrite"),f=c.objectStore(Ts),d=f.get(e);d.onsuccess=function(){if(d.result==null)return l.close(),o(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var h=f.delete(e),p=function(){var m=(u=l.transaction(Xu,"readwrite")).objectStore(Xu).delete(e);m.onsuccess=function(){return a(d.result.modelArtifactsInfo)},m.onerror=function(y){return o(d.error)}};h.onsuccess=p,h.onerror=function(m){return p(),l.close(),o(d.error)}},d.onerror=function(h){return l.close(),o(d.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return o(s.error)}})]})})},t}();if(_e().getBool("IS_BROWSER"))try{qs.registerManager(qc.URL_SCHEME,new eIe)}catch{}var Co="/",ac="tensorflowjs_models",tj="info",tIe="model_topology",nIe="weight_specs",rIe="weight_data",iIe="model_metadata";function nj(t){return{info:[ac,t,tj].join(Co),topology:[ac,t,tIe].join(Co),weightSpecs:[ac,t,nIe].join(Co),weightData:[ac,t,rIe].join(Co),modelMetadata:[ac,t,iIe].join(Co)}}function aIe(t){var e=t.split(Co);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(Co)}var Hc=function(){function t(e){if(!_e().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=nj(this.modelPath)}return t.prototype.save=function(e){return Ve(this,void 0,void 0,function(){var n,r,i;return We(this,function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=Lp(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(Jw)return Buffer.from(o).toString("base64");for(var s=new Uint8Array(o),u="",l=0,c=s.length;l<c;l++)u+=String.fromCharCode(s[l]);return btoa(u)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return Ve(this,void 0,void 0,function(){var e,n,r,i,a,o,s;return We(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=i,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(a),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,n.userDefinedMetadata=o.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(Jw){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var f=atob(l),d=new Uint8Array(f.length),h=0;h<f.length;++h)d.set([f.charCodeAt(h)],h);return d.buffer}(s),[2,n]})})},t.URL_SCHEME="localstorage://",t}(),$k=function(t){return _e().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Hc.URL_SCHEME)?(e=t.slice(Hc.URL_SCHEME.length),new Hc(e)):null;var e};Mi.registerSaveRouter($k),Mi.registerLoadRouter($k);var oIe=function(){function t(){X(_e().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),X(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return Ve(this,void 0,void 0,function(){var e,n,r,i,a,o;return We(this,function(s){for(e={},n=ac+Co,r=Co+tj,i=0;i<this.LS.length;++i)(a=this.LS.key(i)).startsWith(n)&&a.endsWith(r)&&(o=aIe(a),e[o]=JSON.parse(this.LS.getItem(a)));return[2,e]})})},t.prototype.removeModel=function(e){return Ve(this,void 0,void 0,function(){var n,r;return We(this,function(i){var a;if(e=(a=e).startsWith(Hc.URL_SCHEME)?a.slice(Hc.URL_SCHEME.length):a,n=nj(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t}();if(_e().getBool("IS_BROWSER"))try{qs.registerManager(Hc.URL_SCHEME,new oIe)}catch{}var sIe="model",uIe=".json",lIe=".weights.bin";function zk(t){return new Promise(function(e){return setTimeout(e)}).then(t)}var bx=function(){function t(e){if(!_e().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=sIe),this.modelTopologyFileName=e+uIe,this.weightDataFileName=e+lIe}return t.prototype.save=function(e){return Ve(this,void 0,void 0,function(){var n,r,i,a,o,s;return We(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=a,[4,zk(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),e.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,zk(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Lp(e)}]}})})},t.URL_SCHEME="downloads://",t}(),cIe=function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return t.prototype.load=function(){return Ve(this,void 0,void 0,function(){var e,n,r=this;return We(this,function(i){return e=this.files[0],n=this.files.slice(1),[2,new Promise(function(a,o){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&a({modelTopology:c});var f=l.weightsManifest;if(f!=null){var d;try{d=r.checkManifestAndWeightFiles(f,n)}catch(y){return void o(y)}var h=[],p=[],m=[];f.forEach(function(y){y.paths.forEach(function(v){p.push(v),m.push(null)}),h.push.apply(h,y.weights)}),f.forEach(function(y){y.paths.forEach(function(v){var x=new FileReader;x.onload=function(g){var b=g.target.result,w=p.indexOf(v);m[w]=b,m.indexOf(null)===-1&&a({modelTopology:c,weightSpecs:h,weightData:tN(m),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},x.onerror=function(g){return o("Failed to weights data from file of path '"+v+"'.")},x.readAsArrayBuffer(d[v])})})}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},s.onerror=function(u){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(e)})]})})},t.prototype.checkManifestAndWeightFiles=function(e,n){for(var r=[],i=n.map(function(u){return Bk(u.name)}),a={},o=0,s=e;o<s.length;o++)s[o].paths.forEach(function(u){var l=Bk(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");a[u]=n[i.indexOf(l)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return a},t}();function Uk(t,e,n,r){(function(a){X(a!=null&&Array.isArray(a)&&a.length>0,function(){return"promises must be a none empty array"})})(t),function(a,o){X(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a}),X(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),X(o>=a,function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+o})}(n=n??0,r=r??1);var i=0;return Promise.all(t.map(function(a){return a.then(function(o){var s=n+ ++i/t.length*(r-n);return e(s),o}),a}))}function rj(t,e){return Ve(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c;return We(this,function(f){switch(f.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?_e().platform.fetch:e.fetchFunc,r=t.map(function(d){return n(d,e.requestInit,{isBinary:!0})}),i=0,a=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=f.sent(),[3,4];case 2:return[4,Uk(r,e.onProgress,i,a)];case 3:o=f.sent(),f.label=4;case 4:return s=o.map(function(d){return d.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=f.sent(),[3,8];case 6:return[4,Uk(s,e.onProgress,u,l)];case 7:c=f.sent(),f.label=8;case 8:return[2,c]}})})}function Vk(t){var e=this;return function(n,r,i){return r===void 0&&(r=""),Ve(e,void 0,void 0,function(){var a,o,s,u,l,c,f,d,h,p;return We(this,function(m){switch(m.label){case 0:if(a=n.map(function(){return!1}),o={},s=i!=null?i.map(function(){return!1}):[],u=[],n.forEach(function(y,v){var x=0;y.weights.forEach(function(g){var b="quantization"in g?g.quantization.dtype:g.dtype,w=Zw[b]*He(g.shape),_=function(){a[v]=!0,o[v]==null&&(o[v]=[]),o[v].push({manifestEntry:g,groupOffset:x,sizeBytes:w})};i!=null?i.forEach(function(E,C){E===g.name&&(_(),s[C]=!0)}):_(),u.push(g.name),x+=w})}),!s.every(function(y){return y}))throw l=i.filter(function(y,v){return!s[v]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=a.reduce(function(y,v,x){return v&&y.push(x),y},[]),f=[],c.forEach(function(y){n[y].paths.forEach(function(v){var x=r+(r.endsWith("/")?"":"/")+v;f.push(x)})}),[4,t(f)];case 1:return d=m.sent(),h={},p=0,c.forEach(function(y){for(var v=n[y].paths.length,x=0,g=0;g<v;g++)x+=d[p+g].byteLength;for(var b=new ArrayBuffer(x),w=new Uint8Array(b),_=0,E=0;E<v;E++){var C=new Uint8Array(d[p+E]);w.set(C,_),_+=C.byteLength}o[y].forEach(function(N){var D=J9(b.slice(N.groupOffset,N.groupOffset+N.sizeBytes),[N.manifestEntry]);for(var A in D)h[A]=D[A]}),p+=v}),[2,h]}})})}}Mi.registerSaveRouter(function(t){return _e().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(bx.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new bx(e)}(t.slice(bx.URL_SCHEME.length)):null});var ij=function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(X(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=_e().platform.fetch,X(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&X(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return Ve(this,void 0,void 0,function(){var n,r,i,a;return We(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((a=o.sent()).ok)return[2,{modelArtifactsInfo:Lp(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}})})},t.prototype.load=function(){return Ve(this,void 0,void 0,function(){var e,n,r,i,a,o,s,u,l,c,f,d;return We(this,function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,e.json()];case 3:return n=h.sent(),[3,5];case 4:throw h.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=n.modelTopology,a=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,i==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:d=h.sent(),c=d[0],f=d[1],h.label=7;case 7:return[2,{modelTopology:i,weightSpecs:c,weightData:f,userDefinedMetadata:l,generatedBy:o,convertedBy:s,format:u}]}})})},t.prototype.loadWeights=function(e){return Ve(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f,d;return We(this,function(h){switch(h.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var m=p.lastIndexOf("/"),y=p.lastIndexOf("?"),v=p.substring(0,m),x=y>m?p.substring(y):"";return[v+"/",x]}(n),i=r[0],a=r[1],o=this.weightPathPrefix||i,s=[],u=0,l=e;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return f=[],e.forEach(function(p){p.paths.forEach(function(m){f.push(o+m+a)})}),[4,rj(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=h.sent(),[2,[s,tN(d)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function t2(t){return t.match(ij.URL_SCHEME_REGEX)!=null}var Wk=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(n){return t2(n)}):t2(t))?n2(t,{onProgress:e}):null};function n2(t,e){return new ij(t,e)}Mi.registerSaveRouter(Wk),Mi.registerLoadRouter(Wk);var wx=function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return Ve(this,void 0,void 0,function(){return We(this,function(e){return[2,this.modelArtifacts]})})},t}(),fIe=function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return Ve(this,void 0,void 0,function(){return We(this,function(n){return[2,this.saveHandler(e)]})})},t}(),aj=Object.freeze({browserFiles:function(t){return new cIe(t)},browserHTTPRequest:function(t,e){return n2(t,e)},concatenateArrayBuffers:tN,decodeWeights:J9,encodeWeights:function(t,e){return Ve(this,void 0,void 0,function(){var n,r,i,a,o,s=this;return We(this,function(u){switch(u.label){case 0:for(n=[],r=[],i=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),a=function(l){var c=i[l],f=Array.isArray(t)?t[l].tensor:t[c];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+f.dtype);var d={name:c,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var h=new Promise(function(p){return Ve(s,void 0,void 0,function(){var m,y,v,x,g,b,w;return We(this,function(_){switch(_.label){case 0:return[4,f.bytes()];case 1:for(m=_.sent(),y=m.reduce(function(E,C){return E+C.length},0)+u0*m.length,v=new Uint8Array(y),x=0,g=0;g<m.length;g++)b=m[g],w=new Uint8Array(new Uint32Array([b.length]).buffer),v.set(w,x),x+=u0,v.set(b,x),x+=b.length;return p(v),[2]}})})});r.push(h)}else r.push(f.data());e!=null&&(d.group=e),n.push(d)},o=0;o<i.length;++o)a(o);return[4,Promise.all(r)];case 1:return[2,{data:JMe(u.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new wx(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new wx({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new wx({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return Mi.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:Lp,getSaveHandlers:function(t){return Mi.getSaveHandlers(t)},http:n2,isHTTPScheme:t2,loadWeights:function(t,e,n,r){return e===void 0&&(e=""),Ve(this,void 0,void 0,function(){return We(this,function(i){return[2,Vk(function(a){return rj(a,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return Mi.registerLoadRouter(t)},registerSaveRouter:function(t){return Mi.registerSaveRouter(t)},weightsLoaderFactory:Vk,withSaveHandler:function(t){return new fIe(t)},copyModel:function(t,e){return Ve(this,void 0,void 0,function(){return We(this,function(n){return[2,Lk(t,e,!1)]})})},listModels:function(){return Ve(this,void 0,void 0,function(){var t,e,n,r,i,a,o;return We(this,function(s){switch(s.label){case 0:t=qs.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?(i=r[n],[4,qs.getManager(i).listModels()]):[3,4];case 2:for(o in a=s.sent())e[i+Wc+o]=a[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return Ve(this,void 0,void 0,function(){return We(this,function(n){return[2,Lk(t,e,!0)]})})},removeModel:function(t){return Ve(this,void 0,void 0,function(){var e;return We(this,function(n){return e=pv(t),[2,qs.getManager(e.scheme).removeModel(e.path)]})})}}),ec;ae({confusionMatrix_:function(t,e,n){var r=V(t,"labels","confusionMatrix"),i=V(e,"predictions","confusionMatrix");X(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),X(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),X(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),X(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),X(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var a=Gw(r.asType("int32"),n),o=Gw(i.asType("int32"),n);return a.transpose().matMul(o).asType("int32")}});var dIe=ae({fromPixels_:function(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,a=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)a=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);o=!0}if(i&&i&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(T7("FromPixels",se.backendName)!=null)return se.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,l=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],c=l[0],f=l[1];if(o?s=t.getContext("2d").getImageData(0,0,c,f).data:r||n?s=t.data:(a||i)&&(ec==null&&(ec=document.createElement("canvas").getContext("2d")),ec.canvas.width=c,ec.canvas.height=f,ec.drawImage(t,0,0,c,f),s=ec.getImageData(0,0,c,f).data),e===4)u=new Int32Array(s);else{var d=c*f;u=new Int32Array(d*e);for(var h=0;h<d;h++)for(var p=0;p<e;++p)u[h*e+p]=s[4*h+p]}return MC(u,[f,c,e],"int32")}}),nN=Object.freeze({toPixels:function(t,e){return Ve(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f,d,h,p,m,y,v,x,g,b,w,_,E,C;return We(this,function(N){switch(N.label){case 0:if(n=V(t,"img","toPixels"),t instanceof yn||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],a=r[1],(o=n.rank===2?1:n.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=N.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=N.sent(),f=c[0],d=c[1],h=f[0],p=d[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(m=n.dtype==="float32"?255:1,y=new Uint8ClampedArray(a*i*4),v=0;v<i*a;++v)x=void 0,g=void 0,b=void 0,w=void 0,o===1?(x=s[v]*m,g=s[v]*m,b=s[v]*m,w=255):o===3?(x=s[3*v]*m,g=s[3*v+1]*m,b=s[3*v+2]*m,w=255):o===4&&(x=s[4*v]*m,g=s[4*v+1]*m,b=s[4*v+2]*m,w=s[4*v+3]*m),y[(_=4*v)+0]=Math.round(x),y[_+1]=Math.round(g),y[_+2]=Math.round(b),y[_+3]=Math.round(w);return e!=null&&(e.width=a,e.height=i,E=e.getContext("2d"),C=new ImageData(y,a,i),E.putImageData(C,0,0)),n!==t&&n.dispose(),[2,y]}})})},fromPixels:dIe}),hIe=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t}(),pIe=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function Ul(t){X(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),X(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),X(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),pIe.register(t)}var Vl=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return ja(e,t),e.prototype.minimize=function(n,r,i){r===void 0&&(r=!1);var a=this.computeGradients(n,i),o=a.value,s=a.grads;if(i!=null){var u=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return yi(s),r?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(n,r){return CDe(n,r)},e.prototype.dispose=function(){this.iterations_!=null&&yi(this.iterations_)},e.prototype.saveIterations=function(){return Ve(this,void 0,void 0,function(){return We(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:je(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return Ve(this,void 0,void 0,function(){return We(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(n){return Ve(this,void 0,void 0,function(){return We(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(n){return Ve(this,void 0,void 0,function(){var r;return We(this,function(i){switch(i.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,n.slice(1)]}})})},e}(hIe);Object.defineProperty(Vl,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var mIe=function(t){function e(n,r,i){i===void 0&&(i=null);var a=t.call(this)||this;return a.learningRate=n,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],i==null&&(a.epsilon=se.backend.epsilon()),a}return ja(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=se.registeredVariables[i];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:i+"/accum_grad",variable:$e(function(){return Bt(o).variable(!1)})}),r.accumulatedUpdates[a]==null&&(r.accumulatedUpdates[a]={originalName:i+"/accum_var",variable:$e(function(){return Bt(o).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[i];if(s!=null){var u=r.accumulatedGrads[a].variable,l=r.accumulatedUpdates[a].variable;$e(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),d=l.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(c),l.assign(d);var h=f.mul(-r.learningRate).add(o);o.assign(h)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(yi(this.accumulatedGrads.map(function(n){return n.variable})),yi(this.accumulatedUpdates.map(function(n){return n.variable})))},e.prototype.getWeights=function(){return Ve(this,void 0,void 0,function(){var n;return We(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Ve(this,void 0,void 0,function(){var r;return We(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(Vl);Ul(mIe);var vIe=function(t){function e(n,r){r===void 0&&(r=.1);var i=t.call(this)||this;return i.learningRate=n,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return ja(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=se.registeredVariables[i];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:i+"/accumulator",variable:$e(function(){return io(o.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[i];if(s!=null){var u=r.accumulatedGrads[a].variable;$e(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(se.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(c)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&yi(this.accumulatedGrads.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Ve(this,void 0,void 0,function(){return We(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return Ve(this,void 0,void 0,function(){return We(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(Vl);Ul(vIe);var gIe=function(t){function e(n,r,i,a){a===void 0&&(a=null);var o=t.call(this)||this;return o.learningRate=n,o.beta1=r,o.beta2=i,o.epsilon=a,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],$e(function(){o.accBeta1=je(r).variable(),o.accBeta2=je(i).variable()}),a==null&&(o.epsilon=se.backend.epsilon()),o}return ja(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n);$e(function(){var a=Gn(1,r.accBeta1),o=Gn(1,r.accBeta2);i.forEach(function(s,u){var l=se.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:$e(function(){return Bt(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:$e(function(){return Bt(l).variable(!1)})});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,d=r.accumulatedSecondMoment[u].variable,h=f.mul(r.beta1).add(c.mul(1-r.beta1)),p=d.mul(r.beta2).add(c.square().mul(1-r.beta2)),m=h.div(a),y=p.div(o);f.assign(h),d.assign(p);var v=m.div(y.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(v)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&yi(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&yi(this.accumulatedSecondMoment.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Ve(this,void 0,void 0,function(){var n;return We(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Ve(this,void 0,void 0,function(){var r,i=this;return We(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),$e(function(){i.accBeta1.assign(o0(i.beta1,i.iterations_+1)),i.accBeta2.assign(o0(i.beta2,i.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(Vl);Ul(gIe);var yIe=function(t){function e(n,r,i,a,o){a===void 0&&(a=null),o===void 0&&(o=0);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=i,s.epsilon=a,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],$e(function(){s.iteration=je(0).variable(),s.accBeta1=je(r).variable()}),a==null&&(s.epsilon=se.backend.epsilon()),s}return ja(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n);$e(function(){var a=Gn(1,r.accBeta1),o=xa(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(s,u){var l=se.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Bt(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:Bt(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,d=r.accumulatedWeightedInfNorm[u].variable,h=f.mul(r.beta1).add(c.mul(1-r.beta1)),p=d.mul(r.beta2),m=c.abs(),y=p.maximum(m);f.assign(h),d.assign(y);var v=o.div(a).mul(h.div(y.add(r.epsilon))).add(l);l.assign(v)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&yi(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&yi(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Ve(this,void 0,void 0,function(){return We(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(n){return Ve(this,void 0,void 0,function(){return We(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(Vl);Ul(yIe);var oj=function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return ja(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=Array.isArray(n)?n[a].tensor:n[i];if(o!=null){var s=se.registeredVariables[i];$e(function(){var u=r.c.mul(o).add(s);s.assign(u)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=LSe(je(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return Ve(this,void 0,void 0,function(){return We(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},e.prototype.setWeights=function(n){return Ve(this,void 0,void 0,function(){return We(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGD",e}(Vl);Ul(oj);var xIe=function(t){function e(n,r,i){i===void 0&&(i=!1);var a=t.call(this,n)||this;return a.learningRate=n,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=je(a.momentum),a}return ja(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=se.registeredVariables[i];r.accumulations[a]==null&&(r.accumulations[a]={originalName:i+"/momentum",variable:$e(function(){return Bt(o).variable(!1)})});var s=r.accumulations[a].variable,u=Array.isArray(n)?n[a].tensor:n[i];u!=null&&$e(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(o):r.c.mul(c).add(o),s.assign(c),o.assign(l)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&yi(this.accumulations.map(function(n){return n.variable}))},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getWeights=function(){return Ve(this,void 0,void 0,function(){return We(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return Ve(this,void 0,void 0,function(){return We(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(oj);Ul(xIe);var bIe=function(t){function e(n,r,i,a,o){r===void 0&&(r=.9),i===void 0&&(i=0),a===void 0&&(a=null),o===void 0&&(o=!1);var s=t.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=i,s.epsilon=a,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,a==null&&(s.epsilon=se.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return ja(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=se.registeredVariables[i];r.accumulatedMeanSquares[a]==null&&(r.accumulatedMeanSquares[a]={originalName:i+"/rms",variable:$e(function(){return Bt(o).variable(!1)})}),r.accumulatedMoments[a]==null&&(r.accumulatedMoments[a]={originalName:i+"/momentum",variable:$e(function(){return Bt(o).variable(!1)})}),r.accumulatedMeanGrads[a]==null&&r.centered&&(r.accumulatedMeanGrads[a]={originalName:i+"/mg",variable:$e(function(){return Bt(o).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[i];if(s!=null){var u=r.accumulatedMeanSquares[a].variable,l=r.accumulatedMoments[a].variable;$e(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[a].variable,d=f.mul(r.decay).add(s.mul(1-r.decay)),h=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(d.square().add(r.epsilon)).sqrt()));u.assign(c),f.assign(d),l.assign(h);var p=o.sub(h);o.assign(p)}else{var m=u.mul(r.decay).add(s.square().mul(1-r.decay));h=l.mul(r.momentum).add(s.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),u.assign(m),l.assign(h),p=o.sub(h),o.assign(p)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&yi(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&yi(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&yi(this.accumulatedMoments.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Ve(this,void 0,void 0,function(){var n;return We(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Ve(this,void 0,void 0,function(){var r;return We(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(Vl);Ul(bIe);yn.prototype.squaredDifference=function(t){return w9(this,t)},ye=HMe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r2=function(t,e){return r2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},r2(t,e)};function mt(t,e){r2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ir=function(){return Ir=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ir.apply(this,arguments)};function Ke(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((r=r.apply(t,[])).next())})}function Ye(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],i=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function eh(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var Gc=function(){function t(e,n){if(!nl(e)||!nl(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:n}));this._width=e,this._height=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function Ry(t,e){return t instanceof yn&&t.shape.length===e}function wIe(t){return Ry(t,2)}function Fy(t){return Ry(t,3)}function Hs(t){return Ry(t,4)}function _Ie(t){return t%1!==0}function qk(t){return t%2===0}function EIe(t,e){e===void 0&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function Hk(t){return t&&t.width&&t.height}function CIe(t,e){var n=t.width,r=t.height,i=e/Math.max(r,n);return new Gc(Math.round(n*i),Math.round(r*i))}function rN(t){return t.reduce(function(e,n){return e.add(n)},new zt(0,0)).div(new zt(t.length,t.length))}function Xh(t,e,n){return Array(t).fill(0).map(function(r,i){return e+i*n})}function nl(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function Gk(t){return nl(t)&&0<=t&&t<=1}var zt=function(){function t(e,n){this._x=e,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),iu=function(){function t(e,n){n===void 0&&(n=!0);var r=e||{},i=[r.left,r.top,r.right,r.bottom].every(nl),a=[r.x,r.y,r.width,r.height].every(nl);if(!a&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],u=o[1],l=o[2],c=o[3];t.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return t.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(nl)},t.assertIsValidBox=function(e,n,r){if(r===void 0&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new zt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new zt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new zt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new zt(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),n=e[0],r=e[1],i=e[2],a=e[3];return new t({x:n,y:r,width:i,height:a})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),n=e[0],r=e[1],i=e[2],a=e[3];return new t({x:n,y:r,width:i,height:a})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,i=e.width,a=e.height,o=Math.abs(i-a);return i<a&&(n-=o/2,i+=o),a<i&&(r-=o/2,a+=o),new t({x:n,y:r,width:i,height:a})},t.prototype.rescale=function(e){var n=Hk(e)?e.width:e,r=Hk(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n],i=r[0],a=r[1],o=r[2],s=r[3];return new t({x:i,y:a,width:o,height:s})},t.prototype.clipAtImageBorders=function(e,n){var r=this,i=r.x,a=r.y,o=r.right,s=r.bottom,u=Math.max(i,0),l=Math.max(a,0),c=o-u,f=s-l,d=Math.min(c,e-u),h=Math.min(f,n-l);return new t({x:u,y:l,width:d,height:h}).floor()},t.prototype.shift=function(e,n){var r=this,i=r.width,a=r.height,o=this.x+e,s=this.y+n;return new t({x:o,y:s,width:i,height:a})},t.prototype.padAtBorders=function(e,n){var r=this.width+1,i=this.height+1,a=1,o=1,s=r,u=i,l=this.left,c=this.top,f=this.right,d=this.bottom;return f>n&&(s=-f+n+r,f=n),d>e&&(u=-d+e+i,d=e),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:o,edy:u,dx:a,edx:s,y:c,ey:d,x:l,ex:f,w:r,h:i}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t}(),Py=function(t){mt(e,t);function e(n,r,i,a,o){return o===void 0&&(o=!1),t.call(this,{left:n,top:r,right:i,bottom:a},o)||this}return e}(iu),sj=function(){function t(e,n,r,i,a){this._imageDims=new Gc(a.width,a.height),this._score=e,this._classScore=n,this._className=r,this._box=new iu(i).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new iu(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t}(),vo=function(t){mt(e,t);function e(n,r,i){return t.call(this,n,n,"",r,i)||this}return e.prototype.forSize=function(n,r){var i=t.prototype.forSize.call(this,n,r),a=i.score,o=i.relativeBox,s=i.imageDims;return new e(a,o,s)},e}(sj);function NIe(t,e,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),i=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)),a=r*i;return n?a/(t.area+e.area-a):a/Math.min(t.area,e.area)}function SIe(t){var e=t.map(function(s){return s.x}),n=t.map(function(s){return s.y}),r=e.reduce(function(s,u){return u<s?u:s},1/0),i=n.reduce(function(s,u){return u<s?u:s},1/0),a=e.reduce(function(s,u){return s<u?u:s},0),o=n.reduce(function(s,u){return s<u?u:s},0);return new Py(r,i,a,o)}function Qh(t,e,n,r){r===void 0&&(r=!0);for(var i=e.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),a=[],o=function(){var s=i.pop();a.push(s);for(var u=i,l=[],c=0;c<u.length;c++){var f=u[c],d=t[s],h=t[f];l.push(NIe(d,h,r))}i=i.filter(function(p,m){return l[m]<=n})};i.length>0;)o();return a}function jp(t,e){return $e(function(){var n=e[0],r=e[1],i=e[2],a=io(eh(t.shape.slice(0,3),[1]),n),o=io(eh(t.shape.slice(0,3),[1]),r),s=io(eh(t.shape.slice(0,3),[1]),i),u=Wn([a,o,s],3);return Gn(t,u)})}function DIe(t,e){return e===void 0&&(e=!1),$e(function(){var n=t.shape.slice(1),r=n[0],i=n[1];if(r===i)return t;var a=Math.abs(r-i),o=Math.round(a*(e?.5:1)),s=r>i?2:1,u=function(h){var p=t.shape.slice();return p[s]=h,io(p,0)},l=u(o),c=a-l.shape[s],f=e&&c?u(c):null,d=[f,t,l].filter(function(h){return!!h}).map(function(h){return h.toFloat()});return Wn(d,s)})}function _x(t){return 1/(1+Math.exp(-t))}var iN=function(t){mt(e,t);function e(n,r,i,a,o){return o===void 0&&(o=!1),t.call(this,{x:n,y:r,width:i,height:a},o)||this}return e}(iu),AIe=.5,TIe=.43,MIe=.45,l0=function(){function t(e,n,r){r===void 0&&(r=new zt(0,0));var i=n.width,a=n.height;this._imgDims=new Gc(i,a),this._shift=r,this._positions=e.map(function(o){return o.mul(new zt(i,a)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new zt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(n){return n.sub(e._shift).div(new zt(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})},t.prototype.shiftBy=function(e,n){return new this.constructor(this.relativePositions,this._imgDims,new zt(e,n))},t.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},t.prototype.align=function(e,n){if(n===void 0&&(n={}),e){var r=e instanceof vo?e.box.floor():new iu(e);return this.shiftBy(r.x,r.y).align(null,n)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),a=i.useDlibAlignment,o=i.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(o)},t.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),n=e[0],r=e[1],i=e[2],a=function(f){return i.sub(f).magnitude()},o=(a(n)+a(r))/2,s=Math.floor(o/MIe),u=rN(e),l=Math.floor(Math.max(0,u.x-AIe*s)),c=Math.floor(Math.max(0,u.y-TIe*s));return new iN(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))},t.prototype.alignMinBbox=function(e){var n=SIe(this.positions);return n.pad(n.width*e,n.height*e)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),IIe=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],rN([n[3],n[4]])]},e}(l0),kIe=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(rN)},e}(l0),Kk=function(){function t(e,n){this._label=e,this._distance=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+EIe(this.distance)+")":"")},t}(),Yk=function(t){mt(e,t);function e(n,r){var i=t.call(this,n)||this;return i._label=r,i}return e.assertIsValidLabeledBox=function(n,r){if(iu.assertIsValidBox(n,r),!nl(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(iu),zm=function(){function t(e,n){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},t.fromJSON=function(e){var n=e.descriptors.map(function(r){return new Float32Array(r)});return new t(e.label,n)},t}();(function(t){mt(e,t);function e(n,r,i,a){var o=t.call(this,n,r)||this;return o._score=i,o._classScore=a,o}return e.assertIsValidPredictedBox=function(n,r){if(Yk.assertIsValidLabeledBox(n,r),!Gk(n.score)||!Gk(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(Yk);function RIe(t){return t.detection instanceof vo}function aN(t,e){var n={detection:e};return Object.assign({},t,n)}function uj(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:e}}function lj(t){var e="";if(!t)try{t=require("fs")}catch(r){e=r.toString()}var n=t?function(r){return new Promise(function(i,a){t.readFile(r,function(o,s){return o?a(o):i(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:n}}function cj(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=lj();return Ir({Canvas:t||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:e||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:n,createImageElement:r,fetch:i},a)}function fj(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function dj(){return typeof global=="object"&&typeof require=="function"&&typeof Kj<"u"&&typeof process<"u"&&!!process.version}var Ln;function FIe(){if(!Ln)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Ln}function i2(t){Ln=t}function oN(){fj()&&i2(uj()),dj()&&i2(cj())}function PIe(t){if(Ln||oN(),!Ln)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=e===void 0?Ln.Canvas:e,r=t.Image,i=r===void 0?Ln.Image:r;Ln.Canvas=n,Ln.Image=i,Ln.createCanvasElement=t.createCanvasElement||function(){return new n},Ln.createImageElement=t.createImageElement||function(){return new i},Ln.ImageData=t.ImageData||Ln.ImageData,Ln.Video=t.Video||Ln.Video,Ln.fetch=t.fetch||Ln.fetch,Ln.readFile=t.readFile||Ln.readFile}var jr={getEnv:FIe,setEnv:i2,initialize:oN,createBrowserEnv:uj,createFileSystem:lj,createNodejsEnv:cj,monkeyPatch:PIe,isBrowser:fj,isNodejs:dj};oN();function hj(t){return!jr.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function bl(t){var e=jr.getEnv(),n=e.Canvas,r=e.CanvasRenderingContext2D;if(t instanceof r)return t;var i=hj(t);if(!(i instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=i.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}var Xk;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(Xk||(Xk={}));function pj(t){var e=jr.getEnv(),n=e.Image,r=e.Video;return t instanceof n&&t.complete||t instanceof r&&t.readyState>=3}function OIe(t){return new Promise(function(e,n){if(t instanceof jr.getEnv().Canvas||pj(t))return e();function r(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",i),e(a))}function i(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",i),n(a))}t.addEventListener("load",r),t.addEventListener("error",i)})}function mj(t){var e=jr.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new Gc(t.naturalWidth,t.naturalHeight):t instanceof r?new Gc(t.videoWidth,t.videoHeight):new Gc(t.width,t.height)}function Oy(t){var e=t.width,n=t.height,r=jr.getEnv().createCanvasElement,i=r();return i.width=e,i.height=n,i}function sN(t,e){var n=jr.getEnv().ImageData;if(!(t instanceof n)&&!pj(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=mj(t),i=r.width,a=r.height,o=Oy({width:i,height:a});return t instanceof n?bl(o).putImageData(t,0,0):bl(o).drawImage(t,0,0,i,a),o}function BIe(t,e){return Ke(this,void 0,void 0,function(){var n,r,i,a,o,s;return Ye(this,function(u){switch(u.label){case 0:return n=jr.getEnv().createCanvasElement(),r=t.shape.slice(Hs(t)?1:0),i=r[0],a=r[1],o=r[2],s=$e(function(){return t.as3D(i,a,o).toInt()}),[4,nN.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function Qk(t){var e=jr.getEnv(),n=e.Image,r=e.Canvas,i=e.Video;return t instanceof n||t instanceof r||t instanceof i}function LIe(t,e,n){n===void 0&&(n=!1);var r=jr.getEnv(),i=r.Image,a=r.Canvas;if(!(t instanceof i||t instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=mj(t),s=e/Math.max(o.height,o.width),u=s*o.width,l=s*o.height,c=Oy({width:e,height:e}),f=t instanceof a?t:sN(t),d=Math.abs(u-l)/2,h=n&&u<l?d:0,p=n&&l<u?d:0;return bl(c).drawImage(f,h,p,u,l),c}var c0=function(){function t(e,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(i,a){if(Fy(i)){r._imageTensors[a]=i,r._inputDimensions[a]=i.shape;return}if(Hs(i)){var o=i.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[a]=i,r._inputDimensions[a]=i.shape.slice(1);return}var s=i instanceof jr.getEnv().Canvas?i:sN(i);r._canvases[a]=s,r._inputDimensions[a]=[s.height,s.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var e=this;return Xh(this.batchSize,0,1).map(function(n,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},t.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},t.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},t.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},t.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(e),r=this.getInputHeight(e);return CIe({width:n,height:r},this.inputSize)},t.prototype.toBatchTensor=function(e,n){var r=this;return n===void 0&&(n=!0),this._inputSize=e,$e(function(){var i=Xh(r.batchSize,0,1).map(function(o){var s=r.getInput(o);if(s instanceof yn){var u=Hs(s)?s:s.expandDims();return u=DIe(u,n),(u.shape[1]!==e||u.shape[2]!==e)&&(u=XC.resizeBilinear(u,[e,e])),u.as3D(e,e,3)}if(s instanceof jr.getEnv().Canvas)return nN.fromPixels(LIe(s,e,n));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),a=Fi(i.map(function(o){return o.toFloat()})).as4D(r.batchSize,e,e,3);return a})},t}();function ur(t){return Ke(this,void 0,void 0,function(){var e,n,r;return Ye(this,function(i){switch(i.label){case 0:if(t instanceof c0)return[2,t];if(e=Array.isArray(t)?t:[t],!e.length)throw new Error("toNetInput - empty array passed as input");return n=function(a){return Array.isArray(t)?" at input index "+a+":":""},r=e.map(hj),r.forEach(function(a,o){if(!Qk(a)&&!Fy(a)&&!Hs(a))throw typeof e[o]=="string"?new Error("toNetInput -"+n(o)+" string passed, but could not resolve HTMLElement for element id "+e[o]):new Error("toNetInput -"+n(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Hs(a)){var s=a.shape[0];if(s!==1)throw new Error("toNetInput -"+n(o)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(a){return Qk(a)&&OIe(a)}))];case 1:return i.sent(),[2,new c0(r,Array.isArray(t))]}})})}function uN(t,e){return Ke(this,void 0,void 0,function(){var n,r,i,a,o,s,u;return Ye(this,function(l){switch(l.label){case 0:return n=jr.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,ur(t)];case 1:if(i=l.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return a=i.getInput(0),a instanceof n?(o=a,[3,4]):[3,2];case 2:return[4,BIe(a)];case 3:o=l.sent(),l.label=4;case 4:r=o,l.label=5;case 5:return s=bl(r),u=e.map(function(c){return c instanceof vo?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var f=c.x,d=c.y,h=c.width,p=c.height,m=Oy({width:h,height:p});return bl(m).putImageData(s.getImageData(f,d,h,p),0,0),m})]}})})}function lN(t,e){return Ke(this,void 0,void 0,function(){return Ye(this,function(n){if(!Fy(t)&&!Hs(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Hs(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,$e(function(){var r=t.shape.slice(Hs(t)?1:0),i=r[0],a=r[1],o=r[2],s=e.map(function(l){return l instanceof vo?l.forSize(a,i).box:l}).map(function(l){return l.clipAtImageBorders(a,i)}),u=s.map(function(l){var c=l.x,f=l.y,d=l.width,h=l.height;return U9(t.as3D(i,a,o),[f,c,0],[h,d,o])});return u})]})})}function jIe(t,e){return Ke(this,void 0,void 0,function(){var n,r;return Ye(this,function(i){switch(i.label){case 0:return n=jr.getEnv().fetch,[4,n(t,e)];case 1:if(r=i.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function $Ie(t){return Ke(this,void 0,void 0,function(){return Ye(this,function(e){switch(e.label){case 0:return[4,jIe(t)];case 1:return[2,e.sent().json()]}})})}function vj(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var i=t.split("/").filter(function(s){return s}),a=t.endsWith(".json")?i[i.length-1]:n,o=r+(t.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return o=t.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+a:o+"/"+a}}function zIe(t,e){return Ke(this,void 0,void 0,function(){var n,r,i,a;return Ye(this,function(o){switch(o.label){case 0:return n=vj(t,e),r=n.manifestUri,i=n.modelBaseUri,[4,$Ie(r)];case 1:return a=o.sent(),[2,aj.loadWeights(a,i)]}})})}var as=function(){function t(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(e){var n=this.traversePropertyPath(e),r=n.obj,i=n.objProp;return r[i]},t.prototype.reassignParamFromPath=function(e,n){var r=this.traversePropertyPath(e),i=r.obj,a=r.objProp;i[a].dispose(),i[a]=n},t.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof wf})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof wf)})},t.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(n){var r=n.path,i=n.tensor;e.reassignParamFromPath(r,i.variable())})},t.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(n){var r=n.path,i=n.tensor,a=hr(i.dataSync());i.dispose(),e.reassignParamFromPath(r,a)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(n){if(e&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var n=e.tensor;return Array.from(n.dataSync())}).reduce(function(e,n){return e.concat(n)}))},t.prototype.load=function(e){return Ke(this,void 0,void 0,function(){return Ye(this,function(n){switch(n.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return n.sent(),[2]}})})},t.prototype.loadFromUri=function(e){return Ke(this,void 0,void 0,function(){var n;return Ye(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,zIe(e,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},t.prototype.loadFromDisk=function(e){return Ke(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f;return Ye(this,function(d){switch(d.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=jr.getEnv().readFile,r=vj(e,this.getDefaultModelName()),i=r.manifestUri,a=r.modelBaseUri,o=function(h){return Promise.all(h.map(function(p){return n(p).then(function(m){return m.buffer})}))},s=aj.weightsLoaderFactory(o),c=(l=JSON).parse,[4,n(i)];case 1:return u=c.apply(l,[d.sent().toString()]),[4,s(u,a)];case 2:return f=d.sent(),this.loadFromWeightMap(f),[2]}})})},t.prototype.loadFromWeightMap=function(e){var n=this.extractParamsFromWeigthMap(e),r=n.paramMappings,i=n.params;this._paramMappings=r,this._params=i},t.prototype.extractWeights=function(e){var n=this.extractParams(e),r=n.paramMappings,i=n.params;this._paramMappings=r,this._params=i},t.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=e.split("/").reduce(function(a,o){if(!a.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+e);return{obj:a.nextObj,objProp:o,nextObj:a.nextObj[o]}},{nextObj:this.params}),r=n.obj,i=n.objProp;if(!r||!i||!(r[i]instanceof yn))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:i}},t}();function Ii(t,e,n){return $e(function(){var r=qC(t,e.depthwise_filter,e.pointwise_filter,n,"same");return r=Dt(r,e.bias),r})}function Ex(t,e,n){return n===void 0&&(n=!1),$e(function(){var r=bn(n?Dt(ca(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):Ii(t,e.conv0,[2,2])),i=Ii(r,e.conv1,[1,1]),a=bn(Dt(r,i)),o=Ii(a,e.conv2,[1,1]);return bn(Dt(r,Dt(i,o)))})}function Um(t,e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),$e(function(){var i=bn(n?Dt(ca(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):Ii(t,e.conv0,r?[2,2]:[1,1])),a=Ii(i,e.conv1,[1,1]),o=bn(Dt(i,a)),s=Ii(o,e.conv2,[1,1]),u=bn(Dt(i,Dt(a,s))),l=Ii(u,e.conv3,[1,1]);return bn(Dt(i,Dt(a,Dt(s,l))))})}function Ma(t,e,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),$e(function(){var i=Dt(ca(t,e.filters,[1,1],n),e.bias);return r?bn(i):i})}function os(t,e){Object.keys(t).forEach(function(n){e.some(function(r){return r.originalPath===n})||t[n].dispose()})}function By(t,e){return function(n,r,i,a){var o=oi(t(n*r*i*i),[i,i,n,r]),s=On(t(r));return e.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:o,bias:s}}}function cN(t,e){return function(n,r,i){var a=Ws(t(n*r),[n,r]),o=On(t(r));return e.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:a,bias:o}}}var gj=function(){function t(e,n,r){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=r}return t}();function fN(t,e){return function(n,r,i){var a=oi(t(9*n),[3,3,n,1]),o=oi(t(n*r),[1,1,n,r]),s=On(t(r));return e.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new gj(a,o,s)}}function dN(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),i=t(e+"/bias",1);return new gj(n,r,i)}}function Su(t,e){return function(n,r,i){var a=t[n];if(!Ry(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return e.push({originalPath:n,paramPath:i||n}),a}}function ss(t){var e=t;function n(i){var a=e.slice(0,i);return e=e.slice(i),a}function r(){return e}return{extractWeights:n,getRemainingWeights:r}}function yj(t,e){var n=By(t,e),r=fN(t,e);function i(o,s,u,l){l===void 0&&(l=!1);var c=l?n(o,s,3,u+"/conv0"):r(o,s,u+"/conv0"),f=r(s,s,u+"/conv1"),d=r(s,s,u+"/conv2");return{conv0:c,conv1:f,conv2:d}}function a(o,s,u,l){l===void 0&&(l=!1);var c=i(o,s,u,l),f=c.conv0,d=c.conv1,h=c.conv2,p=r(s,s,u+"/conv3");return{conv0:f,conv1:d,conv2:h,conv3:p}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:a}}function UIe(t){var e=[],n=ss(t),r=n.extractWeights,i=n.getRemainingWeights,a=yj(r,e).extractDenseBlock4Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),l=a(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:o,dense1:s,dense2:u,dense3:l}}}function xj(t){return function(e){var n=t(e+"/filters",4),r=t(e+"/bias",1);return{filters:n,bias:r}}}function bj(t,e){var n=Su(t,e),r=xj(n),i=dN(n);function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2");return{conv0:l,conv1:c,conv2:f}}function o(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2"),d=i(s+"/conv3");return{conv0:l,conv1:c,conv2:f,conv3:d}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:o}}function VIe(t){var e=[],n=bj(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return os(t,e),{params:r,paramMappings:e}}var wj=function(t){mt(e,t);function e(){return t.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return $e(function(){var i=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],o=jp(i,a).div(je(255)),s=Um(o,r.dense0,!0);return s=Um(s,r.dense1),s=Um(s,r.dense2),s=Um(s,r.dense3),s=Bp(s,[7,7],[2,2],"valid"),s})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ur(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(n){return VIe(n)},e.prototype.extractParams=function(n){return UIe(n)},e}(as);function Xa(t,e){return $e(function(){return Dt(My(t,e.weights),e.bias)})}function WIe(t,e,n){var r=[],i=ss(t),a=i.extractWeights,o=i.getRemainingWeights,s=cN(a,r),u=s(e,n,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:u}}}function qIe(t){var e=[],n=Su(t,e);function r(a){var o=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:o,bias:s}}var i={fc:r("fc")};return os(t,e),{params:i,paramMappings:e}}function _j(t){var e={},n={};return Object.keys(t).forEach(function(r){var i=r.startsWith("fc")?n:e;i[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var Ej=function(t){mt(e,t);function e(n,r){var i=t.call(this,n)||this;return i._faceFeatureExtractor=r,i}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return $e(function(){var a=n instanceof c0?r.faceFeatureExtractor.forwardInput(n):n;return Xa(a.as2D(a.shape[0],-1),i.fc)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),i=r.params,a=r.paramMappings;this._params=i,this._paramMappings=a},e.prototype.extractClassifierParams=function(n){return WIe(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(n){var r=_j(n),i=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),qIe(a)},e.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),a=i*r+i,o=n.slice(0,n.length-a),s=n.slice(n.length-a);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(s)},e}(as),Zk=["neutral","happy","sad","angry","fearful","disgusted","surprised"],HIe=function(){function t(e){var n=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);Zk.forEach(function(r,i){n[r]=e[i]})}return t.prototype.asSortedArray=function(){var e=this;return Zk.map(function(n){return{expression:n,probability:e[n]}}).sort(function(n,r){return r.probability-n.probability})},t}(),GIe=function(t){mt(e,t);function e(n){return n===void 0&&(n=new wj),t.call(this,"FaceExpressionNet",n)||this}return e.prototype.forwardInput=function(n){var r=this;return $e(function(){return rs(r.runNet(n))})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ur(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictExpressions=function(n){return Ke(this,void 0,void 0,function(){var r,i,a,o,s=this;return Ye(this,function(u){switch(u.label){case 0:return[4,ur(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return i=u.sent(),[4,Promise.all(qn(i).map(function(l){return Ke(s,void 0,void 0,function(){var c;return Ye(this,function(f){switch(f.label){case 0:return[4,l.data()];case 1:return c=f.sent(),l.dispose(),[2,c]}})})}))];case 3:return a=u.sent(),i.dispose(),o=a.map(function(l){return new HIe(l)}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(Ej);function Cj(t,e){var n={expressions:e};return Object.assign({},t,n)}function KIe(t){return RIe(t)&&t.landmarks instanceof l0&&t.unshiftedLandmarks instanceof l0&&t.alignedRect instanceof vo}function hN(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),i=r.align(),a=t.detection.imageDims,o=new vo(t.detection.score,i.rescale(a.reverse()),a),s={landmarks:r,unshiftedLandmarks:e,alignedRect:o};return Object.assign({},t,s)}function YIe(t,e){var n=By(t,e),r=fN(t,e);function i(o,s,u){var l=r(o,s,u+"/separable_conv0"),c=r(s,s,u+"/separable_conv1"),f=n(o,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:f}}function a(o,s){var u=r(o,o,s+"/separable_conv0"),l=r(o,o,s+"/separable_conv1"),c=r(o,o,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:a}}function XIe(t,e){var n=[],r=ss(t),i=r.extractWeights,a=r.getRemainingWeights,o=YIe(i,n),s=o.extractConvParams,u=o.extractSeparableConvParams,l=o.extractReductionBlockParams,c=o.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),d=l(32,64,"entry_flow/reduction_block_0"),h=l(64,128,"entry_flow/reduction_block_1"),p={conv_in:f,reduction_block_0:d,reduction_block_1:h},m={};Xh(e,0,1).forEach(function(g){m["main_block_"+g]=c(128,"middle_flow/main_block_"+g)});var y=l(128,256,"exit_flow/reduction_block"),v=u(256,512,"exit_flow/separable_conv"),x={reduction_block:y,separable_conv:v};if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:p,middle_flow:m,exit_flow:x}}}function QIe(t,e){var n=Su(t,e),r=xj(n),i=dN(n);function a(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function o(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=i(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:a,extractMainBlockParams:o}}function ZIe(t,e){var n=[],r=QIe(t,n),i=r.extractConvParams,a=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=i("entry_flow/conv_in"),l=o("entry_flow/reduction_block_0"),c=o("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:l,reduction_block_1:c},d={};Xh(e,0,1).forEach(function(y){d["main_block_"+y]=s("middle_flow/main_block_"+y)});var h=o("exit_flow/reduction_block"),p=a("exit_flow/separable_conv"),m={reduction_block:h,separable_conv:p};return os(t,n),{params:{entry_flow:f,middle_flow:d,exit_flow:m},paramMappings:n}}function Nj(t,e,n){return Dt(ca(t,e.filters,n,"same"),e.bias)}function Cx(t,e,n){n===void 0&&(n=!0);var r=n?bn(t):t;return r=Ii(r,e.separable_conv0,[1,1]),r=Ii(bn(r),e.separable_conv1,[1,1]),r=er(r,[3,3],[2,2],"same"),r=Dt(r,Nj(t,e.expansion_conv,[2,2])),r}function JIe(t,e){var n=Ii(bn(t),e.separable_conv0,[1,1]);return n=Ii(bn(n),e.separable_conv1,[1,1]),n=Ii(bn(n),e.separable_conv2,[1,1]),n=Dt(n,t),n}var e4e=function(t){mt(e,t);function e(n){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return e.prototype.forwardInput=function(n){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return $e(function(){var a=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=jp(a,o).div(je(256)),u=bn(Nj(s,i.entry_flow.conv_in,[2,2]));return u=Cx(u,i.entry_flow.reduction_block_0,!1),u=Cx(u,i.entry_flow.reduction_block_1),Xh(r._numMainBlocks,0,1).forEach(function(l){u=JIe(u,i.middle_flow["main_block_"+l])}),u=Cx(u,i.exit_flow.reduction_block),u=bn(Ii(u,i.exit_flow.separable_conv,[1,1])),u})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ur(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(n){return ZIe(n,this._numMainBlocks)},e.prototype.extractParams=function(n){return XIe(n,this._numMainBlocks)},e}(as);function t4e(t){var e=[],n=ss(t),r=n.extractWeights,i=n.getRemainingWeights,a=cN(r,e),o=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{fc:{age:o,gender:s}}}}function n4e(t){var e=[],n=Su(t,e);function r(a){var o=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:o,bias:s}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return os(t,e),{params:i,paramMappings:e}}var f0;(function(t){t.FEMALE="female",t.MALE="male"})(f0||(f0={}));var r4e=function(t){mt(e,t);function e(n){n===void 0&&(n=new e4e(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return $e(function(){var a=n instanceof c0?r.faceFeatureExtractor.forwardInput(n):n,o=Bp(a,[7,7],[2,2],"valid").as2D(a.shape[0],-1),s=Xa(o,i.fc.age).as1D(),u=Xa(o,i.fc.gender);return{age:s,gender:u}})},e.prototype.forwardInput=function(n){var r=this;return $e(function(){var i=r.runNet(n),a=i.age,o=i.gender;return{age:a,gender:rs(o)}})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ur(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictAgeAndGender=function(n){return Ke(this,void 0,void 0,function(){var r,i,a,o,s,u,l=this;return Ye(this,function(c){switch(c.label){case 0:return[4,ur(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return i=c.sent(),a=qn(i.age),o=qn(i.gender),s=a.map(function(f,d){return{ageTensor:f,genderTensor:o[d]}}),[4,Promise.all(s.map(function(f){var d=f.ageTensor,h=f.genderTensor;return Ke(l,void 0,void 0,function(){var p,m,y,v,x;return Ye(this,function(g){switch(g.label){case 0:return[4,d.data()];case 1:return p=g.sent()[0],[4,h.data()];case 2:return m=g.sent()[0],y=m>.5,v=y?f0.MALE:f0.FEMALE,x=y?m:1-m,d.dispose(),h.dispose(),[2,{age:p,gender:v,genderProbability:x}]}})})}))];case 3:return u=c.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),i=r.params,a=r.paramMappings;this._params=i,this._paramMappings=a},e.prototype.extractClassifierParams=function(n){return t4e(n)},e.prototype.extractParamsFromWeigthMap=function(n){var r=_j(n),i=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),n4e(a)},e.prototype.extractParams=function(n){var r=1539,i=n.slice(0,n.length-r),a=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)},e}(as),Sj=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.postProcess=function(n,r,i){var a=i.map(function(s){var u=s.width,l=s.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),o=a.length;return $e(function(){var s=function(d,h){return Fi([io([68],d),io([68],h)],1).as2D(1,136).as1D()},u=function(d,h){var p=a[d],m=p.width,y=p.height;return h(m,y)?Math.abs(m-y)/2:0},l=function(d){return u(d,function(h,p){return h<p})},c=function(d){return u(d,function(h,p){return p<h})},f=n.mul(io([o,136],r)).sub(Fi(Array.from(Array(o),function(d,h){return s(l(h),c(h))}))).div(Fi(Array.from(Array(o),function(d,h){return s(a[h].width,a[h].height)})));return f})},e.prototype.forwardInput=function(n){var r=this;return $e(function(){var i=r.runNet(n);return r.postProcess(i,n.inputSize,n.inputDimensions.map(function(a){var o=a[0],s=a[1];return{height:o,width:s}}))})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ur(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.detectLandmarks=function(n){return Ke(this,void 0,void 0,function(){var r,i,a,o=this;return Ye(this,function(s){switch(s.label){case 0:return[4,ur(n)];case 1:return r=s.sent(),i=$e(function(){return qn(o.forwardInput(r))}),[4,Promise.all(i.map(function(u,l){return Ke(o,void 0,void 0,function(){var c,f,d,h,p;return Ye(this,function(m){switch(m.label){case 0:return d=(f=Array).from,[4,u.data()];case 1:return c=d.apply(f,[m.sent()]),h=c.filter(function(y,v){return qk(v)}),p=c.filter(function(y,v){return!qk(v)}),[2,new kIe(Array(68).fill(0).map(function(y,v){return new zt(h[v],p[v])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return a=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(Ej),Dj=function(t){mt(e,t);function e(n){return n===void 0&&(n=new wj),t.call(this,"FaceLandmark68Net",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(Sj);function i4e(t){var e=[],n=bj(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return os(t,e),{params:r,paramMappings:e}}function a4e(t){var e=[],n=ss(t),r=n.extractWeights,i=n.getRemainingWeights,a=yj(r,e).extractDenseBlock3Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:o,dense1:s,dense2:u}}}var o4e=function(t){mt(e,t);function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return $e(function(){var i=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],o=jp(i,a).div(je(255)),s=Ex(o,r.dense0,!0);return s=Ex(s,r.dense1),s=Ex(s,r.dense2),s=Bp(s,[14,14],[2,2],"valid"),s})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ur(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(n){return i4e(n)},e.prototype.extractParams=function(n){return a4e(n)},e}(as),s4e=function(t){mt(e,t);function e(n){return n===void 0&&(n=new o4e),t.call(this,"FaceLandmark68TinyNet",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(Sj);(function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Dj);function u4e(t,e){return Dt(Pr(t,e.weights),e.biases)}function pN(t,e,n,r,i){i===void 0&&(i="same");var a=e.conv,o=a.filters,s=a.bias,u=ca(t,o,n,i);return u=Dt(u,s),u=u4e(u,e.scale),r?bn(u):u}function l4e(t,e){return pN(t,e,[1,1],!0)}function Aj(t,e){return pN(t,e,[1,1],!1)}function Tj(t,e){return pN(t,e,[2,2],!0,"valid")}function c4e(t,e){function n(s,u,l){var c=t(s),f=c.length/(u*l*l);if(_Ie(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return $e(function(){return ru(oi(c,[u,f,l,l]),[2,3,1,0])})}function r(s,u,l,c){var f=n(s,u,l),d=On(t(u));return e.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:f,bias:d}}function i(s,u){var l=On(t(s)),c=On(t(s));return e.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function a(s,u,l,c){var f=r(s,u,l,c+"/conv"),d=i(u,c+"/scale");return{conv:f,scale:d}}function o(s,u,l,c,f){f===void 0&&(f=!1);var d=a((f?.5:1)*s,u,l,c+"/conv1"),h=a(s,u,l,c+"/conv2");return{conv1:d,conv2:h}}return{extractConvLayerParams:a,extractResidualLayerParams:o}}function f4e(t){var e=ss(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],a=c4e(n,i),o=a.extractConvLayerParams,s=a.extractResidualLayerParams,u=o(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),d=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),y=s(147456,128,3,"conv128_down",!0),v=s(147456,128,3,"conv128_1"),x=s(147456,128,3,"conv128_2"),g=s(589824,256,3,"conv256_down",!0),b=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),_=s(589824,256,3,"conv256_down_out"),E=$e(function(){return ru(Ws(n(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var C={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:f,conv64_down:d,conv64_1:h,conv64_2:p,conv64_3:m,conv128_down:y,conv128_1:v,conv128_2:x,conv256_down:g,conv256_1:b,conv256_2:w,conv256_down_out:_,fc:E};return{params:C,paramMappings:i}}function d4e(t,e){var n=Su(t,e);function r(o){var s=n(o+"/scale/weights",1),u=n(o+"/scale/biases",1);return{weights:s,biases:u}}function i(o){var s=n(o+"/conv/filters",4),u=n(o+"/conv/bias",1),l=r(o);return{conv:{filters:s,bias:u},scale:l}}function a(o){return{conv1:i(o+"/conv1"),conv2:i(o+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:a}}function h4e(t){var e=[],n=d4e(t,e),r=n.extractConvLayerParams,i=n.extractResidualLayerParams,a=r("conv32_down"),o=i("conv32_1"),s=i("conv32_2"),u=i("conv32_3"),l=i("conv64_down"),c=i("conv64_1"),f=i("conv64_2"),d=i("conv64_3"),h=i("conv128_down"),p=i("conv128_1"),m=i("conv128_2"),y=i("conv256_down"),v=i("conv256_1"),x=i("conv256_2"),g=i("conv256_down_out"),b=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!wIe(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var w={conv32_down:a,conv32_1:o,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:f,conv64_3:d,conv128_down:h,conv128_1:p,conv128_2:m,conv256_down:y,conv256_1:v,conv256_2:x,conv256_down_out:g,fc:b};return os(t,e),{params:w,paramMappings:e}}function Ua(t,e){var n=l4e(t,e.conv1);return n=Aj(n,e.conv2),n=Dt(n,t),n=bn(n),n}function Vm(t,e){var n=Tj(t,e.conv1);n=Aj(n,e.conv2);var r=Bp(t,2,2,"valid"),i=ln(r.shape),a=r.shape[3]!==n.shape[3],o=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(o){var s=eh(n.shape);s[1]=1;var u=ln(s);n=Wn([n,u],1);var l=eh(n.shape);l[2]=1;var c=ln(l);n=Wn([n,c],2)}return r=a?Wn([r,i],3):r,n=Dt(r,n),n=bn(n),n}var p4e=function(t){mt(e,t);function e(){return t.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return $e(function(){var i=n.toBatchTensor(150,!0).toFloat(),a=[122.782,117.001,104.298],o=jp(i,a).div(je(256)),s=Tj(o,r.conv32_down);s=er(s,3,2,"valid"),s=Ua(s,r.conv32_1),s=Ua(s,r.conv32_2),s=Ua(s,r.conv32_3),s=Vm(s,r.conv64_down),s=Ua(s,r.conv64_1),s=Ua(s,r.conv64_2),s=Ua(s,r.conv64_3),s=Vm(s,r.conv128_down),s=Ua(s,r.conv128_1),s=Ua(s,r.conv128_2),s=Vm(s,r.conv256_down),s=Ua(s,r.conv256_1),s=Ua(s,r.conv256_2),s=Vm(s,r.conv256_down_out);var u=s.mean([1,2]),l=My(u,r.fc);return l})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ur(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.computeFaceDescriptor=function(n){return Ke(this,void 0,void 0,function(){var r,i,a,o=this;return Ye(this,function(s){switch(s.label){case 0:return[4,ur(n)];case 1:return r=s.sent(),i=$e(function(){return qn(o.forwardInput(r))}),[4,Promise.all(i.map(function(u){return u.data()}))];case 2:return a=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(n){return h4e(n)},e.prototype.extractParams=function(n){return f4e(n)},e}(as);function Mj(t,e){var n={descriptor:e};return Object.assign({},t,n)}function Ij(t,e){var n={age:e};return Object.assign({},t,n)}function kj(t,e,n){var r={gender:e,genderProbability:n};return Object.assign({},t,r)}var Rj=function(){function t(e){var n=e===void 0?{}:e,r=n.minFaceSize,i=n.scaleFactor,a=n.maxNumScales,o=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=a||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function m4e(t,e){function n(u,l){var c=oi(t(9*u),[3,3,u,1]),f=On(t(u)),d=On(t(u)),h=On(t(u)),p=On(t(u));return e.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:f,batch_norm_offset:d,batch_norm_mean:h,batch_norm_variance:p}}function r(u,l,c,f,d){var h=oi(t(u*l*c*c),[c,c,u,l]),p=On(t(l));return e.push({paramPath:f+"/filters"},{paramPath:f+"/"+(d?"batch_norm_offset":"bias")}),{filters:h,bias:p}}function i(u,l,c,f){var d=r(u,l,c,f,!0),h=d.filters,p=d.bias;return{filters:h,batch_norm_offset:p}}function a(u,l,c){var f=n(u,c+"/depthwise_conv"),d=i(u,l,1,c+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:d}}function o(){var u=i(3,32,3,"mobilenetv1/conv_0"),l=a(32,64,"mobilenetv1/conv_1"),c=a(64,128,"mobilenetv1/conv_2"),f=a(128,128,"mobilenetv1/conv_3"),d=a(128,256,"mobilenetv1/conv_4"),h=a(256,256,"mobilenetv1/conv_5"),p=a(256,512,"mobilenetv1/conv_6"),m=a(512,512,"mobilenetv1/conv_7"),y=a(512,512,"mobilenetv1/conv_8"),v=a(512,512,"mobilenetv1/conv_9"),x=a(512,512,"mobilenetv1/conv_10"),g=a(512,512,"mobilenetv1/conv_11"),b=a(512,1024,"mobilenetv1/conv_12"),w=a(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:d,conv_5:h,conv_6:p,conv_7:m,conv_8:y,conv_9:v,conv_10:x,conv_11:g,conv_12:b,conv_13:w}}function s(){var u=i(1024,256,1,"prediction_layer/conv_0"),l=i(256,512,3,"prediction_layer/conv_1"),c=i(512,128,1,"prediction_layer/conv_2"),f=i(128,256,3,"prediction_layer/conv_3"),d=i(256,128,1,"prediction_layer/conv_4"),h=i(128,256,3,"prediction_layer/conv_5"),p=i(256,64,1,"prediction_layer/conv_6"),m=i(64,128,3,"prediction_layer/conv_7"),y=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),v=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),x=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),g=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),b=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),w=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),_=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),C=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),N=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),D=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),A=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),T={box_encoding_predictor:y,class_predictor:v},R={box_encoding_predictor:x,class_predictor:g},F={box_encoding_predictor:b,class_predictor:w},O={box_encoding_predictor:_,class_predictor:E},I={box_encoding_predictor:C,class_predictor:N},M={box_encoding_predictor:D,class_predictor:A};return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:d,conv_5:h,conv_6:p,conv_7:m,box_predictor_0:T,box_predictor_1:R,box_predictor_2:F,box_predictor_3:O,box_predictor_4:I,box_predictor_5:M}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:s}}function v4e(t){var e=[],n=ss(t),r=n.extractWeights,i=n.getRemainingWeights,a=m4e(r,e),o=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,u=o(),l=s(),c=MC(r(5118*4),[1,5118,4]),f={extra_dim:c};if(e.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:f},paramMappings:e}}function g4e(t,e){var n=Su(t,e);function r(l,c,f){var d=n(l+"/Conv2d_"+c+"_pointwise/weights",4,f+"/filters"),h=n(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:d,batch_norm_offset:h}}function i(l){var c="mobilenetv1/conv_"+l,f="MobilenetV1/Conv2d_"+l+"_depthwise",d=c+"/depthwise_conv",h=c+"/pointwise_conv",p=n(f+"/depthwise_weights",4,d+"/filters"),m=n(f+"/BatchNorm/gamma",1,d+"/batch_norm_scale"),y=n(f+"/BatchNorm/beta",1,d+"/batch_norm_offset"),v=n(f+"/BatchNorm/moving_mean",1,d+"/batch_norm_mean"),x=n(f+"/BatchNorm/moving_variance",1,d+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:m,batch_norm_offset:y,batch_norm_mean:v,batch_norm_variance:x},pointwise_conv:r("MobilenetV1",l,h)}}function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function o(l,c){var f=n(l+"/weights",4,c+"/filters"),d=n(l+"/biases",1,c+"/bias");return{filters:f,bias:d}}function s(l){var c=o("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),f=o("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:u}}function y4e(t){var e=[],n=g4e(t,e),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,a=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Fy(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var o={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:a}};return os(t,e),{params:o,paramMappings:e}}function Wa(t,e,n){return $e(function(){var r=ca(t,e.filters,n,"same");return r=Dt(r,e.batch_norm_offset),zC(r,0,6)})}var x4e=.0010000000474974513;function b4e(t,e,n){return $e(function(){var r=Ty(t,e.filters,n,"same");return r=D9(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,x4e),zC(r,0,6)})}function w4e(t){return[2,4,6,12].some(function(e){return e===t})?[2,2]:[1,1]}function _4e(t,e){return $e(function(){var n=null,r=Wa(t,e.conv_0,[2,2]),i=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(i.forEach(function(a,o){var s=o+1,u=w4e(s);r=b4e(r,a.depthwise_conv,u),r=Wa(r,a.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function E4e(t,e,n,r,i){var a=t.shape[0],o=Math.min(n,a),s=e.map(function(c,f){return{score:c,boxIndex:f}}).filter(function(c){return c.score>i}).sort(function(c,f){return f.score-c.score}),u=function(c){return c<=r?1:0},l=[];return s.forEach(function(c){if(!(l.length>=o)){for(var f=c.score,d=l.length-1;d>=0;--d){var h=C4e(t,c.boxIndex,l[d]);if(h!==0&&(c.score*=u(h),c.score<=i))break}f===c.score&&l.push(c.boxIndex)}}),l}function C4e(t,e,n){var r=t.arraySync(),i=Math.min(r[e][0],r[e][2]),a=Math.min(r[e][1],r[e][3]),o=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),d=(o-i)*(s-a),h=(c-u)*(f-l);if(d<=0||h<=0)return 0;var p=Math.max(i,u),m=Math.max(a,l),y=Math.min(o,c),v=Math.min(s,f),x=Math.max(y-p,0)*Math.max(v-m,0);return x/(d+h-x)}function N4e(t){var e=qn(ru(t,[1,0])),n=[Gn(e[2],e[0]),Gn(e[3],e[1])],r=[Dt(e[0],xa(n[0],je(2))),Dt(e[1],xa(n[1],je(2)))];return{sizes:n,centers:r}}function S4e(t,e){var n=N4e(t),r=n.sizes,i=n.centers,a=qn(ru(e,[1,0])),o=xa(Pr(Qw(xa(a[2],je(5))),r[0]),je(2)),s=Dt(Pr(xa(a[0],je(10)),r[0]),i[0]),u=xa(Pr(Qw(xa(a[3],je(5))),r[1]),je(2)),l=Dt(Pr(xa(a[1],je(10)),r[1]),i[1]);return ru(Fi([Gn(s,o),Gn(l,u),Dt(s,o),Dt(l,u)]),[1,0])}function D4e(t,e,n){return $e(function(){var r=t.shape[0],i=S4e(Ca(Uc(n.extra_dim,[r,1,1]),[-1,4]),Ca(t,[-1,4]));i=Ca(i,[r,i.shape[0]/r,4]);var a=E9(oo(e,[0,0,1],[-1,-1,-1])),o=oo(a,[0,0,0],[-1,-1,1]);o=Ca(o,[r,o.shape[1]]);var s=qn(i),u=qn(o);return{boxes:s,scores:u}})}function tc(t,e){return $e(function(){var n=t.shape[0],r=Ca(Ma(t,e.box_encoding_predictor),[n,-1,1,4]),i=Ca(Ma(t,e.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function A4e(t,e,n){return $e(function(){var r=Wa(t,n.conv_0,[1,1]),i=Wa(r,n.conv_1,[2,2]),a=Wa(i,n.conv_2,[1,1]),o=Wa(a,n.conv_3,[2,2]),s=Wa(o,n.conv_4,[1,1]),u=Wa(s,n.conv_5,[2,2]),l=Wa(u,n.conv_6,[1,1]),c=Wa(l,n.conv_7,[2,2]),f=tc(e,n.box_predictor_0),d=tc(t,n.box_predictor_1),h=tc(i,n.box_predictor_2),p=tc(o,n.box_predictor_3),m=tc(u,n.box_predictor_4),y=tc(c,n.box_predictor_5),v=Wn([f.boxPredictionEncoding,d.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,y.boxPredictionEncoding],1),x=Wn([f.classPrediction,d.classPrediction,h.classPrediction,p.classPrediction,m.classPrediction,y.classPrediction],1);return{boxPredictions:v,classPredictions:x}})}var Ly=function(){function t(e){var n=e===void 0?{}:e,r=n.minConfidence,i=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),Fj=function(t){mt(e,t);function e(){return t.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return $e(function(){var i=n.toBatchTensor(512,!1).toFloat(),a=Gn(Pr(i,je(.007843137718737125)),je(1)),o=_4e(a,r.mobilenetv1),s=A4e(o.out,o.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return D4e(u,l,r.output_layer)})},e.prototype.forward=function(n){return Ke(this,void 0,void 0,function(){var r;return Ye(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,ur(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),Ke(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,d,h,p,m,y,v,x,g,b,w,_,E,C;return Ye(this,function(N){switch(N.label){case 0:return i=new Ly(r),a=i.maxResults,o=i.minConfidence,[4,ur(n)];case 1:for(s=N.sent(),u=this.forwardInput(s),l=u.boxes,c=u.scores,f=l[0],d=c[0],h=1;h<l.length;h++)l[h].dispose(),c[h].dispose();return y=(m=Array).from,[4,d.data()];case 2:return p=y.apply(m,[N.sent()]),v=.5,x=E4e(f,p,a,v,o),g=s.getReshapedInputDimensions(0),b=s.inputSize,w=b/g.width,_=b/g.height,E=f.arraySync(),C=x.map(function(D){var A=[Math.max(0,E[D][0]),Math.min(1,E[D][2])].map(function(M){return M*_}),T=A[0],R=A[1],F=[Math.max(0,E[D][1]),Math.min(1,E[D][3])].map(function(M){return M*w}),O=F[0],I=F[1];return new vo(p[D],new iN(O,T,I-O,R-T),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),d.dispose(),[2,C]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(n){return y4e(n)},e.prototype.extractParams=function(n){return v4e(n)},e}(as);(function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Fj);var T4e=.4,M4e=[new zt(.738768,.874946),new zt(2.42204,2.65704),new zt(4.30971,7.04493),new zt(10.246,4.59428),new zt(12.6868,11.8741)],I4e=[new zt(1.603231,2.094468),new zt(6.041143,7.080126),new zt(2.882459,3.518061),new zt(4.266906,5.178857),new zt(9.041765,10.66308)],k4e=[117.001,114.697,97.404],R4e="tiny_yolov2_model",F4e="tiny_yolov2_separable_conv_model",Wm=function(t){return typeof t=="number"};function P4e(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!Wm(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(e){return e||{}}).every(function(e){return Wm(e.x)&&Wm(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(Wm)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function mN(t){return $e(function(){var e=Pr(t,je(.10000000149011612));return Dt(bn(Gn(t,e)),e)})}function cs(t,e){return $e(function(){var n=$l(t,[[0,0],[1,1],[1,1],[0,0]]);return n=ca(n,e.conv.filters,[1,1],"valid"),n=Gn(n,e.bn.sub),n=Pr(n,e.bn.truediv),n=Dt(n,e.conv.bias),mN(n)})}function fs(t,e){return $e(function(){var n=$l(t,[[0,0],[1,1],[1,1],[0,0]]);return n=qC(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),n=Dt(n,e.bias),mN(n)})}function O4e(t,e){var n=By(t,e);function r(o,s){var u=On(t(o)),l=On(t(o));return e.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function i(o,s,u){var l=n(o,s,3,u+"/conv"),c=r(s,u+"/bn");return{conv:l,bn:c}}var a=fN(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}}function B4e(t,e,n,r){var i=ss(t),a=i.extractWeights,o=i.getRemainingWeights,s=[],u=O4e(a,s),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,d;if(e.withSeparableConvs){var h=r[0],p=r[1],m=r[2],y=r[3],v=r[4],x=r[5],g=r[6],b=r[7],w=r[8],_=e.isFirstLayerConv2d?l(h,p,3,"conv0"):f(h,p,"conv0"),E=f(p,m,"conv1"),C=f(m,y,"conv2"),N=f(y,v,"conv3"),D=f(v,x,"conv4"),A=f(x,g,"conv5"),T=b?f(g,b,"conv6"):void 0,R=w?f(b,w,"conv7"):void 0,F=l(w||b||g,5*n,1,"conv8");d={conv0:_,conv1:E,conv2:C,conv3:N,conv4:D,conv5:A,conv6:T,conv7:R,conv8:F}}else{var h=r[0],p=r[1],m=r[2],y=r[3],v=r[4],x=r[5],g=r[6],b=r[7],w=r[8],_=c(h,p,"conv0"),E=c(p,m,"conv1"),C=c(m,y,"conv2"),N=c(y,v,"conv3"),D=c(v,x,"conv4"),A=c(x,g,"conv5"),T=c(g,b,"conv6"),R=c(b,w,"conv7"),F=l(w,5*n,1,"conv8");d={conv0:_,conv1:E,conv2:C,conv3:N,conv4:D,conv5:A,conv6:T,conv7:R,conv8:F}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:d,paramMappings:s}}function L4e(t,e){var n=Su(t,e);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function i(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function a(s){var u=i(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var o=dN(n);return{extractConvParams:i,extractConvWithBatchNormParams:a,extractSeparableConvParams:o}}function j4e(t,e){var n=[],r=L4e(t,n),i=r.extractConvParams,a=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,s;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;s={conv0:e.isFirstLayerConv2d?i("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:u>7?o("conv6"):void 0,conv7:u>8?o("conv7"):void 0,conv8:i("conv8")}}else s={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:i("conv8")};return os(t,n),{params:s,paramMappings:n}}var Jk;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(Jk||(Jk={}));var vN=function(){function t(e){var n=e===void 0?{}:e,r=n.inputSize,i=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),Pj=function(t){mt(e,t);function e(n){var r=t.call(this,"TinyYolov2")||this;return P4e(n),r._config=n,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(n,r){var i=cs(n,r.conv0);return i=er(i,[2,2],[2,2],"same"),i=cs(i,r.conv1),i=er(i,[2,2],[2,2],"same"),i=cs(i,r.conv2),i=er(i,[2,2],[2,2],"same"),i=cs(i,r.conv3),i=er(i,[2,2],[2,2],"same"),i=cs(i,r.conv4),i=er(i,[2,2],[2,2],"same"),i=cs(i,r.conv5),i=er(i,[2,2],[1,1],"same"),i=cs(i,r.conv6),i=cs(i,r.conv7),Ma(i,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(n,r){var i=this.config.isFirstLayerConv2d?mN(Ma(n,r.conv0,"valid",!1)):fs(n,r.conv0);return i=er(i,[2,2],[2,2],"same"),i=fs(i,r.conv1),i=er(i,[2,2],[2,2],"same"),i=fs(i,r.conv2),i=er(i,[2,2],[2,2],"same"),i=fs(i,r.conv3),i=er(i,[2,2],[2,2],"same"),i=fs(i,r.conv4),i=er(i,[2,2],[2,2],"same"),i=fs(i,r.conv5),i=er(i,[2,2],[1,1],"same"),i=r.conv6?fs(i,r.conv6):i,i=r.conv7?fs(i,r.conv7):i,Ma(i,r.conv8,"valid",!1)},e.prototype.forwardInput=function(n,r){var i=this,a=this.params;if(!a)throw new Error("TinyYolov2 - load model before inference");return $e(function(){var o=n.toBatchTensor(r,!1).toFloat();return o=i.config.meanRgb?jp(o,i.config.meanRgb):o,o=o.div(je(256)),i.config.withSeparableConvs?i.runMobilenet(o,a):i.runTinyYolov2(o,a)})},e.prototype.forward=function(n,r){return Ke(this,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,ur(n)];case 1:return[4,i.apply(this,[a.sent(),r])];case 2:return[2,a.sent()]}})})},e.prototype.detect=function(n,r){return r===void 0&&(r={}),Ke(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,d,h,p,m,y,v,x=this;return Ye(this,function(g){switch(g.label){case 0:return i=new vN(r),a=i.inputSize,o=i.scoreThreshold,[4,ur(n)];case 1:return s=g.sent(),[4,this.forwardInput(s,a)];case 2:return u=g.sent(),l=$e(function(){return qn(u)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),o)];case 3:return f=g.sent(),u.dispose(),l.dispose(),d=f.map(function(b){return b.box}),h=f.map(function(b){return b.score}),p=f.map(function(b){return b.classScore}),m=f.map(function(b){return x.config.classes[b.label]}),y=Qh(d.map(function(b){return b.rescale(a)}),h,this.config.iouThreshold,!0),v=y.map(function(b){return new sj(h[b],p[b],m[b],d[b],c)}),[2,v]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(n){return j4e(n,this.config)},e.prototype.extractParams=function(n){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return B4e(n,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(n,r,i){return Ke(this,void 0,void 0,function(){var a,o,s,u,l,c,f,d,h,p,m,y,v,x,g,b,w,_,E,C,N,D,A,T,R,F,O,I,M,B=this;return Ye(this,function(k){switch(k.label){case 0:return a=r.width,o=r.height,s=Math.max(a,o),u=s/a,l=s/o,c=n.shape[1],f=this.config.anchors.length,d=$e(function(){var j=n.reshape([c,c,f,B.boxEncodingSize]),Y=j.slice([0,0,0,0],[c,c,f,4]),q=j.slice([0,0,0,4],[c,c,f,1]),L=B.withClassScores?rs(j.slice([0,0,0,5],[c,c,f,B.config.classes.length]),3):je(0);return[Y,q,L]}),h=d[0],p=d[1],m=d[2],y=[],[4,p.array()];case 1:return v=k.sent(),[4,h.array()];case 2:x=k.sent(),g=0,k.label=3;case 3:if(!(g<c))return[3,12];b=0,k.label=4;case 4:if(!(b<c))return[3,11];w=0,k.label=5;case 5:return w<f?(_=_x(v[g][b][w][0]),!i||_>i?(E=(b+_x(x[g][b][w][0]))/c*u,C=(g+_x(x[g][b][w][1]))/c*l,N=Math.exp(x[g][b][w][2])*this.config.anchors[w].x/c*u,D=Math.exp(x[g][b][w][3])*this.config.anchors[w].y/c*l,A=E-N/2,T=C-D/2,R={row:g,col:b,anchor:w},this.withClassScores?[4,this.extractPredictedClass(m,R)]:[3,7]):[3,9]):[3,10];case 6:return M=k.sent(),[3,8];case 7:M={classScore:1,label:0},k.label=8;case 8:F=M,O=F.classScore,I=F.label,y.push(Ir({box:new Py(A,T,A+N,T+D),score:_,classScore:_*O,label:I},R)),k.label=9;case 9:return w++,[3,5];case 10:return b++,[3,4];case 11:return g++,[3,3];case 12:return h.dispose(),p.dispose(),m.dispose(),[2,y]}})})},e.prototype.extractPredictedClass=function(n,r){return Ke(this,void 0,void 0,function(){var i,a,o,s;return Ye(this,function(u){switch(u.label){case 0:return i=r.row,a=r.col,o=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return s[i][a][o][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(as),$4e=function(t){mt(e,t);function e(n){n===void 0&&(n=!0);var r=this,i=Object.assign({},{withSeparableConvs:n,iouThreshold:T4e,classes:["face"]},n?{anchors:I4e,meanRgb:k4e}:{anchors:M4e,withClassScores:!0});return r=t.call(this,i)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return Ke(this,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return i=a.sent(),[2,i.map(function(o){return new vo(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?F4e:R4e},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(Pj),Oj=function(t){mt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return e}(vN),$p=function(){function t(){}return t.prototype.then=function(e){return Ke(this,void 0,void 0,function(){var n;return Ye(this,function(r){switch(r.label){case 0:return n=e,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return Ke(this,void 0,void 0,function(){return Ye(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},t}();function jy(t,e,n,r,i){return i===void 0&&(i=function(a){var o=a.alignedRect;return o}),Ke(this,void 0,void 0,function(){var a,o,s,u,l;return Ye(this,function(c){switch(c.label){case 0:return a=t.map(function(f){return KIe(f)?i(f):f.detection}),s=r,s?[3,5]:e instanceof yn?[4,lN(e,a)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,uN(e,a)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return o=s,[4,n(o)];case 6:return l=c.sent(),o.forEach(function(f){return f instanceof yn&&f.dispose()}),[2,l]}})})}function gN(t,e,n,r,i){return Ke(this,void 0,void 0,function(){var a=this;return Ye(this,function(o){return[2,jy([t],e,function(s){return Ke(a,void 0,void 0,function(){return Ye(this,function(u){return[2,n(s[0])]})})},r,i)]})})}function z4e(t){return $e(function(){return Fi(qn(t,3).reverse(),3)})}var qm=2,d0=12;function U4e(t,e){var n=By(t,e),r=cN(t,e);function i(l,c){var f=On(t(l));return e.push({paramPath:c}),f}function a(l,c,f){f===void 0&&(f=!1);var d=n(l[0],l[1],3,c+"/conv1"),h=i(l[1],c+"/prelu1_alpha"),p=n(l[1],l[2],3,c+"/conv2"),m=i(l[2],c+"/prelu2_alpha"),y=n(l[2],l[3],f?2:3,c+"/conv3"),v=i(l[3],c+"/prelu3_alpha");return{conv1:d,prelu1_alpha:h,conv2:p,prelu2_alpha:m,conv3:y,prelu3_alpha:v}}function o(){var l=a([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),f=n(32,4,1,"pnet/conv4_2");return Ir(Ir({},l),{conv4_1:c,conv4_2:f})}function s(){var l=a([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),f=i(128,"rnet/prelu4_alpha"),d=r(128,2,"rnet/fc2_1"),h=r(128,4,"rnet/fc2_2");return Ir(Ir({},l),{fc1:c,prelu4_alpha:f,fc2_1:d,fc2_2:h})}function u(){var l=a([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),f=i(128,"onet/prelu4_alpha"),d=r(1152,256,"onet/fc1"),h=i(256,"onet/prelu5_alpha"),p=r(256,2,"onet/fc2_1"),m=r(256,4,"onet/fc2_2"),y=r(256,10,"onet/fc2_3");return Ir(Ir({},l),{conv4:c,prelu4_alpha:f,fc1:d,prelu5_alpha:h,fc2_1:p,fc2_2:m,fc2_3:y})}return{extractPNetParams:o,extractRNetParams:s,extractONetParams:u}}function V4e(t){var e=ss(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],a=U4e(n,i),o=a.extractPNetParams,s=a.extractRNetParams,u=a.extractONetParams,l=o(),c=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:f},paramMappings:i}}function W4e(t,e){var n=Su(t,e);function r(c){var f=n(c+"/weights",4,c+"/filters"),d=n(c+"/bias",1);return{filters:f,bias:d}}function i(c){var f=n(c+"/weights",2),d=n(c+"/bias",1);return{weights:f,bias:d}}function a(c){return n(c,1)}function o(c){var f=r(c+"/conv1"),d=a(c+"/prelu1_alpha"),h=r(c+"/conv2"),p=a(c+"/prelu2_alpha"),m=r(c+"/conv3"),y=a(c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:d,conv2:h,prelu2_alpha:p,conv3:m,prelu3_alpha:y}}function s(){var c=o("pnet"),f=r("pnet/conv4_1"),d=r("pnet/conv4_2");return Ir(Ir({},c),{conv4_1:f,conv4_2:d})}function u(){var c=o("rnet"),f=i("rnet/fc1"),d=a("rnet/prelu4_alpha"),h=i("rnet/fc2_1"),p=i("rnet/fc2_2");return Ir(Ir({},c),{fc1:f,prelu4_alpha:d,fc2_1:h,fc2_2:p})}function l(){var c=o("onet"),f=r("onet/conv4"),d=a("onet/prelu4_alpha"),h=i("onet/fc1"),p=a("onet/prelu5_alpha"),m=i("onet/fc2_1"),y=i("onet/fc2_2"),v=i("onet/fc2_3");return Ir(Ir({},c),{conv4:f,prelu4_alpha:d,fc1:h,prelu5_alpha:p,fc2_1:m,fc2_2:y,fc2_3:v})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function q4e(t){var e=[],n=W4e(t,e),r=n.extractPNetParams,i=n.extractRNetParams,a=n.extractONetParams,o=r(),s=i(),u=a();return os(t,e),{params:{pnet:o,rnet:s,onet:u},paramMappings:e}}function a2(t,e){var n=e[0],r=e[1];return{height:Math.floor(n*t),width:Math.floor(r*t)}}function H4e(t,e,n){for(var r=n[0],i=n[1],a=d0/t,o=[],s=Math.min(r,i)*a,u=0;s>=12;)o.push(a*Math.pow(e,u)),s=s*e,u+=1;return o}var yN=function(t){mt(e,t);function e(n,r,i,a){return t.call(this,{left:n,top:r,right:i,bottom:a},!0)||this}return e}(iu);function Bj(t){return $e(function(){return Pr(Gn(t,je(127.5)),je(.0078125))})}function Kc(t,e){return $e(function(){return Dt(bn(t),Pr(e,a0(bn(a0(t)))))})}function xN(t,e,n){return n===void 0&&(n=!1),$e(function(){var r=Ma(t,e.conv1,"valid");return r=Kc(r,e.prelu1_alpha),r=er(r,n?[2,2]:[3,3],[2,2],"same"),r=Ma(r,e.conv2,"valid"),r=Kc(r,e.prelu2_alpha),r=n?r:er(r,[3,3],[2,2],"valid"),r=Ma(r,e.conv3,"valid"),r=Kc(r,e.prelu3_alpha),r})}function G4e(t,e){return $e(function(){var n=xN(t,e,!0),r=Ma(n,e.conv4_1,"valid"),i=Xi(Iy(r,3),3),a=rs(Gn(r,i),3),o=Ma(n,e.conv4_2,"valid");return{prob:a,regions:o}})}function K4e(t,e){return $e(function(){var n=a2(e,t.shape.slice(1)),r=n.height,i=n.width,a=XC.resizeBilinear(t,[r,i]),o=Bj(a);return ru(o,[0,2,1,3])})}function Y4e(t,e,n,r){for(var i=[],a=t.arraySync(),o=0;o<t.shape[0];o++)for(var s=0;s<t.shape[1];s++)a[o][s]>=r&&i.push(new zt(s,o));var u=i.map(function(l){var c=new Py(Math.round((l.y*qm+1)/n),Math.round((l.x*qm+1)/n),Math.round((l.y*qm+d0)/n),Math.round((l.x*qm+d0)/n)),f=a[l.y][l.x],d=e.arraySync(),h=new yN(d[l.y][l.x][0],d[l.y][l.x][1],d[l.y][l.x][2],d[l.y][l.x][3]);return{cell:c,score:f,region:h}});return u}function X4e(t,e,n,r,i){i.stage1=[];var a=e.map(function(d){return $e(function(){var h={scale:d},p=K4e(t,d),m=Date.now(),y=G4e(p,r),v=y.prob,x=y.regions;h.pnet=Date.now()-m;var g=qn(qn(v,3)[1])[0],b=qn(x)[0];return{scoresTensor:g,regionsTensor:b,scale:d,statsForScale:h}})}),o=a.map(function(d){var h=d.scoresTensor,p=d.regionsTensor,m=d.scale,y=d.statsForScale,v=Y4e(h,p,m,n);if(h.dispose(),p.dispose(),!v.length)return i.stage1.push(y),[];var x=Date.now(),g=Qh(v.map(function(b){return b.cell}),v.map(function(b){return b.score}),.5);return y.nms=Date.now()-x,y.numBoxes=g.length,i.stage1.push(y),g.map(function(b){return v[b]})}),s=o.reduce(function(d,h){return d.concat(h)},[]),u=[],l=[];if(s.length>0){var c=Date.now(),f=Qh(s.map(function(d){return d.cell}),s.map(function(d){return d.score}),.7);i.stage1_nms=Date.now()-c,l=f.map(function(d){return s[d].score}),u=f.map(function(d){return s[d]}).map(function(d){var h=d.cell,p=d.region;return new Py(h.left+p.left*h.width,h.top+p.top*h.height,h.right+p.right*h.width,h.bottom+p.bottom*h.height).toSquare().round()})}return{boxes:u,scores:l}}function Lj(t,e,n){var r=n.width,i=n.height;return Ke(this,void 0,void 0,function(){var a,o,s,u=this;return Ye(this,function(l){switch(l.label){case 0:return a=bl(t),[4,Promise.all(e.map(function(c){return Ke(u,void 0,void 0,function(){var f,d,h,p,m,y,v,x;return Ye(this,function(g){return f=c.padAtBorders(t.height,t.width),d=f.y,h=f.ey,p=f.x,m=f.ex,y=p-1,v=d-1,x=a.getImageData(y,v,m-y,h-v),[2,jr.isNodejs()?sN(x):createImageBitmap(x)]})})}))];case 1:return o=l.sent(),s=[],o.forEach(function(c){var f=Oy({width:r,height:i}),d=bl(f);d.drawImage(c,0,0,r,i);for(var h=d.getImageData(0,0,r,i).data,p=[],m=0;m<h.length;m+=4)p.push(h[m+2]),p.push(h[m+1]),p.push(h[m]);s.push(p)}),[2,s.map(function(c){var f=$e(function(){var d=ru(oi(c,[1,r,i,3]),[0,2,1,3]).toFloat();return Bj(d)});return f})]}})})}function Q4e(t,e){return $e(function(){var n=xN(t,e),r=Ca(n,[n.shape[0],e.fc1.weights.shape[0]]),i=Xa(r,e.fc1),a=Kc(i,e.prelu4_alpha),o=Xa(a,e.fc2_1),s=Xi(Iy(o,1),1),u=rs(Gn(o,s),1),l=Xa(a,e.fc2_2),c=qn(u,1)[1];return{scores:c,regions:l}})}function Z4e(t,e,n,r,i){return Ke(this,void 0,void 0,function(){var a,o,s,u,l,c,f,d,h,p,m,y,v,x;return Ye(this,function(g){switch(g.label){case 0:return a=Date.now(),[4,Lj(t,e,{width:24,height:24})];case 1:return o=g.sent(),i.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map(function(b){var w=Q4e(b,r);return b.dispose(),w}),i.stage2_rnet=Date.now()-a,u=s.length>1?Wn(s.map(function(b){return b.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[g.sent()]),u.dispose(),d=l.map(function(b,w){return{score:b,idx:w}}).filter(function(b){return b.score>n}).map(function(b){var w=b.idx;return w}),h=d.map(function(b){return e[b]}),p=d.map(function(b){return l[b]}),m=[],y=[],h.length>0&&(a=Date.now(),v=Qh(h,p,.7),i.stage2_nms=Date.now()-a,x=v.map(function(b){var w=s[d[b]].regions.arraySync();return new yN(w[0][0],w[0][1],w[0][2],w[0][3])}),y=v.map(function(b){return p[b]}),m=v.map(function(b,w){return h[b].calibrate(x[w])})),s.forEach(function(b){b.regions.dispose(),b.scores.dispose()}),[2,{boxes:m,scores:y}]}})})}function J4e(t,e){return $e(function(){var n=xN(t,e);n=er(n,[2,2],[2,2],"same"),n=Ma(n,e.conv4,"valid"),n=Kc(n,e.prelu4_alpha);var r=Ca(n,[n.shape[0],e.fc1.weights.shape[0]]),i=Xa(r,e.fc1),a=Kc(i,e.prelu5_alpha),o=Xa(a,e.fc2_1),s=Xi(Iy(o,1),1),u=rs(Gn(o,s),1),l=Xa(a,e.fc2_2),c=Xa(a,e.fc2_3),f=qn(u,1)[1];return{scores:f,regions:l,points:c}})}function eke(t,e,n,r,i){return Ke(this,void 0,void 0,function(){var a,o,s,u,l,c,f,d,h,p,m,y,v,x,g;return Ye(this,function(b){switch(b.label){case 0:return a=Date.now(),[4,Lj(t,e,{width:48,height:48})];case 1:return o=b.sent(),i.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map(function(w){var _=J4e(w,r);return w.dispose(),_}),i.stage3_onet=Date.now()-a,u=s.length>1?Wn(s.map(function(w){return w.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[b.sent()]),u.dispose(),d=l.map(function(w,_){return{score:w,idx:_}}).filter(function(w){return w.score>n}).map(function(w){var _=w.idx;return _}),h=d.map(function(w){var _=s[w].regions.arraySync();return new yN(_[0][0],_[0][1],_[0][2],_[0][3])}),p=d.map(function(w,_){return e[w].calibrate(h[_])}),m=d.map(function(w){return l[w]}),y=[],v=[],x=[],p.length>0&&(a=Date.now(),g=Qh(p,m,.7,!1),i.stage3_nms=Date.now()-a,y=g.map(function(w){return p[w]}),v=g.map(function(w){return m[w]}),x=g.map(function(w,_){return Array(5).fill(0).map(function(E,C){var N=s[w].points.arraySync();return new zt(N[0][C]*(y[_].width+1)+y[_].left,N[0][C+5]*(y[_].height+1)+y[_].top)})})),s.forEach(function(w){w.regions.dispose(),w.scores.dispose(),w.points.dispose()}),[2,{boxes:y,scores:v,points:x}]}})})}var tke=function(t){mt(e,t);function e(){return t.call(this,"Mtcnn")||this}return e.prototype.load=function(n){return Ke(this,void 0,void 0,function(){return Ye(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,n)]})})},e.prototype.loadFromDisk=function(n){return Ke(this,void 0,void 0,function(){return Ye(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,n)]})})},e.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),Ke(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,d,h,p,m,y,v,x,g,b,w,_,E,C;return Ye(this,function(N){switch(N.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(a=n.canvases[0],!a)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},s=Date.now(),u=$e(function(){return z4e(Xi(nN.fromPixels(a)).toFloat())}),l=function(D){return u.dispose(),o.total=Date.now()-s,D},c=u.shape.slice(1),f=c[0],d=c[1],h=new Rj(r),p=h.minFaceSize,m=h.scaleFactor,y=h.maxNumScales,v=h.scoreThresholds,x=h.scaleSteps,g=(x||H4e(p,m,[f,d])).filter(function(D){var A=a2(D,[f,d]);return Math.min(A.width,A.height)>d0}).slice(0,y),o.scales=g,o.pyramid=g.map(function(D){return a2(D,[f,d])}),b=Date.now(),[4,X4e(u,g,v[0],i.pnet,o)];case 1:return w=N.sent(),o.total_stage1=Date.now()-b,w.boxes.length?(o.stage2_numInputBoxes=w.boxes.length,b=Date.now(),[4,Z4e(a,w.boxes,v[1],i.rnet,o)]):[2,l({results:[],stats:o})];case 2:return _=N.sent(),o.total_stage2=Date.now()-b,_.boxes.length?(o.stage3_numInputBoxes=_.boxes.length,b=Date.now(),[4,eke(a,_.boxes,v[2],i.onet,o)]):[2,l({results:[],stats:o})];case 3:return E=N.sent(),o.total_stage3=Date.now()-b,C=E.boxes.map(function(D,A){return hN(aN({},new vo(E.scores[A],new iN(D.left/d,D.top/f,D.width/d,D.height/f),{height:f,width:d})),new IIe(E.points[A].map(function(T){return T.sub(new zt(D.left,D.top)).div(new zt(D.width,D.height))}),{width:D.width,height:D.height}))}),[2,l({results:C,stats:o})]}})})},e.prototype.forward=function(n,r){return r===void 0&&(r={}),Ke(this,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,ur(n)];case 1:return[4,i.apply(this,[a.sent(),r])];case 2:return[2,a.sent().results]}})})},e.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),Ke(this,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,ur(n)];case 1:return[2,i.apply(this,[a.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(n){return q4e(n)},e.prototype.extractParams=function(n){return V4e(n)},e}(as),nke=.4,rke=[new zt(1.603231,2.094468),new zt(6.041143,7.080126),new zt(2.882459,3.518061),new zt(4.266906,5.178857),new zt(9.041765,10.66308)],ike=[117.001,114.697,97.404],ake=function(t){mt(e,t);function e(){var n=this,r={withSeparableConvs:!0,iouThreshold:nke,classes:["face"],anchors:rke,meanRgb:ike,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=t.call(this,r)||this,n}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return Ke(this,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return i=a.sent(),[2,i.map(function(o){return new vo(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(Pj),fi={ssdMobilenetv1:new Fj,tinyFaceDetector:new ake,tinyYolov2:new $4e,mtcnn:new tke,faceLandmark68Net:new Dj,faceLandmark68TinyNet:new s4e,faceRecognitionNet:new p4e,faceExpressionNet:new GIe,ageGenderNet:new r4e},jj=function(t){mt(e,t);function e(n,r,i){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=i,a}return e}($p),bN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i=this;return Ye(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,jy(n,this.input,function(o){return Ke(i,void 0,void 0,function(){return Ye(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(u){return fi.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(o,s){return Cj(o,r[s])})]}})})},e.prototype.withAgeAndGender=function(){return new CN(this,this.input)},e}(jj),wN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r;return Ye(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),n?[4,gN(n,this.input,function(a){return fi.faceExpressionNet.predictExpressions(a)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,Cj(n,r)]}})})},e.prototype.withAgeAndGender=function(){return new NN(this,this.input)},e}(jj),_N=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new SN(this,this.input)},e.prototype.withFaceDescriptors=function(){return new AN(this,this.input)},e}(bN),EN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new DN(this,this.input)},e.prototype.withFaceDescriptor=function(){return new TN(this,this.input)},e}(wN),$j=function(t){mt(e,t);function e(n,r,i){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=i,a}return e}($p),CN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i=this;return Ye(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,jy(n,this.input,function(o){return Ke(i,void 0,void 0,function(){return Ye(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(u){return fi.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(o,s){var u=r[s],l=u.age,c=u.gender,f=u.genderProbability;return Ij(kj(o,c,f),l)})]}})})},e.prototype.withFaceExpressions=function(){return new bN(this,this.input)},e}($j),NN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i,a,o;return Ye(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,gN(n,this.input,function(u){return fi.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),i=r.age,a=r.gender,o=r.genderProbability,[2,Ij(kj(n,a,o),i)]}})})},e.prototype.withFaceExpressions=function(){return new wN(this,this.input)},e}($j),SN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new _N(this,this.input)},e.prototype.withFaceDescriptors=function(){return new AN(this,this.input)},e}(CN),DN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new EN(this,this.input)},e.prototype.withFaceDescriptor=function(){return new TN(this,this.input)},e}(NN),zj=function(t){mt(e,t);function e(n,r){var i=t.call(this)||this;return i.parentTask=n,i.input=r,i}return e}($p),AN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r;return Ye(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,jy(n,this.input,function(a){return Promise.all(a.map(function(o){return fi.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=i.sent(),[2,r.map(function(a,o){return Mj(n[o],a)})]}})})},e.prototype.withFaceExpressions=function(){return new _N(this,this.input)},e.prototype.withAgeAndGender=function(){return new SN(this,this.input)},e}(zj),TN=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r;return Ye(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),n?[4,gN(n,this.input,function(a){return fi.faceRecognitionNet.computeFaceDescriptor(a)},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,Mj(n,r)]}})})},e.prototype.withFaceExpressions=function(){return new EN(this,this.input)},e.prototype.withAgeAndGender=function(){return new DN(this,this.input)},e}(zj),Uj=function(t){mt(e,t);function e(n,r,i){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.useTinyLandmarkNet=i,a}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?fi.faceLandmark68TinyNet:fi.faceLandmark68Net},enumerable:!0,configurable:!0}),e}($p),oke=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i,a,o,s=this;return Ye(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof yn?[4,lN(this.input,r)]:[3,3];case 2:return a=u.sent(),[3,5];case 3:return[4,uN(this.input,r)];case 4:a=u.sent(),u.label=5;case 5:return i=a,[4,Promise.all(i.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return o=u.sent(),i.forEach(function(l){return l instanceof yn&&l.dispose()}),[2,n.map(function(l,c){return hN(l,o[c])})]}})})},e.prototype.withFaceExpressions=function(){return new _N(this,this.input)},e.prototype.withAgeAndGender=function(){return new SN(this,this.input)},e.prototype.withFaceDescriptors=function(){return new AN(this,this.input)},e}(Uj),ske=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i,a,o;return Ye(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof yn?[4,lN(this.input,[r])]:[3,3]):[2];case 2:return a=s.sent(),[3,5];case 3:return[4,uN(this.input,[r])];case 4:a=s.sent(),s.label=5;case 5:return i=a,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return o=s.sent(),i.forEach(function(u){return u instanceof yn&&u.dispose()}),[2,hN(n,o)]}})})},e.prototype.withFaceExpressions=function(){return new EN(this,this.input)},e.prototype.withAgeAndGender=function(){return new DN(this,this.input)},e.prototype.withFaceDescriptor=function(){return new TN(this,this.input)},e}(Uj),Vj=function(t){mt(e,t);function e(n,r){r===void 0&&(r=new Ly);var i=t.call(this)||this;return i.input=n,i.options=r,i}return e}($p),Wj=function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r,i,a;return Ye(this,function(o){switch(o.label){case 0:return n=this,r=n.input,i=n.options,i instanceof Rj?[4,fi.mtcnn.forward(r,i)]:[3,2];case 1:return[2,o.sent().map(function(s){return s.detection})];case 2:if(a=i instanceof Oj?function(s){return fi.tinyFaceDetector.locateFaces(s,i)}:i instanceof Ly?function(s){return fi.ssdMobilenetv1.locateFaces(s,i)}:i instanceof vN?function(s){return fi.tinyYolov2.locateFaces(s,i)}:null,!a)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,a(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return Ke(n,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return i=a.sent(),[2,r(i.map(function(o){return aN({},o)}))]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new oke(this.runAndExtendWithFaceDetections(),this.input,n)},e.prototype.withFaceExpressions=function(){return new bN(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new CN(this.runAndExtendWithFaceDetections(),this.input)},e}(Vj);(function(t){mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ke(this,void 0,void 0,function(){var n,r;return Ye(this,function(i){switch(i.label){case 0:return[4,new Wj(this.input,this.options)];case 1:return n=i.sent(),r=n[0],n.forEach(function(a){a.score>r.score&&(r=a)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return Ke(n,void 0,void 0,function(){var i;return Ye(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return i=a.sent(),[2,r(i?aN({},i):void 0)]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new ske(this.runAndExtendWithFaceDetection(),this.input,n)},e.prototype.withFaceExpressions=function(){return new wN(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new NN(this.runAndExtendWithFaceDetection(),this.input)},e})(Vj);function uke(t,e){return e===void 0&&(e=new Ly),new Wj(t,e)}function lke(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(i,a){return i-r[a]}).reduce(function(i,a){return i+Math.pow(a,2)},0))}(function(){function t(e,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,a=function(){return"person "+i++};this._labeledDescriptors=r.map(function(o){if(o instanceof zm)return o;if(o instanceof Float32Array)return new zm(a(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new zm(a(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(e,n){return n.map(function(r){return lke(r,e)}).reduce(function(r,i){return r+i},0)/(n.length||1)},t.prototype.matchDescriptor=function(e){var n=this;return this.labeledDescriptors.map(function(r){var i=r.descriptors,a=r.label;return new Kk(a,n.computeMeanDistance(e,i))}).reduce(function(r,i){return r.distance<i.distance?r:i})},t.prototype.findBestMatch=function(e){var n=this.matchDescriptor(e);return n.distance<this.distanceThreshold?n:new Kk("unknown",n.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},t.fromJSON=function(e){var n=e.labeledDescriptors.map(function(r){return zm.fromJSON(r)});return new t(n,e.distanceThreshold)},t})();const qj=async()=>{try{await fetch("/models",{method:"HEAD"}).catch(()=>{console.log("Creating models directory...")});const t="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";return await Promise.all([fi.tinyFaceDetector.loadFromUri(t),fi.faceExpressionNet.loadFromUri(t)]),!0}catch(t){return console.error("Error loading models:",t),!1}},cke=t=>{const e={happy:"happy",sad:"sad",angry:"angry",fearful:"fearful",disgusted:"disgusted",surprised:"surprised",neutral:"neutral"},n=Object.entries(t).reduce((a,[o,s])=>{const u=e[o];return u&&(a[u]=s),a},{});let r="neutral",i=0;return Object.entries(n).forEach(([a,o])=>{o>i&&(i=o,r=a)}),{dominantEmotion:r,emotions:n,timestamp:Date.now()}},Hj=async t=>{if(!t||t.paused||t.ended)return null;try{const e=await uke(t,new Oj({scoreThreshold:.3})).withFaceExpressions();if(!e||e.length===0)return null;const n=e[0].expressions;return cke(n)}catch(e){return console.error("Error detecting emotions:",e),null}},th=t=>{const e={happy:"#FFD700",sad:"#6495ED",angry:"#DC143C",surprised:"#9370DB",disgusted:"#32CD32",fearful:"#FF8C00",neutral:"#708090"};return e[t]||e.neutral},h0=t=>{const e={happy:"😊",sad:"😢",angry:"😡",surprised:"😲",disgusted:"🤢",fearful:"😨",neutral:"😐"};return e[t]||e.neutral},fke=t=>{const e={happy:"You seem to be in a good mood!",sad:"You look a bit down. Hope things get better!",angry:"You appear to be upset about something.",surprised:"Something seems to have caught you off guard!",disgusted:"You don't seem pleased with what you're seeing.",fearful:"You seem concerned or worried about something.",neutral:"Your expression is calm and neutral."};return e[t]||e.neutral},dke=({onWebcamReady:t,isDetecting:e,onToggleDetection:n})=>{const r=W.useRef(null),[i,a]=W.useState(null),[o,s]=W.useState(null);return W.useEffect(()=>{let u=null;return e&&(async()=>{try{u=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"},audio:!1}),r.current&&(r.current.srcObject=u,a(!0),s(null),r.current.onloadedmetadata=()=>{r.current&&t(r.current)})}catch(c){console.error("Error accessing camera:",c),a(!1),c.name==="NotAllowedError"?s("Camera access denied. Please enable camera permissions."):c.name==="NotFoundError"?s("No camera detected on your device."):s("Error accessing camera. Please try again.")}})(),()=>{u&&u.getTracks().forEach(c=>c.stop())}},[e,t]),S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:`rounded-lg overflow-hidden bg-gray-100 ${e?"":"hidden"}`,children:S.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto object-cover",style:{transform:"scaleX(-1)"}})}),!e&&S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-gray-100 rounded-lg",children:[S.jsx(qS,{className:"w-12 h-12 text-gray-400 mb-3"}),S.jsx("p",{className:"text-gray-500",children:"Camera is turned off"})]}),i===!1&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 rounded-lg",children:S.jsxs("div",{className:"text-center text-white p-4",children:[S.jsx("p",{className:"font-medium mb-2",children:o}),S.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Retry"})]})}),S.jsx("button",{onClick:n,className:`absolute bottom-4 right-4 p-3 rounded-full shadow-lg transition-colors ${e?"bg-red-500 hover:bg-red-600":"bg-blue-500 hover:bg-blue-600"}`,"aria-label":e?"Turn off camera":"Turn on camera",children:e?S.jsx(qS,{className:"w-5 h-5 text-white"}):S.jsx(DP,{className:"w-5 h-5 text-white"})})]})},hke=({emotionData:t,isDetecting:e,isLoading:n})=>{if(n)return S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-white rounded-lg shadow-md p-8 text-center",children:[S.jsx(_b,{className:"w-12 h-12 text-blue-500 animate-spin mb-4"}),S.jsx("p",{className:"text-xl font-medium text-gray-700",children:"Loading emotion detection models..."}),S.jsx("p",{className:"text-gray-500 mt-2",children:"This may take a moment"})]});if(!e)return S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-white rounded-lg shadow-md p-8 text-center",children:[S.jsx(DP,{className:"w-12 h-12 text-gray-500 mb-4"}),S.jsx("p",{className:"text-xl font-medium text-gray-700",children:"Camera is not active"}),S.jsx("p",{className:"text-gray-500 mt-2",children:"Enable the camera to start emotion detection"})]});if(!t)return S.jsxs("div",{className:"flex flex-col items-center justify-center h-64 bg-white rounded-lg shadow-md p-8 text-center",children:[S.jsx(wW,{className:"w-12 h-12 text-gray-500 mb-4"}),S.jsx("p",{className:"text-xl font-medium text-gray-700",children:"No face detected"}),S.jsx("p",{className:"text-gray-500 mt-2",children:"Position your face in front of the camera"})]});const{dominantEmotion:r,emotions:i}=t,a=th(r),o=h0(r),s=fke(r);return S.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-all duration-500",style:{borderTop:`4px solid ${a}`},children:S.jsxs("div",{className:"p-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800 capitalize",children:r}),S.jsx("span",{className:"text-4xl",children:o})]}),S.jsx("p",{className:"text-gray-600 mb-6",children:s}),S.jsx("div",{className:"space-y-3",children:Object.entries(i).map(([u,l])=>S.jsxs("div",{className:"w-full",children:[S.jsxs("div",{className:"flex justify-between mb-1",children:[S.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:u}),S.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(l*100),"%"]})]}),S.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:S.jsx("div",{className:"h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${Math.round(l*100)}%`,backgroundColor:th(u)}})})]},u))})]})})},pke=({history:t})=>{if(t.length===0)return S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsxs("div",{className:"flex items-center mb-4",children:[S.jsx(HS,{className:"w-5 h-5 text-blue-500 mr-2"}),S.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Emotion History"})]}),S.jsx("p",{className:"text-gray-500 text-center py-4",children:"No emotion history yet"})]});const e=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return S.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[S.jsxs("div",{className:"flex items-center mb-4",children:[S.jsx(HS,{className:"w-5 h-5 text-blue-500 mr-2"}),S.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Emotion History"})]}),S.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:t.slice().reverse().map((n,r)=>S.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-md transition-all hover:bg-gray-100",children:[S.jsx("div",{className:"text-2xl mr-3",children:h0(n.dominantEmotion)}),S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"font-medium text-gray-800 capitalize",children:n.dominantEmotion}),S.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[S.jsx(oW,{className:"w-3 h-3 mr-1"}),e(n.timestamp)]})]}),S.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[Math.round(n.emotions[n.dominantEmotion]*100),"%"]})]},r))})]})},mke=()=>{const[t,e]=W.useState(!1),[n,r]=W.useState(!0),[i,a]=W.useState(!1),[o,s]=W.useState(null),[u,l]=W.useState(null),[c,f]=W.useState([]),[d,h]=W.useState(!1);W.useEffect(()=>{(async()=>{r(!0);try{const v=await qj();e(v)}catch(v){console.error("Failed to initialize models:",v)}finally{r(!1)}})()},[]);const p=W.useCallback(y=>{s(y)},[]),m=W.useCallback(()=>{a(y=>!y),i||l(null)},[i]);return W.useEffect(()=>{let y,v=0;const x=500,g=async b=>{if(o&&i&&t&&b-v>=x){const w=await Hj(o);w&&(l(w),(!u||u.dominantEmotion!==w.dominantEmotion||w.timestamp-((u==null?void 0:u.timestamp)||0)>5e3)&&f(E=>{const C=[...E,w];return C.length>20?C.slice(C.length-20):C})),v=b}y=requestAnimationFrame(g)};return o&&i&&t&&(y=requestAnimationFrame(g)),()=>{y&&cancelAnimationFrame(y)}},[o,i,t,u]),S.jsx("div",{className:"min-h-screen bg-gray-100",children:S.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d&&S.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-md",children:S.jsxs("div",{className:"flex",children:[S.jsx("div",{className:"flex-shrink-0",children:S.jsx(cW,{className:"h-5 w-5 text-blue-500"})}),S.jsxs("div",{className:"ml-3",children:[S.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"How it works"}),S.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[S.jsx("p",{children:"This application uses your webcam to detect facial expressions and identify emotions in real-time."}),S.jsx("p",{className:"mt-1",children:"All processing happens locally in your browser - no data is sent to any server."}),S.jsx("p",{className:"mt-1",children:"Click the camera button to start/stop emotion detection."})]})]})]})}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[S.jsx(dke,{onWebcamReady:p,isDetecting:i,onToggleDetection:m}),S.jsx(hke,{emotionData:u,isDetecting:i,isLoading:n})]}),S.jsx("div",{children:S.jsx(pke,{history:c})})]})]})})};function vke(t,e){const n=t.toLowerCase().trim();for(const r of e)if(r.matchPattern.test(n))return r;return null}const gke=W.createContext(null),yke=({children:t})=>{const[e,n]=W.useState([]),r=Nl(),i=W.useCallback(c=>{n(f=>f.some(d=>d.command===c.command)?f:[...f,c])},[]),a=W.useCallback(c=>{n(f=>f.filter(d=>d.command!==c))},[]),o=W.useCallback(c=>{r(`/${c}`)},[r]),s=W.useCallback((c,f)=>{r(`/${c}`),setTimeout(()=>{const d=document.getElementById(f);d&&d.scrollIntoView({behavior:"smooth"})},300)},[r]),u=W.useCallback(c=>{const f=vke(c,e);return f?(f.action(),!0):!1},[e]),l={registerNavigationCommand:i,unregisterNavigationCommand:a,navigateToPage:o,navigateToSection:s,commands:e,executeVoiceCommand:u};return S.jsx(gke.Provider,{value:l,children:t})},Gj=W.createContext(null),xke=()=>{const t=W.useContext(Gj);if(!t)throw new Error("useVoice must be used within a VoiceProvider");return t},bke={lion:{path:"/animals",section:"lions"},lions:{path:"/animals",section:"lions"},endangered:{path:"/animals",section:"endangered-species"},"endangered species":{path:"/animals",section:"endangered-species"},reptile:{path:"/animals",section:"reptiles"},reptiles:{path:"/animals",section:"reptiles"},cheetah:{path:"/animals",section:"cheethah"},monkey:{path:"/animals",section:"monkey"},ocean:{path:"/aquatic",section:"ocean-ecosystems"},coral:{path:"/aquatic",section:"ocean-ecosystems"},reef:{path:"/aquatic",section:"ocean-ecosystems"},"marine mammals":{path:"/aquatic",section:"marine-mammals"},whale:{path:"/aquatic",section:"marine-mammals"},whales:{path:"/aquatic",section:"marine-mammals"},"deep sea":{path:"/aquatic",section:"deep-sea"},frog:{path:"/aquatic",section:"frogs"},frogs:{path:"/aquatic",section:"frogs"},amphibian:{path:"/aquatic",section:"frogs"},amphibians:{path:"/aquatic",section:"frogs"},mollusk:{path:"/aquatic",section:"mollusks"},mollusks:{path:"/aquatic",section:"mollusks"},octopus:{path:"/aquatic",section:"mollusks"},echinoderm:{path:"/aquatic",section:"echinoderms"},echinoderms:{path:"/aquatic",section:"echinoderms"},"sea urchin":{path:"/aquatic",section:"echinoderms"},"sea urchins":{path:"/aquatic",section:"echinoderms"},team:{path:"/about",section:"team"},mission:{path:"/about",section:"mission"},"contact form":{path:"/contact",section:"form"},locations:{path:"/contact",section:"locations"},features:{path:"/",section:"features"},testimonials:{path:"/",section:"testimonials"}},wke={home:"/",animal:"/animals",animals:"/animals",aquatic:"/aquatic",bird:"/birds",birds:"/birds",fruit:"/fruits",fruits:"/fruits",vegetable:"/vegetables",vegetables:"/vegetables",flower:"/flowers",flowers:"/flowers",vehicle:"/vehicles",vehicles:"/vehicles",math:"/math",game:"/games",games:"/games",test:"/testing",testing:"/testing",about:"/about",contact:"/contact"},_ke={"go to home":{path:"/"},"show animals":{path:"/animals"},"show aquatic":{path:"/aquatic"},"show birds":{path:"/birds"},"show fruits":{path:"/fruits"},"show vegetables":{path:"/vegetables"},"show flowers":{path:"/flowers"},"show vehicles":{path:"/vehicles"},"show math":{path:"/math"},"show games":{path:"/games"},"show tests":{path:"/testing"},"show lions":{path:"/animals",section:"lions"},"show endangered species":{path:"/animals",section:"endangered-species"},"show reptiles":{path:"/animals",section:"reptiles"},"show cheetah":{path:"/animals",section:"cheethah"},"show monkey":{path:"/animals",section:"monkey"},"show ocean ecosystems":{path:"/aquatic",section:"ocean-ecosystems"},"show coral reefs":{path:"/aquatic",section:"ocean-ecosystems"},"show marine mammals":{path:"/aquatic",section:"marine-mammals"},"show whales":{path:"/aquatic",section:"marine-mammals"},"show deep sea":{path:"/aquatic",section:"deep-sea"},"show deep sea creatures":{path:"/aquatic",section:"deep-sea"},"show frogs":{path:"/aquatic",section:"frogs"},"show amphibians":{path:"/aquatic",section:"frogs"},"show mollusks":{path:"/aquatic",section:"mollusks"},"show octopus":{path:"/aquatic",section:"mollusks"},"show echinoderms":{path:"/aquatic",section:"echinoderms"},"show sea urchins":{path:"/aquatic",section:"echinoderms"},"show team":{path:"/about",section:"team"},"show mission":{path:"/about",section:"mission"},"show contact form":{path:"/contact",section:"form"},"show locations":{path:"/contact",section:"locations"},"show features":{path:"/",section:"features"},"show testimonials":{path:"/",section:"testimonials"}},Eke=({children:t})=>{const[e,n]=W.useState(!1),[r,i]=W.useState(""),a=Nl(),o=window.SpeechRecognition||window.webkitSpeechRecognition,s=new o,u=W.useCallback(d=>{setTimeout(()=>{let h=document.getElementById(d);if(!h){const p=document.querySelectorAll("h2, h3");for(const m of p)if(m.textContent&&m.textContent.toLowerCase().includes(d.toLowerCase())){h=m;break}}if(h){h.scrollIntoView({behavior:"smooth",block:"start"});const p=h.style.backgroundColor||"";h.style.backgroundColor="#FFEB3B",setTimeout(()=>{h.style.backgroundColor=p},2e3)}},1e3)},[]),l=W.useCallback(d=>{const h=d.toLowerCase().trim();for(const[p,{path:m,section:y}]of Object.entries(_ke))if(h.includes(p))return a(m),Nt.success(`Navigating to ${p}`),y&&u(y),!0;for(const[p,{path:m,section:y}]of Object.entries(bke))if(new RegExp(`\\b${p}\\b`,"i").test(h))return a(m),Nt.success(`Navigating to ${p}`),u(y),!0;for(const[p,m]of Object.entries(wke))if(new RegExp(`\\b${p}\\b`,"i").test(h))return a(m),Nt.success(`Navigating to ${p}`),!0;return Nt.info("Command not recognized. Please try again."),!1},[a,u]);W.useEffect(()=>{if(!s){Nt.error("Speech recognition is not supported in this browser");return}return s.continuous=!0,s.interimResults=!0,s.lang="en-US",s.onstart=()=>{n(!0),Nt.info("Listening...")},s.onresult=d=>{const h=d.resultIndex,p=d.results[h][0].transcript;i(p),d.results[h].isFinal&&l(p)},s.onerror=d=>{console.error("Speech recognition error:",d.error),Nt.error("Error with speech recognition"),n(!1)},s.onend=()=>{if(e)try{s.start()}catch(d){console.error("Error restarting recognition:",d)}},()=>{s.stop()}},[s,l,e]);const c=W.useCallback(()=>{try{s.start()}catch(d){console.error("Error starting speech recognition:",d),Nt.error("Failed to start speech recognition")}},[s]),f=W.useCallback(()=>{s.stop(),n(!1),Nt.info("Stopped listening")},[s]);return S.jsx(Gj.Provider,{value:{isListening:e,startListening:c,stopListening:f,transcript:r},children:t})},Cke=()=>{const{isListening:t,startListening:e,stopListening:n,transcript:r}=xke(),[i,a]=W.useState(!1);W.useEffect(()=>{const s=setTimeout(()=>{t&&!r&&a(!0)},3e3);return()=>clearTimeout(s)},[t,r]),W.useEffect(()=>{r&&a(!1)},[r]);const o=()=>{t?(n(),a(!1)):(e(),Nt.info("Voice control activated"))};return S.jsxs("div",{className:"fixed bottom-4 right-4 flex flex-col items-end space-y-2 z-50",children:[i&&S.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg mb-2 max-w-xs",children:[S.jsx("p",{className:"text-sm text-gray-600",children:"Try saying:"}),S.jsxs("ul",{className:"text-xs text-gray-500 mt-1",children:[S.jsx("li",{children:'"Show animals"'}),S.jsx("li",{children:'"Show lions"'}),S.jsx("li",{children:'"Show team"'})]})]}),r&&S.jsx("div",{className:"bg-white p-2 rounded-lg shadow-lg mb-2 max-w-xs",children:S.jsx("p",{className:"text-sm text-gray-600",children:r})}),S.jsx("button",{onClick:o,className:`p-3 rounded-full shadow-lg transition-all duration-300 ${t?"bg-red-500 hover:bg-red-600":"bg-blue-500 hover:bg-blue-600"}`,children:t?S.jsx(hW,{className:"h-6 w-6 text-white"}):S.jsx(pW,{className:"h-6 w-6 text-white"})})]})},ha={home:"text-blue-600",animals:"text-green-600",aquatic:"text-cyan-600",birds:"text-yellow-600",fruits:"text-orange-600",vegetables:"text-emerald-600",flowers:"text-pink-600",vehicles:"text-purple-600",math:"text-indigo-600",tests:"text-red-600",games:"text-pink-600"},eR=[{path:"/",label:"Home",icon:IP,color:ha.home},{path:"/animals",label:"Animals",icon:fW,color:ha.animals},{path:"/aquatic",label:"Aquatic",icon:TP,color:ha.aquatic},{path:"/birds",label:"Birds",icon:SP,color:ha.birds},{path:"/fruits",label:"Fruits",icon:NP,color:ha.fruits},{path:"/vegetables",label:"Vegetables",icon:AP,color:ha.vegetables},{path:"/flowers",label:"Flowers",icon:MP,color:ha.flowers},{path:"/vehicles",label:"Vehicle",icon:iW,color:ha.vehicles},{path:"/math",label:"Math",icon:n_,color:ha.math},{path:"/games",label:"Games",icon:sW,color:ha.games},{path:"/testing",label:"Tests",icon:uW,color:ha.tests,requireAuth:!0}];function tR({children:t}){const{currentUser:e}=Kf();return e?S.jsx(S.Fragment,{children:t}):S.jsx(jV,{to:"/login"})}function Nke(){const[t,e]=W.useState(!1),[n,r]=W.useState(!0),[i,a]=W.useState(null),[o,s]=W.useState(null),{currentUser:u,logout:l}=Kf(),[c,f]=W.useState(!1),[d,h]=W.useState(0),p=Nl(),m=Cl(),y=["/games","/memory-game","/whack-a-mole","/coloring-book","/simple-puzzle","/balloon-pop","/word-search","/counting-game","/shape-sorter","/catch-stars","/animal-sounds"];W.useEffect(()=>{(async()=>{r(!0);try{const w=await qj();e(w)}catch(w){console.error("Failed to initialize models:",w)}finally{r(!1)}})()},[]),W.useEffect(()=>{let b,w=0;const _=500,E=async C=>{if(i&&t&&C-w>=_){const N=await Hj(i);N&&s(N),w=C}b=requestAnimationFrame(E)};return i&&t&&(b=requestAnimationFrame(E)),()=>{b&&cancelAnimationFrame(b)}},[i,t]);const v=()=>Nt.info(S.jsxs("div",{className:"flex items-center",children:[S.jsx("span",{className:"text-xl mr-2",children:"😢"}),S.jsx("p",{children:"Looks like you're feeling sad. Taking you to games to cheer you up!"})]}),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,onClose:()=>p("/games"),className:"bg-blue-50",bodyClassName:"text-blue-700",progressClassName:"bg-blue-500"});W.useEffect(()=>{const b=y.some(E=>m.pathname===E),w=Date.now();o&&o.dominantEmotion==="sad"&&!b&&w-d>3e4&&(h(w),v())},[o,p,m.pathname,d]);const x=()=>{f(!1)},g=b=>b.requireAuth&&!u?null:S.jsx(am,{to:b.path,className:({isActive:w})=>`flex items-center whitespace-nowrap ${w?b.color:"hover:"+b.color} px-3 py-2 rounded-md text-sm font-medium`,onClick:x,children:({isActive:w})=>S.jsxs(S.Fragment,{children:[S.jsx(b.icon,{className:`w-5 h-5 mr-2 ${w?b.color:""}`}),S.jsx("span",{children:b.label})]})},b.path);return S.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[S.jsx(UNe,{onWebcamReady:a}),S.jsx(rq,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),S.jsxs("nav",{className:"fixed top-0 left-0 right-0 bg-white shadow-lg z-10",children:[S.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4",children:S.jsxs("div",{className:"flex justify-between h-16",children:[S.jsx("div",{className:"flex items-center pr-2 border-r",children:S.jsxs(am,{to:"/",className:"flex items-center",children:[S.jsx("img",{src:r2e,alt:"Kid Learning Logo",className:"h-8 w-8"}),S.jsx("span",{className:"ml-1 text-base font-semibold text-gray-900",children:"KL"})]})}),S.jsx("div",{className:"flex items-center md:hidden",children:S.jsxs("button",{onClick:()=>f(!c),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-blue-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-expanded":"false",children:[S.jsx("span",{className:"sr-only",children:"Open main menu"}),c?S.jsx(_W,{className:"block h-6 w-6","aria-hidden":"true"}):S.jsx(dW,{className:"block h-6 w-6","aria-hidden":"true"})]})}),S.jsx("div",{className:"hidden md:flex md:items-center md:space-x-1 overflow-x-auto scrollbar-hide",children:eR.map(g)}),S.jsx("div",{className:"hidden md:flex items-center",children:n?S.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-blue-50 rounded-full text-blue-600 text-sm",children:[S.jsx(_b,{className:"h-4 w-4 animate-spin"}),S.jsx("span",{children:"..."})]}):t?o?S.jsx("div",{className:"flex items-center px-2 py-0.5 rounded-full transition-all duration-300 text-sm",style:{backgroundColor:`${th(o.dominantEmotion)}20`},children:S.jsx("span",{className:"text-xl mr-1",children:h0(o.dominantEmotion)})}):S.jsx("div",{className:"flex items-center space-x-1 px-3 py-1 bg-gray-50 rounded-full text-gray-600 text-sm",children:S.jsx("span",{children:"Waiting..."})}):S.jsx("div",{className:"flex items-center space-x-1 px-3 py-1 bg-red-50 rounded-full text-red-600 text-sm",children:S.jsx("span",{children:"Failed"})})}),S.jsx("div",{className:"hidden md:flex items-center space-x-2 ml-2",children:u?S.jsxs("button",{onClick:l,className:"flex items-center text-red-600 hover:text-red-800 text-sm",children:[S.jsx(GS,{className:"w-4 h-4 mr-1"}),S.jsx("span",{children:"Logout"})]}):S.jsx(am,{to:"/login",className:({isActive:b})=>b?"text-blue-600 font-medium text-sm":"text-blue-600 hover:text-blue-800 text-sm",children:"Login"})})]})}),S.jsx("div",{className:`md:hidden ${c?"block":"hidden"}`,children:S.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white shadow-md",children:[eR.map(g),u?S.jsxs("button",{onClick:()=>{l(),x()},className:"flex w-full items-center text-red-600 hover:text-red-800 px-3 py-2 rounded-md text-sm font-medium",children:[S.jsx(GS,{className:"w-5 h-5 mr-2"}),S.jsx("span",{children:"Logout"})]}):S.jsx(am,{to:"/login",className:({isActive:b})=>`flex items-center ${b?"text-blue-600 font-medium":"text-blue-600 hover:text-blue-800"} px-3 py-2 rounded-md text-sm font-medium`,onClick:x,children:"Login"}),S.jsx("div",{className:"px-3 py-2",children:n?S.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-blue-50 rounded-full text-blue-600 text-sm",children:[S.jsx(_b,{className:"h-4 w-4 animate-spin"}),S.jsx("span",{children:"Loading emotion detection..."})]}):t?o?S.jsxs("div",{className:"flex items-center px-3 py-1 rounded-full transition-all duration-300 text-sm",style:{backgroundColor:`${th(o.dominantEmotion)}20`},children:[S.jsx("span",{className:"text-xl mr-1",children:h0(o.dominantEmotion)}),S.jsx("span",{className:"font-medium capitalize",style:{color:th(o.dominantEmotion)},children:o.dominantEmotion}),S.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:[Math.round(o.emotions[o.dominantEmotion]*100),"%"]})]}):S.jsx("div",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-50 rounded-full text-gray-600 text-sm",children:S.jsx("span",{children:"Waiting for emotion detection..."})}):S.jsx("div",{className:"flex items-center space-x-2 px-3 py-1 bg-red-50 rounded-full text-red-600 text-sm",children:S.jsx("span",{children:"Failed to load emotion detection"})})})]})})]}),S.jsxs("div",{className:"flex-1 pt-16",children:[S.jsxs(zV,{children:[S.jsx(nn,{path:"/",element:S.jsx(iq,{})}),S.jsx(nn,{path:"/face",element:S.jsx(mke,{})}),S.jsx(nn,{path:"/animals",element:S.jsx(oq,{})}),S.jsx(nn,{path:"/aquatic",element:S.jsx(sq,{})}),S.jsx(nn,{path:"/birds",element:S.jsx(uq,{})}),S.jsx(nn,{path:"/fruits",element:S.jsx(fq,{})}),S.jsx(nn,{path:"/vegetables",element:S.jsx(dq,{})}),S.jsx(nn,{path:"/flowers",element:S.jsx(gq,{})}),S.jsx(nn,{path:"/vehicles",element:S.jsx(xq,{})}),S.jsx(nn,{path:"/math",element:S.jsx($ve,{})}),S.jsx(nn,{path:"/login",element:S.jsx(e2e,{})}),S.jsx(nn,{path:"/signup",element:S.jsx(t2e,{})}),S.jsx(nn,{path:"/results",element:S.jsx(tR,{children:S.jsx(n2e,{})})}),S.jsx(nn,{path:"/testing",element:S.jsx(tR,{children:S.jsx(Jwe,{})})}),S.jsx(nn,{path:"/games",element:S.jsx(TNe,{})}),S.jsx(nn,{path:"/memory-game",element:S.jsx(MNe,{})}),S.jsx(nn,{path:"/whack-a-mole",element:S.jsx(INe,{})}),S.jsx(nn,{path:"/coloring-book",element:S.jsx(kNe,{})}),S.jsx(nn,{path:"/simple-puzzle",element:S.jsx(FNe,{})}),S.jsx(nn,{path:"/balloon-pop",element:S.jsx(PNe,{})}),S.jsx(nn,{path:"/word-search",element:S.jsx(ONe,{})}),S.jsx(nn,{path:"/counting-game",element:S.jsx(BNe,{})}),S.jsx(nn,{path:"/shape-sorter",element:S.jsx(LNe,{})}),S.jsx(nn,{path:"/catch-stars",element:S.jsx(jNe,{})}),S.jsx(nn,{path:"/animal-sounds",element:S.jsx(zNe,{})})]}),S.jsx(Cke,{})]})]})}function Ske(){return S.jsx(Zwe,{children:S.jsx(yke,{children:S.jsx(Eke,{children:S.jsx(Nke,{})})})})}pP(document.getElementById("root")).render(S.jsx(W.StrictMode,{children:S.jsx(YV,{basename:"/kidlearn",children:S.jsx(Ske,{})})}))});export default Dke();
